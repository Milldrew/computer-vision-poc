var lk=Object.create;var Kc=Object.defineProperty,fk=Object.defineProperties,dk=Object.getOwnPropertyDescriptor,pk=Object.getOwnPropertyDescriptors,hk=Object.getOwnPropertyNames,zx=Object.getOwnPropertySymbols,mk=Object.getPrototypeOf,Wx=Object.prototype.hasOwnProperty,gk=Object.prototype.propertyIsEnumerable;var Gx=(t,e,n)=>e in t?Kc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,re=(t,e)=>{for(var n in e||={})Wx.call(e,n)&&Gx(t,n,e[n]);if(zx)for(var n of zx(e))gk.call(e,n)&&Gx(t,n,e[n]);return t},at=(t,e)=>fk(t,pk(e));var dn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_e=(t,e)=>{for(var n in e)Kc(t,n,{get:e[n],enumerable:!0})},yk=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of hk(e))!Wx.call(t,o)&&o!==n&&Kc(t,o,{get:()=>e[o],enumerable:!(r=dk(e,o))||r.enumerable});return t};var Sp=(t,e,n)=>(n=t!=null?lk(mk(t)):{},yk(e||!t||!t.__esModule?Kc(n,"default",{value:t,enumerable:!0}):n,t));var L=(t,e,n)=>new Promise((r,o)=>{var s=u=>{try{a(n.next(u))}catch(c){o(c)}},i=u=>{try{a(n.throw(u))}catch(c){o(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,i);a((n=n.apply(t,e)).next())});var KN=dn((xZ,qN)=>{"use strict";qN.exports=Ze;var On=null;try{On=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ze(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Ze.prototype.__isLong__;Object.defineProperty(Ze.prototype,"__isLong__",{value:!0});function sn(t){return(t&&t.__isLong__)===!0}Ze.isLong=sn;var LN={},BN={};function Ts(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=BN[t],r)?r:(n=Ye(t,(t|0)<0?-1:0,!0),o&&(BN[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=LN[t],r)?r:(n=Ye(t,t<0?-1:0,!1),o&&(LN[t]=n),n))}Ze.fromInt=Ts;function Rn(t,e){if(isNaN(t))return e?Is:Fn;if(e){if(t<0)return Is;if(t>=HN)return WN}else{if(t<=-VN)return on;if(t+1>=VN)return GN}return t<0?Rn(-t,e).neg():Ye(t%Qi|0,t/Qi|0,e)}Ze.fromNumber=Rn;function Ye(t,e,n){return new Ze(t,e,n)}Ze.fromBits=Ye;var Uf=Math.pow;function ww(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Fn;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return ww(t.substring(1),e,n).neg();for(var o=Rn(Uf(n,8)),s=Fn,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),u=parseInt(t.substring(i,i+a),n);if(a<8){var c=Rn(Uf(n,a));s=s.mul(c).add(Rn(u))}else s=s.mul(o),s=s.add(Rn(u))}return s.unsigned=e,s}Ze.fromString=ww;function Xn(t,e){return typeof t=="number"?Rn(t,e):typeof t=="string"?ww(t,e):Ye(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Ze.fromValue=Xn;var jN=65536,D3=1<<24,Qi=jN*jN,HN=Qi*Qi,VN=HN/2,UN=Ts(D3),Fn=Ts(0);Ze.ZERO=Fn;var Is=Ts(0,!0);Ze.UZERO=Is;var Yi=Ts(1);Ze.ONE=Yi;var zN=Ts(1,!0);Ze.UONE=zN;var vw=Ts(-1);Ze.NEG_ONE=vw;var GN=Ye(-1,2147483647,!1);Ze.MAX_VALUE=GN;var WN=Ye(-1,-1,!0);Ze.MAX_UNSIGNED_VALUE=WN;var on=Ye(0,-2147483648,!1);Ze.MIN_VALUE=on;var Z=Ze.prototype;Z.toInt=function(){return this.unsigned?this.low>>>0:this.low};Z.toNumber=function(){return this.unsigned?(this.high>>>0)*Qi+(this.low>>>0):this.high*Qi+(this.low>>>0)};Z.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(on)){var n=Rn(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Rn(Uf(e,6),this.unsigned),i=this,a="";;){var u=i.div(s),c=i.sub(u.mul(s)).toInt()>>>0,f=c.toString(e);if(i=u,i.isZero())return f+a;for(;f.length<6;)f="0"+f;a=""+f+a}};Z.getHighBits=function(){return this.high};Z.getHighBitsUnsigned=function(){return this.high>>>0};Z.getLowBits=function(){return this.low};Z.getLowBitsUnsigned=function(){return this.low>>>0};Z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(on)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Z.isZero=function(){return this.high===0&&this.low===0};Z.eqz=Z.isZero;Z.isNegative=function(){return!this.unsigned&&this.high<0};Z.isPositive=function(){return this.unsigned||this.high>=0};Z.isOdd=function(){return(this.low&1)===1};Z.isEven=function(){return(this.low&1)===0};Z.equals=function(e){return sn(e)||(e=Xn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Z.eq=Z.equals;Z.notEquals=function(e){return!this.eq(e)};Z.neq=Z.notEquals;Z.ne=Z.notEquals;Z.lessThan=function(e){return this.comp(e)<0};Z.lt=Z.lessThan;Z.lessThanOrEqual=function(e){return this.comp(e)<=0};Z.lte=Z.lessThanOrEqual;Z.le=Z.lessThanOrEqual;Z.greaterThan=function(e){return this.comp(e)>0};Z.gt=Z.greaterThan;Z.greaterThanOrEqual=function(e){return this.comp(e)>=0};Z.gte=Z.greaterThanOrEqual;Z.ge=Z.greaterThanOrEqual;Z.compare=function(e){if(sn(e)||(e=Xn(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Z.comp=Z.compare;Z.negate=function(){return!this.unsigned&&this.eq(on)?on:this.not().add(Yi)};Z.neg=Z.negate;Z.add=function(e){sn(e)||(e=Xn(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,i=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,f=0,d=0,p=0,m=0;return m+=s+c,p+=m>>>16,m&=65535,p+=o+u,d+=p>>>16,p&=65535,d+=r+a,f+=d>>>16,d&=65535,f+=n+i,f&=65535,Ye(p<<16|m,f<<16|d,this.unsigned)};Z.subtract=function(e){return sn(e)||(e=Xn(e)),this.add(e.neg())};Z.sub=Z.subtract;Z.multiply=function(e){if(this.isZero())return Fn;if(sn(e)||(e=Xn(e)),On){var n=On.mul(this.low,this.high,e.low,e.high);return Ye(n,On.get_high(),this.unsigned)}if(e.isZero())return Fn;if(this.eq(on))return e.isOdd()?on:Fn;if(e.eq(on))return this.isOdd()?on:Fn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(UN)&&e.lt(UN))return Rn(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,f=e.low&65535,d=0,p=0,m=0,b=0;return b+=i*f,m+=b>>>16,b&=65535,m+=s*f,p+=m>>>16,m&=65535,m+=i*c,p+=m>>>16,m&=65535,p+=o*f,d+=p>>>16,p&=65535,p+=s*c,d+=p>>>16,p&=65535,p+=i*u,d+=p>>>16,p&=65535,d+=r*f+o*c+s*u+i*a,d&=65535,Ye(m<<16|b,d<<16|p,this.unsigned)};Z.mul=Z.multiply;Z.divide=function(e){if(sn(e)||(e=Xn(e)),e.isZero())throw Error("division by zero");if(On){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?On.div_u:On.div_s)(this.low,this.high,e.low,e.high);return Ye(n,On.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Is:Fn;var r,o,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Is;if(e.gt(this.shru(1)))return zN;s=Is}else{if(this.eq(on)){if(e.eq(Yi)||e.eq(vw))return on;if(e.eq(on))return Yi;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(Fn)?e.isNegative()?Yi:vw:(o=this.sub(e.mul(r)),s=r.add(o.div(e)),s)}else if(e.eq(on))return this.unsigned?Is:Fn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Fn}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Uf(2,a-48),c=Rn(r),f=c.mul(e);f.isNegative()||f.gt(o);)r-=u,c=Rn(r,this.unsigned),f=c.mul(e);c.isZero()&&(c=Yi),s=s.add(c),o=o.sub(f)}return s};Z.div=Z.divide;Z.modulo=function(e){if(sn(e)||(e=Xn(e)),On){var n=(this.unsigned?On.rem_u:On.rem_s)(this.low,this.high,e.low,e.high);return Ye(n,On.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Z.mod=Z.modulo;Z.rem=Z.modulo;Z.not=function(){return Ye(~this.low,~this.high,this.unsigned)};Z.and=function(e){return sn(e)||(e=Xn(e)),Ye(this.low&e.low,this.high&e.high,this.unsigned)};Z.or=function(e){return sn(e)||(e=Xn(e)),Ye(this.low|e.low,this.high|e.high,this.unsigned)};Z.xor=function(e){return sn(e)||(e=Xn(e)),Ye(this.low^e.low,this.high^e.high,this.unsigned)};Z.shiftLeft=function(e){return sn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ye(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Ye(0,this.low<<e-32,this.unsigned)};Z.shl=Z.shiftLeft;Z.shiftRight=function(e){return sn(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ye(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Ye(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Z.shr=Z.shiftRight;Z.shiftRightUnsigned=function(e){if(sn(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Ye(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Ye(n,0,this.unsigned):Ye(n>>>e-32,0,this.unsigned)};Z.shru=Z.shiftRightUnsigned;Z.shr_u=Z.shiftRightUnsigned;Z.toSigned=function(){return this.unsigned?Ye(this.low,this.high,!1):this};Z.toUnsigned=function(){return this.unsigned?this:Ye(this.low,this.high,!0)};Z.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Z.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Z.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Ze.fromBytes=function(e,n,r){return r?Ze.fromBytesLE(e,n):Ze.fromBytesBE(e,n)};Ze.fromBytesLE=function(e,n){return new Ze(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Ze.fromBytesBE=function(e,n){return new Ze(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)}});var L1=dn((oa,$1)=>{"use strict";var xB=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Os=xB();$1.exports=oa=Os.fetch;Os.fetch&&(oa.default=Os.fetch.bind(Os));oa.Headers=Os.Headers;oa.Request=Os.Request;oa.Response=Os.Response});var B1=dn(()=>{"use strict"});var X1=dn((Q1,ib)=>{"use strict";(function(t,e,n){function r(a){var u=this,c=i();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(a),u.s0<0&&(u.s0+=1),u.s1-=c(a),u.s1<0&&(u.s1+=1),u.s2-=c(a),u.s2<0&&(u.s2+=1),c=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function s(a,u){var c=new r(a),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}function i(){var a=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){a+=c.charCodeAt(f);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return u}e&&e.exports?e.exports=s:n&&n.amd?n(function(){return s}):this.alea=s})(Q1,typeof ib=="object"&&ib,typeof define=="function"&&define)});var eC=dn((J1,ab)=>{"use strict";(function(t,e,n){function r(i){var a=this,u="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var f=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^f^f>>>8},i===(i|0)?a.x=i:u+=i;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,a.next()}function o(i,a){return a.x=i.x,a.y=i.y,a.z=i.z,a.w=i.w,a}function s(i,a){var u=new r(i),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}e&&e.exports?e.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s})(J1,typeof ab=="object"&&ab,typeof define=="function"&&define)});var nC=dn((tC,ub)=>{"use strict";(function(t,e,n){function r(i){var a=this,u="";a.next=function(){var f=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(f^f<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,i===(i|0)?a.x=i:u+=i;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,c==u.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(i,a){return a.x=i.x,a.y=i.y,a.z=i.z,a.w=i.w,a.v=i.v,a.d=i.d,a}function s(i,a){var u=new r(i),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}e&&e.exports?e.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s})(tC,typeof ub=="object"&&ub,typeof define=="function"&&define)});var oC=dn((rC,cb)=>{"use strict";(function(t,e,n){function r(i){var a=this;a.next=function(){var c=a.x,f=a.i,d,p,m;return d=c[f],d^=d>>>7,p=d^d<<24,d=c[f+1&7],p^=d^d>>>10,d=c[f+3&7],p^=d^d>>>3,d=c[f+4&7],p^=d^d<<7,d=c[f+7&7],d=d^d<<13,p^=d^d<<9,c[f]=p,a.i=f+1&7,p};function u(c,f){var d,p,m=[];if(f===(f|0))p=m[0]=f;else for(f=""+f,d=0;d<f.length;++d)m[d&7]=m[d&7]<<15^f.charCodeAt(d)+m[d+1&7]<<13;for(;m.length<8;)m.push(0);for(d=0;d<8&&m[d]===0;++d);for(d==8?p=m[7]=-1:p=m[d],c.x=m,c.i=0,d=256;d>0;--d)c.next()}u(a,i)}function o(i,a){return a.x=i.x.slice(),a.i=i.i,a}function s(i,a){i==null&&(i=+new Date);var u=new r(i),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.x&&o(c,u),f.state=function(){return o(u,{})}),f}e&&e.exports?e.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s})(rC,typeof cb=="object"&&cb,typeof define=="function"&&define)});var iC=dn((sC,lb)=>{"use strict";(function(t,e,n){function r(i){var a=this;a.next=function(){var c=a.w,f=a.X,d=a.i,p,m;return a.w=c=c+1640531527|0,m=f[d+34&127],p=f[d=d+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=f[d]=m^p,a.i=d,m+(c^c>>>16)|0};function u(c,f){var d,p,m,b,I,T=[],_=128;for(f===(f|0)?(p=f,f=null):(f=f+"\0",p=0,_=Math.max(_,f.length)),m=0,b=-32;b<_;++b)f&&(p^=f.charCodeAt((b+32)%f.length)),b===0&&(I=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,b>=0&&(I=I+1640531527|0,d=T[b&127]^=p+I,m=d==0?m+1:0);for(m>=128&&(T[(f&&f.length||0)&127]=-1),m=127,b=4*128;b>0;--b)p=T[m+34&127],d=T[m=m+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,T[m]=p^d;c.w=I,c.X=T,c.i=m}u(a,i)}function o(i,a){return a.i=i.i,a.w=i.w,a.X=i.X.slice(),a}function s(i,a){i==null&&(i=+new Date);var u=new r(i),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.X&&o(c,u),f.state=function(){return o(u,{})}),f}e&&e.exports?e.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s})(sC,typeof lb=="object"&&lb,typeof define=="function"&&define)});var uC=dn((aC,fb)=>{"use strict";(function(t,e,n){function r(i){var a=this,u="";a.next=function(){var f=a.b,d=a.c,p=a.d,m=a.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^m,m=m-f|0,a.b=f=f<<20^f>>>12^d,a.c=d=d-p|0,a.d=p<<16^d>>>16^m,a.a=m-f|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,i===Math.floor(i)?(a.a=i/4294967296|0,a.b=i|0):u+=i;for(var c=0;c<u.length+20;c++)a.b^=u.charCodeAt(c)|0,a.next()}function o(i,a){return a.a=i.a,a.b=i.b,a.c=i.c,a.d=i.d,a}function s(i,a){var u=new r(i),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}e&&e.exports?e.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s})(aC,typeof fb=="object"&&fb,typeof define=="function"&&define)});var cC=dn(()=>{"use strict"});var fC=dn((lC,cd)=>{"use strict";(function(t,e,n){var r=256,o=6,s=52,i="random",a=n.pow(r,o),u=n.pow(2,s),c=u*2,f=r-1,d;function p(A,M,$){var F=[];M=M==!0?{entropy:!0}:M||{};var j=T(I(M.entropy?[A,O(e)]:A??_(),3),F),B=new m(F),G=function(){for(var W=B.g(o),H=a,se=0;W<u;)W=(W+se)*r,H*=r,se=B.g(1);for(;W>=c;)W/=2,H/=2,se>>>=1;return(W+se)/H};return G.int32=function(){return B.g(4)|0},G.quick=function(){return B.g(4)/4294967296},G.double=G,T(O(B.S),e),(M.pass||$||function(W,H,se,te){return te&&(te.S&&b(te,B),W.state=function(){return b(B,{})}),se?(n[i]=W,H):W})(G,j,"global"in M?M.global:this==n,M.state)}function m(A){var M,$=A.length,F=this,j=0,B=F.i=F.j=0,G=F.S=[];for($||(A=[$++]);j<r;)G[j]=j++;for(j=0;j<r;j++)G[j]=G[B=f&B+A[j%$]+(M=G[j])],G[B]=M;(F.g=function(W){for(var H,se=0,te=F.i,xe=F.j,Te=F.S;W--;)H=Te[te=f&te+1],se=se*r+Te[f&(Te[te]=Te[xe=f&xe+H])+(Te[xe]=H)];return F.i=te,F.j=xe,se})(r)}function b(A,M){return M.i=A.i,M.j=A.j,M.S=A.S.slice(),M}function I(A,M){var $=[],F=typeof A,j;if(M&&F=="object")for(j in A)try{$.push(I(A[j],M-1))}catch{}return $.length?$:F=="string"?A:A+"\0"}function T(A,M){for(var $=A+"",F,j=0;j<$.length;)M[f&j]=f&(F^=M[f&j]*19)+$.charCodeAt(j++);return O(M)}function _(){try{var A;return d&&(A=d.randomBytes)?A=A(r):(A=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(A)),O(A)}catch{var M=t.navigator,$=M&&M.plugins;return[+new Date,t,$,t.screen,O(e)]}}function O(A){return String.fromCharCode.apply(0,A)}if(T(n.random(),e),typeof cd=="object"&&cd.exports){cd.exports=p;try{d=cC()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+i]=p})(typeof self<"u"?self:lC,[],Math)});var pC=dn((cde,dC)=>{"use strict";var fU=X1(),dU=eC(),pU=nC(),hU=oC(),mU=iC(),gU=uC(),js=fC();js.alea=fU;js.xor128=dU;js.xorwow=pU;js.xorshift7=hU;js.xor4096=mU;js.tychei=gU;dC.exports=js});var MA=dn(AA=>{"use strict";(function(){"use strict";var t;function e(l){var h=0;return function(){return h<l.length?{done:!1,value:l[h++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,v){return l==Array.prototype||l==Object.prototype||(l[h]=v.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<l.length;++h){var v=l[h];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=r(this);function s(l,h){if(h)e:{var v=o;l=l.split(".");for(var x=0;x<l.length-1;x++){var S=l[x];if(!(S in v))break e;v=v[S]}l=l[l.length-1],x=v[l],h=h(x),h!=x&&h!=null&&n(v,l,{configurable:!0,writable:!0,value:h})}}s("Symbol",function(l){function h(C){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new v(x+(C||"")+"_"+S++,C)}function v(C,N){this.h=C,n(this,"description",{configurable:!0,writable:!0,value:N})}if(l)return l;v.prototype.toString=function(){return this.h};var x="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",S=0;return h}),s("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<h.length;v++){var x=o[h[v]];typeof x=="function"&&typeof x.prototype[l]!="function"&&n(x.prototype,l,{configurable:!0,writable:!0,value:function(){return i(e(this))}})}return l});function i(l){return l={next:l},l[Symbol.iterator]=function(){return this},l}function a(l){var h=typeof Symbol<"u"&&Symbol.iterator&&l[Symbol.iterator];return h?h.call(l):{next:e(l)}}function u(l){if(!(l instanceof Array)){l=a(l);for(var h,v=[];!(h=l.next()).done;)v.push(h.value);l=v}return l}var c=typeof Object.assign=="function"?Object.assign:function(l,h){for(var v=1;v<arguments.length;v++){var x=arguments[v];if(x)for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&(l[S]=x[S])}return l};s("Object.assign",function(l){return l||c});var f=typeof Object.create=="function"?Object.create:function(l){function h(){}return h.prototype=l,new h},d;if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var p;e:{var m={a:!0},b={};try{b.__proto__=m,p=b.a;break e}catch{}p=!1}d=p?function(l,h){if(l.__proto__=h,l.__proto__!==h)throw new TypeError(l+" is not extensible");return l}:null}var I=d;function T(l,h){if(l.prototype=f(h.prototype),l.prototype.constructor=l,I)I(l,h);else for(var v in h)if(v!="prototype")if(Object.defineProperties){var x=Object.getOwnPropertyDescriptor(h,v);x&&Object.defineProperty(l,v,x)}else l[v]=h[v];l.za=h.prototype}function _(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function O(l){if(l.m)throw new TypeError("Generator is already running");l.m=!0}_.prototype.u=function(l){this.i=l};function A(l,h){l.l={ma:h,na:!0},l.h=l.s||l.v}_.prototype.return=function(l){this.l={return:l},this.h=this.v};function M(l,h,v){return l.h=v,{value:h}}function $(l){this.h=new _,this.i=l}function F(l,h){O(l.h);var v=l.h.j;return v?j(l,"return"in v?v.return:function(x){return{value:x,done:!0}},h,l.h.return):(l.h.return(h),B(l))}function j(l,h,v,x){try{var S=h.call(l.h.j,v);if(!(S instanceof Object))throw new TypeError("Iterator result "+S+" is not an object");if(!S.done)return l.h.m=!1,S;var C=S.value}catch(N){return l.h.j=null,A(l.h,N),B(l)}return l.h.j=null,x.call(l.h,C),B(l)}function B(l){for(;l.h.h;)try{var h=l.i(l.h);if(h)return l.h.m=!1,{value:h.value,done:!1}}catch(v){l.h.i=void 0,A(l.h,v)}if(l.h.m=!1,l.h.l){if(h=l.h.l,l.h.l=null,h.na)throw h.ma;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function G(l){this.next=function(h){return O(l.h),l.h.j?h=j(l,l.h.j.next,h,l.h.u):(l.h.u(h),h=B(l)),h},this.throw=function(h){return O(l.h),l.h.j?h=j(l,l.h.j.throw,h,l.h.u):(A(l.h,h),h=B(l)),h},this.return=function(h){return F(l,h)},this[Symbol.iterator]=function(){return this}}function W(l){function h(x){return l.next(x)}function v(x){return l.throw(x)}return new Promise(function(x,S){function C(N){N.done?x(N.value):Promise.resolve(N.value).then(h,v).then(C,S)}C(l.next())})}function H(l){return W(new G(new $(l)))}s("Promise",function(l){function h(N){this.i=0,this.j=void 0,this.h=[],this.u=!1;var k=this.l();try{N(k.resolve,k.reject)}catch(P){k.reject(P)}}function v(){this.h=null}function x(N){return N instanceof h?N:new h(function(k){k(N)})}if(l)return l;v.prototype.i=function(N){if(this.h==null){this.h=[];var k=this;this.j(function(){k.m()})}this.h.push(N)};var S=o.setTimeout;v.prototype.j=function(N){S(N,0)},v.prototype.m=function(){for(;this.h&&this.h.length;){var N=this.h;this.h=[];for(var k=0;k<N.length;++k){var P=N[k];N[k]=null;try{P()}catch(z){this.l(z)}}}this.h=null},v.prototype.l=function(N){this.j(function(){throw N})},h.prototype.l=function(){function N(z){return function(K){P||(P=!0,z.call(k,K))}}var k=this,P=!1;return{resolve:N(this.I),reject:N(this.m)}},h.prototype.I=function(N){if(N===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(N instanceof h)this.L(N);else{e:switch(typeof N){case"object":var k=N!=null;break e;case"function":k=!0;break e;default:k=!1}k?this.F(N):this.s(N)}},h.prototype.F=function(N){var k=void 0;try{k=N.then}catch(P){this.m(P);return}typeof k=="function"?this.M(k,N):this.s(N)},h.prototype.m=function(N){this.v(2,N)},h.prototype.s=function(N){this.v(1,N)},h.prototype.v=function(N,k){if(this.i!=0)throw Error("Cannot settle("+N+", "+k+"): Promise already settled in state"+this.i);this.i=N,this.j=k,this.i===2&&this.K(),this.H()},h.prototype.K=function(){var N=this;S(function(){if(N.D()){var k=o.console;typeof k<"u"&&k.error(N.j)}},1)},h.prototype.D=function(){if(this.u)return!1;var N=o.CustomEvent,k=o.Event,P=o.dispatchEvent;return typeof P>"u"?!0:(typeof N=="function"?N=new N("unhandledrejection",{cancelable:!0}):typeof k=="function"?N=new k("unhandledrejection",{cancelable:!0}):(N=o.document.createEvent("CustomEvent"),N.initCustomEvent("unhandledrejection",!1,!0,N)),N.promise=this,N.reason=this.j,P(N))},h.prototype.H=function(){if(this.h!=null){for(var N=0;N<this.h.length;++N)C.i(this.h[N]);this.h=null}};var C=new v;return h.prototype.L=function(N){var k=this.l();N.T(k.resolve,k.reject)},h.prototype.M=function(N,k){var P=this.l();try{N.call(k,P.resolve,P.reject)}catch(z){P.reject(z)}},h.prototype.then=function(N,k){function P(oe,Q){return typeof oe=="function"?function(fe){try{z(oe(fe))}catch(Ne){K(Ne)}}:Q}var z,K,le=new h(function(oe,Q){z=oe,K=Q});return this.T(P(N,z),P(k,K)),le},h.prototype.catch=function(N){return this.then(void 0,N)},h.prototype.T=function(N,k){function P(){switch(z.i){case 1:N(z.j);break;case 2:k(z.j);break;default:throw Error("Unexpected state: "+z.i)}}var z=this;this.h==null?C.i(P):this.h.push(P),this.u=!0},h.resolve=x,h.reject=function(N){return new h(function(k,P){P(N)})},h.race=function(N){return new h(function(k,P){for(var z=a(N),K=z.next();!K.done;K=z.next())x(K.value).T(k,P)})},h.all=function(N){var k=a(N),P=k.next();return P.done?x([]):new h(function(z,K){function le(fe){return function(Ne){oe[fe]=Ne,Q--,Q==0&&z(oe)}}var oe=[],Q=0;do oe.push(void 0),Q++,x(P.value).T(le(oe.length-1),K),P=k.next();while(!P.done)})},h});function se(l,h){l instanceof String&&(l+="");var v=0,x=!1,S={next:function(){if(!x&&v<l.length){var C=v++;return{value:h(C,l[C]),done:!1}}return x=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}s("Array.prototype.keys",function(l){return l||function(){return se(this,function(h){return h})}}),s("Array.prototype.fill",function(l){return l||function(h,v,x){var S=this.length||0;for(0>v&&(v=Math.max(0,S+v)),(x==null||x>S)&&(x=S),x=Number(x),0>x&&(x=Math.max(0,S+x)),v=Number(v||0);v<x;v++)this[v]=h;return this}});function te(l){return l||Array.prototype.fill}s("Int8Array.prototype.fill",te),s("Uint8Array.prototype.fill",te),s("Uint8ClampedArray.prototype.fill",te),s("Int16Array.prototype.fill",te),s("Uint16Array.prototype.fill",te),s("Int32Array.prototype.fill",te),s("Uint32Array.prototype.fill",te),s("Float32Array.prototype.fill",te),s("Float64Array.prototype.fill",te),s("Object.is",function(l){return l||function(h,v){return h===v?h!==0||1/h===1/v:h!==h&&v!==v}}),s("Array.prototype.includes",function(l){return l||function(h,v){var x=this;x instanceof String&&(x=String(x));var S=x.length;for(v=v||0,0>v&&(v=Math.max(v+S,0));v<S;v++){var C=x[v];if(C===h||Object.is(C,h))return!0}return!1}}),s("String.prototype.includes",function(l){return l||function(h,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(h,v||0)!==-1}});var xe=this||self;function Te(l,h){l=l.split(".");var v=xe;l[0]in v||typeof v.execScript>"u"||v.execScript("var "+l[0]);for(var x;l.length&&(x=l.shift());)l.length||h===void 0?v[x]&&v[x]!==Object.prototype[x]?v=v[x]:v=v[x]={}:v[x]=h}function Qe(l){var h;e:{if((h=xe.navigator)&&(h=h.userAgent))break e;h=""}return h.indexOf(l)!=-1}var tt=Array.prototype.map?function(l,h){return Array.prototype.map.call(l,h,void 0)}:function(l,h){for(var v=l.length,x=Array(v),S=typeof l=="string"?l.split(""):l,C=0;C<v;C++)C in S&&(x[C]=h.call(void 0,S[C],C,l));return x},Et={},ct=null;function Pr(l){var h=l.length,v=3*h/4;v%3?v=Math.floor(v):"=.".indexOf(l[h-1])!=-1&&(v="=.".indexOf(l[h-2])!=-1?v-2:v-1);var x=new Uint8Array(v),S=0;return Ko(l,function(C){x[S++]=C}),S!==v?x.subarray(0,S):x}function Ko(l,h){function v(P){for(;x<l.length;){var z=l.charAt(x++),K=ct[z];if(K!=null)return K;if(!/^[\s\xa0]*$/.test(z))throw Error("Unknown base64 encoding at char: "+z)}return P}$r();for(var x=0;;){var S=v(-1),C=v(0),N=v(64),k=v(64);if(k===64&&S===-1)break;h(S<<2|C>>4),N!=64&&(h(C<<4&240|N>>2),k!=64&&h(N<<6&192|k))}}function $r(){if(!ct){ct={};for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var x=l.concat(h[v].split(""));Et[v]=x;for(var S=0;S<x.length;S++){var C=x[S];ct[C]===void 0&&(ct[C]=S)}}}}var En=typeof Uint8Array<"u",xn=!(Qe("Trident")||Qe("MSIE"))&&typeof xe.btoa=="function";function Ln(l){if(!xn){var h;h===void 0&&(h=0),$r(),h=Et[h];for(var v=Array(Math.floor(l.length/3)),x=h[64]||"",S=0,C=0;S<l.length-2;S+=3){var N=l[S],k=l[S+1],P=l[S+2],z=h[N>>2];N=h[(N&3)<<4|k>>4],k=h[(k&15)<<2|P>>6],P=h[P&63],v[C++]=z+N+k+P}switch(z=0,P=x,l.length-S){case 2:z=l[S+1],P=h[(z&15)<<2]||x;case 1:l=l[S],v[C]=h[l>>2]+h[(l&3)<<4|z>>4]+P+x}return v.join("")}for(h="";10240<l.length;)h+=String.fromCharCode.apply(null,l.subarray(0,10240)),l=l.subarray(10240);return h+=String.fromCharCode.apply(null,l),btoa(h)}var Dn=RegExp("[-_.]","g");function Lr(l){switch(l){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function co(l){if(!xn)return Pr(l);Dn.test(l)&&(l=l.replace(Dn,Lr)),l=atob(l);for(var h=new Uint8Array(l.length),v=0;v<l.length;v++)h[v]=l.charCodeAt(v);return h}var Zo;function Js(){return Zo||(Zo=new Uint8Array(0))}var Yo={},yM=typeof Uint8Array.prototype.slice=="function",gt=0,Gt=0;function YE(l){var h=0>l;l=Math.abs(l);var v=l>>>0;l=Math.floor((l-v)/4294967296),h&&(v=a(QE(v,l)),h=v.next().value,l=v.next().value,v=h),gt=v>>>0,Gt=l>>>0}var vM=typeof BigInt=="function";function QE(l,h){return h=~h,l?l=~l+1:h+=1,[l,h]}function XE(l,h){this.i=l>>>0,this.h=h>>>0}function JE(l){if(!l)return ex||(ex=new XE(0,0));if(!/^-?\d+$/.test(l))return null;if(16>l.length)YE(Number(l));else if(vM)l=BigInt(l),gt=Number(l&BigInt(4294967295))>>>0,Gt=Number(l>>BigInt(32)&BigInt(4294967295));else{var h=+(l[0]==="-");Gt=gt=0;for(var v=l.length,x=h,S=(v-h)%6+h;S<=v;x=S,S+=6)x=Number(l.slice(x,S)),Gt*=1e6,gt=1e6*gt+x,4294967296<=gt&&(Gt+=gt/4294967296|0,gt%=4294967296);h&&(h=a(QE(gt,Gt)),l=h.next().value,h=h.next().value,gt=l,Gt=h)}return new XE(gt,Gt)}var ex;function tx(l,h){return Error("Invalid wire type: "+l+" (at position "+h+")")}function sp(){return Error("Failed to read varint, encoding is invalid.")}function nx(l,h){return Error("Tried to read past the end of the data "+h+" > "+l)}function Qo(){throw Error("Invalid UTF8")}function rx(l,h){return h=String.fromCharCode.apply(null,h),l==null?h:l+h}var Pc=void 0,ip,wM=typeof TextDecoder<"u",ox,bM=typeof TextEncoder<"u",sx;function ix(l){if(l!==Yo)throw Error("illegal external caller")}function wa(l,h){if(ix(h),this.V=l,l!=null&&l.length===0)throw Error("ByteString should be constructed with non-empty values")}function ap(){return sx||(sx=new wa(null,Yo))}function ax(l){ix(Yo);var h=l.V;return h=h==null||En&&h!=null&&h instanceof Uint8Array?h:typeof h=="string"?co(h):null,h==null?h:l.V=h}function EM(l){if(typeof l=="string")return{buffer:co(l),C:!1};if(Array.isArray(l))return{buffer:new Uint8Array(l),C:!1};if(l.constructor===Uint8Array)return{buffer:l,C:!1};if(l.constructor===ArrayBuffer)return{buffer:new Uint8Array(l),C:!1};if(l.constructor===wa)return{buffer:ax(l)||Js(),C:!0};if(l instanceof Uint8Array)return{buffer:new Uint8Array(l.buffer,l.byteOffset,l.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function ux(l,h){this.i=null,this.m=!1,this.h=this.j=this.l=0,up(this,l,h)}function up(l,h,v){v=v===void 0?{}:v,l.S=v.S===void 0?!1:v.S,h&&(h=EM(h),l.i=h.buffer,l.m=h.C,l.l=0,l.j=l.i.length,l.h=l.l)}ux.prototype.reset=function(){this.h=this.l};function Xo(l,h){if(l.h=h,h>l.j)throw nx(l.j,h)}function ba(l){var h=l.i,v=l.h,x=h[v++],S=x&127;if(x&128&&(x=h[v++],S|=(x&127)<<7,x&128&&(x=h[v++],S|=(x&127)<<14,x&128&&(x=h[v++],S|=(x&127)<<21,x&128&&(x=h[v++],S|=x<<28,x&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128)))))throw sp();return Xo(l,v),S}function cx(l,h){if(0>h)throw Error("Tried to read a negative byte length: "+h);var v=l.h,x=v+h;if(x>l.j)throw nx(h,l.j-v);return l.h=x,v}var lx=[];function cp(){this.h=[]}cp.prototype.length=function(){return this.h.length},cp.prototype.end=function(){var l=this.h;return this.h=[],l};function fx(l,h,v){for(;0<v||127<h;)l.h.push(h&127|128),h=(h>>>7|v<<25)>>>0,v>>>=7;l.h.push(h)}function Jo(l,h){for(;127<h;)l.h.push(h&127|128),h>>>=7;l.h.push(h)}function lp(l,h){if(lx.length){var v=lx.pop();up(v,l,h),l=v}else l=new ux(l,h);this.h=l,this.j=this.h.h,this.i=this.l=-1,this.setOptions(h)}lp.prototype.setOptions=function(l){l=l===void 0?{}:l,this.ca=l.ca===void 0?!1:l.ca},lp.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function dx(l){var h=l.h;if(h.h==h.j)return!1;l.j=l.h.h;var v=ba(l.h)>>>0;if(h=v>>>3,v&=7,!(0<=v&&5>=v))throw tx(v,l.j);if(1>h)throw Error("Invalid field number: "+h+" (at position "+l.j+")");return l.l=h,l.i=v,!0}function $c(l){switch(l.i){case 0:if(l.i!=0)$c(l);else e:{l=l.h;for(var h=l.h,v=h+10,x=l.i;h<v;)if(!(x[h++]&128)){Xo(l,h);break e}throw sp()}break;case 1:l=l.h,Xo(l,l.h+8);break;case 2:l.i!=2?$c(l):(h=ba(l.h)>>>0,l=l.h,Xo(l,l.h+h));break;case 5:l=l.h,Xo(l,l.h+4);break;case 3:h=l.l;do{if(!dx(l))throw Error("Unmatched start-group tag: stream EOF");if(l.i==4){if(l.l!=h)throw Error("Unmatched end-group tag");break}$c(l)}while(!0);break;default:throw tx(l.i,l.j)}}var Lc=[];function xM(){this.j=[],this.i=0,this.h=new cp}function ei(l,h){h.length!==0&&(l.j.push(h),l.i+=h.length)}function DM(l,h){if(h=h.R){ei(l,l.h.end());for(var v=0;v<h.length;v++)ei(l,ax(h[v])||Js())}}var Br=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function es(l,h){return Br?l[Br]|=h:l.A!==void 0?l.A|=h:(Object.defineProperties(l,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}}),h)}function px(l,h){Br?l[Br]&&(l[Br]&=~h):l.A!==void 0&&(l.A&=~h)}function it(l){var h;return Br?h=l[Br]:h=l.A,h??0}function fr(l,h){Br?l[Br]=h:l.A!==void 0?l.A=h:Object.defineProperties(l,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}})}function fp(l){return es(l,1),l}function IM(l,h){fr(h,(l|0)&-51)}function Bc(l,h){fr(h,(l|18)&-41)}var dp={};function jc(l){return l!==null&&typeof l=="object"&&!Array.isArray(l)&&l.constructor===Object}var Ea,hx=[];fr(hx,23),Ea=Object.freeze(hx);function pp(l){if(it(l.o)&2)throw Error("Cannot mutate an immutable Message")}function hp(l){var h=l.length;(h=h?l[h-1]:void 0)&&jc(h)?h.g=1:(h={},l.push((h.g=1,h)))}function mx(l){var h=l.i+l.G;return l.B||(l.B=l.o[h]={})}function Bn(l,h){return h===-1?null:h>=l.i?l.B?l.B[h]:void 0:l.o[h+l.G]}function dr(l,h,v,x){pp(l),xa(l,h,v,x)}function xa(l,h,v,x){l.j&&(l.j=void 0),h>=l.i||x?mx(l)[h]=v:(l.o[h+l.G]=v,(l=l.B)&&h in l&&delete l[h])}function mp(l,h,v,x){var S=Bn(l,h);Array.isArray(S)||(S=Ea);var C=it(S);if(C&1||fp(S),x)C&2||es(S,2),v&1||Object.freeze(S);else{x=!(v&2);var N=C&2;v&1||!N?x&&C&16&&!N&&px(S,16):(S=fp(Array.prototype.slice.call(S)),xa(l,h,S))}return S}function gp(l,h){var v=Bn(l,h),x=v==null?v:typeof v=="number"||v==="NaN"||v==="Infinity"||v==="-Infinity"?Number(v):void 0;return x!=null&&x!==v&&xa(l,h,x),x}function gx(l,h,v,x,S){l.h||(l.h={});var C=l.h[v],N=mp(l,v,3,S);if(!C){var k=N;C=[];var P=!!(it(l.o)&16);N=!!(it(k)&2);var z=k;!S&&N&&(k=Array.prototype.slice.call(k));for(var K=N,le=0;le<k.length;le++){var oe=k[le],Q=h,fe=!1;if(fe=fe===void 0?!1:fe,oe=Array.isArray(oe)?new Q(oe):fe?new Q:void 0,oe!==void 0){Q=oe.o;var Ne=fe=it(Q);N&&(Ne|=2),P&&(Ne|=16),Ne!=fe&&fr(Q,Ne),Q=Ne,K=K||!!(2&Q),C.push(oe)}}return l.h[v]=C,P=it(k),h=P|33,h=K?h&-9:h|8,P!=h&&(K=k,Object.isFrozen(K)&&(K=Array.prototype.slice.call(K)),fr(K,h),k=K),z!==k&&xa(l,v,k),(S||x&&N)&&es(C,2),x&&Object.freeze(C),C}return S||(S=Object.isFrozen(C),x&&!S?Object.freeze(C):!x&&S&&(C=Array.prototype.slice.call(C),l.h[v]=C)),C}function yp(l,h,v){var x=!!(it(l.o)&2);if(h=gx(l,h,v,x,x),l=mp(l,v,3,x),!(x||it(l)&8)){for(x=0;x<h.length;x++){if(v=h[x],it(v.o)&2){var S=xx(v,!1);S.j=v}else S=v;v!==S&&(h[x]=S,l[x]=S.o)}es(l,8)}return h}function pr(l,h,v){if(v!=null&&typeof v!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof v+": "+v);dr(l,h,v)}function yx(l,h,v,x,S){pp(l);var C=gx(l,v,h,!1,!1);return v=x??new v,l=mp(l,h,2,!1),S!=null?(C.splice(S,0,v),l.splice(S,0,v.o)):(C.push(v),l.push(v.o)),v.C()&&px(l,8),v}function Vc(l,h){return l??h}function hr(l,h,v){return v=v===void 0?0:v,Vc(gp(l,h),v)}var Uc;function TM(l){switch(typeof l){case"number":return isFinite(l)?l:String(l);case"object":if(l)if(Array.isArray(l)){if(it(l)&128)return l=Array.prototype.slice.call(l),hp(l),l}else{if(En&&l!=null&&l instanceof Uint8Array)return Ln(l);if(l instanceof wa){var h=l.V;return h==null?"":typeof h=="string"?h:l.V=Ln(h)}}}return l}function vx(l,h,v,x){if(l!=null){if(Array.isArray(l))l=vp(l,h,v,x!==void 0);else if(jc(l)){var S={},C;for(C in l)S[C]=vx(l[C],h,v,x);l=S}else l=h(l,x);return l}}function vp(l,h,v,x){var S=it(l);x=x?!!(S&16):void 0,l=Array.prototype.slice.call(l);for(var C=0;C<l.length;C++)l[C]=vx(l[C],h,v,x);return v(S,l),l}function SM(l){return l.ja===dp?l.toJSON():TM(l)}function NM(l,h){l&128&&hp(h)}function wx(l,h,v){if(v=v===void 0?Bc:v,l!=null){if(En&&l instanceof Uint8Array)return l.length?new wa(new Uint8Array(l),Yo):ap();if(Array.isArray(l)){var x=it(l);return x&2?l:h&&!(x&32)&&(x&16||x===0)?(fr(l,x|2),l):(l=vp(l,wx,x&4?Bc:v,!0),h=it(l),h&4&&h&2&&Object.freeze(l),l)}return l.ja===dp?Ex(l):l}}function bx(l,h,v,x,S,C,N){if(l=l.h&&l.h[v]){if(x=it(l),x&2?x=l:(C=tt(l,Ex),Bc(x,C),Object.freeze(C),x=C),pp(h),N=x==null?Ea:fp([]),x!=null){for(C=!!x.length,l=0;l<x.length;l++){var k=x[l];C=C&&!(it(k.o)&2),N[l]=k.o}C=(C?8:0)|1,l=it(N),(l&C)!==C&&(Object.isFrozen(N)&&(N=Array.prototype.slice.call(N)),fr(N,l|C)),h.h||(h.h={}),h.h[v]=x}else h.h&&(h.h[v]=void 0);xa(h,v,N,S)}else dr(h,v,wx(x,C,N),S)}function Ex(l){return it(l.o)&2||(l=xx(l,!0),es(l.o,2)),l}function xx(l,h){var v=l.o,x=[];es(x,16);var S=l.constructor.h;if(S&&x.push(S),S=l.B,S){x.length=v.length,x.fill(void 0,x.length,v.length);var C={};x[x.length-1]=C}it(v)&128&&hp(x),h=h||l.C()?Bc:IM,C=l.constructor,Uc=x,x=new C(x),Uc=void 0,l.R&&(x.R=l.R.slice()),C=!!(it(v)&16);for(var N=S?v.length-1:v.length,k=0;k<N;k++)bx(l,x,k-l.G,v[k],!1,C,h);if(S)for(var P in S)bx(l,x,+P,S[P],!0,C,h);return x}function Xt(l,h,v){l==null&&(l=Uc),Uc=void 0;var x=this.constructor.i||0,S=0<x,C=this.constructor.h,N=!1;if(l==null){l=C?[C]:[];var k=48,P=!0;S&&(x=0,k|=128),fr(l,k)}else{if(!Array.isArray(l)||C&&C!==l[0])throw Error();var z=k=es(l,0);if((P=(16&z)!==0)&&((N=(32&z)!==0)||(z|=32)),S){if(128&z)x=0;else if(0<l.length){var K=l[l.length-1];if(jc(K)&&"g"in K){x=0,z|=128,delete K.g;var le=!0,oe;for(oe in K){le=!1;break}le&&l.pop()}}}else if(128&z)throw Error();k!==z&&fr(l,z)}this.G=(C?0:-1)-x,this.h=void 0,this.o=l;e:{if(C=this.o.length,x=C-1,C&&(C=this.o[x],jc(C))){this.B=C,this.i=x-this.G;break e}h!==void 0&&-1<h?(this.i=Math.max(h,x+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!S&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(v){h=P&&!N&&!0,S=this.i;var Q;for(P=0;P<v.length;P++)N=v[P],N<S?(N+=this.G,(x=l[N])?Dx(x,h):l[N]=Ea):(Q||(Q=mx(this)),(x=Q[N])?Dx(x,h):Q[N]=Ea)}}Xt.prototype.toJSON=function(){return vp(this.o,SM,NM)},Xt.prototype.C=function(){return!!(it(this.o)&2)};function Dx(l,h){if(Array.isArray(l)){var v=it(l),x=1;!h||v&2||(x|=16),(v&x)!==x&&fr(l,v|x)}}Xt.prototype.ja=dp,Xt.prototype.toString=function(){return this.o.toString()};function Ix(l,h,v){if(v){var x={},S;for(S in v){var C=v[S],N=C.ra;N||(x.J=C.xa||C.oa.W,C.ia?(x.aa=_x(C.ia),N=function(k){return function(P,z,K){return k.J(P,z,K,k.aa)}}(x)):C.ka?(x.Z=Ax(C.da.P,C.ka),N=function(k){return function(P,z,K){return k.J(P,z,K,k.Z)}}(x)):N=x.J,C.ra=N),N(h,l,C.da),x={J:x.J,aa:x.aa,Z:x.Z}}}DM(h,l)}var Hc=Symbol();function Tx(l,h,v){return l[Hc]||(l[Hc]=function(x,S){return h(x,S,v)})}function Sx(l){var h=l[Hc];if(!h){var v=bp(l);h=function(x,S){return Mx(x,S,v)},l[Hc]=h}return h}function CM(l){var h=l.ia;if(h)return Sx(h);if(h=l.wa)return Tx(l.da.P,h,l.ka)}function _M(l){var h=CM(l),v=l.da,x=l.oa.U;return h?function(S,C){return x(S,C,v,h)}:function(S,C){return x(S,C,v)}}function Nx(l,h){var v=l[h];return typeof v=="function"&&v.length===0&&(v=v(),l[h]=v),Array.isArray(v)&&(Ia in v||Da in v||0<v.length&&typeof v[0]=="function")?v:void 0}function Cx(l,h,v,x,S,C){h.P=l[0];var N=1;if(l.length>N&&typeof l[N]!="number"){var k=l[N++];v(h,k)}for(;N<l.length;){v=l[N++];for(var P=N+1;P<l.length&&typeof l[P]!="number";)P++;switch(k=l[N++],P-=N,P){case 0:x(h,v,k);break;case 1:(P=Nx(l,N))?(N++,S(h,v,k,P)):x(h,v,k,l[N++]);break;case 2:P=N++,P=Nx(l,P),S(h,v,k,P,l[N++]);break;case 3:C(h,v,k,l[N++],l[N++],l[N++]);break;case 4:C(h,v,k,l[N++],l[N++],l[N++],l[N++]);break;default:throw Error("unexpected number of binary field arguments: "+P)}}return h}var zc=Symbol();function _x(l){var h=l[zc];if(!h){var v=wp(l);h=function(x,S){return kx(x,S,v)},l[zc]=h}return h}function Ax(l,h){var v=l[zc];return v||(v=function(x,S){return Ix(x,S,h)},l[zc]=v),v}var Da=Symbol();function AM(l,h){l.push(h)}function MM(l,h,v){l.push(h,v.W)}function kM(l,h,v,x){var S=_x(x),C=wp(x).P,N=v.W;l.push(h,function(k,P,z){return N(k,P,z,C,S)})}function OM(l,h,v,x,S,C){var N=Ax(x,C),k=v.W;l.push(h,function(P,z,K){return k(P,z,K,x,N)})}function wp(l){var h=l[Da];return h||(h=Cx(l,l[Da]=[],AM,MM,kM,OM),Ia in l&&Da in l&&(l.length=0),h)}var Ia=Symbol();function RM(l,h){l[0]=h}function FM(l,h,v,x){var S=v.U;l[h]=x?function(C,N,k){return S(C,N,k,x)}:S}function PM(l,h,v,x,S){var C=v.U,N=Sx(x),k=bp(x).P;l[h]=function(P,z,K){return C(P,z,K,k,N,S)}}function $M(l,h,v,x,S,C,N){var k=v.U,P=Tx(x,S,C);l[h]=function(z,K,le){return k(z,K,le,x,P,N)}}function bp(l){var h=l[Ia];return h||(h=Cx(l,l[Ia]={},RM,FM,PM,$M),Ia in l&&Da in l&&(l.length=0),h)}function Mx(l,h,v){for(;dx(h)&&h.i!=4;){var x=h.l,S=v[x];if(!S){var C=v[0];C&&(C=C[x])&&(S=v[x]=_M(C))}if(!S||!S(h,l,x)){S=h,x=l,C=S.j,$c(S);var N=S;if(!N.ca){if(S=N.h.h-C,N.h.h=C,N=N.h,S==0)S=ap();else{if(C=cx(N,S),N.S&&N.m)S=N.i.subarray(C,C+S);else{N=N.i;var k=C;S=C+S,S=k===S?Js():yM?N.slice(k,S):new Uint8Array(N.subarray(k,S))}S=S.length==0?ap():new wa(S,Yo)}(C=x.R)?C.push(S):x.R=[S]}}}return l}function kx(l,h,v){for(var x=v.length,S=x%2==1,C=S?1:0;C<x;C+=2)(0,v[C+1])(h,l,v[C]);Ix(l,h,S?v[0]:void 0)}function Ta(l,h){return{U:l,W:h}}var jn=Ta(function(l,h,v){if(l.i!==5)return!1;l=l.h;var x=l.i,S=l.h,C=x[S],N=x[S+1],k=x[S+2];return x=x[S+3],Xo(l,l.h+4),N=(C<<0|N<<8|k<<16|x<<24)>>>0,l=2*(N>>31)+1,C=N>>>23&255,N&=8388607,dr(h,v,C==255?N?NaN:1/0*l:C==0?l*Math.pow(2,-149)*N:l*Math.pow(2,C-150)*(N+Math.pow(2,23))),!0},function(l,h,v){if(h=gp(h,v),h!=null){Jo(l.h,8*v+5),l=l.h;var x=+h;x===0?0<1/x?gt=Gt=0:(Gt=0,gt=2147483648):isNaN(x)?(Gt=0,gt=2147483647):(x=(v=0>x?-2147483648:0)?-x:x,34028234663852886e22<x?(Gt=0,gt=(v|2139095040)>>>0):11754943508222875e-54>x?(x=Math.round(x/Math.pow(2,-149)),Gt=0,gt=(v|x)>>>0):(h=Math.floor(Math.log(x)/Math.LN2),x*=Math.pow(2,-h),x=Math.round(8388608*x),16777216<=x&&++h,Gt=0,gt=(v|h+127<<23|x&8388607)>>>0)),v=gt,l.h.push(v>>>0&255),l.h.push(v>>>8&255),l.h.push(v>>>16&255),l.h.push(v>>>24&255)}}),LM=Ta(function(l,h,v){if(l.i!==0)return!1;var x=l.h,S=0,C=l=0,N=x.i,k=x.h;do{var P=N[k++];S|=(P&127)<<C,C+=7}while(32>C&&P&128);for(32<C&&(l|=(P&127)>>4),C=3;32>C&&P&128;C+=7)P=N[k++],l|=(P&127)<<C;if(Xo(x,k),128>P)x=S>>>0,P=l>>>0,(l=P&2147483648)&&(x=~x+1>>>0,P=~P>>>0,x==0&&(P=P+1>>>0)),x=4294967296*P+(x>>>0);else throw sp();return dr(h,v,l?-x:x),!0},function(l,h,v){h=Bn(h,v),h!=null&&(typeof h=="string"&&JE(h),h!=null&&(Jo(l.h,8*v),typeof h=="number"?(l=l.h,YE(h),fx(l,gt,Gt)):(v=JE(h),fx(l.h,v.i,v.h))))}),BM=Ta(function(l,h,v){return l.i!==0?!1:(dr(h,v,ba(l.h)),!0)},function(l,h,v){if(h=Bn(h,v),h!=null&&h!=null)if(Jo(l.h,8*v),l=l.h,v=h,0<=v)Jo(l,v);else{for(h=0;9>h;h++)l.h.push(v&127|128),v>>=7;l.h.push(1)}}),Ox=Ta(function(l,h,v){if(l.i!==2)return!1;var x=ba(l.h)>>>0;l=l.h;var S=cx(l,x);if(l=l.i,wM){var C=l,N;(N=ip)||(N=ip=new TextDecoder("utf-8",{fatal:!0})),l=S+x,C=S===0&&l===C.length?C:C.subarray(S,l);try{var k=N.decode(C)}catch(le){if(Pc===void 0){try{N.decode(new Uint8Array([128]))}catch{}try{N.decode(new Uint8Array([97])),Pc=!0}catch{Pc=!1}}throw!Pc&&(ip=void 0),le}}else{k=S,x=k+x,S=[];for(var P=null,z,K;k<x;)z=l[k++],128>z?S.push(z):224>z?k>=x?Qo():(K=l[k++],194>z||(K&192)!==128?(k--,Qo()):S.push((z&31)<<6|K&63)):240>z?k>=x-1?Qo():(K=l[k++],(K&192)!==128||z===224&&160>K||z===237&&160<=K||((C=l[k++])&192)!==128?(k--,Qo()):S.push((z&15)<<12|(K&63)<<6|C&63)):244>=z?k>=x-2?Qo():(K=l[k++],(K&192)!==128||(z<<28)+(K-144)>>30||((C=l[k++])&192)!==128||((N=l[k++])&192)!==128?(k--,Qo()):(z=(z&7)<<18|(K&63)<<12|(C&63)<<6|N&63,z-=65536,S.push((z>>10&1023)+55296,(z&1023)+56320))):Qo(),8192<=S.length&&(P=rx(P,S),S.length=0);k=rx(P,S)}return dr(h,v,k),!0},function(l,h,v){if(h=Bn(h,v),h!=null){var x=!1;if(x=x===void 0?!1:x,bM){if(x&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(h))throw Error("Found an unpaired surrogate");h=(ox||(ox=new TextEncoder)).encode(h)}else{for(var S=0,C=new Uint8Array(3*h.length),N=0;N<h.length;N++){var k=h.charCodeAt(N);if(128>k)C[S++]=k;else{if(2048>k)C[S++]=k>>6|192;else{if(55296<=k&&57343>=k){if(56319>=k&&N<h.length){var P=h.charCodeAt(++N);if(56320<=P&&57343>=P){k=1024*(k-55296)+P-56320+65536,C[S++]=k>>18|240,C[S++]=k>>12&63|128,C[S++]=k>>6&63|128,C[S++]=k&63|128;continue}else N--}if(x)throw Error("Found an unpaired surrogate");k=65533}C[S++]=k>>12|224,C[S++]=k>>6&63|128}C[S++]=k&63|128}}h=S===C.length?C:C.subarray(0,S)}Jo(l.h,8*v+2),Jo(l.h,h.length),ei(l,l.h.end()),ei(l,h)}}),Rx=Ta(function(l,h,v,x,S){if(l.i!==2)return!1;h=yx(h,v,x),v=l.h.j,x=ba(l.h)>>>0;var C=l.h.h+x,N=C-v;if(0>=N&&(l.h.j=C,S(h,l,void 0,void 0,void 0),N=C-l.h.h),N)throw Error("Message parsing ended unexpectedly. Expected to read "+(x+" bytes, instead read "+(x-N)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return l.h.h=C,l.h.j=v,!0},function(l,h,v,x,S){if(h=yp(h,x,v),h!=null)for(x=0;x<h.length;x++){var C=l;Jo(C.h,8*v+2);var N=C.h.end();ei(C,N),N.push(C.i),C=N,S(h[x],l),N=l;var k=C.pop();for(k=N.i+N.h.length()-k;127<k;)C.push(k&127|128),k>>>=7,N.i++;C.push(k),N.i++}});function Ep(l){return function(h,v){e:{if(Lc.length){var x=Lc.pop();x.setOptions(v),up(x.h,h,v),h=x}else h=new lp(h,v);try{var S=bp(l),C=Mx(new S.P,h,S);break e}finally{S=h.h,S.i=null,S.m=!1,S.l=0,S.j=0,S.h=0,S.S=!1,h.l=-1,h.i=-1,100>Lc.length&&Lc.push(h)}C=void 0}return C}}function xp(l){return function(){var h=new xM;kx(this,h,wp(l)),ei(h,h.h.end());for(var v=new Uint8Array(h.i),x=h.j,S=x.length,C=0,N=0;N<S;N++){var k=x[N];v.set(k,C),C+=k.length}return h.j=[v],v}}function ti(l){Xt.call(this,l)}T(ti,Xt);var Fx=[ti,1,BM,2,jn,3,Ox,4,Ox];ti.prototype.l=xp(Fx);function Dp(l){Xt.call(this,l,-1,jM)}T(Dp,Xt),Dp.prototype.addClassification=function(l,h){return yx(this,1,ti,l,h),this};var jM=[1],VM=Ep([Dp,1,Rx,Fx]);function Sa(l){Xt.call(this,l)}T(Sa,Xt);var Px=[Sa,1,jn,2,jn,3,jn,4,jn,5,jn];Sa.prototype.l=xp(Px);function $x(l){Xt.call(this,l,-1,UM)}T($x,Xt);var UM=[1],HM=Ep([$x,1,Rx,Px]);function Gc(l){Xt.call(this,l)}T(Gc,Xt);var Lx=[Gc,1,jn,2,jn,3,jn,4,jn,5,jn,6,LM],zM=Ep(Lx);Gc.prototype.l=xp(Lx);function Bx(l,h,v){if(v=l.createShader(v===0?l.VERTEX_SHADER:l.FRAGMENT_SHADER),l.shaderSource(v,h),l.compileShader(v),!l.getShaderParameter(v,l.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+l.getShaderInfoLog(v));return v}function GM(l){return yp(l,ti,1).map(function(h){var v=Bn(h,1);return{index:v??0,qa:hr(h,2),label:Bn(h,3)!=null?Vc(Bn(h,3),""):void 0,displayName:Bn(h,4)!=null?Vc(Bn(h,4),""):void 0}})}function WM(l){return{x:hr(l,1),y:hr(l,2),z:hr(l,3),visibility:gp(l,4)!=null?hr(l,4):void 0}}function Ip(l,h){this.i=l,this.h=h,this.m=0}function jx(l,h,v){return qM(l,h),typeof l.h.canvas.transferToImageBitmap=="function"?Promise.resolve(l.h.canvas.transferToImageBitmap()):v?Promise.resolve(l.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(l.h.canvas):(l.j===void 0&&(l.j=document.createElement("canvas")),new Promise(function(x){l.j.height=l.h.canvas.height,l.j.width=l.h.canvas.width,l.j.getContext("2d",{}).drawImage(l.h.canvas,0,0,l.h.canvas.width,l.h.canvas.height),x(l.j)}))}function qM(l,h){var v=l.h;if(l.s===void 0){var x=Bx(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),S=Bx(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),C=v.createProgram();if(v.attachShader(C,x),v.attachShader(C,S),v.linkProgram(C),!v.getProgramParameter(C,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(C));x=l.s=C,v.useProgram(x),S=v.getUniformLocation(x,"sampler0"),l.l={O:v.getAttribLocation(x,"aVertex"),N:v.getAttribLocation(x,"aTex"),ya:S},l.v=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,l.v),v.enableVertexAttribArray(l.l.O),v.vertexAttribPointer(l.l.O,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),l.u=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,l.u),v.enableVertexAttribArray(l.l.N),v.vertexAttribPointer(l.l.N,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(S,0)}x=l.l,v.useProgram(l.s),v.canvas.width=h.width,v.canvas.height=h.height,v.viewport(0,0,h.width,h.height),v.activeTexture(v.TEXTURE0),l.i.bindTexture2d(h.glName),v.enableVertexAttribArray(x.O),v.bindBuffer(v.ARRAY_BUFFER,l.v),v.vertexAttribPointer(x.O,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(x.N),v.bindBuffer(v.ARRAY_BUFFER,l.u),v.vertexAttribPointer(x.N,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(x.O),v.disableVertexAttribArray(x.N),v.bindBuffer(v.ARRAY_BUFFER,null),l.i.bindTexture2d(0)}function KM(l){this.h=l}var ZM=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function YM(l,h){return h+l}function Vx(l,h){window[l]=h}function QM(l){var h=document.createElement("script");return h.setAttribute("src",l),h.setAttribute("crossorigin","anonymous"),new Promise(function(v){h.addEventListener("load",function(){v()},!1),h.addEventListener("error",function(){v()},!1),document.body.appendChild(h)})}function XM(){return H(function(l){switch(l.h){case 1:return l.s=2,M(l,WebAssembly.instantiate(ZM),4);case 4:l.h=3,l.s=0;break;case 2:return l.s=0,l.l=null,l.return(!1);case 3:return l.return(!0)}})}function Tp(l){if(this.h=l,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=l&&l.locateFile||YM,typeof window=="object")var h=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")h=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=h,l.options){h=a(Object.keys(l.options));for(var v=h.next();!v.done;v=h.next()){v=v.value;var x=l.options[v].default;x!==void 0&&(this.l[v]=typeof x=="function"?x():x)}}}t=Tp.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function JM(l){var h,v,x,S,C,N,k,P,z,K,le;return H(function(oe){switch(oe.h){case 1:return l.ga?(h=l.h.files===void 0?[]:typeof l.h.files=="function"?l.h.files(l.l):l.h.files,M(oe,XM(),2)):oe.return();case 2:if(v=oe.i,typeof window=="object")return Vx("createMediapipeSolutionsWasm",{locateFile:l.locateFile}),Vx("createMediapipeSolutionsPackedAssets",{locateFile:l.locateFile}),N=h.filter(function(Q){return Q.data!==void 0}),k=h.filter(function(Q){return Q.data===void 0}),P=Promise.all(N.map(function(Q){var fe=Wc(l,Q.url);if(Q.path!==void 0){var Ne=Q.path;fe=fe.then(function(Xe){return l.overrideFile(Ne,Xe),Promise.resolve(Xe)})}return fe})),z=Promise.all(k.map(function(Q){return Q.simd===void 0||Q.simd&&v||!Q.simd&&!v?QM(l.locateFile(Q.url,l.ha)):Promise.resolve()})).then(function(){var Q,fe,Ne;return H(function(Xe){if(Xe.h==1)return Q=window.createMediapipeSolutionsWasm,fe=window.createMediapipeSolutionsPackedAssets,Ne=l,M(Xe,Q(fe),2);Ne.i=Xe.i,Xe.h=0})}),K=function(){return H(function(Q){return l.h.graph&&l.h.graph.url?Q=M(Q,Wc(l,l.h.graph.url),0):(Q.h=0,Q=void 0),Q})}(),M(oe,Promise.all([z,P,K]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return x=h.filter(function(Q){return Q.simd===void 0||Q.simd&&v||!Q.simd&&!v}).map(function(Q){return l.locateFile(Q.url,l.ha)}),importScripts.apply(null,u(x)),S=l,M(oe,createMediapipeSolutionsWasm(Module),6);case 6:S.i=oe.i,l.m=new OffscreenCanvas(1,1),l.i.canvas=l.m,C=l.i.GL.createContext(l.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),l.i.GL.makeContextCurrent(C),oe.h=4;break;case 7:if(l.m=document.createElement("canvas"),le=l.m.getContext("webgl2",{}),!le&&(le=l.m.getContext("webgl",{}),!le))return alert("Failed to create WebGL canvas context when passing video frame."),oe.return();l.K=le,l.i.canvas=l.m,l.i.createContext(l.m,!0,!0,{});case 4:l.j=new l.i.SolutionWasm,l.ga=!1,oe.h=0}})}function ek(l){var h,v,x,S,C,N,k,P;return H(function(z){if(z.h==1){if(l.h.graph&&l.h.graph.url&&l.fa===l.h.graph.url)return z.return();if(l.u=!0,!l.h.graph||!l.h.graph.url){z.h=2;return}return l.fa=l.h.graph.url,M(z,Wc(l,l.h.graph.url),3)}for(z.h!=2&&(h=z.i,l.j.loadGraph(h)),v=a(Object.keys(l.D)),x=v.next();!x.done;x=v.next())S=x.value,l.j.overrideFile(S,l.D[S]);if(l.D={},l.h.listeners)for(C=a(l.h.listeners),N=C.next();!N.done;N=C.next())k=N.value,ok(l,k);P=l.l,l.l={},l.setOptions(P),z.h=0})}t.reset=function(){var l=this;return H(function(h){l.j&&(l.j.reset(),l.s={},l.v={}),h.h=0})},t.setOptions=function(l,h){var v=this;if(h=h||this.h.options){for(var x=[],S=[],C={},N=a(Object.keys(l)),k=N.next();!k.done;C={X:C.X,Y:C.Y},k=N.next())if(k=k.value,!(k in this.l&&this.l[k]===l[k])){this.l[k]=l[k];var P=h[k];P!==void 0&&(P.onChange&&(C.X=P.onChange,C.Y=l[k],x.push(function(z){return function(){var K;return H(function(le){if(le.h==1)return M(le,z.X(z.Y),2);K=le.i,K===!0&&(v.u=!0),le.h=0})}}(C))),P.graphOptionXref&&(k=Object.assign({},{calculatorName:"",calculatorIndex:0},P.graphOptionXref,{valueNumber:P.type===1?l[k]:0,valueBoolean:P.type===0?l[k]:!1,valueString:P.type===2?l[k]:""}),S.push(k)))}(x.length!==0||S.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(S),this.F=(this.F===void 0?[]:this.F).concat(x))}};function tk(l){var h,v,x,S,C,N,k;return H(function(P){switch(P.h){case 1:if(!l.u)return P.return();if(!l.F){P.h=2;break}h=a(l.F),v=h.next();case 3:if(v.done){P.h=5;break}return x=v.value,M(P,x(),4);case 4:v=h.next(),P.h=3;break;case 5:l.F=void 0;case 2:if(l.H){for(S=new l.i.GraphOptionChangeRequestList,C=a(l.H),N=C.next();!N.done;N=C.next())k=N.value,S.push_back(k);l.j.changeOptions(S),S.delete(),l.H=void 0}l.u=!1,P.h=0}})}t.initialize=function(){var l=this;return H(function(h){return h.h==1?M(h,JM(l),2):h.h!=3?M(h,ek(l),3):M(h,tk(l),0)})};function Wc(l,h){var v,x;return H(function(S){return h in l.L?S.return(l.L[h]):(v=l.locateFile(h,""),x=fetch(v).then(function(C){return C.arrayBuffer()}),l.L[h]=x,S.return(x))})}t.overrideFile=function(l,h){this.j?this.j.overrideFile(l,h):this.D[l]=h},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(l,h){var v=this,x,S,C,N,k,P,z,K,le;return H(function(oe){switch(oe.h){case 1:return v.h.inputs?(x=1e3*(h??performance.now()),M(oe,v.I,2)):oe.return();case 2:return M(oe,v.initialize(),3);case 3:for(S=new v.i.PacketDataList,C=a(Object.keys(l)),N=C.next();!N.done;N=C.next())if(k=N.value,P=v.h.inputs[k]){e:{var Q=l[k];switch(P.type){case"video":var fe=v.s[P.stream];if(fe||(fe=new Ip(v.i,v.K),v.s[P.stream]=fe),fe.m===0&&(fe.m=fe.i.createTexture()),typeof HTMLVideoElement<"u"&&Q instanceof HTMLVideoElement)var Ne=Q.videoWidth,Xe=Q.videoHeight;else typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(Ne=Q.naturalWidth,Xe=Q.naturalHeight):(Ne=Q.width,Xe=Q.height);Xe={glName:fe.m,width:Ne,height:Xe},Ne=fe.h,Ne.canvas.width=Xe.width,Ne.canvas.height=Xe.height,Ne.activeTexture(Ne.TEXTURE0),fe.i.bindTexture2d(fe.m),Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,Ne.RGBA,Ne.UNSIGNED_BYTE,Q),fe.i.bindTexture2d(0),fe=Xe;break e;case"detections":for(fe=v.s[P.stream],fe||(fe=new KM(v.i),v.s[P.stream]=fe),fe.data||(fe.data=new fe.h.DetectionListData),fe.data.reset(Q.length),Xe=0;Xe<Q.length;++Xe){Ne=Q[Xe];var qe=fe.data,Ct=qe.setBoundingBox,In=Xe,Jt=Ne.la,$e=new Gc;if(pr($e,1,Jt.sa),pr($e,2,Jt.ta),pr($e,3,Jt.height),pr($e,4,Jt.width),pr($e,5,Jt.rotation),dr($e,6,Jt.pa),Jt=$e.l(),Ct.call(qe,In,Jt),Ne.ea)for(qe=0;qe<Ne.ea.length;++qe){$e=Ne.ea[qe],Ct=fe.data,In=Ct.addNormalizedLandmark,Jt=Xe,$e=Object.assign({},$e,{visibility:$e.visibility?$e.visibility:0});var _t=new Sa;pr(_t,1,$e.x),pr(_t,2,$e.y),pr(_t,3,$e.z),$e.visibility&&pr(_t,4,$e.visibility),$e=_t.l(),In.call(Ct,Jt,$e)}if(Ne.ba)for(qe=0;qe<Ne.ba.length;++qe)Ct=fe.data,In=Ct.addClassification,Jt=Xe,$e=Ne.ba[qe],_t=new ti,pr(_t,2,$e.qa),$e.index&&dr(_t,1,$e.index),$e.label&&dr(_t,3,$e.label),$e.displayName&&dr(_t,4,$e.displayName),$e=_t.l(),In.call(Ct,Jt,$e)}fe=fe.data;break e;default:fe={}}}switch(z=fe,K=P.stream,P.type){case"video":S.pushTexture2d(Object.assign({},z,{stream:K,timestamp:x}));break;case"detections":le=z,le.stream=K,le.timestamp=x,S.pushDetectionList(le);break;default:throw Error("Unknown input config type: '"+P.type+"'")}}return v.j.send(S),M(oe,v.I,4);case 4:S.delete(),oe.h=0}})};function nk(l,h,v){var x,S,C,N,k,P,z,K,le,oe,Q,fe,Ne,Xe;return H(function(qe){switch(qe.h){case 1:if(!v)return qe.return(h);for(x={},S=0,C=a(Object.keys(v)),N=C.next();!N.done;N=C.next())k=N.value,P=v[k],typeof P!="string"&&P.type==="texture"&&h[P.stream]!==void 0&&++S;1<S&&(l.M=!1),z=a(Object.keys(v)),N=z.next();case 2:if(N.done){qe.h=4;break}if(K=N.value,le=v[K],typeof le=="string")return Ne=x,Xe=K,M(qe,rk(l,K,h[le]),14);if(oe=h[le.stream],le.type==="detection_list"){if(oe){for(var Ct=oe.getRectList(),In=oe.getLandmarksList(),Jt=oe.getClassificationsList(),$e=[],_t=0;_t<Ct.size();++_t){var lo=zM(Ct.get(_t)),sk=hr(lo,1),ik=hr(lo,2),ak=hr(lo,3),uk=hr(lo,4),ck=hr(lo,5,0),qc=void 0;qc=qc===void 0?0:qc,lo={la:{sa:sk,ta:ik,height:ak,width:uk,rotation:ck,pa:Vc(Bn(lo,6),qc)},ea:yp(HM(In.get(_t)),Sa,1).map(WM),ba:GM(VM(Jt.get(_t)))},$e.push(lo)}Ct=$e}else Ct=[];x[K]=Ct,qe.h=7;break}if(le.type==="proto_list"){if(oe){for(Ct=Array(oe.size()),In=0;In<oe.size();In++)Ct[In]=oe.get(In);oe.delete()}else Ct=[];x[K]=Ct,qe.h=7;break}if(oe===void 0){qe.h=3;break}if(le.type==="float_list"){x[K]=oe,qe.h=7;break}if(le.type==="proto"){x[K]=oe,qe.h=7;break}if(le.type!=="texture")throw Error("Unknown output config type: '"+le.type+"'");return Q=l.v[K],Q||(Q=new Ip(l.i,l.K),l.v[K]=Q),M(qe,jx(Q,oe,l.M),13);case 13:fe=qe.i,x[K]=fe;case 7:le.transform&&x[K]&&(x[K]=le.transform(x[K])),qe.h=3;break;case 14:Ne[Xe]=qe.i;case 3:N=z.next(),qe.h=2;break;case 4:return qe.return(x)}})}function rk(l,h,v){var x;return H(function(S){return typeof v=="number"||v instanceof Uint8Array||v instanceof l.i.Uint8BlobList?S.return(v):v instanceof l.i.Texture2dDataOut?(x=l.v[h],x||(x=new Ip(l.i,l.K),l.v[h]=x),S.return(jx(x,v,l.M))):S.return(void 0)})}function ok(l,h){for(var v=h.name||"$",x=[].concat(u(h.wants)),S=new l.i.StringList,C=a(h.wants),N=C.next();!N.done;N=C.next())S.push_back(N.value);C=l.i.PacketListener.implement({onResults:function(k){for(var P={},z=0;z<h.wants.length;++z)P[x[z]]=k.get(z);var K=l.listeners[v];K&&(l.I=nk(l,P,h.outs).then(function(le){le=K(le);for(var oe=0;oe<h.wants.length;++oe){var Q=P[x[oe]];typeof Q=="object"&&Q.hasOwnProperty&&Q.hasOwnProperty("delete")&&Q.delete()}le&&(l.I=le)}))}}),l.j.attachMultiListener(S,C),S.delete()}t.onResults=function(l,h){this.listeners[h||"$"]=l},Te("Solution",Tp),Te("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Ux(l){switch(l===void 0&&(l=0),l){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function Hx(l){var h=this;l=l||{},this.h=new Tp({locateFile:l.locateFile,files:function(v){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:Ux(v.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(v){var x,S,C;return H(function(N){return N.h==1?(x=Ux(v),S="third_party/mediapipe/modules/selfie_segmentation/"+x,M(N,Wc(h.h,x),2)):(C=N.i,h.h.overrideFile(S,C),N.return(!0))})}}}})}t=Hx.prototype,t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(l){this.h.onResults(l)},t.initialize=function(){var l=this;return H(function(h){return M(h,l.h.initialize(),0)})},t.reset=function(){this.h.reset()},t.send=function(l){var h=this;return H(function(v){return M(v,h.h.send(l),0)})},t.setOptions=function(l){this.h.setOptions(l)},Te("SelfieSegmentation",Hx),Te("VERSION","0.1.1675465747")}).call(AA)});var Cp=null;var Np=1,qx=Symbol("SIGNAL");function He(t){let e=Cp;return Cp=t,e}function Kx(){return Cp}var _p={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vk(t){if(!(Rp(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Np)){if(!t.producerMustRecompute(t)&&!Mp(t)){t.dirty=!1,t.lastCleanEpoch=Np;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Np}}function Ap(t){return t&&(t.nextProducerIndex=0),He(t)}function Zx(t,e){if(He(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Rp(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Op(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Mp(t){Fp(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(vk(n),r!==n.version))return!0}return!1}function kp(t){if(Fp(t),Rp(t))for(let e=0;e<t.producerNode.length;e++)Op(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Op(t,e){if(wk(t),t.liveConsumerNode.length===1&&bk(t))for(let r=0;r<t.producerNode.length;r++)Op(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];Fp(o),o.producerIndexOfThis[r]=e}}function Rp(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fp(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function wk(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function bk(t){return t.producerNode!==void 0}function Ek(){throw new Error}var xk=Ek;function Yx(t){xk=t}function ge(t){return typeof t=="function"}function ni(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zc=ni(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Na(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var lt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(s){e=s instanceof Zc?s.errors:[s]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let s of o)try{Qx(s)}catch(i){e=e??[],i instanceof Zc?e=[...e,...i.errors]:e.push(i)}}if(e)throw new Zc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Qx(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Na(n,e)}remove(e){let{_finalizers:n}=this;n&&Na(n,e),e instanceof t&&e._removeParent(this)}};lt.EMPTY=(()=>{let t=new lt;return t.closed=!0,t})();var Pp=lt.EMPTY;function Yc(t){return t instanceof lt||t&&"closed"in t&&ge(t.remove)&&ge(t.add)&&ge(t.unsubscribe)}function Qx(t){ge(t)?t():t.unsubscribe()}var Vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ri={setTimeout(t,e,...n){let{delegate:r}=ri;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ri;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Qc(t){ri.setTimeout(()=>{let{onUnhandledError:e}=Vn;if(e)e(t);else throw t})}function Ca(){}var Xx=$p("C",void 0,void 0);function Jx(t){return $p("E",void 0,t)}function eD(t){return $p("N",t,void 0)}function $p(t,e,n){return{kind:t,value:e,error:n}}var ts=null;function oi(t){if(Vn.useDeprecatedSynchronousErrorHandling){let e=!ts;if(e&&(ts={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ts;if(ts=null,n)throw r}}else t()}function tD(t){Vn.useDeprecatedSynchronousErrorHandling&&ts&&(ts.errorThrown=!0,ts.error=t)}var ns=class extends lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yc(e)&&e.add(this)):this.destination=Tk}static create(e,n,r){return new si(e,n,r)}next(e){this.isStopped?Bp(eD(e),this):this._next(e)}error(e){this.isStopped?Bp(Jx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Bp(Xx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Dk=Function.prototype.bind;function Lp(t,e){return Dk.call(t,e)}var jp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Xc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Xc(r)}else Xc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Xc(n)}}},si=class extends ns{constructor(e,n,r){super();let o;if(ge(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Vn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Lp(e.next,s),error:e.error&&Lp(e.error,s),complete:e.complete&&Lp(e.complete,s)}):o=e}this.destination=new jp(o)}};function Xc(t){Vn.useDeprecatedSynchronousErrorHandling?tD(t):Qc(t)}function Ik(t){throw t}function Bp(t,e){let{onStoppedNotification:n}=Vn;n&&ri.setTimeout(()=>n(t,e))}var Tk={closed:!0,next:Ca,error:Ik,complete:Ca};var ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pn(t){return t}function Vp(...t){return Up(t)}function Up(t){return t.length===0?pn:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var je=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let s=Nk(n)?n:new si(n,r,o);return oi(()=>{let{operator:i,source:a}=this;s.add(i?i.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=nD(r),new r((o,s)=>{let i=new si({next:a=>{try{n(a)}catch(u){s(u),i.unsubscribe()}},error:s,complete:o});this.subscribe(i)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ii](){return this}pipe(...n){return Up(n)(this)}toPromise(n){return n=nD(n),new n((r,o)=>{let s;this.subscribe(i=>s=i,i=>o(i),()=>r(s))})}}return t.create=e=>new t(e),t})();function nD(t){var e;return(e=t??Vn.Promise)!==null&&e!==void 0?e:Promise}function Sk(t){return t&&ge(t.next)&&ge(t.error)&&ge(t.complete)}function Nk(t){return t&&t instanceof ns||Sk(t)&&Yc(t)}function Hp(t){return ge(t?.lift)}function Fe(t){return e=>{if(Hp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pe(t,e,n,r,o){return new zp(t,e,n,r,o)}var zp=class extends ns{constructor(e,n,r,o,s,i){super(e),this.onFinalize=s,this.shouldUnsubscribe=i,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=o?function(a){try{o(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ai(){return Fe((t,e)=>{let n=null;t._refCount++;let r=Pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,s=n;n=null,o&&(!s||o===s)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ui=class extends je{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Hp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lt;let n=this.getSubject();e.add(this.source.subscribe(Pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lt.EMPTY)}return e}refCount(){return ai()(this)}};var rD=ni(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Wt=(()=>{class t extends je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Jc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new rD}next(n){oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:s}=this;return r||o?Pp:(this.currentObservers=null,s.push(n),new lt(()=>{this.currentObservers=null,Na(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:s}=this;r?n.error(o):s&&n.complete()}asObservable(){let n=new je;return n.source=this,n}}return t.create=(e,n)=>new Jc(e,n),t})(),Jc=class extends Wt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Pp}};var At=class extends Wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hn=new je(t=>t.complete());function oD(t){return t&&ge(t.schedule)}function sD(t){return t[t.length-1]}function iD(t){return ge(sD(t))?t.pop():void 0}function fo(t){return oD(sD(t))?t.pop():void 0}function uD(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(f){try{c(r.next(f))}catch(d){i(d)}}function u(f){try{c(r.throw(f))}catch(d){i(d)}}function c(f){f.done?s(f.value):o(f.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function aD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rs(t){return this instanceof rs?(this.v=t,this):new rs(t)}function cD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,s=[];return o={},a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(m){return function(b){return Promise.resolve(b).then(m,d)}}function a(m,b){r[m]&&(o[m]=function(I){return new Promise(function(T,_){s.push([m,I,T,_])>1||u(m,I)})},b&&(o[m]=b(o[m])))}function u(m,b){try{c(r[m](b))}catch(I){p(s[0][3],I)}}function c(m){m.value instanceof rs?Promise.resolve(m.value.v).then(f,d):p(s[0][2],m)}function f(m){u("next",m)}function d(m){u("throw",m)}function p(m,b){m(b),s.shift(),s.length&&u(s[0][0],s[0][1])}}function lD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof aD=="function"?aD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(i){return new Promise(function(a,u){i=t[s](i),o(a,u,i.done,i.value)})}}function o(s,i,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},i)}}var el=t=>t&&typeof t.length=="number"&&typeof t!="function";function tl(t){return ge(t?.then)}function nl(t){return ge(t[ii])}function rl(t){return Symbol.asyncIterator&&ge(t?.[Symbol.asyncIterator])}function ol(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ck(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sl=Ck();function il(t){return ge(t?.[sl])}function al(t){return cD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield rs(n.read());if(o)return yield rs(void 0);yield yield rs(r)}}finally{n.releaseLock()}})}function ul(t){return ge(t?.getReader)}function xt(t){if(t instanceof je)return t;if(t!=null){if(nl(t))return _k(t);if(el(t))return Ak(t);if(tl(t))return Mk(t);if(rl(t))return fD(t);if(il(t))return kk(t);if(ul(t))return Ok(t)}throw ol(t)}function _k(t){return new je(e=>{let n=t[ii]();if(ge(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ak(t){return new je(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Mk(t){return new je(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Qc)})}function kk(t){return new je(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function fD(t){return new je(e=>{Rk(t,e).catch(n=>e.error(n))})}function Ok(t){return fD(al(t))}function Rk(t,e){var n,r,o,s;return uD(this,void 0,void 0,function*(){try{for(n=lD(t);r=yield n.next(),!r.done;){let i=r.value;if(e.next(i),e.closed)return}}catch(i){o={error:i}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(o)throw o.error}}e.complete()})}function en(t,e,n,r=0,o=!1){let s=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!o)return s}function cl(t,e=0){return Fe((n,r)=>{n.subscribe(Pe(r,o=>en(r,t,()=>r.next(o),e),()=>en(r,t,()=>r.complete(),e),o=>en(r,t,()=>r.error(o),e)))})}function ll(t,e=0){return Fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function dD(t,e){return xt(t).pipe(ll(e),cl(e))}function pD(t,e){return xt(t).pipe(ll(e),cl(e))}function hD(t,e){return new je(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function mD(t,e){return new je(n=>{let r;return en(n,e,()=>{r=t[sl](),en(n,e,()=>{let o,s;try{({value:o,done:s}=r.next())}catch(i){n.error(i);return}s?n.complete():n.next(o)},0,!0)}),()=>ge(r?.return)&&r.return()})}function fl(t,e){if(!t)throw new Error("Iterable cannot be null");return new je(n=>{en(n,e,()=>{let r=t[Symbol.asyncIterator]();en(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function gD(t,e){return fl(al(t),e)}function yD(t,e){if(t!=null){if(nl(t))return dD(t,e);if(el(t))return hD(t,e);if(tl(t))return pD(t,e);if(rl(t))return fl(t,e);if(il(t))return mD(t,e);if(ul(t))return gD(t,e)}throw ol(t)}function ut(t,e){return e?yD(t,e):xt(t)}function pe(...t){let e=fo(t);return ut(t,e)}function ci(t,e){let n=ge(t)?t:()=>t,r=o=>o.error(n());return new je(e?o=>e.schedule(r,0,o):r)}function Gp(t){return!!t&&(t instanceof je||ge(t.lift)&&ge(t.subscribe))}var jr=ni(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Oe(t,e){return Fe((n,r)=>{let o=0;n.subscribe(Pe(r,s=>{r.next(t.call(e,s,o++))}))})}var{isArray:Fk}=Array;function Pk(t,e){return Fk(e)?t(...e):t(e)}function vD(t){return Oe(e=>Pk(t,e))}var{isArray:$k}=Array,{getPrototypeOf:Lk,prototype:Bk,keys:jk}=Object;function wD(t){if(t.length===1){let e=t[0];if($k(e))return{args:e,keys:null};if(Vk(e)){let n=jk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Vk(t){return t&&typeof t=="object"&&Lk(t)===Bk}function bD(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function _a(...t){let e=fo(t),n=iD(t),{args:r,keys:o}=wD(t);if(r.length===0)return ut([],e);let s=new je(Uk(r,e,o?i=>bD(o,i):pn));return n?s.pipe(vD(n)):s}function Uk(t,e,n=pn){return r=>{ED(e,()=>{let{length:o}=t,s=new Array(o),i=o,a=o;for(let u=0;u<o;u++)ED(e,()=>{let c=ut(t[u],e),f=!1;c.subscribe(Pe(r,d=>{s[u]=d,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--i||r.complete()}))},r)},r)}}function ED(t,e,n){t?en(n,t,e):e()}function xD(t,e,n,r,o,s,i,a){let u=[],c=0,f=0,d=!1,p=()=>{d&&!u.length&&!c&&e.complete()},m=I=>c<r?b(I):u.push(I),b=I=>{s&&e.next(I),c++;let T=!1;xt(n(I,f++)).subscribe(Pe(e,_=>{o?.(_),s?m(_):e.next(_)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;u.length&&c<r;){let _=u.shift();i?en(e,i,()=>b(_)):b(_)}p()}catch(_){e.error(_)}}))};return t.subscribe(Pe(e,m,()=>{d=!0,p()})),()=>{a?.()}}function ft(t,e,n=1/0){return ge(e)?ft((r,o)=>Oe((s,i)=>e(r,s,o,i))(xt(t(r,o))),n):(typeof e=="number"&&(n=e),Fe((r,o)=>xD(r,o,t,n)))}function li(t=1/0){return ft(pn,t)}function DD(){return li(1)}function fi(...t){return DD()(ut(t,fo(t)))}function dl(t){return new je(e=>{xt(t()).subscribe(e)})}function Tn(t,e){return Fe((n,r)=>{let o=0;n.subscribe(Pe(r,s=>t.call(e,s,o++)&&r.next(s)))})}function po(t){return Fe((e,n)=>{let r=null,o=!1,s;r=e.subscribe(Pe(n,void 0,void 0,i=>{s=xt(t(i,po(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,s.subscribe(n))})}function ID(t,e,n,r,o){return(s,i)=>{let a=n,u=e,c=0;s.subscribe(Pe(i,f=>{let d=c++;u=a?t(u,f,d):(a=!0,f),r&&i.next(u)},o&&(()=>{a&&i.next(u),i.complete()})))}}function os(t,e){return ge(e)?ft(t,e,1):ft(t,1)}function ho(t){return Fe((e,n)=>{let r=!1;e.subscribe(Pe(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Vr(t){return t<=0?()=>hn:Fe((e,n)=>{let r=0;e.subscribe(Pe(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Wp(t){return Oe(()=>t)}function pl(t=Hk){return Fe((e,n)=>{let r=!1;e.subscribe(Pe(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function Hk(){return new jr}function Aa(t){return Fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function mr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Tn((o,s)=>t(o,s,r)):pn,Vr(1),n?ho(e):pl(()=>new jr))}function di(t){return t<=0?()=>hn:Fe((e,n)=>{let r=[];e.subscribe(Pe(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function qp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Tn((o,s)=>t(o,s,r)):pn,di(1),n?ho(e):pl(()=>new jr))}function Kp(t,e){return Fe(ID(t,e,arguments.length>=2,!0))}function Zp(...t){let e=fo(t);return Fe((n,r)=>{(e?fi(t,n,e):fi(t,n)).subscribe(r)})}function Sn(t,e){return Fe((n,r)=>{let o=null,s=0,i=!1,a=()=>i&&!o&&r.complete();n.subscribe(Pe(r,u=>{o?.unsubscribe();let c=0,f=s++;xt(t(u,f)).subscribe(o=Pe(r,d=>r.next(e?e(u,d,f,c++):d),()=>{o=null,a()}))},()=>{i=!0,a()}))})}function Yp(t){return Fe((e,n)=>{xt(t).subscribe(Pe(n,()=>n.complete(),Ca)),!n.closed&&e.subscribe(n)})}function Mt(t,e,n){let r=ge(t)||e||n?{next:t,error:e,complete:n}:t;return r?Fe((o,s)=>{var i;(i=r.subscribe)===null||i===void 0||i.call(r);let a=!0;o.subscribe(Pe(s,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),s.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):pn}var ue=class extends Error{constructor(e,n){super($h(e,n)),this.code=e}};function $h(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ua(t){return{toString:t}.toString()}var hl="__parameters__";function zk(t){return function(...n){if(t){let r=t(...n);for(let o in r)this[o]=r[o]}}}function aI(t,e,n){return Ua(()=>{let r=zk(e);function o(...s){if(this instanceof o)return r.apply(this,s),this;let i=new o(...s);return a.annotation=i,a;function a(u,c,f){let d=u.hasOwnProperty(hl)?u[hl]:Object.defineProperty(u,hl,{value:[]})[hl];for(;d.length<=f;)d.push(null);return(d[f]=d[f]||[]).push(i),u}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}var zn=globalThis;function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function mn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(mn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function TD(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Gk=ze({__forward_ref__:ze});function uI(t){return t.__forward_ref__=uI,t.toString=function(){return mn(this())},t}function Cn(t){return cI(t)?t():t}function cI(t){return typeof t=="function"&&t.hasOwnProperty(Gk)&&t.__forward_ref__===uI}function ie(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Wn(t){return{providers:t.providers||[],imports:t.imports||[]}}function jl(t){return SD(t,fI)||SD(t,dI)}function lI(t){return jl(t)!==null}function SD(t,e){return t.hasOwnProperty(e)?t[e]:null}function Wk(t){let e=t&&(t[fI]||t[dI]);return e||null}function ND(t){return t&&(t.hasOwnProperty(CD)||t.hasOwnProperty(qk))?t[CD]:null}var fI=ze({\u0275prov:ze}),CD=ze({\u0275inj:ze}),dI=ze({ngInjectableDef:ze}),qk=ze({ngInjectorDef:ze}),de=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pI(t){return t&&!!t.\u0275providers}var Kk=ze({\u0275cmp:ze}),Zk=ze({\u0275dir:ze}),Yk=ze({\u0275pipe:ze}),Qk=ze({\u0275mod:ze}),El=ze({\u0275fac:ze}),Ma=ze({__NG_ELEMENT_ID__:ze}),_D=ze({__NG_ENV_ID__:ze});function Xk(t){return typeof t=="string"?t:t==null?"":String(t)}function Jk(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Xk(t)}function eO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ue(-200,t)}function Lh(t,e){throw new ue(-201,!1)}var Ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ce||{}),sh;function hI(){return sh}function Nn(t){let e=sh;return sh=t,e}function mI(t,e,n){let r=jl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Ce.Optional)return null;if(e!==void 0)return e;Lh(t,"Injector")}var tO={},Oa=tO,ih="__NG_DI_FLAG__",xl="ngTempTokenPath",nO="ngTokenPath",rO=/\n/gm,oO="\u0275",AD="__source",yi;function sO(){return yi}function mo(t){let e=yi;return yi=t,e}function iO(t,e=Ce.Default){if(yi===void 0)throw new ue(-203,!1);return yi===null?mI(t,void 0,e):yi.get(t,e&Ce.Optional?null:void 0,e)}function ce(t,e=Ce.Default){return(hI()||iO)(Cn(t),e)}function q(t,e=Ce.Default){return ce(t,Vl(e))}function Vl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ah(t){let e=[];for(let n=0;n<t.length;n++){let r=Cn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ue(900,!1);let o,s=Ce.Default;for(let i=0;i<r.length;i++){let a=r[i],u=aO(a);typeof u=="number"?u===-1?o=a.token:s|=u:o=a}e.push(ce(o,s))}else e.push(ce(r))}return e}function gI(t,e){return t[ih]=e,t.prototype[ih]=e,t}function aO(t){return t[ih]}function uO(t,e,n,r){let o=t[xl];throw e[AD]&&o.unshift(e[AD]),t.message=cO(`
`+t.message,o,n,r),t[nO]=o,t[xl]=null,t}function cO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==oO?t.slice(2):t;let o=mn(e);if(Array.isArray(e))o=e.map(mn).join(" -> ");else if(typeof e=="object"){let s=[];for(let i in e)if(e.hasOwnProperty(i)){let a=e[i];s.push(i+":"+(typeof a=="string"?JSON.stringify(a):mn(a)))}o=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(rO,`
  `)}`}var Bh=gI(aI("Optional"),8);var yI=gI(aI("SkipSelf"),4);function wi(t,e){let n=t.hasOwnProperty(El);return n?t[El]:null}function jh(t,e){t.forEach(n=>Array.isArray(n)?jh(n,e):e(n))}function vI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Ra={},gr=[],bi=new de(""),wI=new de("",-1),bI=new de(""),Il=class{get(e,n=Oa){if(n===Oa){let r=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw r.name="NullInjectorError",r}return n}},EI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(EI||{}),vr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vr||{}),Ei=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ei||{});function lO(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let s=e.length;if(o+s===r||t.charCodeAt(o+s)<=32)return o}n=o+1}}function uh(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let s=n[r++],i=n[r++],a=n[r++];t.setAttribute(e,i,a,s)}else{let s=o,i=n[++r];dO(s)?t.setProperty(e,s,i):t.setAttribute(e,s,i),r++}}return r}function fO(t){return t===3||t===4||t===6}function dO(t){return t.charCodeAt(0)===64}function Vh(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?MD(t,n,o,null,e[++r]):MD(t,n,o,null,null))}}return t}function MD(t,e,n,r,o){let s=0,i=t.length;if(e===-1)i=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){i=-1;break}else if(a>e){i=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(t[s+1]=o);return}else if(r===t[s+1]){t[s+2]=o;return}}s++,r!==null&&s++,o!==null&&s++}i!==-1&&(t.splice(i,0,e),s=i+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),o!==null&&t.splice(s++,0,o)}var xI="ng-template";function pO(t,e,n,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&lO(e[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Uh(t))return!1;if(o=e.indexOf(1,o),o>-1){let s;for(;++o<e.length&&typeof(s=e[o])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Uh(t){return t.type===4&&t.value!==xI}function hO(t,e,n){let r=t.type===4&&!n?xI:t.value;return e===r}function mO(t,e,n){let r=4,o=t.attrs,s=o!==null?vO(o):0,i=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!i&&!Un(r)&&!Un(u))return!1;if(i&&Un(u))continue;i=!1,r=u|r&1;continue}if(!i)if(r&4){if(r=2|r&1,u!==""&&!hO(t,u,n)||u===""&&e.length===1){if(Un(r))return!1;i=!0}}else if(r&8){if(o===null||!pO(t,o,u,n)){if(Un(r))return!1;i=!0}}else{let c=e[++a],f=gO(u,o,Uh(t),n);if(f===-1){if(Un(r))return!1;i=!0;continue}if(c!==""){let d;if(f>s?d="":d=o[f+1].toLowerCase(),r&2&&c!==d){if(Un(r))return!1;i=!0}}}}return Un(r)||i}function Un(t){return(t&1)===0}function gO(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let s=!1;for(;o<e.length;){let i=e[o];if(i===t)return o;if(i===3||i===6)s=!0;else if(i===1||i===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(i===4)break;if(i===0){o+=4;continue}}o+=s?1:2}return-1}else return wO(e,t)}function yO(t,e,n=!1){for(let r=0;r<e.length;r++)if(mO(t,e[r],n))return!0;return!1}function vO(t){for(let e=0;e<t.length;e++){let n=t[e];if(fO(n))return e}return t.length}function wO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function kD(t,e){return t?":not("+e.trim()+")":e}function bO(t){let e=t[0],n=1,r=2,o="",s=!1;for(;n<t.length;){let i=t[n];if(typeof i=="string")if(r&2){let a=t[++n];o+="["+i+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+i:r&4&&(o+=" "+i);else o!==""&&!Un(i)&&(e+=kD(s,o),o=""),r=i,s=s||!Un(r);n++}return o!==""&&(e+=kD(s,o)),e}function EO(t){return t.map(bO).join(",")}function xO(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")o===2?s!==""&&e.push(s,t[++r]):o===8&&n.push(s);else{if(!Un(o))break;o=s}r++}return{attrs:e,classes:n}}function Ul(t){return Ua(()=>{let e=NI(t),n=at(re({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===EI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vr.Emulated,styles:t.styles||gr,_:null,schemas:t.schemas||null,tView:null,id:""});CI(n);let r=t.dependencies;return n.directiveDefs=RD(r,!1),n.pipeDefs=RD(r,!0),n.id=TO(n),n})}function DO(t){return vo(t)||DI(t)}function IO(t){return t!==null}function qn(t){return Ua(()=>({type:t.type,bootstrap:t.bootstrap||gr,declarations:t.declarations||gr,imports:t.imports||gr,exports:t.exports||gr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function OD(t,e){if(t==null)return Ra;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],s,i,a=Ei.None;Array.isArray(o)?(a=o[0],s=o[1],i=o[2]??s):(s=o,i=o),e?(n[s]=a!==Ei.None?[r,a]:r,e[s]=i):n[s]=r}return n}function Hh(t){return Ua(()=>{let e=NI(t);return CI(e),e})}function vo(t){return t[Kk]||null}function DI(t){return t[Zk]||null}function II(t){return t[Yk]||null}function TI(t){let e=vo(t)||DI(t)||II(t);return e!==null?e.standalone:!1}function SI(t,e){let n=t[Qk]||null;if(!n&&e===!0)throw new Error(`Type ${mn(t)} does not have '\u0275mod' property.`);return n}function NI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ra,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||gr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OD(t.inputs,e),outputs:OD(t.outputs),debugInfo:null}}function CI(t){t.features?.forEach(e=>e(t))}function RD(t,e){if(!t)return null;let n=e?II:DO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(IO)}function TO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let o of n)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function SO(...t){return{\u0275providers:_I(!0,t),\u0275fromNgModule:!0}}function _I(t,...e){let n=[],r=new Set,o,s=i=>{n.push(i)};return jh(e,i=>{let a=i;ch(a,s,[],r)&&(o||=[],o.push(a))}),o!==void 0&&AI(o,s),n}function AI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];zh(o,s=>{e(s,r)})}}function ch(t,e,n,r){if(t=Cn(t),!t)return!1;let o=null,s=ND(t),i=!s&&vo(t);if(!s&&!i){let u=t.ngModule;if(s=ND(u),s)o=u;else return!1}else{if(i&&!i.standalone)return!1;o=t}let a=r.has(o);if(i){if(a)return!1;if(r.add(o),i.dependencies){let u=typeof i.dependencies=="function"?i.dependencies():i.dependencies;for(let c of u)ch(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(o);let c;try{jh(s.imports,f=>{ch(f,e,n,r)&&(c||=[],c.push(f))})}finally{}c!==void 0&&AI(c,e)}if(!a){let c=wi(o)||(()=>new o);e({provide:o,useFactory:c,deps:gr},o),e({provide:bI,useValue:o,multi:!0},o),e({provide:bi,useValue:()=>ce(o),multi:!0},o)}let u=s.providers;if(u!=null&&!a){let c=t;zh(u,f=>{e(f,c)})}}else return!1;return o!==t&&t.providers!==void 0}function zh(t,e){for(let n of t)pI(n)&&(n=n.\u0275providers),Array.isArray(n)?zh(n,e):e(n)}var NO=ze({provide:String,useValue:ze});function MI(t){return t!==null&&typeof t=="object"&&NO in t}function CO(t){return!!(t&&t.useExisting)}function _O(t){return!!(t&&t.useFactory)}function lh(t){return typeof t=="function"}var Hl=new de(""),gl={},AO={},Qp;function Gh(){return Qp===void 0&&(Qp=new Il),Qp}var tn=class{},Fa=class extends tn{get destroyed(){return this._destroyed}constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dh(e,i=>this.processProvider(i)),this.records.set(wI,pi(void 0,this)),o.has("environment")&&this.records.set(tn,pi(void 0,this));let s=this.records.get(Hl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bI,gr,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=He(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=mo(this),r=Nn(void 0),o;try{return e()}finally{mo(n),Nn(r)}}get(e,n=Oa,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_D))return e[_D](this);r=Vl(r);let o,s=mo(this),i=Nn(void 0);try{if(!(r&Ce.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=PO(e)&&jl(e);c&&this.injectableDefInScope(c)?u=pi(fh(e),gl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&Ce.Self?Gh():this.parent;return n=r&Ce.Optional&&n===Oa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[xl]=a[xl]||[]).unshift(mn(e)),s)throw a;return uO(a,e,"R3InjectorError",this.source)}else throw a}finally{Nn(i),mo(s)}}resolveInjectorInitializers(){let e=He(null),n=mo(this),r=Nn(void 0),o;try{let s=this.get(bi,gr,Ce.Self);for(let i of s)i()}finally{mo(n),Nn(r),He(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(mn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){e=Cn(e);let n=lh(e)?e:Cn(e&&e.provide),r=kO(e);if(!lh(e)&&e.multi===!0){let o=this.records.get(n);o||(o=pi(void 0,gl,!0),o.factory=()=>ah(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=He(null);try{return n.value===gl&&(n.value=AO,n.value=n.factory()),typeof n.value=="object"&&n.value&&FO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{He(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Cn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function fh(t){let e=jl(t),n=e!==null?e.factory:wi(t);if(n!==null)return n;if(t instanceof de)throw new ue(204,!1);if(t instanceof Function)return MO(t);throw new ue(204,!1)}function MO(t){if(t.length>0)throw new ue(204,!1);let n=Wk(t);return n!==null?()=>n.factory(t):()=>new t}function kO(t){if(MI(t))return pi(void 0,t.useValue);{let e=OO(t);return pi(e,gl)}}function OO(t,e,n){let r;if(lh(t)){let o=Cn(t);return wi(o)||fh(o)}else if(MI(t))r=()=>Cn(t.useValue);else if(_O(t))r=()=>t.useFactory(...ah(t.deps||[]));else if(CO(t))r=()=>ce(Cn(t.useExisting));else{let o=Cn(t&&(t.useClass||t.provide));if(RO(t))r=()=>new o(...ah(t.deps));else return wi(o)||fh(o)}return r}function pi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function RO(t){return!!t.deps}function FO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PO(t){return typeof t=="function"||typeof t=="object"&&t instanceof de}function dh(t,e){for(let n of t)Array.isArray(n)?dh(n,e):n&&pI(n)?dh(n.\u0275providers,e):e(n)}function Kn(t,e){t instanceof Fa&&t.assertNotDestroyed();let n,r=mo(t),o=Nn(void 0);try{return e()}finally{mo(r),Nn(o)}}function kI(){return hI()!==void 0||sO()!=null}function $O(t){if(!kI())throw new ue(-203,!1)}function LO(t){let e=zn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function BO(t){return typeof t=="function"}var Hr=0,Re=1,De=2,Kt=3,Hn=4,Zn=5,Tl=6,FD=7,wo=8,xi=9,Ur=10,wr=11,Pa=12,PD=13,Ha=14,br=15,$a=16,hi=17,zl=18,Gl=19,OI=20,yo=21,Xp=22,_n=23,us=25,RI=1;var cs=7,Sl=8,Nl=9,An=10,Cl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Cl||{});function is(t){return Array.isArray(t)&&typeof t[RI]=="object"}function zr(t){return Array.isArray(t)&&t[RI]===!0}function FI(t){return(t.flags&4)!==0}function Wh(t){return t.componentOffset>-1}function jO(t){return(t.flags&1)===1}function za(t){return!!t.template}function ph(t){return(t[De]&512)!==0}var hh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function PI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Wl(){return $I}function $I(t){return t.type.prototype.ngOnChanges&&(t.setInput=UO),VO}Wl.ngInherit=!0;function VO(){let t=BI(this),e=t?.current;if(e){let n=t.previous;if(n===Ra)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function UO(t,e,n,r,o){let s=this.declaredInputs[r],i=BI(t)||HO(t,{previous:Ra,current:null}),a=i.current||(i.current={}),u=i.previous,c=u[s];a[s]=new hh(c&&c.currentValue,n,u===Ra),PI(t,e,o,n)}var LI="__ngSimpleChanges__";function BI(t){return t[LI]||null}function HO(t,e){return t[LI]=e}var $D=null;var go=function(t,e,n){$D?.(t,e,n)},zO="svg",GO="math";function bo(t){for(;Array.isArray(t);)t=t[Hr];return t}function Gr(t,e){return bo(e[t.index])}function WO(t,e){return t.data[e]}function Ga(t,e){let n=e[t];return is(n)?n:n[Hr]}function qh(t){return(t[De]&128)===128}function qO(t){return zr(t[Kt])}function LD(t,e){return e==null?null:t[e]}function jI(t){t[hi]=0}function VI(t){t[De]&1024||(t[De]|=1024,qh(t)&&ql(t))}function La(t){return!!(t[De]&9216||t[_n]?.dirty)}function mh(t){t[Ur].changeDetectionScheduler?.notify(7),t[De]&64&&(t[De]|=1024),La(t)&&ql(t)}function ql(t){t[Ur].changeDetectionScheduler?.notify(0);let e=ls(t);for(;e!==null&&!(e[De]&8192||(e[De]|=8192,!qh(e)));)e=ls(e)}function UI(t,e){if((t[De]&256)===256)throw new ue(911,!1);t[yo]===null&&(t[yo]=[]),t[yo].push(e)}function KO(t,e){if(t[yo]===null)return;let n=t[yo].indexOf(e);n!==-1&&t[yo].splice(n,1)}function ls(t){let e=t[Kt];return zr(e)?e[Kt]:e}var Ve={lFrame:QI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var HI=!1;function ZO(){return Ve.lFrame.elementDepthCount}function YO(){Ve.lFrame.elementDepthCount++}function QO(){Ve.lFrame.elementDepthCount--}function zI(){return Ve.bindingsEnabled}function XO(){return Ve.skipHydrationRootTNode!==null}function JO(t){return Ve.skipHydrationRootTNode===t}function eR(){Ve.skipHydrationRootTNode=null}function Gn(){return Ve.lFrame.lView}function Kh(){return Ve.lFrame.tView}function Wr(){let t=GI();for(;t!==null&&t.type===64;)t=t.parent;return t}function GI(){return Ve.lFrame.currentTNode}function tR(){let t=Ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Kl(t,e){let n=Ve.lFrame;n.currentTNode=t,n.isParent=e}function WI(){return Ve.lFrame.isParent}function nR(){Ve.lFrame.isParent=!1}function qI(){return HI}function BD(t){HI=t}function rR(t){return Ve.lFrame.bindingIndex=t}function oR(){return Ve.lFrame.inI18n}function sR(t,e){let n=Ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,gh(e)}function iR(){return Ve.lFrame.currentDirectiveIndex}function gh(t){Ve.lFrame.currentDirectiveIndex=t}function KI(t){Ve.lFrame.currentQueryIndex=t}function aR(t){let e=t[Re];return e.type===2?e.declTNode:e.type===1?t[Zn]:null}function ZI(t,e,n){if(n&Ce.SkipSelf){let o=e,s=t;for(;o=o.parent,o===null&&!(n&Ce.Host);)if(o=aR(s),o===null||(s=s[Ha],o.type&10))break;if(o===null)return!1;e=o,t=s}let r=Ve.lFrame=YI();return r.currentTNode=e,r.lView=t,!0}function Zh(t){let e=YI(),n=t[Re];Ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function YI(){let t=Ve.lFrame,e=t===null?null:t.child;return e===null?QI(t):e}function QI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function XI(){let t=Ve.lFrame;return Ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var JI=XI;function Yh(){let t=XI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function uR(){return Ve.lFrame.selectedIndex}function fs(t){Ve.lFrame.selectedIndex=t}function cR(){return Ve.lFrame.currentNamespace}var eT=!0;function tT(){return eT}function nT(t){eT=t}function lR(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:s}=e.type.prototype;if(r){let i=$I(e);(n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i)}o&&(n.preOrderHooks??=[]).push(0-t,o),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function rT(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:f}=s;i&&(t.contentHooks??=[]).push(-n,i),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function yl(t,e,n){oT(t,e,3,n)}function vl(t,e,n,r){(t[De]&3)===n&&oT(t,e,n,r)}function Jp(t,e){let n=t[De];(n&3)===e&&(n&=16383,n+=1,t[De]=n)}function oT(t,e,n,r){let o=r!==void 0?t[hi]&65535:0,s=r??-1,i=e.length-1,a=0;for(let u=o;u<i;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[hi]+=65536),(a<s||s==-1)&&(fR(t,n,e,u),t[hi]=(t[hi]&4294901760)+u+2),u++}function jD(t,e){go(4,t,e);let n=He(null);try{e.call(t)}finally{He(n),go(5,t,e)}}function fR(t,e,n,r){let o=n[r]<0,s=n[r+1],i=o?-n[r]:n[r],a=t[i];o?t[De]>>14<t[hi]>>16&&(t[De]&3)===e&&(t[De]+=16384,jD(a,s)):jD(a,s)}var vi=-1,Ba=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function dR(t){return t instanceof Ba}function pR(t){return(t.flags&8)!==0}function hR(t){return(t.flags&16)!==0}function sT(t){return t!==vi}function _l(t){return t&32767}function mR(t){return t>>16}function Al(t,e){let n=mR(t),r=e;for(;n>0;)r=r[Ha],n--;return r}var yh=!0;function VD(t){let e=yh;return yh=t,e}var gR=256,iT=gR-1,aT=5,yR=0,yr={};function vR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ma)&&(r=n[Ma]),r==null&&(r=n[Ma]=yR++);let o=r&iT,s=1<<o;e.data[t+(o>>aT)]|=s}function uT(t,e){let n=cT(t,e);if(n!==-1)return n;let r=e[Re];r.firstCreatePass&&(t.injectorIndex=e.length,eh(r.data,t),eh(e,null),eh(r.blueprint,null));let o=Qh(t,e),s=t.injectorIndex;if(sT(o)){let i=_l(o),a=Al(o,e),u=a[Re].data;for(let c=0;c<8;c++)e[s+c]=a[i+c]|u[i+c]}return e[s+8]=o,s}function eh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function cT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Qh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=hT(o),r===null)return vi;if(n++,o=o[Ha],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vi}function wR(t,e,n){vR(t,e,n)}function lT(t,e,n){if(n&Ce.Optional||t!==void 0)return t;Lh(e,"NodeInjector")}function fT(t,e,n,r){if(n&Ce.Optional&&r===void 0&&(r=null),!(n&(Ce.Self|Ce.Host))){let o=t[xi],s=Nn(void 0);try{return o?o.get(e,r,n&Ce.Optional):mI(e,r,n&Ce.Optional)}finally{Nn(s)}}return lT(r,e,n)}function dT(t,e,n,r=Ce.Default,o){if(t!==null){if(e[De]&2048&&!(r&Ce.Self)){let i=IR(t,e,n,r,yr);if(i!==yr)return i}let s=pT(t,e,n,r,yr);if(s!==yr)return s}return fT(e,n,r,o)}function pT(t,e,n,r,o){let s=xR(n);if(typeof s=="function"){if(!ZI(e,t,r))return r&Ce.Host?lT(o,n,r):fT(e,n,r,o);try{let i;if(i=s(r),i==null&&!(r&Ce.Optional))Lh(n);else return i}finally{JI()}}else if(typeof s=="number"){let i=null,a=cT(t,e),u=vi,c=r&Ce.Host?e[br][Zn]:null;for((a===-1||r&Ce.SkipSelf)&&(u=a===-1?Qh(t,e):e[a+8],u===vi||!HD(r,!1)?a=-1:(i=e[Re],a=_l(u),e=Al(u,e)));a!==-1;){let f=e[Re];if(UD(s,a,f.data)){let d=bR(a,e,n,i,r,c);if(d!==yr)return d}u=e[a+8],u!==vi&&HD(r,e[Re].data[a+8]===c)&&UD(s,a,e)?(i=f,a=_l(u),e=Al(u,e)):a=-1}}return o}function bR(t,e,n,r,o,s){let i=e[Re],a=i.data[t+8],u=r==null?Wh(a)&&yh:r!=i&&(a.type&3)!==0,c=o&Ce.Host&&s===a,f=ER(a,i,n,u,c);return f!==null?ja(e,i,f,a):yr}function ER(t,e,n,r,o){let s=t.providerIndexes,i=e.data,a=s&1048575,u=t.directiveStart,c=t.directiveEnd,f=s>>20,d=r?a:a+f,p=o?a+f:c;for(let m=d;m<p;m++){let b=i[m];if(m<u&&n===b||m>=u&&b.type===n)return m}if(o){let m=i[u];if(m&&za(m)&&m.type===n)return u}return null}function ja(t,e,n,r){let o=t[n],s=e.data;if(dR(o)){let i=o;i.resolving&&eO(Jk(s[n]));let a=VD(i.canSeeViewProviders);i.resolving=!0;let u,c=i.injectImpl?Nn(i.injectImpl):null,f=ZI(t,r,Ce.Default);try{o=t[n]=i.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&lR(n,s[n],e)}finally{c!==null&&Nn(c),VD(a),i.resolving=!1,JI()}}return o}function xR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ma)?t[Ma]:void 0;return typeof e=="number"?e>=0?e&iT:DR:e}function UD(t,e,n){let r=1<<t;return!!(n[e+(t>>aT)]&r)}function HD(t,e){return!(t&Ce.Self)&&!(t&Ce.Host&&e)}var as=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return dT(this._tNode,this._lView,e,Vl(r),n)}};function DR(){return new as(Wr(),Gn())}function Xh(t){return Ua(()=>{let e=t.prototype.constructor,n=e[El]||vh(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let s=o[El]||vh(o);if(s&&s!==n)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function vh(t){return cI(t)?()=>{let e=vh(Cn(t));return e&&e()}:wi(t)}function IR(t,e,n,r,o){let s=t,i=e;for(;s!==null&&i!==null&&i[De]&2048&&!(i[De]&512);){let a=pT(s,i,n,r|Ce.Self,yr);if(a!==yr)return a;let u=s.parent;if(!u){let c=i[OI];if(c){let f=c.get(n,yr,r);if(f!==yr)return f}u=hT(i),i=i[Ha]}s=u}return o}function hT(t){let e=t[Re],n=e.type;return n===2?e.declTNode:n===1?t[Zn]:null}function zD(t,e=null,n=null,r){let o=mT(t,e,n,r);return o.resolveInjectorInitializers(),o}function mT(t,e=null,n=null,r,o=new Set){let s=[n||gr,SO(t)];return r=r||(typeof t=="object"?void 0:mn(t)),new Fa(s,e||Gh(),r||null,o)}var ss=class ss{static create(e,n){if(Array.isArray(e))return zD({name:""},n,e,"");{let r=e.name??"";return zD({name:r},e.parent,e.providers,r)}}};ss.THROW_IF_NOT_FOUND=Oa,ss.NULL=new Il,ss.\u0275prov=ie({token:ss,providedIn:"any",factory:()=>ce(wI)}),ss.__NG_ELEMENT_ID__=-1;var Mn=ss;var TR=new de("");TR.__NG_ELEMENT_ID__=t=>{let e=Wr();if(e===null)throw new ue(204,!1);if(e.type&2)return e.value;if(t&Ce.Optional)return null;throw new ue(204,!1)};var SR="ngOriginalError";function th(t){return t[SR]}var Er=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&th(e);for(;n&&th(n);)n=th(n);return n||null}},gT=new de("",{providedIn:"root",factory:()=>q(Er).handleError.bind(void 0)}),Jh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),wh=class extends Jh{constructor(e){super(),this._lView=e}onDestroy(e){return UI(this._lView,e),()=>KO(this._lView,e)}};function NR(){return new wh(Gn())}function CR(){return em(Wr(),Gn())}function em(t,e){return new Zl(Gr(t,e))}var Zl=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=CR;let t=e;return t})();var _i=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new At(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var bh=class extends Wt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,kI()&&(this.destroyRef=q(Jh,{optional:!0})??void 0,this.pendingTasks=q(_i,{optional:!0})??void 0)}emit(e){let n=He(null);try{super.next(e)}finally{He(n)}}subscribe(e,n,r){let o=e,s=n||(()=>null),i=r;if(e&&typeof e=="object"){let u=e;o=u.next?.bind(u),s=u.error?.bind(u),i=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),o&&(o=this.wrapInTimeout(o)),i&&(i=this.wrapInTimeout(i)));let a=super.subscribe({next:o,error:s,complete:i});return e instanceof lt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},qt=bh;function yT(t){return(t.flags&128)===128}var vT=new Map,_R=0;function AR(){return _R++}function MR(t){vT.set(t[Gl],t)}function kR(t){vT.delete(t[Gl])}var GD="__ngContext__";function Di(t,e){is(e)?(t[GD]=e[Gl],MR(e)):t[GD]=e}function wT(t){return ET(t[Pa])}function bT(t){return ET(t[Hn])}function ET(t){for(;t!==null&&!zr(t);)t=t[Hn];return t}var Eh;function xT(t){Eh=t}function OR(){if(Eh!==void 0)return Eh;if(typeof document<"u")return document;throw new ue(210,!1)}var Yl=new de("",{providedIn:"root",factory:()=>RR}),RR="ng",tm=new de(""),xo=new de("",{providedIn:"platform",factory:()=>"unknown"});var nm=new de("",{providedIn:"root",factory:()=>OR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var FR="h",PR="b";var $R=()=>null;function rm(t,e,n=!1){return $R(t,e,n)}var DT=!1,LR=new de("",{providedIn:"root",factory:()=>DT});function IT(t){return t instanceof Function?t():t}function BR(t){return(t??q(Mn)).get(xo)==="browser"}var ds=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ds||{}),jR;function om(t,e){return jR(t,e)}function mi(t,e,n,r,o){if(r!=null){let s,i=!1;zr(r)?s=r:is(r)&&(i=!0,r=r[Hr]);let a=bo(r);t===0&&n!==null?o==null?_T(e,n,a):Ml(e,n,a,o||null,!0):t===1&&n!==null?Ml(e,n,a,o||null,!0):t===2?t2(e,a,i):t===3&&e.destroyNode(a),s!=null&&r2(e,t,s,n,o)}}function VR(t,e){return t.createText(e)}function TT(t,e,n){return t.createElement(e,n)}function UR(t,e){ST(t,e),e[Hr]=null,e[Zn]=null}function HR(t,e,n,r,o,s){r[Hr]=o,r[Zn]=e,Ql(t,r,n,1,o,s)}function ST(t,e){e[Ur].changeDetectionScheduler?.notify(8),Ql(t,e,e[wr],2,null,null)}function zR(t){let e=t[Pa];if(!e)return nh(t[Re],t);for(;e;){let n=null;if(is(e))n=e[Pa];else{let r=e[An];r&&(n=r)}if(!n){for(;e&&!e[Hn]&&e!==t;)is(e)&&nh(e[Re],e),e=e[Kt];e===null&&(e=t),is(e)&&nh(e[Re],e),n=e&&e[Hn]}e=n}}function GR(t,e,n,r){let o=An+r,s=n.length;r>0&&(n[o-1][Hn]=e),r<s-An?(e[Hn]=n[o],vI(n,An+r,e)):(n.push(e),e[Hn]=null),e[Kt]=n;let i=e[$a];i!==null&&n!==i&&NT(i,e);let a=e[zl];a!==null&&a.insertView(t),mh(e),e[De]|=128}function NT(t,e){let n=t[Nl],r=e[Kt];if(is(r))t[De]|=Cl.HasTransplantedViews;else{let o=r[Kt][br];e[br]!==o&&(t[De]|=Cl.HasTransplantedViews)}n===null?t[Nl]=[e]:n.push(e)}function sm(t,e){let n=t[Nl],r=n.indexOf(e);n.splice(r,1)}function xh(t,e){if(t.length<=An)return;let n=An+e,r=t[n];if(r){let o=r[$a];o!==null&&o!==t&&sm(o,r),e>0&&(t[n-1][Hn]=r[Hn]);let s=Dl(t,An+e);UR(r[Re],r);let i=s[zl];i!==null&&i.detachView(s[Re]),r[Kt]=null,r[Hn]=null,r[De]&=-129}return r}function CT(t,e){if(!(e[De]&256)){let n=e[wr];n.destroyNode&&Ql(t,e,n,3,null,null),zR(e)}}function nh(t,e){if(e[De]&256)return;let n=He(null);try{e[De]&=-129,e[De]|=256,e[_n]&&kp(e[_n]),qR(t,e),WR(t,e),e[Re].type===1&&e[wr].destroy();let r=e[$a];if(r!==null&&zr(e[Kt])){r!==e[Kt]&&sm(r,e);let o=e[zl];o!==null&&o.detachView(t)}kR(e)}finally{He(n)}}function WR(t,e){let n=t.cleanup,r=e[FD];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let i=n[s+3];i>=0?r[i]():r[-i].unsubscribe(),s+=2}else{let i=r[n[s+1]];n[s].call(i)}r!==null&&(e[FD]=null);let o=e[yo];if(o!==null){e[yo]=null;for(let s=0;s<o.length;s++){let i=o[s];i()}}}function qR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof Ba)){let s=n[r+1];if(Array.isArray(s))for(let i=0;i<s.length;i+=2){let a=o[s[i]],u=s[i+1];go(4,a,u);try{u.call(a)}finally{go(5,a,u)}}else{go(4,o,s);try{s.call(o)}finally{go(5,o,s)}}}}}function KR(t,e,n){return ZR(t,e.parent,n)}function ZR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Hr];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:s}=t.data[r.directiveStart+o];if(s===vr.None||s===vr.Emulated)return null}return Gr(r,n)}}function Ml(t,e,n,r,o){t.insertBefore(e,n,r,o)}function _T(t,e,n){t.appendChild(e,n)}function WD(t,e,n,r,o){r!==null?Ml(t,e,n,r,o):_T(t,e,n)}function YR(t,e,n,r){t.removeChild(e,n,r)}function im(t,e){return t.parentNode(e)}function QR(t,e){return t.nextSibling(e)}function XR(t,e,n){return e2(t,e,n)}function JR(t,e,n){return t.type&40?Gr(t,n):null}var e2=JR,qD;function AT(t,e,n,r){let o=KR(t,r,e),s=e[wr],i=r.parent||e[Zn],a=XR(i,r,e);if(o!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)WD(s,o,n[u],a,!1);else WD(s,o,n,a,!1);qD!==void 0&&qD(s,r,e,n,o)}function wl(t,e){if(e!==null){let n=e.type;if(n&3)return Gr(e,t);if(n&4)return Dh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return wl(t,r);{let o=t[e.index];return zr(o)?Dh(-1,o):bo(o)}}else{if(n&32)return om(e,t)()||bo(t[e.index]);{let r=MT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=ls(t[br]);return wl(o,r)}else return wl(t,e.next)}}}return null}function MT(t,e){if(e!==null){let r=t[br][Zn],o=e.projection;return r.projection[o]}return null}function Dh(t,e){let n=An+t+1;if(n<e.length){let r=e[n],o=r[Re].firstChild;if(o!==null)return wl(r,o)}return e[cs]}function t2(t,e,n){let r=im(t,e);r&&YR(t,r,e,n)}function am(t,e,n,r,o,s,i){for(;n!=null;){let a=r[n.index],u=n.type;if(i&&e===0&&(a&&Di(bo(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)am(t,e,n.child,r,o,s,!1),mi(e,t,o,a,s);else if(u&32){let c=om(n,r),f;for(;f=c();)mi(e,t,o,f,s);mi(e,t,o,a,s)}else u&16?n2(t,e,r,n,o,s):mi(e,t,o,a,s);n=i?n.projectionNext:n.next}}function Ql(t,e,n,r,o,s){am(n,r,t.firstChild,e,o,s,!1)}function n2(t,e,n,r,o,s){let i=n[br],u=i[Zn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let f=u[c];mi(e,t,o,f,s)}else{let c=u,f=i[Kt];yT(r)&&(c.flags|=128),am(t,e,c,f,o,s,!0)}}function r2(t,e,n,r,o){let s=n[cs],i=bo(n);s!==i&&mi(e,t,r,s,o);for(let a=An;a<n.length;a++){let u=n[a];Ql(u[Re],u,t,e,r,s)}}function o2(t,e,n){t.setAttribute(e,"style",n)}function kT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function OT(t,e,n){let{mergedAttrs:r,classes:o,styles:s}=n;r!==null&&uh(t,e,r),o!==null&&kT(t,e,o),s!==null&&o2(t,e,s)}var RT={};function s2(t,e,n,r){if(!r)if((e[De]&3)===3){let s=t.preOrderCheckHooks;s!==null&&yl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&vl(e,s,0,n)}fs(n)}function Wa(t,e=Ce.Default){let n=Gn();if(n===null)return ce(t,e);let r=Wr();return dT(r,n,Cn(t),e)}function FT(){let t="invalid";throw new Error(t)}function PT(t,e,n,r,o,s){let i=He(null);try{let a=null;o&Ei.SignalBased&&(a=e[r][qx]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),o&Ei.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):PI(e,a,r,s)}finally{He(i)}}function i2(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)fs(~o);else{let s=o,i=n[++r],a=n[++r];sR(i,s);let u=e[s];a(2,u)}}}finally{fs(-1)}}function um(t,e,n,r,o,s,i,a,u,c,f){let d=e.blueprint.slice();return d[Hr]=o,d[De]=r|4|128|8|64,(c!==null||t&&t[De]&2048)&&(d[De]|=2048),jI(d),d[Kt]=d[Ha]=t,d[wo]=n,d[Ur]=i||t&&t[Ur],d[wr]=a||t&&t[wr],d[xi]=u||t&&t[xi]||null,d[Zn]=s,d[Gl]=AR(),d[Tl]=f,d[OI]=c,d[br]=e.type==2?t[br]:d,d}function cm(t,e,n,r,o){let s=t.data[e];if(s===null)s=a2(t,e,n,r,o),oR()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=o;let i=tR();s.injectorIndex=i===null?-1:i.injectorIndex}return Kl(s,!0),s}function a2(t,e,n,r,o){let s=GI(),i=WI(),a=i?s:s&&s.parent,u=t.data[e]=h2(t,a,n,e,r,o);return t.firstChild===null&&(t.firstChild=u),s!==null&&(i?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function $T(t,e,n,r){if(n===0)return-1;let o=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function LT(t,e,n,r,o){let s=uR(),i=r&2;try{fs(-1),i&&e.length>us&&s2(t,e,us,!1),go(i?2:0,o),n(r,o)}finally{fs(s),go(i?3:1,o)}}function BT(t,e,n){if(FI(e)){let r=He(null);try{let o=e.directiveStart,s=e.directiveEnd;for(let i=o;i<s;i++){let a=t.data[i];if(a.contentQueries){let u=n[i];a.contentQueries(1,u,i)}}}finally{He(r)}}}function u2(t,e,n){zI()&&(w2(t,e,n,Gr(n,e)),(n.flags&64)===64&&HT(t,e,n))}function c2(t,e,n=Gr){let r=e.localNames;if(r!==null){let o=e.index+1;for(let s=0;s<r.length;s+=2){let i=r[s+1],a=i===-1?n(e,t):t[i];t[o++]=a}}}function jT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=VT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function VT(t,e,n,r,o,s,i,a,u,c,f){let d=us+r,p=d+o,m=l2(d,p),b=typeof c=="function"?c():c;return m[Re]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof i=="function"?i():i,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:f}}function l2(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:RT);return n}function f2(t,e,n,r){let s=r.get(LR,DT)||n===vr.ShadowDom,i=t.selectRootElement(e,s);return d2(i),i}function d2(t){p2(t)}var p2=()=>null;function h2(t,e,n,r,o,s){let i=e?e.injectorIndex:-1,a=0;return XO()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:i,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function KD(t,e,n,r,o){for(let s in e){if(!e.hasOwnProperty(s))continue;let i=e[s];if(i===void 0)continue;r??={};let a,u=Ei.None;Array.isArray(i)?(a=i[0],u=i[1]):a=i;let c=s;if(o!==null){if(!o.hasOwnProperty(s))continue;c=o[s]}t===0?ZD(r,n,c,a,u):ZD(r,n,c,a)}return r}function ZD(t,e,n,r,o){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],o!==void 0&&s.push(o)}function m2(t,e,n){let r=e.directiveStart,o=e.directiveEnd,s=t.data,i=e.attrs,a=[],u=null,c=null;for(let f=r;f<o;f++){let d=s[f],p=n?n.get(d):null,m=p?p.inputs:null,b=p?p.outputs:null;u=KD(0,d.inputs,f,u,m),c=KD(1,d.outputs,f,c,b);let I=u!==null&&i!==null&&!Uh(e)?C2(u,f,i):null;a.push(I)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function g2(t,e,n,r){if(zI()){let o=r===null?null:{"":-1},s=E2(t,n),i,a;s===null?i=a=null:[i,a]=s,i!==null&&UT(t,e,n,i,o,a),o&&x2(n,r,o)}n.mergedAttrs=Vh(n.mergedAttrs,n.attrs)}function UT(t,e,n,r,o,s){for(let c=0;c<r.length;c++)wR(uT(n,e),t,r[c].type);I2(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let f=r[c];f.providersResolver&&f.providersResolver(f)}let i=!1,a=!1,u=$T(t,e,r.length,null);for(let c=0;c<r.length;c++){let f=r[c];n.mergedAttrs=Vh(n.mergedAttrs,f.hostAttrs),T2(t,n,e,u,f),D2(u,f,o),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let d=f.type.prototype;!i&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),i=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}m2(t,n,s)}function y2(t,e,n,r,o){let s=o.hostBindings;if(s){let i=t.hostBindingOpCodes;i===null&&(i=t.hostBindingOpCodes=[]);let a=~e.index;v2(i)!=a&&i.push(a),i.push(n,r,s)}}function v2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function w2(t,e,n,r){let o=n.directiveStart,s=n.directiveEnd;Wh(n)&&S2(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||uT(n,e),Di(r,e);let i=n.initialInputs;for(let a=o;a<s;a++){let u=t.data[a],c=ja(e,t,a,n);if(Di(c,e),i!==null&&N2(e,a-o,c,u,n,i),za(u)){let f=Ga(n.index,e);f[wo]=ja(e,t,a,n)}}}function HT(t,e,n){let r=n.directiveStart,o=n.directiveEnd,s=n.index,i=iR();try{fs(s);for(let a=r;a<o;a++){let u=t.data[a],c=e[a];gh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&b2(u,c)}}finally{fs(-1),gh(i)}}function b2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function E2(t,e){let n=t.directiveRegistry,r=null,o=null;if(n)for(let s=0;s<n.length;s++){let i=n[s];if(yO(e,i.selectors,!1))if(r||(r=[]),za(i))if(i.findHostDirectiveDefs!==null){let a=[];o=o||new Map,i.findHostDirectiveDefs(i,a,o),r.unshift(...a,i);let u=a.length;Ih(t,e,u)}else r.unshift(i),Ih(t,e,0);else o=o||new Map,i.findHostDirectiveDefs?.(i,r,o),r.push(i)}return r===null?null:[r,o]}function Ih(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function x2(t,e,n){if(e){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let s=n[e[o+1]];if(s==null)throw new ue(-301,!1);r.push(e[o],s)}}}function D2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;za(e)&&(n[""]=t)}}function I2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function T2(t,e,n,r,o){t.data[r]=o;let s=o.factory||(o.factory=wi(o.type,!0)),i=new Ba(s,za(o),Wa);t.blueprint[r]=i,n[r]=i,y2(t,e,r,$T(t,n,o.hostVars,RT),o)}function S2(t,e,n){let r=Gr(e,t),o=jT(n),s=t[Ur].rendererFactory,i=16;n.signals?i=4096:n.onPush&&(i=64);let a=lm(t,um(t,o,null,i,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function N2(t,e,n,r,o,s){let i=s[e];if(i!==null)for(let a=0;a<i.length;){let u=i[a++],c=i[a++],f=i[a++],d=i[a++];PT(r,n,u,c,f,d)}}function C2(t,e,n){let r=null,o=0;for(;o<n.length;){let s=n[o];if(s===0){o+=4;continue}else if(s===5){o+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let i=t[s];for(let a=0;a<i.length;a+=3)if(i[a]===e){r.push(s,i[a+1],i[a+2],n[o+1]);break}}o+=2}return r}function _2(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function zT(t,e){let n=t.contentQueries;if(n!==null){let r=He(null);try{for(let o=0;o<n.length;o+=2){let s=n[o],i=n[o+1];if(i!==-1){let a=t.data[i];KI(s),a.contentQueries(2,e[i],i)}}}finally{He(r)}}}function lm(t,e){return t[Pa]?t[PD][Hn]=e:t[Pa]=e,t[PD]=e,e}function Th(t,e,n){KI(0);let r=He(null);try{e(t,n)}finally{He(r)}}function A2(t,e){let n=t[xi],r=n?n.get(Er,null):null;r&&r.handleError(e)}function GT(t,e,n,r,o){for(let s=0;s<n.length;){let i=n[s++],a=n[s++],u=n[s++],c=e[i],f=t.data[i];PT(f,c,r,a,u,o)}}function M2(t,e){let n=Ga(e,t),r=n[Re];k2(r,n);let o=n[Hr];o!==null&&n[Tl]===null&&(n[Tl]=rm(o,n[xi])),WT(r,n,n[wo])}function k2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function WT(t,e,n){Zh(e);try{let r=t.viewQuery;r!==null&&Th(1,r,n);let o=t.template;o!==null&&LT(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[zl]?.finishViewCreation(t),t.staticContentQueries&&zT(t,e),t.staticViewQueries&&Th(2,t.viewQuery,n);let s=t.components;s!==null&&O2(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[De]&=-5,Yh()}}function O2(t,e){for(let n=0;n<e.length;n++)M2(t,e[n])}function YD(t,e){return!e||e.firstChild===null||yT(t)}function R2(t,e,n,r=!0){let o=e[Re];if(GR(o,e,t,n),r){let i=Dh(n,t),a=e[wr],u=im(a,t[cs]);u!==null&&HR(o,t[Zn],a,e,u,i)}let s=e[Tl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function kl(t,e,n,r,o=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(bo(s)),zr(s)&&F2(s,r);let i=n.type;if(i&8)kl(t,e,n.child,r);else if(i&32){let a=om(n,e),u;for(;u=a();)r.push(u)}else if(i&16){let a=MT(e,n);if(Array.isArray(a))r.push(...a);else{let u=ls(e[br]);kl(u[Re],u,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function F2(t,e){for(let n=An;n<t.length;n++){let r=t[n],o=r[Re].firstChild;o!==null&&kl(r[Re],r,o,e)}t[cs]!==t[Hr]&&e.push(t[cs])}var qT=[];function P2(t){return t[_n]??$2(t)}function $2(t){let e=qT.pop()??Object.create(B2);return e.lView=t,e}function L2(t){t.lView[_n]!==t&&(t.lView=null,qT.push(t))}var B2=at(re({},_p),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ql(t.lView)},consumerOnSignalRead(){this.lView[_n]=this}});function j2(t){let e=t[_n]??Object.create(V2);return e.lView=t,e}var V2=at(re({},_p),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ls(t.lView);for(;e&&!KT(e[Re]);)e=ls(e);e&&VI(e)},consumerOnSignalRead(){this.lView[_n]=this}});function KT(t){return t.type!==2}var U2=100;function ZT(t,e=!0,n=0){let r=t[Ur],o=r.rendererFactory,s=!1;s||o.begin?.();try{H2(t,n)}catch(i){throw e&&A2(t,i),i}finally{s||(o.end?.(),r.inlineEffectRunner?.flush())}}function H2(t,e){let n=qI();try{BD(!0),Sh(t,e);let r=0;for(;La(t);){if(r===U2)throw new ue(103,!1);r++,Sh(t,1)}}finally{BD(n)}}function z2(t,e,n,r){let o=e[De];if((o&256)===256)return;let s=!1,i=!1;!s&&e[Ur].inlineEffectRunner?.flush(),Zh(e);let a=!0,u=null,c=null;s||(KT(t)?(c=P2(e),u=Ap(c)):Kx()===null?(a=!1,c=j2(e),u=Ap(c)):e[_n]&&(kp(e[_n]),e[_n]=null));try{jI(e),rR(t.bindingStartIndex),n!==null&&LT(t,e,n,2,r);let f=(o&3)===3;if(!s)if(f){let m=t.preOrderCheckHooks;m!==null&&yl(e,m,null)}else{let m=t.preOrderHooks;m!==null&&vl(e,m,0,null),Jp(e,0)}if(i||G2(e),YT(e,0),t.contentQueries!==null&&zT(t,e),!s)if(f){let m=t.contentCheckHooks;m!==null&&yl(e,m)}else{let m=t.contentHooks;m!==null&&vl(e,m,1),Jp(e,1)}i2(t,e);let d=t.components;d!==null&&XT(e,d,0);let p=t.viewQuery;if(p!==null&&Th(2,p,r),!s)if(f){let m=t.viewCheckHooks;m!==null&&yl(e,m)}else{let m=t.viewHooks;m!==null&&vl(e,m,2),Jp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xp]){for(let m of e[Xp])m();e[Xp]=null}s||(e[De]&=-73)}catch(f){throw s||ql(e),f}finally{c!==null&&(Zx(c,u),a&&L2(c)),Yh()}}function YT(t,e){for(let n=wT(t);n!==null;n=bT(n))for(let r=An;r<n.length;r++){let o=n[r];QT(o,e)}}function G2(t){for(let e=wT(t);e!==null;e=bT(e)){if(!(e[De]&Cl.HasTransplantedViews))continue;let n=e[Nl];for(let r=0;r<n.length;r++){let o=n[r];VI(o)}}}function W2(t,e,n){let r=Ga(e,t);QT(r,n)}function QT(t,e){qh(t)&&Sh(t,e)}function Sh(t,e){let r=t[Re],o=t[De],s=t[_n],i=!!(e===0&&o&16);if(i||=!!(o&64&&e===0),i||=!!(o&1024),i||=!!(s?.dirty&&Mp(s)),i||=!1,s&&(s.dirty=!1),t[De]&=-9217,i)z2(r,t,r.template,t[wo]);else if(o&8192){YT(t,1);let a=r.components;a!==null&&XT(t,a,1)}}function XT(t,e,n){for(let r=0;r<e.length;r++)W2(t,e[r],n)}function JT(t,e){let n=qI()?64:1088;for(t[Ur].changeDetectionScheduler?.notify(e);t;){t[De]|=n;let r=ls(t);if(ph(t)&&!r)return t;t=r}return null}var Ii=class{get rootNodes(){let e=this._lView,n=e[Re];return kl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wo]}set context(e){this._lView[wo]=e}get destroyed(){return(this._lView[De]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Kt];if(zr(e)){let n=e[Sl],r=n?n.indexOf(this):-1;r>-1&&(xh(e,r),Dl(n,r))}this._attachedToViewContainer=!1}CT(this._lView[Re],this._lView)}onDestroy(e){UI(this._lView,e)}markForCheck(){JT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[De]&=-129}reattach(){mh(this._lView),this._lView[De]|=128}detectChanges(){this._lView[De]|=1024,ZT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ph(this._lView),n=this._lView[$a];n!==null&&!e&&sm(n,this._lView),ST(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e;let n=ph(this._lView),r=this._lView[$a];r!==null&&!n&&NT(r,this._lView),mh(this._lView)}};var j9=new RegExp(`^(\\d+)*(${PR}|${FR})*(.*)`);var q2=()=>null;function QD(t,e){return q2(t,e)}var Ti=class{},eS=new de("",{providedIn:"root",factory:()=>!1});var tS=new de(""),Nh=class{},Ol=class{};function K2(t){let e=Error(`No component factory found for ${mn(t)}.`);return e[Z2]=t,e}var Z2="ngComponent";var Ch=class{resolveComponentFactory(e){throw K2(e)}},bm=class bm{};bm.NULL=new Ch;var Si=bm,Ni=class{};var Y2=(()=>{let e=class e{};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),rh={};var XD=new Set;function fm(t){XD.has(t)||(XD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function nS(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof zn.requestAnimationFrame=="function"&&zn.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function JD(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function eI(...t){}var Ke=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qt(!1),this.onMicrotaskEmpty=new qt(!1),this.onStable=new qt(!1),this.onError=new qt(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,J2(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ue(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+o,e,Q2,eI,eI);try{return s.runTask(i,n,r)}finally{s.cancelTask(i)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Q2={};function dm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function X2(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{nS(()=>{t.callbackScheduled=!1,_h(t),t.isCheckStableRunning=!0,dm(t),t.isCheckStableRunning=!1})}),_h(t))}function J2(t){let e=()=>{X2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,s,i,a)=>{if(eF(a))return n.invokeTask(o,s,i,a);try{return tI(t),n.invokeTask(o,s,i,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),nI(t)}},onInvoke:(n,r,o,s,i,a,u)=>{try{return tI(t),n.invoke(o,s,i,a,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!tF(a)&&e(),nI(t)}},onHasTask:(n,r,o,s)=>{n.hasTask(o,s),r===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,_h(t),dm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,o,s)=>(n.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function _h(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function tI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nI(t){t._nesting--,dm(t)}var Rl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qt,this.onMicrotaskEmpty=new qt,this.onStable=new qt,this.onError=new qt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function eF(t){return rS(t,"__ignore_ng_zone__")}function tF(t){return rS(t,"__scheduler_tick__")}function rS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function nF(t="zone.js",e){return t==="noop"?new Rl:t==="zone.js"?new Ke(e):t}var gi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(gi||{}),rF={destroy(){}};function Xl(t,e){!e&&$O(Xl);let n=e?.injector??q(Mn);if(!BR(n))return rF;fm("NgAfterNextRender");let r=n.get(pm),o=r.handler??=new Mh,s=e?.phase??gi.MixedReadWrite,i=()=>{o.unregister(u),a()},a=n.get(Jh).onDestroy(i),u=Kn(n,()=>new Ah(s,()=>{i(),t()}));return o.register(u),{destroy:i}}var Ah=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=q(Ke),this.errorHandler=q(Er,{optional:!0}),q(Ti,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Mh=class{constructor(){this.executingCallbacks=!1,this.buckets={[gi.EarlyRead]:new Set,[gi.Write]:new Set,[gi.MixedReadWrite]:new Set,[gi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},pm=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function kh(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,s=0;if(e!==null)for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")s=a;else if(s==1)o=TD(o,a);else if(s==2){let u=a,c=e[++i];r=TD(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}var Fl=class extends Si{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vo(e);return new Ci(n,this.ngModule)}};function rI(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function oF(t){let e=t.toLowerCase();return e==="svg"?zO:e==="math"?GO:null}var Oh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Vl(r);let o=this.injector.get(e,rh,r);return o!==rh||n===rh?o:this.parentInjector.get(e,n,r)}},Ci=class extends Ol{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=rI(e.inputs);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return rI(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=EO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,o){let s=He(null);try{o=o||this.ngModule;let i=o instanceof tn?o:o?.injector;i&&this.componentDef.getStandaloneInjector!==null&&(i=this.componentDef.getStandaloneInjector(i)||i);let a=i?new Oh(e,i):e,u=a.get(Ni,null);if(u===null)throw new ue(407,!1);let c=a.get(Y2,null),f=a.get(pm,null),d=a.get(Ti,null),p={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:d},m=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",I=r?f2(m,r,this.componentDef.encapsulation,a):TT(m,b,oF(b)),T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let _=null;I!==null&&(_=rm(I,a,!0));let O=VT(0,null,null,1,0,null,null,null,null,null,null),A=um(null,O,null,T,null,null,p,m,a,null,_);Zh(A);let M,$;try{let F=this.componentDef,j,B=null;F.findHostDirectiveDefs?(j=[],B=new Map,F.findHostDirectiveDefs(F,j,B),j.push(F)):j=[F];let G=sF(A,I),W=iF(G,I,F,j,A,p,m);$=WO(O,us),I&&cF(m,F,I,r),n!==void 0&&lF($,this.ngContentSelectors,n),M=uF(W,F,j,B,A,[fF]),WT(O,A,null)}finally{Yh()}return new Rh(this.componentType,M,em($,A),A,$)}finally{He(s)}}},Rh=class extends Nh{constructor(e,n,r,o,s){super(),this.location=r,this._rootLView=o,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ii(o,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;GT(s[Re],s,o,e,n),this.previousInputValues.set(e,n);let i=Ga(this._tNode.index,s);JT(i,1)}}get injector(){return new as(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function sF(t,e){let n=t[Re],r=us;return t[r]=e,cm(n,r,2,"#host",null)}function iF(t,e,n,r,o,s,i){let a=o[Re];aF(r,t,e,i);let u=null;e!==null&&(u=rm(e,o[xi]));let c=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let d=um(o,jT(n),null,f,o[t.index],t,s,c,null,null,u);return a.firstCreatePass&&Ih(a,t,r.length-1),lm(o,d),o[t.index]=d}function aF(t,e,n,r){for(let o of t)e.mergedAttrs=Vh(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(kh(e,e.mergedAttrs,!0),n!==null&&OT(r,n,e))}function uF(t,e,n,r,o,s){let i=Wr(),a=o[Re],u=Gr(i,o);UT(a,o,i,n,null,r);for(let f=0;f<n.length;f++){let d=i.directiveStart+f,p=ja(o,a,d,i);Di(p,o)}HT(a,o,i),u&&Di(u,o);let c=ja(o,a,i.directiveStart+i.componentOffset,i);if(t[wo]=o[wo]=c,s!==null)for(let f of s)f(c,e);return BT(a,i,o),c}function cF(t,e,n,r){if(r)uh(t,n,["ng-version","18.0.3"]);else{let{attrs:o,classes:s}=xO(e.selectors[0]);o&&uh(t,n,o),s&&s.length>0&&kT(t,n,s.join(" "))}}function lF(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let s=n[o];r.push(s!=null?Array.from(s):null)}}function fF(){let t=Wr();rT(Gn()[Re],t)}var Jl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=dF;let t=e;return t})();function dF(){let t=Wr();return hF(t,Gn())}var pF=Jl,oS=class extends pF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return em(this._hostTNode,this._hostLView)}get injector(){return new as(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qh(this._hostTNode,this._hostLView);if(sT(e)){let n=Al(e,this._hostLView),r=_l(e),o=n[Re].data[r+8];return new as(o,n)}else return new as(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=oI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-An}createEmbeddedView(e,n,r){let o,s;typeof r=="number"?o=r:r!=null&&(o=r.index,s=r.injector);let i=QD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,i);return this.insertImpl(a,o,YD(this._hostTNode,i)),a}createComponent(e,n,r,o,s){let i=e&&!BO(e),a;if(i)a=n;else{let b=n||{};a=b.index,r=b.injector,o=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}let u=i?e:new Ci(vo(e)),c=r||this.parentInjector;if(!s&&u.ngModule==null){let I=(i?c:this.parentInjector).get(tn,null);I&&(s=I)}let f=vo(u.componentType??{}),d=QD(this._lContainer,f?.id??null),p=d?.firstChild??null,m=u.create(c,o,p,s);return this.insertImpl(m.hostView,a,YD(this._hostTNode,d)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(qO(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=o[Kt],c=new oS(u,u[Zn],u[Kt]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),i=this._lContainer;return R2(i,o,s,r),e.attachToViewContainerRef(),vI(oh(i),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=oI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=xh(this._lContainer,n);r&&(Dl(oh(this._lContainer),n),CT(r[Re],r))}detach(e){let n=this._adjustIndex(e,-1),r=xh(this._lContainer,n);return r&&Dl(oh(this._lContainer),n)!=null?new Ii(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function oI(t){return t[Sl]}function oh(t){return t[Sl]||(t[Sl]=[])}function hF(t,e){let n,r=e[t.index];return zr(r)?n=r:(n=_2(r,e,null,t),e[t.index]=n,lm(e,n)),gF(n,e,t,r),new oS(n,t,e)}function mF(t,e){let n=t[wr],r=n.createComment(""),o=Gr(e,t),s=im(n,o);return Ml(n,s,r,QR(n,o),!1),r}var gF=yF;function yF(t,e,n,r){if(t[cs])return;let o;n.type&8?o=bo(r):o=mF(e,n),t[cs]=o}function vF(t){let e=[],n=new Map;function r(o){let s=n.get(o);if(!s){let i=t(o);n.set(o,s=i.then(xF))}return s}return Pl.forEach((o,s)=>{let i=[];o.templateUrl&&i.push(r(o.templateUrl).then(c=>{o.template=c}));let a=typeof o.styles=="string"?[o.styles]:o.styles||[];if(o.styles=a,o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(o.styleUrls?.length){let c=o.styles.length,f=o.styleUrls;o.styleUrls.forEach((d,p)=>{a.push(""),i.push(r(d).then(m=>{a[c+p]=m,f.splice(f.indexOf(d),1),f.length==0&&(o.styleUrls=void 0)}))})}else o.styleUrl&&i.push(r(o.styleUrl).then(c=>{a.push(c),o.styleUrl=void 0}));let u=Promise.all(i).then(()=>DF(s));e.push(u)}),bF(),Promise.all(e).then(()=>{})}var Pl=new Map,wF=new Set;function bF(){let t=Pl;return Pl=new Map,t}function EF(){return Pl.size===0}function xF(t){return typeof t=="string"?t:t.text()}function DF(t){wF.delete(t)}var Eo=class{},Va=class{};var $l=class extends Eo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fl(this);let o=SI(e);this._bootstrapComponents=IT(o.bootstrap),this._r3Injector=mT(e,n,[{provide:Eo,useValue:this},{provide:Si,useValue:this.componentFactoryResolver},...r],mn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ll=class extends Va{constructor(e){super(),this.moduleType=e}create(e){return new $l(this.moduleType,e,[])}};function IF(t,e,n){return new $l(t,e,n)}var Fh=class extends Eo{constructor(e){super(),this.componentFactoryResolver=new Fl(this),this.instance=null;let n=new Fa([...e.providers,{provide:Eo,useValue:this},{provide:Si,useValue:this.componentFactoryResolver}],e.parent||Gh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ef(t,e,n=null){return new Fh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function TF(t){return(t.flags&32)===32}function sI(t,e,n,r,o){let s=e.inputs,i=o?"class":"style";GT(t,n,s[i],i,r)}function SF(t,e,n,r,o,s){let i=e.consts,a=LD(i,o),u=cm(e,t,2,r,a);return g2(e,n,u,LD(i,s)),u.attrs!==null&&kh(u,u.attrs,!1),u.mergedAttrs!==null&&kh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function qa(t,e,n,r){let o=Gn(),s=Kh(),i=us+t,a=o[wr],u=s.firstCreatePass?SF(i,s,o,e,n,r):s.data[i],c=NF(s,o,u,a,e,t);o[i]=c;let f=jO(u);return Kl(u,!0),OT(a,c,u),!TF(u)&&tT()&&AT(s,o,c,u),ZO()===0&&Di(c,o),YO(),f&&(u2(s,o,u),BT(s,u,o)),r!==null&&c2(o,u),qa}function Ka(){let t=Wr();WI()?nR():(t=t.parent,Kl(t,!1));let e=t;JO(e)&&eR(),QO();let n=Kh();return n.firstCreatePass&&(rT(n,t),FI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&pR(e)&&sI(n,e,Gn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hR(e)&&sI(n,e,Gn(),e.stylesWithoutHost,!1),Ka}function Za(t,e,n,r){return qa(t,e,n,r),Ka(),Za}var NF=(t,e,n,r,o,s)=>(nT(!0),TT(r,o,cR()));var Bl="en-US";var CF=Bl;function _F(t){typeof t=="string"&&(CF=t.toLowerCase().replace(/_/g,"-"))}function hm(t,e=""){let n=Gn(),r=Kh(),o=t+us,s=r.firstCreatePass?cm(r,o,1,e,null):r.data[o],i=AF(r,n,s,e,t);n[o]=i,tT()&&AT(r,n,i,s),Kl(s,!1)}var AF=(t,e,n,r,o)=>(nT(!0),VR(e[wr],r));var MF=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=_I(!1,r.type),s=o.length>0?ef([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ie({token:e,providedIn:"environment",factory:()=>new e(ce(tn))});let t=e;return t})();function sS(t){fm("NgStandalone"),t.getStandaloneInjector=e=>e.get(MF).getOrCreateStandaloneInjector(t)}var ml=null;function kF(t){ml!==null&&(t.defaultEncapsulation!==ml.defaultEncapsulation||t.preserveWhitespaces!==ml.preserveWhitespaces)||(ml=t)}var tf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var mm=new de(""),Ya=new de(""),nf=(()=>{let e=class e{constructor(r,o,s){this._ngZone=r,this.registry=o,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,gm||(OF(s),s.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ke.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>o.updateCb&&o.updateCb(r)?(clearTimeout(o.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,s){let i=-1;o&&o>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==i),r()},o)),this._callbacks.push({doneCb:r,timeoutId:i,updateCb:s})}whenStable(r,o,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,s){return[]}};e.\u0275fac=function(o){return new(o||e)(ce(Ke),ce(rf),ce(Ya))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),rf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return gm?.findTestabilityInTree(this,r,o)??null}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function OF(t){gm=t}var gm;function Qa(t){return!!t&&typeof t.then=="function"}function iS(t){return!!t&&typeof t.subscribe=="function"}var of=new de(""),aS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=q(of,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let i=s();if(Qa(i))r.push(i);else if(iS(i)){let a=new Promise((u,c)=>{i.subscribe({complete:u,error:c})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(s=>{this.reject(s)}),r.length===0&&o(),this.initialized=!0}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ym=new de("");function RF(){Yx(()=>{throw new ue(600,!1)})}function FF(t){return t.isBoundToModule}var PF=10;function $F(t,e,n){try{let r=n();return Qa(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function uS(t,e){return Array.isArray(e)?e.reduce(uS,t):re(re({},t),e)}var ps=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=q(gT),this.afterRenderEffectManager=q(pm),this.zonelessEnabled=q(eS),this.externalTestViews=new Set,this.beforeRender=new Wt,this.afterTick=new Wt,this.componentTypes=[],this.components=[],this.isStable=q(_i).hasPendingTasks.pipe(Oe(r=>!r)),this._injector=q(tn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let s=r instanceof Ol;if(!this._injector.get(aS).done){let m=!s&&TI(r),b=!1;throw new ue(405,b)}let a;s?a=r:a=this._injector.get(Si).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=FF(a)?void 0:this._injector.get(Eo),c=o||a.selector,f=a.create(Mn.NULL,[],c,u),d=f.location.nativeElement,p=f.injector.get(mm,null);return p?.registerApplication(d),f.onDestroy(()=>{this.detachView(f.hostView),bl(this.components,f),p?.unregisterApplication(d)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new ue(101,!1);let o=He(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,He(o),this.afterTick.next()}}detectChangesInAttachedViews(r){let o=null;this._injector.destroyed||(o=this._injector.get(Ni,null,{optional:!0}));let s=0,i=this.afterRenderEffectManager;for(;s<PF;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:u,notifyErrorHandler:c}of this._views)LF(u,c,a,this.zonelessEnabled)}else o?.begin?.(),o?.end?.();if(s++,i.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>La(u))&&(i.execute(),!this.allViews.some(({_lView:u})=>La(u))))break}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;bl(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(ym,[]);[...this._bootstrapListeners,...o].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>bl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ue(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function LF(t,e,n,r){if(!n&&!La(t))return;ZT(t,e,n&&!r?0:1)}var Ph=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},sf=(()=>{let e=class e{compileModuleSync(r){return new Ll(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let o=this.compileModuleSync(r),s=SI(r),i=IT(s.declarations).reduce((a,u)=>{let c=vo(u);return c&&a.push(new Ci(c)),a},[]);return new Ph(o,i)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BF=new de("");function jF(t,e,n){let r=new Ll(n);return Promise.resolve(r)}function iI(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var VF=(()=>{let e=class e{constructor(){this.zone=q(Ke),this.changeDetectionScheduler=q(Ti),this.applicationRef=q(ps)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UF({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Ke(cS()),[{provide:Ke,useFactory:t},{provide:bi,multi:!0,useFactory:()=>{let n=q(VF,{optional:!0});return()=>n.initialize()}},{provide:bi,multi:!0,useFactory:()=>{let n=q(zF);return()=>{n.initialize()}}},{provide:gT,useFactory:HF},e===!0?{provide:tS,useValue:!0}:[]]}function HF(){let t=q(Ke),e=q(Er);return n=>t.runOutsideAngular(()=>e.handleError(n))}function cS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var zF=(()=>{let e=class e{constructor(){this.subscription=new lt,this.initialized=!1,this.zone=q(Ke),this.pendingTasks=q(_i)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ke.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ke.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GF=(()=>{let e=class e{constructor(){this.appRef=q(ps),this.taskService=q(_i),this.ngZone=q(Ke),this.zonelessEnabled=q(eS),this.disableScheduling=q(tS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new lt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Rl||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?JD:nS;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ke.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let o=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(o),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(o)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WF(){return typeof $localize<"u"&&$localize.locale||Bl}var vm=new de("",{providedIn:"root",factory:()=>q(vm,Ce.Optional|Ce.SkipSelf)||WF()});var lS=new de(""),fS=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){let s=nF(o?.ngZone,cS({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return s.run(()=>{let i=o?.ignoreChangesOutsideZone,a=IF(r.moduleType,this.injector,[...UF({ngZoneFactory:()=>s,ignoreChangesOutsideZone:i}),{provide:Ti,useExisting:GF}]),u=a.injector.get(Er,null);return s.runOutsideAngular(()=>{let c=s.onError.subscribe({next:f=>{u.handleError(f)}});a.onDestroy(()=>{bl(this._modules,a),c.unsubscribe()})}),$F(u,s,()=>{let c=a.injector.get(aS);return c.runInitializers(),c.donePromise.then(()=>{let f=a.injector.get(vm,Bl);return _F(f||Bl),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,o=[]){let s=uS({},o);return jF(this.injector,s,r).then(i=>this.bootstrapModuleFactory(i,s))}_moduleDoBootstrap(r){let o=r.injector.get(ps);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>o.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(o);else throw new ue(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ue(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());let r=this._injector.get(lS,null);r&&(r.forEach(o=>o()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(o){return new(o||e)(ce(Mn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ka=null,dS=new de("");function qF(t){if(ka&&!ka.get(dS,!1))throw new ue(400,!1);RF(),ka=t;let e=t.get(fS);return YF(t),e}function wm(t,e,n=[]){let r=`Platform: ${e}`,o=new de(r);return(s=[])=>{let i=pS();if(!i||i.injector.get(dS,!1)){let a=[...n,...s,{provide:o,useValue:!0}];t?t(a):qF(KF(a,r))}return ZF(o)}}function KF(t=[],e){return Mn.create({name:e,providers:[{provide:Hl,useValue:"platform"},{provide:lS,useValue:new Set([()=>ka=null])},...t]})}function ZF(t){let e=pS();if(!e)throw new ue(401,!1);return e}function pS(){return ka?.get(fS)??null}function YF(t){t.get(tm,null)?.forEach(n=>n())}var Xa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QF;let t=e;return t})();function QF(t){return XF(Wr(),Gn(),(t&16)===16)}function XF(t,e,n){if(Wh(t)&&!n){let r=Ga(t.index,e);return new Ii(r,r)}else if(t.type&47){let r=e[br];return new Ii(r,e)}return null}var hS=wm(null,"core",[]),mS=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(o){return new(o||e)(ce(ps))},e.\u0275mod=qn({type:e}),e.\u0275inj=Wn({});let t=e;return t})();function gS(t){let e=vo(t);if(!e)return null;let n=new Ci(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ES=null;function ms(){return ES}function xS(t){ES??=t}var af=class{};var nn=new de(""),Dm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>q(rP),providedIn:"platform"});let t=e;return t})(),DS=new de(""),rP=(()=>{let e=class e extends Dm{constructor(){super(),this._doc=q(nn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ms().getBaseHref(this._doc)}onPopState(r){let o=ms().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",r,!1),()=>o.removeEventListener("popstate",r)}onHashChange(r){let o=ms().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",r,!1),()=>o.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,o,s){this._history.pushState(r,o,s)}replaceState(r,o,s){this._history.replaceState(r,o,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Im(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function yS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function qr(t){return t&&t[0]!=="?"?"?"+t:t}var gs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>q(Tm),providedIn:"root"});let t=e;return t})(),IS=new de(""),Tm=(()=>{let e=class e extends gs{constructor(r,o){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??q(nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Im(this._baseHref,r)}path(r=!1){let o=this._platformLocation.pathname+qr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${o}${s}`:o}pushState(r,o,s,i){let a=this.prepareExternalUrl(s+qr(i));this._platformLocation.pushState(r,o,a)}replaceState(r,o,s,i){let a=this.prepareExternalUrl(s+qr(i));this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(ce(Dm),ce(IS,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),TS=(()=>{let e=class e extends gs{constructor(r,o){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],o!=null&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let o=this._platformLocation.hash??"#";return o.length>0?o.substring(1):o}prepareExternalUrl(r){let o=Im(this._baseHref,r);return o.length>0?"#"+o:o}pushState(r,o,s,i){let a=this.prepareExternalUrl(s+qr(i));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,o,a)}replaceState(r,o,s,i){let a=this.prepareExternalUrl(s+qr(i));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(ce(Dm),ce(IS,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Ai=(()=>{let e=class e{constructor(r){this._subject=new qt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let o=this._locationStrategy.getBaseHref();this._basePath=iP(yS(vS(o))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,o=""){return this.path()==this.normalize(r+qr(o))}normalize(r){return e.stripTrailingSlash(sP(this._basePath,vS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,o="",s=null){this._locationStrategy.pushState(s,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+qr(o)),s)}replaceState(r,o="",s=null){this._locationStrategy.replaceState(s,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+qr(o)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}),()=>{let o=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",o){this._urlChangeListeners.forEach(s=>s(r,o))}subscribe(r,o,s){return this._subject.subscribe({next:r,error:o,complete:s})}};e.normalizeQueryParams=qr,e.joinWithSlash=Im,e.stripTrailingSlash=yS,e.\u0275fac=function(o){return new(o||e)(ce(gs))},e.\u0275prov=ie({token:e,factory:()=>oP(),providedIn:"root"});let t=e;return t})();function oP(){return new Ai(ce(gs))}function sP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function vS(t){return t.replace(/\/index.html$/,"")}function iP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function SS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(s)}return null}var NS=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=qn({type:e}),e.\u0275inj=Wn({});let t=e;return t})(),Sm="browser",aP="server";function uP(t){return t===Sm}function Nm(t){return t===aP}var CS=(()=>{let e=class e{};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>uP(q(xo))?new Em(q(nn),window):new xm});let t=e;return t})(),Em=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=cP(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],o-s[1])}};function cP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let s=o.shadowRoot;if(s){let i=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(i)return i}o=r.nextNode()}}return null}var xm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},uf=class{};var Am=class extends af{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Mm=class t extends Am{static makeCurrent(){xS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=fP();return n==null?null:dP(n)}resetBaseElement(){Ja=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return SS(document.cookie,e)}},Ja=null;function fP(){return Ja=Ja||document.querySelector("base"),Ja?Ja.getAttribute("href"):null}function dP(t){return new URL(t,document.baseURI).pathname}var km=class{addToWindow(e){zn.getAngularTestability=(r,o=!0)=>{let s=e.findTestabilityInTree(r,o);if(s==null)throw new ue(5103,!1);return s},zn.getAllAngularTestabilities=()=>e.getAllTestabilities(),zn.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let o=zn.getAllAngularTestabilities(),s=o.length,i=function(){s--,s==0&&r()};o.forEach(a=>{a.whenStable(i)})};zn.frameworkStabilizers||(zn.frameworkStabilizers=[]),zn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let o=e.getTestability(n);return o??(r?ms().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},pP=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Om=new de(""),kS=(()=>{let e=class e{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,s){return this._findPluginFor(o).addEventListener(r,o,s)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(i=>i.supports(r)),!o)throw new ue(5101,!1);return this._eventNameToPlugin.set(r,o),o}};e.\u0275fac=function(o){return new(o||e)(ce(Om),ce(Ke))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),cf=class{constructor(e){this._doc=e}},Cm="ng-app-id",OS=(()=>{let e=class e{constructor(r,o,s,i={}){this.doc=r,this.appId=o,this.nonce=s,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Nm(i),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(s=>s.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Cm}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(s=>{s.textContent!=null&&o.set(s.textContent,s)}),o}return null}changeUsageCount(r,o){let s=this.styleRef;if(s.has(r)){let i=s.get(r);return i.usage+=o,i.usage}return s.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let s=this.styleNodesInDOM,i=s?.get(o);if(i?.parentNode===r)return s.delete(o),i.removeAttribute(Cm),i;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(Cm,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let s=this.getStyleElement(r,o),i=this.styleRef,a=i.get(o)?.elements;a?a.push(s):i.set(o,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(o){return new(o||e)(ce(nn),ce(Yl),ce(nm,8),ce(xo))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),_m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Fm=/%COMP%/g,RS="%COMP%",hP=`_nghost-${RS}`,mP=`_ngcontent-${RS}`,gP=!0,yP=new de("",{providedIn:"root",factory:()=>gP});function vP(t){return mP.replace(Fm,t)}function wP(t){return hP.replace(Fm,t)}function FS(t,e){return e.map(n=>n.replace(Fm,t))}var _S=(()=>{let e=class e{constructor(r,o,s,i,a,u,c,f=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Nm(u),this.defaultRenderer=new eu(r,a,c,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===vr.ShadowDom&&(o=at(re({},o),{encapsulation:vr.Emulated}));let s=this.getOrCreateRenderer(r,o);return s instanceof lf?s.applyToHost(r):s instanceof tu&&s.applyStyles(),s}getOrCreateRenderer(r,o){let s=this.rendererByCompId,i=s.get(o.id);if(!i){let a=this.doc,u=this.ngZone,c=this.eventManager,f=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(o.encapsulation){case vr.Emulated:i=new lf(c,f,o,this.appId,d,a,u,p);break;case vr.ShadowDom:return new Rm(c,f,r,o,a,u,this.nonce,p);default:i=new tu(c,f,o,d,a,u,p);break}s.set(o.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(o){return new(o||e)(ce(kS),ce(OS),ce(Yl),ce(yP),ce(nn),ce(xo),ce(Ke),ce(nm))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),eu=class{constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(_m[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(AS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(AS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;let s=_m[o];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let o=_m[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(ds.DashCase|ds.Important)?e.style.setProperty(n,r,o&ds.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ds.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ms().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function AS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Rm=class extends eu{constructor(e,n,r,o,s,i,a,u){super(e,s,i,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=FS(o.id,o.styles);for(let f of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=f,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},tu=class extends eu{constructor(e,n,r,o,s,i,a,u){super(e,s,i,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=u?FS(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},lf=class extends tu{constructor(e,n,r,o,s,i,a,u){let c=o+"-"+r.id;super(e,n,r,s,i,a,u,c),this.contentAttr=vP(c),this.hostAttr=wP(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},bP=(()=>{let e=class e extends cf{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,s){return r.addEventListener(o,s,!1),()=>this.removeEventListener(r,o,s)}removeEventListener(r,o,s){return r.removeEventListener(o,s)}};e.\u0275fac=function(o){return new(o||e)(ce(nn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),MS=["alt","control","meta","shift"],EP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},DP=(()=>{let e=class e extends cf{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,o,s){let i=e.parseEventName(o),a=e.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ms().onAndCancel(r,i.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),s=o.shift();if(o.length===0||!(s==="keydown"||s==="keyup"))return null;let i=e._normalizeKey(o.pop()),a="",u=o.indexOf("code");if(u>-1&&(o.splice(u,1),a="code."),MS.forEach(f=>{let d=o.indexOf(f);d>-1&&(o.splice(d,1),a+=f+".")}),a+=i,o.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,o){let s=EP[r.key]||r.key,i="";return o.indexOf("code.")>-1&&(s=r.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),MS.forEach(a=>{if(a!==s){let u=xP[a];u(r)&&(i+=a+".")}}),i+=s,i===o)}static eventCallback(r,o,s){return i=>{e.matchEventFullKeyCode(i,r)&&s.runGuarded(()=>o(i))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(o){return new(o||e)(ce(nn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function IP(){Mm.makeCurrent()}function TP(){return new Er}function SP(){return xT(document),document}var NP=[{provide:xo,useValue:Sm},{provide:tm,useValue:IP,multi:!0},{provide:nn,useFactory:SP,deps:[]}],PS=wm(hS,"browser",NP),CP=new de(""),_P=[{provide:Ya,useClass:km,deps:[]},{provide:mm,useClass:nf,deps:[Ke,rf,Ya]},{provide:nf,useClass:nf,deps:[Ke,rf,Ya]}],AP=[{provide:Hl,useValue:"root"},{provide:Er,useFactory:TP,deps:[]},{provide:Om,useClass:bP,multi:!0,deps:[nn,Ke,xo]},{provide:Om,useClass:DP,multi:!0,deps:[nn]},_S,OS,kS,{provide:Ni,useExisting:_S},{provide:uf,useClass:pP,deps:[]},[]],$S=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Yl,useValue:r.appId}]}}};e.\u0275fac=function(o){return new(o||e)(ce(CP,12))},e.\u0275mod=qn({type:e}),e.\u0275inj=Wn({providers:[...AP,..._P],imports:[NS,mS]});let t=e;return t})();var LS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(o){return new(o||e)(ce(nn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Se="primary",gu=Symbol("RouteTitle"),jm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Pi(t){return new jm(t)}function MP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let o={};for(let s=0;s<r.length;s++){let i=r[s],a=t[s];if(i[0]===":")o[i.substring(1)]=a;else if(i!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function kP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!xr(t[n],e[n]))return!1;return!0}function xr(t,e){let n=t?Vm(t):void 0,r=e?Vm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let s=0;s<n.length;s++)if(o=n[s],!YS(t[o],e[o]))return!1;return!0}function Vm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function YS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((o,s)=>r[s]===o)}else return t===e}function QS(t){return t.length>0?t[t.length-1]:null}function To(t){return Gp(t)?t:Qa(t)?ut(Promise.resolve(t)):pe(t)}var OP={exact:JS,subset:eN},XS={exact:RP,subset:FP,ignored:()=>!0};function jS(t,e,n){return OP[n.paths](t.root,e.root,n.matrixParams)&&XS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function RP(t,e){return xr(t,e)}function JS(t,e,n){if(!vs(t.segments,e.segments)||!pf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!JS(t.children[r],e.children[r],n))return!1;return!0}function FP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>YS(t[n],e[n]))}function eN(t,e,n){return tN(t,e,e.segments,n)}function tN(t,e,n,r){if(t.segments.length>n.length){let o=t.segments.slice(0,n.length);return!(!vs(o,n)||e.hasChildren()||!pf(o,n,r))}else if(t.segments.length===n.length){if(!vs(t.segments,n)||!pf(t.segments,n,r))return!1;for(let o in e.children)if(!t.children[o]||!eN(t.children[o],e.children[o],r))return!1;return!0}else{let o=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!vs(t.segments,o)||!pf(t.segments,o,r)||!t.children[Se]?!1:tN(t.children[Se],e,s,r)}}function pf(t,e,n){return e.every((r,o)=>XS[n](t[o].parameters,r.parameters))}var Do=class{constructor(e=new Le([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Pi(this.queryParams),this._queryParamMap}toString(){return LP.serialize(this)}},Le=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hf(this)}},ys=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Pi(this.parameters),this._parameterMap}toString(){return rN(this)}};function PP(t,e){return vs(t,e)&&t.every((n,r)=>xr(n.parameters,e[r].parameters))}function vs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function $P(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===Se&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==Se&&(n=n.concat(e(o,r)))}),n}var yu=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>new $i,providedIn:"root"});let t=e;return t})(),$i=class{parse(e){let n=new Hm(e);return new Do(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${nu(e.root,!0)}`,r=VP(e.queryParams),o=typeof e.fragment=="string"?`#${BP(e.fragment)}`:"";return`${n}${r}${o}`}},LP=new $i;function hf(t){return t.segments.map(e=>rN(e)).join("/")}function nu(t,e){if(!t.hasChildren())return hf(t);if(e){let n=t.children[Se]?nu(t.children[Se],!1):"",r=[];return Object.entries(t.children).forEach(([o,s])=>{o!==Se&&r.push(`${o}:${nu(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$P(t,(r,o)=>o===Se?[nu(t.children[Se],!1)]:[`${o}:${nu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Se]!=null?`${hf(t)}/${n[0]}`:`${hf(t)}/(${n.join("//")})`}}function nN(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ff(t){return nN(t).replace(/%3B/gi,";")}function BP(t){return encodeURI(t)}function Um(t){return nN(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mf(t){return decodeURIComponent(t)}function VS(t){return mf(t.replace(/\+/g,"%20"))}function rN(t){return`${Um(t.path)}${jP(t.parameters)}`}function jP(t){return Object.entries(t).map(([e,n])=>`;${Um(e)}=${Um(n)}`).join("")}function VP(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${ff(n)}=${ff(o)}`).join("&"):`${ff(n)}=${ff(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var UP=/^[^\/()?;#]+/;function Pm(t){let e=t.match(UP);return e?e[0]:""}var HP=/^[^\/()?;=#]+/;function zP(t){let e=t.match(HP);return e?e[0]:""}var GP=/^[^=?&#]+/;function WP(t){let e=t.match(GP);return e?e[0]:""}var qP=/^[^&#]+/;function KP(t){let e=t.match(qP);return e?e[0]:""}var Hm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Se]=new Le(e,n)),r}parseSegment(){let e=Pm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new ys(mf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=zP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Pm(this.remaining);o&&(r=o,this.capture(r))}e[mf(n)]=mf(r)}parseQueryParam(e){let n=WP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=KP(this.remaining);i&&(r=i,this.capture(r))}let o=VS(n),s=VS(r);if(e.hasOwnProperty(o)){let i=e[o];Array.isArray(i)||(i=[i],e[o]=i),i.push(s)}else e[o]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Pm(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new ue(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Se);let i=this.parseChildren();n[s]=Object.keys(i).length===1?i[Se]:new Le([],i),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}};function oN(t){return t.segments.length>0?new Le([],{[Se]:t}):t}function sN(t){let e={};for(let[r,o]of Object.entries(t.children)){let s=sN(o);if(r===Se&&s.segments.length===0&&s.hasChildren())for(let[i,a]of Object.entries(s.children))e[i]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Le(t.segments,e);return ZP(n)}function ZP(t){if(t.numberOfChildren===1&&t.children[Se]){let e=t.children[Se];return new Le(t.segments.concat(e.segments),e.children)}return t}function uu(t){return t instanceof Do}function YP(t,e,n=null,r=null){let o=iN(t);return aN(o,e,n,r)}function iN(t){let e;function n(s){let i={};for(let u of s.children){let c=n(u);i[u.outlet]=c}let a=new Le(s.url,i);return s===t&&(e=a),a}let r=n(t.root),o=oN(r);return e??o}function aN(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return $m(o,o,o,n,r);let s=QP(e);if(s.toRoot())return $m(o,o,new Le([],{}),n,r);let i=XP(s,o,t),a=i.processChildren?su(i.segmentGroup,i.index,s.commands):cN(i.segmentGroup,i.index,s.commands);return $m(o,i.segmentGroup,a,n,r)}function gf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function cu(t){return typeof t=="object"&&t!=null&&t.outlets}function $m(t,e,n,r,o){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let i;t===e?i=n:i=uN(t,e,n);let a=oN(sN(i));return new Do(a,s,o)}function uN(t,e,n){let r={};return Object.entries(t.children).forEach(([o,s])=>{s===e?r[o]=n:r[o]=uN(s,e,n)}),new Le(t.segments,r)}var yf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&gf(r[0]))throw new ue(4003,!1);let o=r.find(cu);if(o&&o!==QS(r))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QP(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new yf(!0,0,t);let e=0,n=!1,r=t.reduce((o,s,i)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(s.segmentPath)return[...o,s.segmentPath]}return typeof s!="string"?[...o,s]:i===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,s]},[]);return new yf(n,e,r)}var Oi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function XP(t,e,n){if(t.isAbsolute)return new Oi(e,!0,0);if(!n)return new Oi(e,!1,NaN);if(n.parent===null)return new Oi(n,!0,0);let r=gf(t.commands[0])?0:1,o=n.segments.length-1+r;return JP(n,o,t.numberOfDoubleDots)}function JP(t,e,n){let r=t,o=e,s=n;for(;s>o;){if(s-=o,r=r.parent,!r)throw new ue(4005,!1);o=r.segments.length}return new Oi(r,!1,o-s)}function e$(t){return cu(t[0])?t[0].outlets:{[Se]:t}}function cN(t,e,n){if(t??=new Le([],{}),t.segments.length===0&&t.hasChildren())return su(t,e,n);let r=t$(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Le(t.segments.slice(0,r.pathIndex),{});return s.children[Se]=new Le(t.segments.slice(r.pathIndex),t.children),su(s,0,o)}else return r.match&&o.length===0?new Le(t.segments,{}):r.match&&!t.hasChildren()?zm(t,e,n):r.match?su(t,0,o):zm(t,e,n)}function su(t,e,n){if(n.length===0)return new Le(t.segments,{});{let r=e$(n),o={};if(Object.keys(r).some(s=>s!==Se)&&t.children[Se]&&t.numberOfChildren===1&&t.children[Se].segments.length===0){let s=su(t.children[Se],e,n);return new Le(t.segments,s.children)}return Object.entries(r).forEach(([s,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(o[s]=cN(t.children[s],e,i))}),Object.entries(t.children).forEach(([s,i])=>{r[s]===void 0&&(o[s]=i)}),new Le(t.segments,o)}}function t$(t,e,n){let r=0,o=e,s={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return s;let i=t.segments[o],a=n[r];if(cu(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!HS(u,c,i))return s;r+=2}else{if(!HS(u,{},i))return s;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function zm(t,e,n){let r=t.segments.slice(0,e),o=0;for(;o<n.length;){let s=n[o];if(cu(s)){let u=n$(s.outlets);return new Le(r,u)}if(o===0&&gf(n[0])){let u=t.segments[e];r.push(new ys(u.path,US(n[0]))),o++;continue}let i=cu(s)?s.outlets[Se]:`${s}`,a=o<n.length-1?n[o+1]:null;i&&a&&gf(a)?(r.push(new ys(i,US(a))),o+=2):(r.push(new ys(i,{})),o++)}return new Le(r,{})}function n$(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=zm(new Le([],{}),0,r))}),e}function US(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function HS(t,e,n){return t==n.path&&xr(e,n.parameters)}var iu="imperative",Dt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Dt||{}),kn=class{constructor(e,n){this.id=e,this.url=n}},Li=class extends kn{constructor(e,n,r="imperative",o=null){super(e,n),this.type=Dt.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zr=class extends kn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(yn||{}),vf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(vf||{}),Kr=class extends kn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=Dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Io=class extends kn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=Dt.NavigationSkipped}},lu=class extends kn{constructor(e,n,r,o){super(e,n),this.error=r,this.target=o,this.type=Dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wf=class extends kn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gm=class extends kn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wm=class extends kn{constructor(e,n,r,o,s){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=s,this.type=Dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qm=class extends kn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Km=class extends kn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zm=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ym=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qm=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xm=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jm=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eg=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},fu=class{},Bi=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var tg=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new vu(this.injector),this.attachRef=null}},vu=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,o){let s=this.getOrCreateContext(r);s.outlet=o,this.contexts.set(r,s)}onChildOutletDestroyed(r){let o=this.getContext(r);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let o=this.getContext(r);return o||(o=new tg(this.parentInjector),this.contexts.set(r,o)),o}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(o){return new(o||e)(ce(tn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ef=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ng(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ng(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=rg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return rg(e,this._root).map(n=>n.value)}};function ng(t,e){if(t===e.value)return e;for(let n of e.children){let r=ng(t,n);if(r)return r}return null}function rg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=rg(t,n);if(r.length)return r.unshift(e),r}return[]}var gn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ki(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var xf=class extends Ef{constructor(e,n){super(e),this.snapshot=n,dg(this,e)}toString(){return this.snapshot.toString()}};function lN(t){let e=r$(t),n=new At([new ys("",{})]),r=new At({}),o=new At({}),s=new At({}),i=new At(""),a=new ji(n,r,s,i,o,Se,t,e.root);return a.snapshot=e.root,new xf(new gn(a,[]),e)}function r$(t){let e={},n={},r={},o="",s=new Ri([],e,r,o,n,Se,t,null,{});return new If("",new gn(s,[]))}var ji=class{constructor(e,n,r,o,s,i,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=s,this.outlet=i,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Oe(c=>c[gu]))??pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Oe(e=>Pi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Oe(e=>Pi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Df(t,e,n="emptyOnly"){let r,{routeConfig:o}=t;return e!==null&&(n==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:re(re({},e.params),t.params),data:re(re({},e.data),t.data),resolve:re(re(re(re({},t.data),e.data),o?.data),t._resolvedData)}:r={params:re({},t.params),data:re({},t.data),resolve:re(re({},t.data),t._resolvedData??{})},o&&dN(o)&&(r.resolve[gu]=o.title),r}var Ri=class{get title(){return this.data?.[gu]}constructor(e,n,r,o,s,i,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=s,this.outlet=i,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},If=class extends Ef{constructor(e,n){super(n),this.url=e,dg(this,n)}toString(){return fN(this._root)}};function dg(t,e){e.value._routerState=t,e.children.forEach(n=>dg(t,n))}function fN(t){let e=t.children.length>0?` { ${t.children.map(fN).join(", ")} } `:"";return`${t.value}${e}`}function Lm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,xr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),xr(e.params,n.params)||t.paramsSubject.next(n.params),kP(e.url,n.url)||t.urlSubject.next(n.url),xr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function og(t,e){let n=xr(t.params,e.params)&&PP(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||og(t.parent,e.parent))}function dN(t){return typeof t.title=="string"||t.title===null}var o$=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Se,this.activateEvents=new qt,this.deactivateEvents=new qt,this.attachEvents=new qt,this.detachEvents=new qt,this.parentContexts=q(vu),this.location=q(Jl),this.changeDetector=q(Xa),this.inputBinder=q(_f,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:o,previousValue:s}=r.name;if(o)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,o){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new sg(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:o}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=Hh({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wl]});let t=e;return t})(),sg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ji?this.route:e===vu?this.childContexts:this.parent.get(e,n)}},_f=new de(""),zS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:o}=r,s=_a([o.queryParams,o.params,o.data]).pipe(Sn(([i,a,u],c)=>(u=re(re(re({},i),a),u),c===0?pe(u):Promise.resolve(u)))).subscribe(i=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==o||o.component===null){this.unsubscribeFromRouteData(r);return}let a=gS(o.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,i[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function s$(t,e,n){let r=du(t,e._root,n?n._root:void 0);return new xf(r,e)}function du(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let o=i$(t,e,n);return new gn(r,o)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let i=s.route;return i.value._futureSnapshot=e.value,i.children=e.children.map(a=>du(t,a)),i}}let r=a$(e.value),o=e.children.map(s=>du(t,s));return new gn(r,o)}}function i$(t,e,n){return e.children.map(r=>{for(let o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return du(t,r,o);return du(t,r)})}function a$(t){return new ji(new At(t.url),new At(t.params),new At(t.queryParams),new At(t.fragment),new At(t.data),t.outlet,t.component,t)}var pu=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},pN="ngNavigationCancelingError";function Tf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=uu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=hN(!1,yn.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function hN(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[pN]=!0,n.cancellationCode=e,n}function u$(t){return mN(t)&&uu(t.url)}function mN(t){return!!t&&t[pN]}var c$=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=Ul({type:e,selectors:[["ng-component"]],standalone:!0,features:[sS],decls:1,vars:0,template:function(o,s){o&1&&Za(0,"router-outlet")},dependencies:[o$],encapsulation:2});let t=e;return t})();function l$(t,e){return t.providers&&!t._injector&&(t._injector=ef(t.providers,e,`Route: ${t.path}`)),t._injector??e}function pg(t){let e=t.children&&t.children.map(pg),n=e?at(re({},t),{children:e}):re({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Se&&(n.component=c$),n}function Yn(t){return t.outlet||Se}function f$(t,e){let n=t.filter(r=>Yn(r)===e);return n.push(...t.filter(r=>Yn(r)!==e)),n}function wu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var d$=(t,e,n,r)=>Oe(o=>(new ig(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)),ig=class{constructor(e,n,r,o,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Lm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let o=ki(n);e.children.forEach(s=>{let i=s.value.outlet;this.deactivateRoutes(s,o[i],r),delete o[i]}),Object.values(o).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let o=e.value,s=n?n.value:null;if(o===s)if(o.component){let i=r.getContext(o.outlet);i&&this.deactivateChildRoutes(e,n,i.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,s=ki(e);for(let i of Object.values(s))this.deactivateRouteAndItsChildren(i,o);if(r&&r.outlet){let i=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,s=ki(e);for(let i of Object.values(s))this.deactivateRouteAndItsChildren(i,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let o=ki(n);e.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],r),this.forwardEvent(new eg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xm(e.value.snapshot))}activateRoutes(e,n,r){let o=e.value,s=n?n.value:null;if(Lm(o),o===s)if(o.component){let i=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,i.children)}else this.activateChildRoutes(e,n,r);else if(o.component){let i=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),i.children.onOutletReAttached(a.contexts),i.attachRef=a.componentRef,i.route=a.route.value,i.outlet&&i.outlet.attach(a.componentRef,a.route.value),Lm(a.route.value),this.activateChildRoutes(e,null,i.children)}else{let a=wu(o.snapshot);i.attachRef=null,i.route=o,i.injector=a??i.injector,i.outlet&&i.outlet.activateWith(o,i.injector),this.activateChildRoutes(e,null,i.children)}}else this.activateChildRoutes(e,null,r)}},Sf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fi=class{constructor(e,n){this.component=e,this.route=n}};function p$(t,e,n){let r=t._root,o=e?e._root:null;return ru(r,o,n,[r.value])}function h$(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ui(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!lI(t)?t:e.get(t):r}function ru(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=ki(e);return t.children.forEach(i=>{m$(i,s[i.value.outlet],n,r.concat([i.value]),o),delete s[i.value.outlet]}),Object.entries(s).forEach(([i,a])=>au(a,n.getContext(i),o)),o}function m$(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,i=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(i&&s.routeConfig===i.routeConfig){let u=g$(i,s,s.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new Sf(r)):(s.data=i.data,s._resolvedData=i._resolvedData),s.component?ru(t,e,a?a.children:null,r,o):ru(t,e,n,r,o),u&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Fi(a.outlet.component,i))}else i&&au(e,a,o),o.canActivateChecks.push(new Sf(r)),s.component?ru(t,null,a?a.children:null,r,o):ru(t,null,n,r,o);return o}function g$(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!vs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vs(t.url,e.url)||!xr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!og(t,e)||!xr(t.queryParams,e.queryParams);case"paramsChange":default:return!og(t,e)}}function au(t,e,n){let r=ki(t),o=t.value;Object.entries(r).forEach(([s,i])=>{o.component?e?au(i,e.children.getContext(s),n):au(i,null,n):au(i,e,n)}),o.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Fi(e.outlet.component,o)):n.canDeactivateChecks.push(new Fi(null,o)):n.canDeactivateChecks.push(new Fi(null,o))}function bu(t){return typeof t=="function"}function y$(t){return typeof t=="boolean"}function v$(t){return t&&bu(t.canLoad)}function w$(t){return t&&bu(t.canActivate)}function b$(t){return t&&bu(t.canActivateChild)}function E$(t){return t&&bu(t.canDeactivate)}function x$(t){return t&&bu(t.canMatch)}function gN(t){return t instanceof jr||t?.name==="EmptyError"}var df=Symbol("INITIAL_VALUE");function Vi(){return Sn(t=>_a(t.map(e=>e.pipe(Vr(1),Zp(df)))).pipe(Oe(e=>{for(let n of e)if(n!==!0){if(n===df)return df;if(n===!1||D$(n))return n}return!0}),Tn(e=>e!==df),Vr(1)))}function D$(t){return uu(t)||t instanceof pu}function I$(t,e){return ft(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:i}}=n;return i.length===0&&s.length===0?pe(at(re({},n),{guardsResult:!0})):T$(i,r,o,t).pipe(ft(a=>a&&y$(a)?S$(r,s,t,e):pe(a)),Oe(a=>at(re({},n),{guardsResult:a})))})}function T$(t,e,n,r){return ut(t).pipe(ft(o=>M$(o.component,o.route,n,e,r)),mr(o=>o!==!0,!0))}function S$(t,e,n,r){return ut(e).pipe(os(o=>fi(C$(o.route.parent,r),N$(o.route,r),A$(t,o.path,n),_$(t,o.route,n))),mr(o=>o!==!0,!0))}function N$(t,e){return t!==null&&e&&e(new Jm(t)),pe(!0)}function C$(t,e){return t!==null&&e&&e(new Qm(t)),pe(!0)}function _$(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let o=r.map(s=>dl(()=>{let i=wu(e)??n,a=Ui(s,i),u=w$(a)?a.canActivate(e,t):Kn(i,()=>a(e,t));return To(u).pipe(mr())}));return pe(o).pipe(Vi())}function A$(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(i=>h$(i)).filter(i=>i!==null).map(i=>dl(()=>{let a=i.guards.map(u=>{let c=wu(i.node)??n,f=Ui(u,c),d=b$(f)?f.canActivateChild(r,t):Kn(c,()=>f(r,t));return To(d).pipe(mr())});return pe(a).pipe(Vi())}));return pe(s).pipe(Vi())}function M$(t,e,n,r,o){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return pe(!0);let i=s.map(a=>{let u=wu(e)??o,c=Ui(a,u),f=E$(c)?c.canDeactivate(t,e,n,r):Kn(u,()=>c(t,e,n,r));return To(f).pipe(mr())});return pe(i).pipe(Vi())}function k$(t,e,n,r){let o=e.canLoad;if(o===void 0||o.length===0)return pe(!0);let s=o.map(i=>{let a=Ui(i,t),u=v$(a)?a.canLoad(e,n):Kn(t,()=>a(e,n));return To(u)});return pe(s).pipe(Vi(),yN(r))}function yN(t){return Vp(Mt(e=>{if(typeof e!="boolean")throw Tf(t,e)}),Oe(e=>e===!0))}function O$(t,e,n,r){let o=e.canMatch;if(!o||o.length===0)return pe(!0);let s=o.map(i=>{let a=Ui(i,t),u=x$(a)?a.canMatch(e,n):Kn(t,()=>a(e,n));return To(u)});return pe(s).pipe(Vi(),yN(r))}var hu=class{constructor(e){this.segmentGroup=e||null}},mu=class extends Error{constructor(e){super(),this.urlTree=e}};function Mi(t){return ci(new hu(t))}function R$(t){return ci(new ue(4e3,!1))}function F$(t){return ci(hN(!1,yn.GuardRejected))}var ag=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return pe(r);if(o.numberOfChildren>1||!o.children[Se])return R$(`${e.redirectTo}`);o=o.children[Se]}}applyRedirectCommands(e,n,r,o,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,params:m,data:b,title:I}=o,T=Kn(s,()=>a({params:m,data:b,queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,title:I}));if(T instanceof Do)throw new mu(T);n=T}let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new mu(i);return i}applyRedirectCreateUrlTree(e,n,r,o){let s=this.createSegmentGroup(e,n.root,r,o);return new Do(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([o,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[o]=n[a]}else r[o]=s}),r}createSegmentGroup(e,n,r,o){let s=this.createSegments(e,n.segments,r,o),i={};return Object.entries(n.children).forEach(([a,u])=>{i[a]=this.createSegmentGroup(e,u,r,o)}),new Le(s,i)}createSegments(e,n,r,o){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,o):this.findOrReturn(s,r))}findPosParam(e,n,r){let o=r[n.path.substring(1)];if(!o)throw new ue(4001,!1);return o}findOrReturn(e,n){let r=0;for(let o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}},ug={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function P$(t,e,n,r,o){let s=hg(t,e,n);return s.matched?(r=l$(e,r),O$(r,e,n,o).pipe(Oe(i=>i===!0?s:re({},ug)))):pe(s)}function hg(t,e,n){if(e.path==="**")return $$(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?re({},ug):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(e.matcher||MP)(n,t,e);if(!o)return re({},ug);let s={};Object.entries(o.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let i=o.consumed.length>0?re(re({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:i,positionalParamSegments:o.posParams??{}}}function $$(t){return{matched:!0,parameters:t.length>0?QS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function GS(t,e,n,r){return n.length>0&&j$(t,n,r)?{segmentGroup:new Le(e,B$(r,new Le(n,t.children))),slicedSegments:[]}:n.length===0&&V$(t,n,r)?{segmentGroup:new Le(t.segments,L$(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Le(t.segments,t.children),slicedSegments:n}}function L$(t,e,n,r){let o={};for(let s of n)if(Af(t,e,s)&&!r[Yn(s)]){let i=new Le([],{});o[Yn(s)]=i}return re(re({},r),o)}function B$(t,e){let n={};n[Se]=e;for(let r of t)if(r.path===""&&Yn(r)!==Se){let o=new Le([],{});n[Yn(r)]=o}return n}function j$(t,e,n){return n.some(r=>Af(t,e,r)&&Yn(r)!==Se)}function V$(t,e,n){return n.some(r=>Af(t,e,r))}function Af(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function U$(t,e,n,r){return Yn(t)!==r&&(r===Se||!Af(e,n,t))?!1:hg(e,t,n).matched}function H$(t,e,n){return e.length===0&&!t.children[n]}var cg=class{};function z$(t,e,n,r,o,s,i="emptyOnly"){return new lg(t,e,n,r,o,i,s).recognize()}var G$=31,lg=class{constructor(e,n,r,o,s,i,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=s,this.paramsInheritanceStrategy=i,this.urlSerializer=a,this.applyRedirects=new ag(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ue(4002,`'${e.segmentGroup}'`)}recognize(){let e=GS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Oe(({children:n,rootSnapshot:r})=>{let o=new gn(r,n),s=new If("",o),i=YP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return i.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(i),{state:s,tree:i}}))}match(e){let n=new Ri([],Object.freeze({}),Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Se,n).pipe(Oe(r=>({children:r,rootSnapshot:n})),po(r=>{if(r instanceof mu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,o,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,o,!0,s).pipe(Oe(i=>i instanceof gn?[i]:[]))}processChildren(e,n,r,o){let s=[];for(let i of Object.keys(r.children))i==="primary"?s.unshift(i):s.push(i);return ut(s).pipe(os(i=>{let a=r.children[i],u=f$(n,i);return this.processSegmentGroup(e,u,a,i,o)}),Kp((i,a)=>(i.push(...a),i)),ho(null),qp(),ft(i=>{if(i===null)return Mi(r);let a=vN(i);return W$(a),pe(a)}))}processSegment(e,n,r,o,s,i,a){return ut(n).pipe(os(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,o,s,i,a).pipe(po(c=>{if(c instanceof hu)return pe(null);throw c}))),mr(u=>!!u),po(u=>{if(gN(u))return H$(r,o,s)?pe(new cg):Mi(r);throw u}))}processSegmentAgainstRoute(e,n,r,o,s,i,a,u){return U$(r,o,s,i)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,s,i,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,s,i,u):Mi(o):Mi(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,s,i,a){let{matched:u,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:p}=hg(n,o,s);if(!u)return Mi(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>G$&&(this.allowRedirects=!1));let m=new Ri(s,c,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,WS(o),Yn(o),o.component??o._loadedComponent??null,o,qS(o)),b=Df(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(b.params),m.data=Object.freeze(b.data);let I=this.applyRedirects.applyRedirectCommands(f,o.redirectTo,d,m,e);return this.applyRedirects.lineralizeSegments(o,I).pipe(ft(T=>this.processSegment(e,r,n,T.concat(p),i,!1,a)))}matchSegmentAgainstRoute(e,n,r,o,s,i){let a=P$(n,r,o,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Sn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(Sn(({routes:c})=>{let f=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:m}=u,b=new Ri(p,d,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,WS(r),Yn(r),r.component??r._loadedComponent??null,r,qS(r)),I=Df(b,i,this.paramsInheritanceStrategy);b.params=Object.freeze(I.params),b.data=Object.freeze(I.data);let{segmentGroup:T,slicedSegments:_}=GS(n,p,m,c);if(_.length===0&&T.hasChildren())return this.processChildren(f,c,T,b).pipe(Oe(A=>new gn(b,A)));if(c.length===0&&_.length===0)return pe(new gn(b,[]));let O=Yn(r)===s;return this.processSegment(f,c,T,_,O?Se:s,!0,b).pipe(Oe(A=>new gn(b,A instanceof gn?[A]:[])))}))):Mi(n)))}getChildConfig(e,n,r){return n.children?pe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):k$(e,n,r,this.urlSerializer).pipe(ft(o=>o?this.configLoader.loadChildren(e,n).pipe(Mt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):F$(n))):pe({routes:[],injector:e})}};function W$(t){t.sort((e,n)=>e.value.outlet===Se?-1:n.value.outlet===Se?1:e.value.outlet.localeCompare(n.value.outlet))}function q$(t){let e=t.value.routeConfig;return e&&e.path===""}function vN(t){let e=[],n=new Set;for(let r of t){if(!q$(r)){e.push(r);continue}let o=e.find(s=>r.value.routeConfig===s.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):e.push(r)}for(let r of n){let o=vN(r.children);e.push(new gn(r.value,o))}return e.filter(r=>!n.has(r))}function WS(t){return t.data||{}}function qS(t){return t.resolve||{}}function K$(t,e,n,r,o,s){return ft(i=>z$(t,e,n,r,i.extractedUrl,o,s).pipe(Oe(({state:a,tree:u})=>at(re({},i),{targetSnapshot:a,urlAfterRedirects:u}))))}function Z$(t,e){return ft(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return pe(n);let s=new Set(o.map(u=>u.route)),i=new Set;for(let u of s)if(!i.has(u))for(let c of wN(u))i.add(c);let a=0;return ut(i).pipe(os(u=>s.has(u)?Y$(u,r,t,e):(u.data=Df(u,u.parent,t).resolve,pe(void 0))),Mt(()=>a++),di(1),ft(u=>a===i.size?pe(n):hn))})}function wN(t){let e=t.children.map(n=>wN(n)).flat();return[t,...e]}function Y$(t,e,n,r){let o=t.routeConfig,s=t._resolve;return o?.title!==void 0&&!dN(o)&&(s[gu]=o.title),Q$(s,t,e,r).pipe(Oe(i=>(t._resolvedData=i,t.data=Df(t,t.parent,n).resolve,null)))}function Q$(t,e,n,r){let o=Vm(t);if(o.length===0)return pe({});let s={};return ut(o).pipe(ft(i=>X$(t[i],e,n,r).pipe(mr(),Mt(a=>{if(a instanceof pu)throw Tf(new $i,a);s[i]=a}))),di(1),Wp(s),po(i=>gN(i)?hn:ci(i)))}function X$(t,e,n,r){let o=wu(e)??r,s=Ui(t,o),i=s.resolve?s.resolve(e,n):Kn(o,()=>s(e,n));return To(i)}function Bm(t){return Sn(e=>{let n=t(e);return n?ut(n).pipe(Oe(()=>e)):pe(e)})}var bN=(()=>{let e=class e{buildTitle(r){let o,s=r.root;for(;s!==void 0;)o=this.getResolvedTitleForRoute(s)??o,s=s.children.find(i=>i.outlet===Se);return o}getResolvedTitleForRoute(r){return r.data[gu]}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>q(J$),providedIn:"root"});let t=e;return t})(),J$=(()=>{let e=class e extends bN{constructor(r){super(),this.title=r}updateTitle(r){let o=this.buildTitle(r);o!==void 0&&this.title.setTitle(o)}};e.\u0275fac=function(o){return new(o||e)(ce(LS))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Eu=new de("",{providedIn:"root",factory:()=>({})}),Nf=new de(""),mg=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=q(sf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=To(r.loadComponent()).pipe(Oe(EN),Mt(i=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=i}),Aa(()=>{this.componentLoaders.delete(r)})),s=new ui(o,()=>new Wt).pipe(ai());return this.componentLoaders.set(r,s),s}loadChildren(r,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return pe({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let i=eL(o,this.compiler,r,this.onLoadEndListener).pipe(Aa(()=>{this.childrenLoaders.delete(o)})),a=new ui(i,()=>new Wt).pipe(ai());return this.childrenLoaders.set(o,a),a}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eL(t,e,n,r){return To(t.loadChildren()).pipe(Oe(EN),ft(o=>o instanceof Va||Array.isArray(o)?pe(o):ut(e.compileModuleAsync(o))),Oe(o=>{r&&r(t);let s,i,a=!1;return Array.isArray(o)?(i=o,a=!0):(s=o.create(n).injector,i=s.get(Nf,[],{optional:!0,self:!0}).flat()),{routes:i.map(pg),injector:s}}))}function tL(t){return t&&typeof t=="object"&&"default"in t}function EN(t){return tL(t)?t.default:t}var gg=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>q(nL),providedIn:"root"});let t=e;return t})(),nL=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,o){return r}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xN=new de(""),DN=new de("");function rL(t,e,n){let r=t.get(DN),o=t.get(nn);return t.get(Ke).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,i=new Promise(c=>{s=c}),a=o.startViewTransition(()=>(s(),oL(t))),{onViewTransitionCreated:u}=r;return u&&Kn(t,()=>u({transition:a,from:e,to:n})),i})}function oL(t){return new Promise(e=>{Xl(e,{injector:t})})}var sL=new de(""),yg=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Wt,this.transitionAbortSubject=new Wt,this.configLoader=q(mg),this.environmentInjector=q(tn),this.urlSerializer=q(yu),this.rootContexts=q(vu),this.location=q(Ai),this.inputBindingEnabled=q(_f,{optional:!0})!==null,this.titleStrategy=q(bN),this.options=q(Eu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=q(gg),this.createViewTransition=q(xN,{optional:!0}),this.navigationErrorHandler=q(sL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Zm(s)),o=s=>this.events.next(new Ym(s));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let o=++this.navigationId;this.transitions?.next(at(re(re({},this.transitions.value),r),{id:o}))}setupNavigations(r,o,s){return this.transitions=new At({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:iu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tn(i=>i.id!==0),Oe(i=>at(re({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Sn(i=>{let a=!1,u=!1;return pe(i).pipe(Sn(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",yn.SupersededByNewNavigation),hn;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?at(re({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!f&&d!=="reload"){let p="";return this.events.next(new Io(c.id,this.urlSerializer.serialize(c.rawUrl),p,vf.IgnoredSameUrlNavigation)),c.resolve(!1),hn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return pe(c).pipe(Sn(p=>{let m=this.transitions?.getValue();return this.events.next(new Li(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?hn:Promise.resolve(p)}),K$(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(p=>{i.targetSnapshot=p.targetSnapshot,i.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=at(re({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new wf(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:b,restoredState:I,extras:T}=c,_=new Li(p,this.urlSerializer.serialize(m),b,I);this.events.next(_);let O=lN(this.rootComponentType).snapshot;return this.currentTransition=i=at(re({},c),{targetSnapshot:O,urlAfterRedirects:m,extras:at(re({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,pe(i)}else{let p="";return this.events.next(new Io(c.id,this.urlSerializer.serialize(c.extractedUrl),p,vf.IgnoredByUrlHandlingStrategy)),c.resolve(!1),hn}}),Mt(c=>{let f=new Gm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Oe(c=>(this.currentTransition=i=at(re({},c),{guards:p$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),i)),I$(this.environmentInjector,c=>this.events.next(c)),Mt(c=>{if(i.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Tf(this.urlSerializer,c.guardsResult);let f=new Wm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),Tn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",yn.GuardRejected),!1)),Bm(c=>{if(c.guards.canActivateChecks.length)return pe(c).pipe(Mt(f=>{let d=new qm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}),Sn(f=>{let d=!1;return pe(f).pipe(Z$(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(f,"",yn.NoDataFromResolver)}}))}),Mt(f=>{let d=new Km(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}))}),Bm(c=>{let f=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(Mt(m=>{d.component=m}),Oe(()=>{})));for(let m of d.children)p.push(...f(m));return p};return _a(f(c.targetSnapshot.root)).pipe(ho(null),Vr(1))}),Bm(()=>this.afterPreactivation()),Sn(()=>{let{currentSnapshot:c,targetSnapshot:f}=i,d=this.createViewTransition?.(this.environmentInjector,c.root,f.root);return d?ut(d).pipe(Oe(()=>i)):pe(i)}),Oe(c=>{let f=s$(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i=at(re({},c),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,i}),Mt(()=>{this.events.next(new fu)}),d$(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Vr(1),Mt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Yp(this.transitionAbortSubject.pipe(Mt(c=>{throw c}))),Aa(()=>{!a&&!u&&this.cancelNavigationTransition(i,"",yn.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),po(c=>{if(u=!0,mN(c))this.events.next(new Kr(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),u$(c)?this.events.next(new Bi(c.url,c.navigationBehaviorOptions)):i.resolve(!1);else{let f=new lu(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0);try{let d=Kn(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(d instanceof pu){let{message:p,cancellationCode:m}=Tf(this.urlSerializer,d);this.events.next(new Kr(i.id,this.urlSerializer.serialize(i.extractedUrl),p,m)),this.events.next(new Bi(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(f);let p=r.errorHandler(c);i.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(d)}}return hn}))}))}cancelNavigationTransition(r,o,s){let i=new Kr(r.id,this.urlSerializer.serialize(r.extractedUrl),o,s);this.events.next(i),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iL(t){return t!==iu}var aL=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>q(uL),providedIn:"root"});let t=e;return t})(),fg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},uL=(()=>{let e=class e extends fg{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Xh(e)))(s||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IN=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:()=>q(cL),providedIn:"root"});let t=e;return t})(),cL=(()=>{let e=class e extends IN{constructor(){super(...arguments),this.location=q(Ai),this.urlSerializer=q(yu),this.options=q(Eu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=q(gg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Do,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=lN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(o=>{o.type==="popstate"&&r(o.url,o.state)})}handleRouterEvent(r,o){if(r instanceof Li)this.stateMemento=this.createStateMemento();else if(r instanceof Io)this.rawUrlTree=o.initialUrl;else if(r instanceof wf){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(s,o)}}else r instanceof fu?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):r instanceof Kr&&(r.code===yn.GuardRejected||r.code===yn.NoDataFromResolver)?this.restoreHistory(o):r instanceof lu?this.restoreHistory(o,!0):r instanceof Zr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,o){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||o.extras.replaceUrl){let i=this.browserPageId,a=re(re({},o.extras.state),this.generateNgRouterState(o.id,i));this.location.replaceState(s,"",a)}else{let i=re(re({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(s,"",i)}}restoreHistory(r,o=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.currentUrlTree===r.finalUrl&&i===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,o){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:o}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Xh(e)))(s||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ou=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ou||{});function TN(t,e){t.events.pipe(Tn(n=>n instanceof Zr||n instanceof Kr||n instanceof lu||n instanceof Io),Oe(n=>n instanceof Zr||n instanceof Io?ou.COMPLETE:(n instanceof Kr?n.code===yn.Redirect||n.code===yn.SupersededByNewNavigation:!1)?ou.REDIRECTING:ou.FAILED),Tn(n=>n!==ou.REDIRECTING),Vr(1)).subscribe(()=>{e()})}function lL(t){throw t}var fL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ws=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=q(tf),this.stateManager=q(IN),this.options=q(Eu,{optional:!0})||{},this.pendingTasks=q(_i),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=q(yg),this.urlSerializer=q(yu),this.location=q(Ai),this.urlHandlingStrategy=q(gg),this._events=new Wt,this.errorHandler=this.options.errorHandler||lL,this.navigated=!1,this.routeReuseStrategy=q(aL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=q(Nf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!q(_f,{optional:!0}),this.eventsSubscription=new lt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(o=>{try{let s=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(o,i),o instanceof Kr&&o.code!==yn.Redirect&&o.code!==yn.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Zr)this.navigated=!0;else if(o instanceof Bi){let a=o.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(o.url,s.currentRawUrl),c=re({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||iL(s.source)},a);this.scheduleNavigation(u,iu,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}hL(o)&&this._events.next(o)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),iu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",o)},0)})}navigateToSyncWithBrowser(r,o,s){let i={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=re({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,o,a,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(pg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,o={}){let{relativeTo:s,queryParams:i,fragment:a,queryParamsHandling:u,preserveFragment:c}=o,f=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=re(re({},this.currentUrlTree.queryParams),i);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=i||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let m=s?s.snapshot:this.routerState.snapshot.root;p=iN(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return aN(p,r,d,f??null)}navigateByUrl(r,o={skipLocationChange:!1}){let s=uu(r)?r:this.parseUrl(r),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,iu,null,o)}navigate(r,o={skipLocationChange:!1}){return pL(r),this.navigateByUrl(this.createUrlTree(r,o),o)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,o){let s;if(o===!0?s=re({},fL):o===!1?s=re({},dL):s=o,uu(r))return jS(this.currentUrlTree,r,s);let i=this.parseUrl(r);return jS(this.currentUrlTree,i,s)}removeEmptyProps(r){return Object.entries(r).reduce((o,[s,i])=>(i!=null&&(o[s]=i),o),{})}scheduleNavigation(r,o,s,i,a){if(this.disposed)return Promise.resolve(!1);let u,c,f;a?(u=a.resolve,c=a.reject,f=a.promise):f=new Promise((p,m)=>{u=p,c=m});let d=this.pendingTasks.add();return TN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:i,resolve:u,reject:c,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(p=>Promise.reject(p))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ue(4008,!1)}function hL(t){return!(t instanceof fu)&&!(t instanceof Bi)}var Cf=class{};var mL=(()=>{let e=class e{constructor(r,o,s,i,a){this.router=r,this.injector=s,this.preloadingStrategy=i,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Tn(r=>r instanceof Zr),os(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,o){let s=[];for(let i of o){i.providers&&!i._injector&&(i._injector=ef(i.providers,r,`Route: ${i.path}`));let a=i._injector??r,u=i._loadedInjector??a;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&s.push(this.preloadConfig(a,i)),(i.children||i._loadedRoutes)&&s.push(this.processRoutes(u,i.children??i._loadedRoutes))}return ut(s).pipe(li())}preloadConfig(r,o){return this.preloadingStrategy.preload(o,()=>{let s;o.loadChildren&&o.canLoad===void 0?s=this.loader.loadChildren(r,o):s=pe(null);let i=s.pipe(ft(a=>a===null?pe(void 0):(o._loadedRoutes=a.routes,o._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(o.loadComponent&&!o._loadedComponent){let a=this.loader.loadComponent(o);return ut([i,a]).pipe(li())}else return i})}};e.\u0275fac=function(o){return new(o||e)(ce(ws),ce(sf),ce(tn),ce(Cf),ce(mg))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),SN=new de(""),gL=(()=>{let e=class e{constructor(r,o,s,i,a={}){this.urlSerializer=r,this.transitions=o,this.viewportScroller=s,this.zone=i,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=q(tn),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Li?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Zr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Io&&r.code===vf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof bf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,o){this.zone.runOutsideAngular(()=>L(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Xl(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new bf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,o))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(o){FT()},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function yL(t){return t.routerState.root}function xu(t,e){return{\u0275kind:t,\u0275providers:e}}function vL(){let t=q(Mn);return e=>{let n=t.get(ps);if(e!==n.components[0])return;let r=t.get(ws),o=t.get(NN);t.get(vg)===1&&r.initialNavigation(),t.get(CN,null,Ce.Optional)?.setUpPreloading(),t.get(SN,null,Ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var NN=new de("",{factory:()=>new Wt}),vg=new de("",{providedIn:"root",factory:()=>1});function wL(){return xu(2,[{provide:vg,useValue:0},{provide:of,multi:!0,deps:[Mn],useFactory:e=>{let n=e.get(DS,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let o=e.get(ws),s=e.get(NN);TN(o,()=>{r(!0)}),e.get(yg).afterPreactivation=()=>(r(!0),s.closed?pe(void 0):s),o.initialNavigation()}))}}])}function bL(){return xu(3,[{provide:of,multi:!0,useFactory:()=>{let e=q(ws);return()=>{e.setUpLocationChangeListener()}}},{provide:vg,useValue:2}])}var CN=new de("");function EL(t){return xu(0,[{provide:CN,useExisting:mL},{provide:Cf,useExisting:t}])}function xL(){return xu(8,[zS,{provide:_f,useExisting:zS}])}function DL(t){let e=[{provide:xN,useValue:rL},{provide:DN,useValue:re({skipNextTransition:!!t?.skipInitialTransition},t)}];return xu(9,e)}var KS=new de("ROUTER_FORROOT_GUARD"),IL=[Ai,{provide:yu,useClass:$i},ws,vu,{provide:ji,useFactory:yL,deps:[ws]},mg,[]],wg=(()=>{let e=class e{constructor(r){}static forRoot(r,o){return{ngModule:e,providers:[IL,[],{provide:Nf,multi:!0,useValue:r},{provide:KS,useFactory:CL,deps:[[ws,new Bh,new yI]]},{provide:Eu,useValue:o||{}},o?.useHash?SL():NL(),TL(),o?.preloadingStrategy?EL(o.preloadingStrategy).\u0275providers:[],o?.initialNavigation?_L(o):[],o?.bindToComponentInputs?xL().\u0275providers:[],o?.enableViewTransitions?DL().\u0275providers:[],AL()]}}static forChild(r){return{ngModule:e,providers:[{provide:Nf,multi:!0,useValue:r}]}}};e.\u0275fac=function(o){return new(o||e)(ce(KS,8))},e.\u0275mod=qn({type:e}),e.\u0275inj=Wn({});let t=e;return t})();function TL(){return{provide:SN,useFactory:()=>{let t=q(CS),e=q(Ke),n=q(Eu),r=q(yg),o=q(yu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new gL(o,r,t,e,n)}}}function SL(){return{provide:gs,useClass:TS}}function NL(){return{provide:gs,useClass:Tm}}function CL(t){return"guarded"}function _L(t){return[t.initialNavigation==="disabled"?bL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?wL().\u0275providers:[]]}var ZS=new de("");function AL(){return[{provide:ZS,useFactory:vL},{provide:ym,multi:!0,useExisting:ZS}]}var ML=[],_N=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=qn({type:e}),e.\u0275inj=Wn({imports:[wg.forRoot(ML),wg]});let t=e;return t})();var ZE={};_e(ZE,{SupportedModels:()=>Qs,blurBodyPart:()=>X8,bodyPixMaskValueToRainbowColor:()=>r8,createSegmenter:()=>qE,drawBokehEffect:()=>Y8,drawMask:()=>q8,drawPixelatedMask:()=>K8,toBinaryMask:()=>Fc,toColoredMask:()=>W8});var Ic={};_e(Ic,{Abs:()=>Cg,Acos:()=>_g,Acosh:()=>Ag,AdadeltaOptimizer:()=>jo,AdagradOptimizer:()=>Vo,AdamOptimizer:()=>Uo,AdamaxOptimizer:()=>Ho,Add:()=>Tu,AddN:()=>Mg,All:()=>kg,Any:()=>Og,ArgMax:()=>Rg,ArgMin:()=>Fg,Asin:()=>Pg,Asinh:()=>$g,Atan:()=>Lg,Atan2:()=>jg,Atanh:()=>Bg,AvgPool:()=>Vg,AvgPool3D:()=>Ug,AvgPool3DGrad:()=>e3,AvgPoolGrad:()=>JL,BatchMatMul:()=>Hg,BatchToSpaceND:()=>zg,Bincount:()=>Gg,BitwiseAnd:()=>Wg,BroadcastArgs:()=>qg,BroadcastTo:()=>t3,Cast:()=>Su,Ceil:()=>Kg,ClipByValue:()=>Zg,Complex:()=>Yg,ComplexAbs:()=>Qg,Concat:()=>Xg,Conv2D:()=>Jg,Conv2DBackpropFilter:()=>ey,Conv2DBackpropInput:()=>ty,Conv3D:()=>ny,Conv3DBackpropFilterV2:()=>n3,Conv3DBackpropInputV2:()=>ry,Cos:()=>oy,Cosh:()=>sy,CropAndResize:()=>uy,Cumprod:()=>iy,Cumsum:()=>ay,DataStorage:()=>Mf,DenseBincount:()=>cy,DepthToSpace:()=>ly,DepthwiseConv2dNative:()=>fy,DepthwiseConv2dNativeBackpropFilter:()=>dy,DepthwiseConv2dNativeBackpropInput:()=>py,Diag:()=>hy,Dilation2D:()=>my,Dilation2DBackpropFilter:()=>o3,Dilation2DBackpropInput:()=>r3,Draw:()=>Ff,ENV:()=>Rf,Einsum:()=>yy,Elu:()=>vy,EluGrad:()=>s3,Environment:()=>Ki,Equal:()=>by,Erf:()=>wy,Exp:()=>Ey,ExpandDims:()=>xy,Expm1:()=>Dy,FFT:()=>Iy,Fill:()=>Ty,FlipLeftRight:()=>Sy,Floor:()=>Ny,FloorDiv:()=>Cy,FromPixels:()=>Pf,FusedBatchNorm:()=>_y,FusedConv2D:()=>Lf,FusedDepthwiseConv2D:()=>Bf,GatherNd:()=>My,GatherV2:()=>Ay,Greater:()=>ky,GreaterEqual:()=>Oy,IFFT:()=>Ry,Identity:()=>Nu,Imag:()=>Fy,IsFinite:()=>Py,IsInf:()=>$y,IsNan:()=>Ly,KernelBackend:()=>Hi,LRN:()=>Ky,LRNGrad:()=>c3,LeakyRelu:()=>By,Less:()=>jy,LessEqual:()=>Vy,LinSpace:()=>Uy,Log:()=>Hy,Log1p:()=>zy,LogSoftmax:()=>a3,LogicalAnd:()=>Gy,LogicalNot:()=>Wy,LogicalOr:()=>qy,LogicalXor:()=>i3,LowerBound:()=>u3,MatrixBandPart:()=>l3,Max:()=>Zy,MaxPool:()=>Qy,MaxPool3D:()=>Xy,MaxPool3DGrad:()=>d3,MaxPoolGrad:()=>f3,MaxPoolWithArgmax:()=>Jy,Maximum:()=>Yy,Mean:()=>ev,Min:()=>tv,Minimum:()=>nv,MirrorPad:()=>rv,Mod:()=>ov,MomentumOptimizer:()=>zo,Multinomial:()=>sv,Multiply:()=>iv,Neg:()=>av,NonMaxSuppressionV3:()=>cv,NonMaxSuppressionV4:()=>lv,NonMaxSuppressionV5:()=>fv,NotEqual:()=>uv,OP_SCOPE_SUFFIX:()=>Yf,OneHot:()=>pv,OnesLike:()=>dv,Optimizer:()=>Ft,OptimizerConstructors:()=>pa,Pack:()=>hv,PadV2:()=>mv,Pool:()=>p3,Pow:()=>gv,Prelu:()=>yv,Prod:()=>vv,RMSPropOptimizer:()=>Go,RaggedGather:()=>wv,RaggedRange:()=>bv,RaggedTensorToTensor:()=>Ev,Range:()=>xv,Rank:()=>Tw,Real:()=>Dv,RealDiv:()=>gy,Reciprocal:()=>Iv,Reduction:()=>et,Relu:()=>Tv,Relu6:()=>_v,Reshape:()=>Sv,ResizeBilinear:()=>Cv,ResizeBilinearGrad:()=>m3,ResizeNearestNeighbor:()=>Nv,ResizeNearestNeighborGrad:()=>h3,Reverse:()=>Av,RotateWithOffset:()=>gw,Round:()=>Mv,Rsqrt:()=>kv,SGDOptimizer:()=>Fr,ScatterNd:()=>Ov,SearchSorted:()=>Fv,Select:()=>Pv,Selu:()=>$v,Sigmoid:()=>Uv,Sign:()=>Vv,Sin:()=>Bv,Sinh:()=>jv,Slice:()=>Lv,Softmax:()=>Kv,Softplus:()=>Hv,SpaceToBatchND:()=>Wv,SparseFillEmptyRows:()=>Zv,SparseReshape:()=>Yv,SparseSegmentMean:()=>Qv,SparseSegmentSum:()=>Xv,SparseToDense:()=>Jv,SplitV:()=>qv,Sqrt:()=>zv,Square:()=>g3,SquaredDifference:()=>ew,StaticRegexReplace:()=>tw,Step:()=>mw,StridedSlice:()=>nw,StringNGrams:()=>rw,StringSplit:()=>ow,StringToHashBucketFast:()=>sw,Sub:()=>iw,Sum:()=>Gv,Tan:()=>aw,Tanh:()=>uw,Tensor:()=>ye,TensorBuffer:()=>Qr,TensorScatterUpdate:()=>Rv,Tile:()=>Cu,TopK:()=>cw,Transform:()=>lw,Transpose:()=>_u,Unique:()=>fw,Unpack:()=>dw,UnsortedSegmentSum:()=>pw,UpperBound:()=>y3,Variable:()=>Sr,ZerosLike:()=>hw,_FusedMatMul:()=>$f,abs:()=>pt,acos:()=>Vw,acosh:()=>Uw,add:()=>Y,addN:()=>Hw,all:()=>zw,any:()=>Gw,argMax:()=>Uu,argMin:()=>Ww,asin:()=>qw,asinh:()=>Kw,atan:()=>Zw,atan2:()=>Yw,atanh:()=>Qw,avgPool:()=>Gu,avgPool3d:()=>t0,backend:()=>Lu,backend_util:()=>fE,basicLSTMCell:()=>n0,batchNorm:()=>to,batchNorm2d:()=>r0,batchNorm3d:()=>o0,batchNorm4d:()=>s0,batchToSpaceND:()=>Wu,bincount:()=>qu,bitwiseAnd:()=>i0,booleanMaskAsync:()=>yC,broadcastArgs:()=>a0,broadcastTo:()=>Ps,broadcast_util:()=>Ls,browser:()=>ar,buffer:()=>St,cast:()=>ae,ceil:()=>u0,clipByValue:()=>c0,clone:()=>Yt,complex:()=>Lt,concat:()=>Be,concat1d:()=>l0,concat2d:()=>f0,concat3d:()=>d0,concat4d:()=>p0,conv1d:()=>h0,conv2d:()=>no,conv2dTranspose:()=>m0,conv3d:()=>g0,conv3dTranspose:()=>y0,copyRegisteredKernels:()=>x3,cos:()=>v0,cosh:()=>w0,cosineWindow:()=>fa,cumprod:()=>b0,cumsum:()=>E0,customGrad:()=>Ot,denseBincount:()=>x0,deprecationWarn:()=>h1,depthToSpace:()=>D0,depthwiseConv2d:()=>$s,device_util:()=>Zf,diag:()=>I0,dilation2d:()=>T0,disableDeprecationWarnings:()=>K3,dispose:()=>Je,disposeVariables:()=>Z3,div:()=>ve,divNoNan:()=>S0,dot:()=>N0,dropout:()=>IC,einsum:()=>ro,elu:()=>Ku,enableDebugMode:()=>q3,enableProdMode:()=>W3,enclosingPowerOfTwo:()=>hd,engine:()=>Qf,ensureShape:()=>C0,env:()=>X,equal:()=>ko,erf:()=>_0,euclideanNorm:()=>M0,exp:()=>wn,expandDims:()=>wt,expm1:()=>k0,eye:()=>Zu,fft:()=>Hs,fill:()=>nr,findBackend:()=>nB,findBackendFactory:()=>rB,floor:()=>Yu,floorDiv:()=>Vu,fused:()=>md,gather:()=>Qu,gatherND:()=>xC,gather_util:()=>aE,getBackend:()=>$u,getGradient:()=>jf,getKernel:()=>Ds,getKernelsForBackend:()=>Mu,grad:()=>q1,grads:()=>K1,greater:()=>Mr,greaterEqual:()=>Xu,ifft:()=>Lo,imag:()=>io,image:()=>Bo,inTopKAsync:()=>TC,io:()=>da,irfft:()=>mc,isFinite:()=>O0,isInf:()=>R0,isNaN:()=>F0,keep:()=>jt,kernel_impls:()=>dE,leakyRelu:()=>Ju,less:()=>ua,lessEqual:()=>Bs,linalg:()=>w_,linspace:()=>P0,localResponseNormalization:()=>$0,log:()=>kr,log1p:()=>ec,logSigmoid:()=>L0,logSoftmax:()=>B0,logSumExp:()=>nc,logicalAnd:()=>Ro,logicalNot:()=>rc,logicalOr:()=>oc,logicalXor:()=>j0,losses:()=>b_,lowerBound:()=>V0,matMul:()=>Ie,math:()=>iE,max:()=>rr,maxPool:()=>sc,maxPool3d:()=>U0,maxPoolWithArgmax:()=>H0,maximum:()=>ic,mean:()=>Fo,memory:()=>Y3,meshgrid:()=>z0,min:()=>aa,minimum:()=>Po,mirrorPad:()=>ac,mod:()=>G0,moments:()=>W0,movingAverage:()=>vC,mul:()=>V,multiRNNCell:()=>q0,multinomial:()=>K0,neg:()=>bt,nextFrame:()=>Z_,norm:()=>Oo,notEqual:()=>uc,oneHot:()=>$o,ones:()=>sr,onesLike:()=>Z0,op:()=>w,outerProduct:()=>Y0,pad:()=>bn,pad1d:()=>Q0,pad2d:()=>X0,pad3d:()=>cc,pad4d:()=>J0,pool:()=>eb,pow:()=>Ar,prelu:()=>fc,print:()=>ju,prod:()=>tb,profile:()=>Q3,raggedGather:()=>nb,raggedRange:()=>rb,raggedTensorToTensor:()=>ob,rand:()=>sb,randomGamma:()=>gb,randomNormal:()=>dc,randomStandardNormal:()=>yb,randomUniform:()=>Us,randomUniformInt:()=>vb,range:()=>Pn,ready:()=>eB,real:()=>Or,reciprocal:()=>wb,registerBackend:()=>oB,registerGradient:()=>w3,registerKernel:()=>$N,relu:()=>ao,relu6:()=>pc,removeBackend:()=>tB,reshape:()=>R,reverse:()=>un,reverse1d:()=>bb,reverse2d:()=>Eb,reverse3d:()=>xb,reverse4d:()=>Db,rfft:()=>zs,round:()=>hc,rsqrt:()=>Ib,scalar:()=>ee,scatterND:()=>wC,scatter_util:()=>wc,searchSorted:()=>ca,selu:()=>Tb,separableConv2d:()=>Sb,serialization:()=>Xb,setBackend:()=>J3,setPlatform:()=>sB,setdiff1dAsync:()=>Nb,sigmoid:()=>Qt,sign:()=>Cb,signal:()=>v_,sin:()=>_b,sinh:()=>Ab,slice:()=>we,slice1d:()=>Mb,slice2d:()=>kb,slice3d:()=>Ob,slice4d:()=>Rb,slice_util:()=>Dc,softmax:()=>Fb,softplus:()=>tc,spaceToBatchND:()=>lc,sparse:()=>E_,sparseToDense:()=>EC,spectral:()=>y_,split:()=>Rr,sqrt:()=>Vt,square:()=>ht,squaredDifference:()=>gc,squeeze:()=>Ut,stack:()=>Rt,step:()=>yc,stridedSlice:()=>Pb,string:()=>x_,sub:()=>ne,sum:()=>ke,sumOutType:()=>l1,tan:()=>$b,tanh:()=>ia,tensor:()=>vt,tensor1d:()=>mt,tensor2d:()=>ir,tensor3d:()=>vc,tensor4d:()=>Lb,tensor5d:()=>Bb,tensor6d:()=>jb,tensorScatterUpdate:()=>Ub,tensor_util:()=>Nw,test_util:()=>mb,tidy:()=>J,tile:()=>so,time:()=>X3,topk:()=>Hb,train:()=>nz,transpose:()=>Gs,truncatedNormal:()=>zb,unique:()=>Gb,unregisterGradient:()=>E3,unregisterKernel:()=>b3,unsortedSegmentSum:()=>Wb,unstack:()=>cn,upcastType:()=>_s,upperBound:()=>qb,util:()=>U,valueAndGrad:()=>Z1,valueAndGrads:()=>Y1,variable:()=>Kb,variableGrads:()=>id,version_core:()=>K_,where:()=>an,whereAsync:()=>bc,zeros:()=>or,zerosLike:()=>st});var Mf=class{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},Hi=class{refCount(e){return rn("refCount")}incRef(e){return rn("incRef")}timerAvailable(){return!0}time(e){return rn("time")}read(e){return rn("read")}readSync(e){return rn("readSync")}readToGPU(e,n){return rn("readToGPU")}numDataIds(){return rn("numDataIds")}disposeData(e,n){return rn("disposeData")}write(e,n,r){return rn("write")}move(e,n,r,o,s){return rn("move")}createTensorFromGPUData(e,n,r){return rn("createTensorFromGPUData")}memory(){return rn("memory")}floatPrecision(){return rn("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return rn("dispose")}};function rn(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function AN(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,kf(t,e,n)}function kL(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,kf(t,n,r),kf(e,n,r)}function zi(t,e,n){return Math.max(t,Math.min(e,n))}function OL(t){return t%2===0?t:t+1}function kf(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function RL(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function FL(t,e){let n=Math.random();return e*n+(1-n)*t}function PL(t,e){let n=0;for(let r=0;r<t.length;r++){let o=Number(t[r])-Number(e[r]);n+=o*o}return n}function D(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Ue(t,e,n=""){D(Pt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function vn(t){D(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function me(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function $L(t){return t.length===0}function bg(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Pt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Yr(t){return t%1===0}function LL(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let e=Math.exp(2*t);return(e-1)/(e+1)}}function BL(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function jL(t){let e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return AN(e),e}function Es(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function VL(t,e=o=>0,n,r){return new Promise((o,s)=>{let i=0,a=()=>{if(t()){o();return}i++;let u=e(i);if(n!=null&&i>=n){s();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function UL(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);let o=t.slice();return o[r]=e/n,o}function So(t,e){let n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),D(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),D(t.every(r=>Yr(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Eg(t,e){let n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||o?null:So(e,t).sort(),i=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[i]==null||s[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function xg(t,e){return Of(t,e)}function Of(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Dg(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Ig(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function HL(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Gi(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Tg(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Qn(t){return typeof t=="string"||t instanceof String}function MN(t){return typeof t=="boolean"}function kN(t){return typeof t=="number"}function No(t){return Array.isArray(t)?No(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":kN(t)?"float32":Qn(t)?"string":MN(t)?"bool":"float32"}function Dr(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Wi(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ir(t){let e=t.length;if(e<2)return[];let n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function ON(t,e,n,r=!1){let o=new Array;if(e.length===1){let s=e[0]*(r?2:1);for(let i=0;i<s;i++)o[i]=n[t+i]}else{let s=e[0],i=e.slice(1),a=i.reduce((u,c)=>u*c)*(r?2:1);for(let u=0;u<s;u++)o[u]=ON(t+u*a,i,n,r)}return o}function bs(t,e,n=!1){if(t.length===0)return e[0];let r=t.reduce((o,s)=>o*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return ON(0,t,e,n)}function zL(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function Du(t,e){let n=qi(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function qi(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function GL(t,e){let n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return bs(t,new Float32Array(n));if(e==="int32")return bs(t,new Int32Array(n));if(e==="bool")return bs(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Ge(t){t.forEach(e=>{D(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function WL(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function qL(t,e,n){if(e===0)return[];if(e===1)return[t];let r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function xs(t){return t&&t.then&&typeof t.then=="function"}var RN="tfjsflags",Ki=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ZL,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){let o=this.urlFlags[e];X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}getAsync(e){return L(this,null,function*(){return e in this.flags?this.flags[e]:(this.flags[e]=yield this.evaluateFlag(e),this.flags[e])})}get(e){if(e in this.flags)return this.flags[e];let n=this.evaluateFlag(e);if(xs(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);RN in e&&e[RN].split(",").forEach(r=>{let[o,s]=r.split(":");this.urlFlags[o]=QL(o,s)})}};function ZL(t){let e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(YL(e,r[0],r[1]),r.join("="))),e}function YL(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function QL(t,e){let n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function X(){return Rf}var Rf=null;function FN(t){Rf=t}var Sg;function Ng(){if(Sg==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Sg=t}return Sg}function XL(){let t=Ng();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function Iu(t,e){let n=XL();if(n.has(t))return n.get(t);{let r=e();return n.set(t,r),n.get(t)}}var Cg="Abs",_g="Acos",Ag="Acosh",Tu="Add",Mg="AddN",kg="All",Og="Any",Rg="ArgMax",Fg="ArgMin",Pg="Asin",$g="Asinh",Lg="Atan",Bg="Atanh",jg="Atan2",Vg="AvgPool",JL="AvgPoolGrad",Ug="AvgPool3D",e3="AvgPool3DGrad",Hg="BatchMatMul",zg="BatchToSpaceND",Gg="Bincount",Wg="BitwiseAnd",t3="BroadcastTo",qg="BroadcastArgs",Su="Cast",Kg="Ceil",Zg="ClipByValue",Yg="Complex",Qg="ComplexAbs",Xg="Concat",Jg="Conv2D",ey="Conv2DBackpropFilter",ty="Conv2DBackpropInput",ny="Conv3D",n3="Conv3DBackpropFilterV2",ry="Conv3DBackpropInputV2",oy="Cos",sy="Cosh",iy="Cumprod",ay="Cumsum",uy="CropAndResize",cy="DenseBincount",ly="DepthToSpace",fy="DepthwiseConv2dNative",dy="DepthwiseConv2dNativeBackpropFilter",py="DepthwiseConv2dNativeBackpropInput",hy="Diag",my="Dilation2D",r3="Dilation2DBackpropInput",o3="Dilation2DBackpropFilter",Ff="Draw",gy="RealDiv",yy="Einsum",vy="Elu",s3="EluGrad",wy="Erf",by="Equal",Ey="Exp",xy="ExpandDims",Dy="Expm1",Iy="FFT",Ty="Fill",Sy="FlipLeftRight",Ny="Floor",Cy="FloorDiv",_y="FusedBatchNorm",Ay="GatherV2",My="GatherNd",ky="Greater",Oy="GreaterEqual",Nu="Identity",Ry="IFFT",Fy="Imag",Py="IsFinite",$y="IsInf",Ly="IsNan",By="LeakyRelu",jy="Less",Vy="LessEqual",Uy="LinSpace",Hy="Log",zy="Log1p",Gy="LogicalAnd",Wy="LogicalNot",qy="LogicalOr",i3="LogicalXor",a3="LogSoftmax",u3="LowerBound",Ky="LRN",c3="LRNGrad",l3="MatrixBandPart",Zy="Max",Yy="Maximum",Qy="MaxPool",f3="MaxPoolGrad",Xy="MaxPool3D",d3="MaxPool3DGrad",Jy="MaxPoolWithArgmax",ev="Mean",tv="Min",nv="Minimum",rv="MirrorPad",ov="Mod",sv="Multinomial",iv="Multiply",av="Neg",uv="NotEqual",cv="NonMaxSuppressionV3",lv="NonMaxSuppressionV4",fv="NonMaxSuppressionV5",dv="OnesLike",pv="OneHot",hv="Pack",mv="PadV2",p3="Pool",gv="Pow",yv="Prelu",vv="Prod",wv="RaggedGather",bv="RaggedRange",Ev="RaggedTensorToTensor",xv="Range",Dv="Real",Iv="Reciprocal",Tv="Relu",Sv="Reshape",Nv="ResizeNearestNeighbor",h3="ResizeNearestNeighborGrad",Cv="ResizeBilinear",m3="ResizeBilinearGrad",_v="Relu6",Av="Reverse",Mv="Round",kv="Rsqrt",Ov="ScatterNd",Rv="TensorScatterUpdate",Fv="SearchSorted",Pv="Select",$v="Selu",Lv="Slice",Bv="Sin",jv="Sinh",Vv="Sign",Uv="Sigmoid",Hv="Softplus",zv="Sqrt",Gv="Sum",Wv="SpaceToBatchND",qv="SplitV",Kv="Softmax",Zv="SparseFillEmptyRows",Yv="SparseReshape",Qv="SparseSegmentMean",Xv="SparseSegmentSum",Jv="SparseToDense",ew="SquaredDifference",g3="Square",tw="StaticRegexReplace",nw="StridedSlice",rw="StringNGrams",ow="StringSplit",sw="StringToHashBucketFast",iw="Sub",aw="Tan",uw="Tanh",Cu="Tile",cw="TopK",lw="Transform",_u="Transpose",fw="Unique",dw="Unpack",pw="UnsortedSegmentSum",y3="UpperBound",hw="ZerosLike",mw="Step",Pf="FromPixels",gw="RotateWithOffset",$f="_FusedMatMul",Lf="FusedConv2D",Bf="FusedDepthwiseConv2D";function Tr(...t){X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(...t)}function v3(...t){X().getBool("IS_TEST")||X().getBool("PROD")||console.log(...t)}var Zi=Iu("kernelRegistry",()=>new Map),Au=Iu("gradRegistry",()=>new Map);function Ds(t,e){let n=yw(t,e);return Zi.get(n)}function jf(t){return Au.get(t)}function Mu(t){let e=Zi.entries(),n=[];for(;;){let{done:r,value:o}=e.next();if(r)break;let[s,i]=o,[a]=s.split("_");a===t&&n.push(i)}return n}function $N(t){let{kernelName:e,backendName:n}=t,r=yw(e,n);Zi.has(r)&&Tr(`The kernel '${e}' for backend '${n}' is already registered`),Zi.set(r,t)}function w3(t){let{kernelName:e}=t;Au.has(e)&&X().getBool("DEBUG")&&Tr(`Overriding the gradient for '${e}'`),Au.set(e,t)}function b3(t,e){let n=yw(t,e);if(!Zi.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Zi.delete(n)}function E3(t){if(!Au.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Au.delete(t)}function x3(t,e){Mu(t).forEach(r=>{let o=Object.assign({},r,{backendName:e});$N(o)})}function yw(t,e){return`${e}_${t}`}var U={};_e(U,{arraysEqual:()=>Pt,arraysEqualWithNull:()=>bg,assert:()=>D,assertNonNegativeIntegerDimensions:()=>Ge,assertNonNull:()=>vn,assertShapesMatch:()=>Ue,bytesFromStringArray:()=>Tg,bytesPerElement:()=>Gi,checkConversionForErrors:()=>Dg,clamp:()=>zi,computeStrides:()=>Ir,convertBackendValuesAndArrayBuffer:()=>zL,createScalarValue:()=>_3,createShuffledIndices:()=>jL,decodeString:()=>Ji,distSquared:()=>PL,encodeString:()=>_o,fetch:()=>M3,fingerPrint64:()=>C3,flatten:()=>Jn,getArrayFromDType:()=>Of,getTypedArrayFromDType:()=>xg,hasEncodingLoss:()=>HL,hexToLong:()=>ku,indexToLoc:()=>qL,inferDtype:()=>No,inferFromImplicitShape:()=>UL,isBoolean:()=>MN,isFunction:()=>Dr,isInt:()=>Yr,isNumber:()=>kN,isPromise:()=>xs,isScalarShape:()=>$L,isString:()=>Qn,isTypedArray:()=>nt,isValidDtype:()=>Ig,locToIndex:()=>WL,makeOnesTypedArray:()=>Du,makeZerosNestedTypedArray:()=>GL,makeZerosTypedArray:()=>qi,nearestDivisor:()=>Wi,nearestLargerEven:()=>OL,now:()=>Cs,parseAxisParam:()=>So,randUniform:()=>FL,repeatedTry:()=>VL,rightPad:()=>Es,shuffle:()=>AN,shuffleCombo:()=>kL,sizeFromShape:()=>me,sizeToSquarishShape:()=>BL,squeezeShape:()=>Eg,sum:()=>RL,swap:()=>kf,tanh:()=>LL,toNestedArray:()=>bs,toTypedArray:()=>Xi});function Vf(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Ew=Sp(KN());var Ns=Ew.default||Ew;function ku(t){return Ns.fromString(t,!0,16)}var YN=ku("c3a5c85c97cb3127"),Ss=ku("b492b66fbe98f273"),$t=ku("9ae16a3b2f90404f");function bw(t){return t.xor(t.shru(47))}function QN(t,e,n){let r=t.slice(e,e+n);return Ns.fromBytes(Array.from(r),!0,!0)}function We(t,e){return QN(t,e,8)}function ZN(t,e){return QN(t,e,4)}function yt(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Co(t,e,n=ku("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function I3(t,e,n,r,o,s){o=o.add(t),s=yt(s.add(o).add(r),21);let i=o;return o=o.add(e),o=o.add(n),s=s.add(yt(o,44)),[o.add(r),s.add(i)]}function Hf(t,e,n,r){return I3(We(t,e),We(t,e+8),We(t,e+16),We(t,e+24),n,r)}function T3(t,e=t.length){if(e>=8){let n=$t.add(e*2),r=We(t,0).add($t),o=We(t,e-8),s=yt(o,37).mul(n).add(r),i=yt(r,25).add(o).mul(n);return Co(s,i,n)}if(e>=4){let n=$t.add(e*2),r=ZN(t,0);return Co(r.shl(3).add(e),ZN(t,e-4),n)}if(e>0){let n=t[0],r=t[e>>1],o=t[e-1],s=n+(r<<8),i=e+(o<<2);return bw($t.mul(s).xor(YN.mul(i))).mul($t)}return $t}function S3(t,e=t.length){let n=$t.add(e*2),r=We(t,0).mul(Ss),o=We(t,8),s=We(t,e-8).mul(n),i=We(t,e-16).mul($t);return Co(yt(r.add(o),43).add(yt(s,30)).add(i),r.add(yt(o.add($t),18)).add(s),n)}function N3(t,e=t.length){let n=$t.add(e*2),r=We(t,0).mul($t),o=We(t,8),s=We(t,e-8).mul(n),i=We(t,e-16).mul($t),a=yt(r.add(o),43).add(yt(s,30)).add(i),u=Co(a,r.add(yt(o.add($t),18)).add(s),n),c=We(t,16).mul(n),f=We(t,24),d=a.add(We(t,e-32)).mul(n),p=u.add(We(t,e-24)).mul(n);return Co(yt(c.add(f),43).add(yt(d,30)).add(p),c.add(yt(f.add(r),18)).add(d),n)}function C3(t,e=t.length){let n=Ns.fromNumber(81,!0);if(e<=32)return e<=16?T3(t,e):S3(t,e);if(e<=64)return N3(t,e);let r=n,o=n.mul(Ss).add(113),s=bw(o.mul($t).add(113)).mul($t),i=[Ns.UZERO,Ns.UZERO],a=[Ns.UZERO,Ns.UZERO];r=r.mul($t).add(We(t,0));let u=0,c=(e-1>>6)*64,f=c+(e-1&63)-63;do r=yt(r.add(o).add(i[0]).add(We(t,u+8)),37).mul(Ss),o=yt(o.add(i[1]).add(We(t,u+48)),42).mul(Ss),r=r.xor(a[1]),o=o.add(i[0]).add(We(t,u+40)),s=yt(s.add(a[0]),33).mul(Ss),i=Hf(t,u,i[1].mul(Ss),r.add(a[0])),a=Hf(t,u+32,s.add(a[1]),o.add(We(t,u+16))),[s,r]=[r,s],u+=64;while(u!==c);let d=Ss.add(s.and(255).shl(1));return u=f,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=yt(r.add(o).add(i[0]).add(We(t,u+8)),37).mul(d),o=yt(o.add(i[1]).add(We(t,u+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(We(t,u+40))),s=yt(s.add(a[0]),33).mul(d),i=Hf(t,u,i[1].mul(d),r.add(a[0])),a=Hf(t,u+32,s.add(a[1]),o.add(We(t,u+16))),[s,r]=[r,s],Co(Co(i[0],a[0],d).add(bw(o).mul(YN)).add(s),Co(i[1],a[1],d).add(r),d)}function _3(t,e){return e==="string"?_o(t):Xi([t],e)}function A3(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Xi(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Jn(t)),X().getBool("DEBUG")&&Dg(t,e),A3(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){let n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Cs(){return X().platform.now()}function M3(t,e){return X().platform.fetch(t,e)}function _o(t,e="utf-8"){return e=e||"utf-8",X().platform.encode(t,e)}function Ji(t,e="utf-8"){return e=e||"utf-8",X().platform.decode(t,e)}function nt(t){return X().platform.isTypedArray!=null?X().platform.isTypedArray(t):Vf(t)}function Jn(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||xs(t)||t==null||nt(t)&&n)e.push(t);else if(Array.isArray(t)||nt(t))for(let r=0;r<t.length;++r)Jn(t[r],e,n);else{let r=-1;for(let o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)Jn(t[o],e,n)}return e}var zf=class{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new xw)}profileKernel(e,n,r){let o,s=()=>{o=r()},i,a=Cs();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(let c of o)c.dataSync();i=Promise.resolve({kernelMs:Cs()-a})}if(X().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let f=o[c];f.data().then(d=>{k3(d,f.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:n,outputs:r,timeMs:o,inputs:s,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),o,i]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],s,u[2])})})}};function k3(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){let o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}var xw=class{logKernelProfile(e,n,r,o,s,i){let a=typeof o=="number"?Es(`${o}ms`,9):o.error,u=Es(e,25),c=n.rank,f=n.size,d=Es(n.shape.toString(),14),p="";for(let m in s){let b=s[m];if(b!=null){let I=b.shape||n.shape,T=I.length;p+=`${m}: ${T}D ${T>0?I:""} `}}console.log(`%c${u}	%c${a}	%c${c}D ${d}	%c${f}	%c${p}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function XN(t,e,n){let r={},o={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){let c=t[u],f=c.inputs;for(let d in f){let p=f[d],m=!1;for(let b=0;b<e.length;b++)if(r[p.id]){c.outputs.forEach(I=>r[I.id]=!0),m=!0,o[c.id]=!0;break}if(m)break}}let s={};s[n.id]=!0;let i={};for(let u=t.length-1;u>=0;u--){let c=t[u],f=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(let p in f)s[f[p].id]=!0,i[c.id]=!0;break}}let a=[];for(let u=0;u<t.length;u++){let c=t[u];if(o[c.id]&&i[c.id]){let f={};for(let p in c.inputs){let m=c.inputs[p];r[m.id]&&(f[p]=m)}let d=Object.assign({},c);d.inputs=f,d.outputs=c.outputs,a.push(d)}}return a}function JN(t,e,n,r){for(let o=e.length-1;o>=0;o--){let s=e[o],i=[];if(s.outputs.forEach(u=>{let c=t[u.id];c!=null?i.push(c):i.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let a=s.gradient(i);for(let u in s.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);let c=n(()=>a[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let f=s.inputs[u];if(!Pt(c.shape,f.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{let d=t[f.id];t[f.id]=r(d,c),d.dispose()}}}}var e1=20,Ou=3,Dw=7;function t1(t,e,n,r){let o=Ir(e),s=O3(t,e,n,o),i=e.length,a=Gf(t,e,n,o,s),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${i}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(a.map(c=>"    "+c).join(`
`)),u.join(`
`)}function O3(t,e,n,r){let o=me(e),s=r[r.length-1],i=new Array(s).fill(0),a=e.length,u=n==="complex64"?Fu(t):t;if(a>1)for(let c=0;c<o/s;c++){let f=c*s;for(let d=0;d<s;d++)i[d]=Math.max(i[d],Ru(u[f+d],0,n).length)}return i}function Ru(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(Dw))} + ${parseFloat(t[1].toFixed(Dw))}j`:Qn(t)?r=`'${t}'`:n==="bool"?r=n1(t):r=parseFloat(t.toFixed(Dw)).toString(),Es(r,e)}function n1(t){return t===0?"false":"true"}function Gf(t,e,n,r,o,s=!0){let i=n==="complex64"?2:1,a=e[0],u=e.length;if(u===0){if(n==="complex64"){let I=Fu(t);return[Ru(I[0],0,n)]}return n==="bool"?[n1(t[0])]:[t[0].toString()]}if(u===1){if(a>e1){let T=Ou*i,_=Array.from(t.slice(0,T)),O=Array.from(t.slice((a-Ou)*i,a*i));return n==="complex64"&&(_=Fu(_),O=Fu(O)),["["+_.map((A,M)=>Ru(A,o[M],n)).join(", ")+", ..., "+O.map((A,M)=>Ru(A,o[a-Ou+M],n)).join(", ")+"]"]}return["["+(n==="complex64"?Fu(t):Array.from(t)).map((T,_)=>Ru(T,o[_],n)).join(", ")+"]"]}let c=e.slice(1),f=r.slice(1),d=r[0]*i,p=[];if(a>e1){for(let I=0;I<Ou;I++){let T=I*d,_=T+d;p.push(...Gf(t.slice(T,_),c,n,f,o,!1))}p.push("...");for(let I=a-Ou;I<a;I++){let T=I*d,_=T+d;p.push(...Gf(t.slice(T,_),c,n,f,o,I===a-1))}}else for(let I=0;I<a;I++){let T=I*d,_=T+d;p.push(...Gf(t.slice(T,_),c,n,f,o,I===a-1))}let m=u===2?",":"";p[0]="["+(a>0?p[0]+m:"");for(let I=1;I<p.length-1;I++)p[I]=" "+p[I]+m;let b=`,
`;for(let I=2;I<u;I++)b+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":b),p}function Fu(t){let e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Qr=class{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=me(e),r!=null){let o=r.length;D(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Of(n,this.size),this.strides=Ir(e)}set(e,...n){n.length===0&&(n=[0]),D(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(let o of e){if(o<0||o>=this.shape[n]){let s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return er().makeTensor(this.values,this.shape,this.dtype)}},er=null,ea=null,R3=null;function r1(t){er=t}function o1(t){ea=t}function s1(t){R3=t}var ye=class{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=me(e),this.strides=Ir(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return L(this,null,function*(){let e=yield this.data();return ea.buffer(this.shape,this.dtype,e)})}bufferSync(){return ea.buffer(this.shape,this.dtype,this.dataSync())}array(){return L(this,null,function*(){let e=yield this.data();return bs(this.shape,e,this.dtype==="complex64")})}arraySync(){return bs(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return L(this,null,function*(){this.throwIfDisposed();let e=er().read(this.dataId);if(this.dtype==="string"){let n=yield e;try{return n.map(r=>Ji(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e})}dataToGPU(e){return this.throwIfDisposed(),er().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=er().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ji(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}bytes(){return L(this,null,function*(){this.throwIfDisposed();let e=yield er().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),er().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return ea.print(this,e)}clone(){return this.throwIfDisposed(),ea.clone(this)}toString(e=!1){let n=this.dataSync();return t1(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),ea.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),er().makeVariable(this,e,n,r)}};Object.defineProperty(ye,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Iw(){return Iu("Tensor",()=>ye)}Iw();var Sr=class extends ye{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Pt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);er().disposeTensor(this),this.dataId=e.dataId,er().incRef(this,null)}dispose(){er().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(Sr,Symbol.hasInstance,{value:t=>t instanceof ye&&t.assign!=null&&t.assign instanceof Function});var Nw={};_e(Nw,{assertTypesMatch:()=>Sw,getTensorsInContainer:()=>Pu,isTensorInList:()=>P3,makeTypesMatch:()=>he});var Tw=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(Tw||{}),i1=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(i1||{}),a1=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(a1||{}),u1=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(u1||{}),c1=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(c1||{}),F3={float32:u1,int32:i1,bool:a1,complex64:c1};function _s(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return F3[t][e]}function l1(t){return _s(t,"int32")}function Wf(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function qf(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function he(t,e){if(t.dtype===e.dtype)return[t,e];let n=_s(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Sw(t,e){D(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function P3(t,e){return e.some(n=>n.id===t.id)}function Pu(t){let e=[];return f1(t,e,new Set),e}function f1(t,e,n){if(t==null)return;if(t instanceof ye){e.push(t);return}if(!$3(t))return;let r=t;for(let o in r){let s=r[o];n.has(s)||(n.add(s),f1(s,e,n))}}function $3(t){return Array.isArray(t)||typeof t=="object"}function Cw(t){return t.kernelName!=null}var Kf=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},L3=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Kf}ready(){return L(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:r}=this.initializeBackend(n);if(r)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,o=1){return n in this.registryFactory?(Tr(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:o},!0)}setBackend(n){return L(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(n);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new zf(this.backendInstance),!0})}setupRegisteredKernels(){Mu(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){Mu(n).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[n])})}initializeBackend(n){let r=this.registryFactory[n];if(r==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof Hi)&&typeof o.then=="function"){let s=++this.pendingBackendInitId,i=o.then(a=>s<this.pendingBackendInitId?!1:(this.registry[n]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Tr(`Initialization of backend ${n} failed`),Tr(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(o){return Tr(`Initialization of backend ${n} failed`),Tr(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r],{success:s,asyncInit:i}=this.initializeBackend(o);if(i||s)return{name:o,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){let o=this.state.tensorInfo.get(r),s=o.backend,i=this.readSync(r),a=s.refCount(r);s.disposeData(r,!0),o.backend=n,n.move(r,i,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let o=null;if(r==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");r=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}let s;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(s),()=>(s=r(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(n,r,o){n();try{let s=o();return r(),s}catch(s){throw r(),s}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let r=E.runKernel(Nu,{x:n}),o={x:n},s=a=>({x:()=>{let u="float32",c={x:a},f={dtype:u};return E.runKernel(Su,c,f)}}),i=[];return this.addTapeNode(this.state.activeScope.name,o,[r],s,i,{}),r}runKernel(n,r,o){if(this.backendName==null&&this.backend,!(Ds(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,o){let s=this.backend.numDataIds(),i=0;o.forEach(c=>{i+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=s-r-i-a;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let r,o=[],s=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,f=Cw(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Cw(n)){let{kernelName:I,inputs:T,attrs:_}=n;this.backendName==null&&this.backend;let O=Ds(I,this.backendName);D(O!=null,()=>`Cannot find registered kernel '${I}' for backend '${this.backendName}'`),u=()=>{let A=this.backend.numDataIds();c=O.kernelFunc({inputs:T,attrs:_,backend:this.backend});let M=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(I,A,M);let $=M.map(F=>F.rank!=null?F:this.makeTensorFromTensorInfo(F));if(s){let F=this.getTensorsForGradient(I,T,$);o=this.saveTensorsForBackwardMode(F)}return $}}else{let{forwardFunc:I}=n,T=_=>{s&&(o=_.map(O=>this.keep(this.clone(O))))};u=()=>{let _=this.backend.numDataIds();c=this.tidy(()=>I(this.backend,T));let O=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,_,O),O}}let{inputs:d,attrs:p}=n,m=Cw(n)?null:n.backwardsFunc,b;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=u():(b=this.profiler.profileKernel(f,d,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(b),r=b.outputs)}),s&&this.addTapeNode(f,d,r,m,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(I=>d[I]!=null?d[I].shape:null),outputShapes:r.map(I=>I.shape),kernelTimeMs:b.timeMs,extraInfo:b.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(n,r,o){let s=jf(n);if(s!=null){let i=s.inputsToSave||[],a=s.outputsToSave||[],u;s.saveAllInputs?(D(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(r).map(f=>r[f])):u=i.map(f=>r[f]);let c=o.filter((f,d)=>a[d]);return u.concat(c)}return[]}makeTensor(n,r,o,s){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",s=s||this.backend;let i=n;o==="string"&&Qn(n[0])&&(i=n.map(c=>_o(c)));let a=s.write(i,r,o),u=new ye(r,o,a,this.nextTensorId());if(this.trackTensor(u,s),o==="string"){let c=this.state.tensorInfo.get(a),f=Tg(i);this.state.numBytes+=f-c.bytes,c.bytes=f}return u}makeTensorFromDataId(n,r,o,s){o=o||"float32";let i={dataId:n,shape:r,dtype:o};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(n,r){let{dataId:o,shape:s,dtype:i}=n,a=new ye(s,i,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,o,s){o=o||this.nextVariableId().toString(),s!=null&&s!==n.dtype&&(n=n.cast(s));let i=new Sr(n,r,o,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(n,r){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*Gi(n.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:o})),n instanceof Sr||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let o=n.size*Gi(n.dtype);this.state.numBytes-=o}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let r=this.state.registeredVariables[n];this.disposeVariable(r)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return L(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let s of this.state.activeProfile.kernels)s.kernelTimeMs=yield s.kernelTimeMs,s.extraInfo=yield s.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,r,o,s,i,a){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:o,saved:i},c=jf(n);c!=null&&(s=c.gradFunc),s!=null&&(u.gradient=f=>(f=f.map((d,p)=>{if(d==null){let m=o[p],b=qi(m.size,m.dtype);return this.makeTensor(b,m.shape,m.dtype)}return d}),s(f.length>1?f:f[0],i,a))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){let r=Pu(n),o=new Set(r.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){let a=this.state.activeScope.track[i];!a.kept&&!o.has(a.id)&&a.dispose()}let s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(n,r,o,s=!1){if(D(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));D(i instanceof ye,()=>"The result y returned by f() must be a tensor.");let a=XN(this.state.activeTape,r,i);if(!s&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[i.id]=o??B3(i.shape),JN(u,a,f=>this.tidy(f),j3);let c=r.map(f=>u[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(let d of f.saved)d.dispose()}),this.state.activeTape=null),{value:i,grads:c}})}customGrad(n){return D(Dr(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{D(r.every(u=>u instanceof ye),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,s={};r.forEach((u,c)=>{s[c]=u});let i=(u,c)=>(o=n(...r,c),D(o.value instanceof ye,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),D(Dr(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(u,c)=>{let f=o.gradFunc(u,c),d=Array.isArray(f)?f:[f];D(d.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),D(d.every(m=>m instanceof ye),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((m,b)=>{p[b]=()=>m}),p};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:s})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}time(n){return L(this,null,function*(){let r=Cs(),o=yield this.backend.time(n);return o.wallMs=Cs()-r,o})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Kf;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function B3(t){let e=Du(me(t),"float32");return E.makeTensor(e,t,"float32")}function _w(){let t=Ng();if(t._tfengine==null){let e=new Ki(t);t._tfengine=new L3(e)}return FN(t._tfengine.ENV),r1(()=>t._tfengine),t._tfengine}var E=_w();function j3(t,e){let n={a:t,b:e};return E.runKernel(Tu,n)}var Zf={};_e(Zf,{isBrowser:()=>Mw,isMobile:()=>H3,mockIsMobile:()=>U3});function V3(){return typeof navigator<"u"&&navigator!=null}var Aw;function U3(t){Aw=t}function H3(t){if(Aw!==void 0)return Aw;if(t||V3()){if(t||(t=navigator),t.product==="ReactNative")return!0;let e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Mw(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Zt=X();Zt.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Zt.registerFlag("IS_BROWSER",()=>Mw());Zt.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Zt.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Zt.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Zt.registerFlag("PROD",()=>!1);Zt.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Zt.getBool("DEBUG"));Zt.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Zt.registerFlag("IS_TEST",()=>!1);Zt.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Zt.getBool("DEBUG"));Zt.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Zt.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Zt.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function It(t,e){let n=t;if(nt(t))return e==="string"?[]:[t.length];if(Wf(t)){let o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(qf(t))return[t.buffer.size/(e==null?4:Gi(e))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(n)||nt(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&X().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&p1(t,r,[]),r}function p1(t,e,n){if(n=n||[],!Array.isArray(t)&&!nt(t)){D(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}D(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),D(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);let r=e.slice(1);for(let o=0;o<t.length;++o)p1(t[o],r,n.concat(o))}function d1(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function y(t,e,n,r="numeric"){if(t instanceof Iw())return d1(r,t.dtype,e,n),t;let o=No(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),d1(r,o,e,n),t==null||!nt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let s=It(t,o);!nt(t)&&!Array.isArray(t)&&(t=[t]);let a=o!=="string"?Xi(t,o):Jn(t,[],!0);return E.makeTensor(a,s,o)}function Xr(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,i)=>y(s,`${e}[${i}]`,n,r))}var Yf="__op";function w(t){let e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Yf;let o=(...s)=>{E.startScope(n);try{let i=r(...s);return xs(i)&&console.error("Cannot return a Promise inside of tidy."),E.endScope(i),i}catch(i){throw E.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function z3(t,e){let n=y(t,"real","complex"),r=y(e,"imag","complex");Ue(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:n,imag:r};return E.runKernel(Yg,o)}var Lt=w({complex_:z3});function Bt(t,e,n,r){if(r==null)r=No(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(qf(t)||Wf(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return E.backend.createTensorFromGPUData(t,e||n,r)}if(!nt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Ge(e);let o=me(e),s=me(n);D(o===s,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${s}`);for(let i=0;i<n.length;++i){let a=n[i],u=i===n.length-1?a!==me(e.slice(i)):!0;D(n[i]===e[i]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!nt(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Xi(t,r):Jn(t,[],!0),E.makeTensor(t,e,r)}function vt(t,e,n){let r=It(t,n);return Bt(t,e,r,n)}var Jr={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var Tt=class t{static join(e){return new t(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>nt(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){let o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let s=n+o.byteLength;this.shards.push({buffer:o,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);let r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);let o=n-e,s=new ArrayBuffer(o),i=new Uint8Array(s),a=0;for(let u=r;u<this.shards.length;u++){let c=this.shards[u],d=e+a-c.start,p=a,b=Math.min(n,c.end)-c.start,I=new Uint8Array(c.buffer,d,b-d);if(i.set(I,p),a+=I.length,n<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=G3(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function G3(t,e){let n=0,r=t.length;for(;n<=r;){let o=Math.floor((r-n)/2)+n,s=e(t[o]);if(s===0)return o;s<0?r=o:n=o+1}return-1}function W3(){X().set("PROD",!0)}function q3(){X().set("DEBUG",!0)}function K3(){X().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function h1(t){X().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}s1(h1);function Z3(){E.disposeVariables()}function Qf(){return E}function Y3(){return E.memory()}function Q3(t){return E.profile(t)}function J(t,e){return E.tidy(t,e)}function Je(t){Pu(t).forEach(n=>n.dispose())}function jt(t){return E.keep(t)}function X3(t){return E.time(t)}function J3(t){return E.setBackend(t)}function eB(){return E.ready()}function $u(){return E.backendName}function tB(t){E.removeBackend(t)}function nB(t){return E.findBackend(t)}function rB(t){return E.findBackendFactory(t)}function oB(t,e,n=1){return E.registerBackend(t,e,n)}function Lu(){return E.backend}function sB(t,e){X().setPlatform(t,e)}var Ao=4;function y1(t,e){return L(this,null,function*(){let n=[],r=[],o=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<o.length;++i){let a=o[i],u=Array.isArray(t)?t[i].tensor:t[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);let c={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let f=new Promise(d=>L(this,null,function*(){let p=yield u.bytes(),m=p.reduce((T,_)=>T+_.length,0)+Ao*p.length,b=new Uint8Array(m),I=0;for(let T=0;T<p.length;T++){let _=p[T],O=new Uint8Array(new Uint32Array([_.length]).buffer);b.set(O,I),I+=Ao,b.set(_,I),I+=_.length}d(b)}));r.push(f)}else r.push(u.data());e!=null&&(c.group=e),n.push(c)}let s=yield Promise.all(r);return{data:uB(s),specs:n}})}function Xf(t,e){let n=new Tt(t),r={},o=0;for(let s of e){let i=iB(s,(a,u)=>n.slice(o+a,o+u));r[s.name]=v1(s,n.slice(o,o+i)),o+=i}return r}function iB(t,e){let n=me(t.shape),r;if("quantization"in t){let o=t.quantization;r=Jr[o.dtype]}else if(t.dtype==="string"){let o=0;for(let s=0;s<n;s++)o+=Ao+new Uint32Array(e(o,o+Ao))[0];return o}else r=Jr[t.dtype];return n*r}function aB(t,e){return L(this,null,function*(){let n=me(t.shape),r;if("quantization"in t){let o=t.quantization;r=Jr[o.dtype]}else if(t.dtype==="string"){let o=0;for(let s=0;s<n;s++)o+=Ao+new Uint32Array(yield e(o,o+Ao))[0];return o}else r=Jr[t.dtype];return n*r})}function v1(t,e){let n=t.name,r=t.dtype,o=t.shape,s=me(o),i,a=0;if("quantization"in t){let u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Jr[u.dtype],f=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){i=new Float32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];i[d]=p*u.scale+u.min}}else if(u.dtype==="float16")i=dB()(f);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);i=new Int32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];i[d]=Math.round(p*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*c}else if(r==="string"){let u=me(t.shape);i=[];for(let c=0;c<u;c++){let f=new Uint32Array(e.slice(a,a+Ao))[0];a+=Ao;let d=new Uint8Array(e.slice(a,a+f));i.push(d),a+=f}}else{let u=Jr[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);let c=new Float32Array(i.length/2),f=new Float32Array(i.length/2);for(let b=0;b<c.length;b++)c[b]=i[b*2],f[b]=i[b*2+1];let d=vt(c,o,"float32"),p=vt(f,o,"float32"),m=Lt(d,p);return d.dispose(),p.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*u}return vt(i,o,r)}function m1(t,e,n){return L(this,null,function*(){let r=new Uint8Array(e);for(;r.byteLength<n;){let{done:o,value:s}=yield t.read();if(o&&s==null){let a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let i=new Uint8Array(r.length+s.byteLength);i.set(r,0),i.set(new Uint8Array(s),r.length),r=i}return r.buffer})}function Jf(t,e){return L(this,null,function*(){let n={},r=t.getReader(),o=new ArrayBuffer(0);for(let s of e){let i=yield aB(s,(c,f)=>L(this,null,function*(){return o=yield m1(r,o,f),o.slice(c,f)}));o=yield m1(r,o,i);let a=o.slice(0,i);o=o.slice(i);let u=v1(s,a);if(n[s.name]=u,$u()==="webgpu"){let c=Lu();"uploadToGPU"in c&&me(u.shape)>=X().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function uB(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0,n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});let r=new Uint8Array(e),o=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),o),o+=s.byteLength}),r.buffer}var kw=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function g1(t){return kw?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function w1(t){if(kw)return Buffer.from(t).toString("base64");let e=new Uint8Array(t),n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function b1(t){if(kw){let r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function E1(t){return Tt.join(t)}function Ow(t){let e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);let n=t.split(e);return n[n.length-1]}function ed(t,e){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function Rw(t,e,n){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}function ta(t,e){return L(this,null,function*(){let n,r;return t.weightsManifest!=null&&([n,r]=yield e(t.weightsManifest)),Rw(t,n,r)})}function Nr(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:g1(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:g1(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Tt(t.weightData).byteLength}}function Bu(t){let e=[];for(let n of t)e.push(...n.weights);return e}function cB(){let t=n=>{let r=n<<13,o=0;for(;!(r&8388608);)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function lB(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function fB(){let t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function dB(){let t=cB(),e=lB(),n=fB();return r=>{let o=new ArrayBuffer(4*r.length),s=new Uint32Array(o);for(let i=0;i<r.length;i++){let a=r[i],u=t[n[a>>10]+(a&1023)]+e[a>>10];s[i]=u}return new Float32Array(o)}}var dt=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(e){t.getInstance().saveRouters.push(e)}static registerLoadRouter(e){t.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return t.getHandlers(e,"save")}static getLoadHandlers(e,n){return t.getHandlers(e,"load",n)}static getHandlers(e,n,r){let o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(i=>{let a=i(e,r);a!==null&&o.push(a)}),o}},x1=t=>dt.registerSaveRouter(t),D1=t=>dt.registerLoadRouter(t),I1=t=>dt.getSaveHandlers(t),T1=(t,e)=>dt.getLoadHandlers(t,e);var Fw="tensorflowjs",Pw=1,As="models_store",Mo="model_info_store";function S1(){if(!X().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function $w(t){let e=t.result;e.createObjectStore(As,{keyPath:"modelPath"}),e.createObjectStore(Mo,{keyPath:"modelPath"})}var Ms=(()=>{class t{constructor(n){if(this.indexedDB=S1(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return L(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return L(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,r){return new Promise((o,s)=>{let i=this.indexedDB.open(Fw,Pw);i.onupgradeneeded=()=>$w(i),i.onsuccess=()=>{let a=i.result;if(r==null){let u=a.transaction(As,"readonly"),f=u.objectStore(As).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(f.result.modelArtifacts)},f.onerror=d=>(a.close(),s(f.error)),u.oncomplete=()=>a.close()}else{r.weightData=Tt.join(r.weightData);let u=Nr(r),c=a.transaction(Mo,"readwrite"),f=c.objectStore(Mo),d;try{d=f.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(m){return s(m)}let p;d.onsuccess=()=>{p=a.transaction(As,"readwrite");let m=p.objectStore(As),b;try{b=m.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:u})}catch(I){return s(I)}b.onsuccess=()=>o({modelArtifactsInfo:u}),b.onerror=I=>{f=c.objectStore(Mo);let T=f.delete(this.modelPath);T.onsuccess=()=>(a.close(),s(b.error)),T.onerror=_=>(a.close(),s(b.error))}},d.onerror=m=>(a.close(),s(d.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},i.onerror=a=>s(i.error)})}}return t.URL_SCHEME="indexeddb://",t})();var N1=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ms.URL_SCHEME)?pB(t.slice(Ms.URL_SCHEME.length)):null;dt.registerSaveRouter(N1);dt.registerLoadRouter(N1);function pB(t){return new Ms(t)}function hB(t){return t.startsWith(Ms.URL_SCHEME)?t.slice(Ms.URL_SCHEME.length):t}var td=class{constructor(){this.indexedDB=S1()}listModels(){return L(this,null,function*(){return new Promise((e,n)=>{let r=this.indexedDB.open(Fw,Pw);r.onupgradeneeded=()=>$w(r),r.onsuccess=()=>{let o=r.result,s=o.transaction(Mo,"readonly"),a=s.objectStore(Mo).getAll();a.onsuccess=()=>{let u={};for(let c of a.result)u[c.modelPath]=c.modelArtifactsInfo;e(u)},a.onerror=u=>(o.close(),n(a.error)),s.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})})}removeModel(e){return L(this,null,function*(){return e=hB(e),new Promise((n,r)=>{let o=this.indexedDB.open(Fw,Pw);o.onupgradeneeded=()=>$w(o),o.onsuccess=()=>{let s=o.result,i=s.transaction(Mo,"readwrite"),a=i.objectStore(Mo),u=a.get(e),c;u.onsuccess=()=>{if(u.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let f=a.delete(e),d=()=>{c=s.transaction(As,"readwrite");let m=c.objectStore(As).delete(e);m.onsuccess=()=>n(u.result.modelArtifactsInfo),m.onerror=b=>r(u.error)};f.onsuccess=d,f.onerror=p=>(d(),s.close(),r(u.error))}},u.onerror=f=>(s.close(),r(u.error)),i.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},o.onerror=s=>r(o.error)})})}};var eo="/",na="tensorflowjs_models",C1="info",mB="model_topology",gB="weight_specs",yB="weight_data",vB="model_metadata";function _1(t){return{info:[na,t,C1].join(eo),topology:[na,t,mB].join(eo),weightSpecs:[na,t,gB].join(eo),weightData:[na,t,yB].join(eo),modelMetadata:[na,t,vB].join(eo)}}function A1(t){for(let e of Object.values(t))window.localStorage.removeItem(e)}function wB(t){let e=t.split(eo);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(eo)}function bB(t){return t.startsWith(ks.URL_SCHEME)?t.slice(ks.URL_SCHEME.length):t}var ks=(()=>{class t{constructor(n){if(!X().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=_1(this.modelPath)}save(n){return L(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(n.modelTopology),o=JSON.stringify(n.weightSpecs),s=Nr(n),i=Tt.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,w1(i));let a={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw A1(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}})}load(){return L(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=s;let i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){let u=JSON.parse(i);r.format=u.format,r.generatedBy=u.generatedBy,r.convertedBy=u.convertedBy,u.signature!=null&&(r.signature=u.signature),u.userDefinedMetadata!=null&&(r.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(r.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(r.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(r.trainingConfig=u.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=b1(a),r})}}return t.URL_SCHEME="localstorage://",t})();var M1=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ks.URL_SCHEME)?EB(t.slice(ks.URL_SCHEME.length)):null;dt.registerSaveRouter(M1);dt.registerLoadRouter(M1);function EB(t){return new ks(t)}var nd=class{constructor(){D(X().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),D(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return L(this,null,function*(){let e={},n=na+eo,r=eo+C1;for(let o=0;o<this.LS.length;++o){let s=this.LS.key(o);if(s.startsWith(n)&&s.endsWith(r)){let i=wB(s);e[i]=JSON.parse(this.LS.getItem(s))}}return e})}removeModel(e){return L(this,null,function*(){e=bB(e);let n=_1(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);let r=JSON.parse(this.LS.getItem(n.info));return A1(n),r})}};var ra="://",tr=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(e,n){D(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(ra)&&(e=e.slice(0,e.indexOf(ra))),D(e.length>0,()=>"scheme must not be an empty string.");let r=t.getInstance();D(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){let n=t.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}};function rd(t){if(t.indexOf(ra)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${tr.getSchemes().join(",")}`);return{scheme:t.split(ra)[0],path:t.split(ra)[1]}}function k1(t,e,n=!1){return L(this,null,function*(){D(t!==e,()=>`Old path and new path are the same: '${t}'`);let r=dt.getLoadHandlers(t);D(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),D(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let o=r[0],s=dt.getSaveHandlers(e);D(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),D(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);let i=s[0],a=rd(t).scheme,u=rd(t).path,c=a===rd(t).scheme,f=yield o.load();n&&c&&(yield tr.getManager(a).removeModel(u));let d=yield i.save(f);return n&&!c&&(yield tr.getManager(a).removeModel(u)),d.modelArtifactsInfo})}function O1(){return L(this,null,function*(){let t=tr.getSchemes(),e={};for(let n of t){let r=yield tr.getManager(n).listModels();for(let o in r){let s=n+ra+o;e[s]=r[o]}}return e})}function R1(t){return L(this,null,function*(){let e=rd(t);return tr.getManager(e.scheme).removeModel(e.path)})}function F1(t,e){return L(this,null,function*(){return k1(t,e,!1)})}function P1(t,e){return L(this,null,function*(){return k1(t,e,!0)})}var Lw=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!X().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Vf(e)}};if(X().get("IS_BROWSER")){X().setPlatform("browser",new Lw);try{tr.registerManager(ks.URL_SCHEME,new nd)}catch{}try{tr.registerManager(Ms.URL_SCHEME,new td)}catch{}}var DB={importFetch:()=>L1()},Bw;var jw=class{constructor(){this.util=B1(),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return X().global.fetch!=null?X().global.fetch(e,n):(Bw==null&&(Bw=DB.importFetch()),Bw(e,n))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};X().get("IS_NODE")&&!X().get("IS_BROWSER")&&X().setPlatform("node",new jw);function St(t,e="float32",n){return e=e||"float32",Ge(t),new Qr(t,e,n)}function IB(t,e){let n=y(t,"x","cast");if(!Ig(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},o={dtype:e};return E.runKernel(Su,r,o)}var ae=w({cast_:IB});function TB(t){let n={x:y(t,"x","clone","string_or_numeric")};return E.runKernel(Nu,n)}var Yt=w({clone_:TB});function ju(t,e=!1){console.log(t.toString(e))}_w();var SB={buffer:St,cast:ae,clone:Yt,print:ju};o1(SB);function NB(t,e){let n=y(t,"a","add"),r=y(e,"b","add");[n,r]=he(n,r);let o={a:n,b:r};return E.runKernel(Tu,o)}var Y=w({add_:NB});function CB(t,e){let n=y(t,"a","floorDiv"),r=y(e,"b","floorDiv");[n,r]=he(n,r);let o={a:n,b:r};return E.runKernel(Cy,o)}var Vu=w({floorDiv_:CB});function _B(t,e){let n=y(t,"a","div"),r=y(e,"b","div");if([n,r]=he(n,r),n.dtype==="int32"&&r.dtype==="int32")return Vu(n,r);let o={a:n,b:r},s={};return E.runKernel(gy,o,s)}var ve=w({div_:_B});function AB(t,e){let n=y(t,"a","mul"),r=y(e,"b","mul");[n,r]=he(n,r);let o={a:n,b:r};return E.runKernel(iv,o)}var V=w({mul_:AB});function MB(t){let e=y(t,"x","abs");if(e.dtype==="complex64"){let n={x:e};return E.runKernel(Qg,n)}else{let n={x:e};return E.runKernel(Cg,n)}}var pt=w({abs_:MB});function kB(t){let n={x:y(t,"x","acos")};return E.runKernel(_g,n)}var Vw=w({acos_:kB});function OB(t){let n={x:y(t,"x","acosh")};return E.runKernel(Ag,n)}var Uw=w({acosh_:OB});function RB(t){D(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),D(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let e=t.map((o,s)=>y(o,`tensors${s}`,"addN")),n=e[0];e.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(o=>{if(!Pt(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=e;return E.runKernel(Mg,r)}var Hw=w({addN_:RB});function FB(t,e=null,n=!1){let o={x:y(t,"x","all","bool")},s={axis:e,keepDims:n};return E.runKernel(kg,o,s)}var zw=w({all_:FB});function PB(t,e=null,n=!1){let o={x:y(t,"x","any","bool")},s={axis:e,keepDims:n};return E.runKernel(Og,o,s)}var Gw=w({any_:PB});function $B(t,e=0){let r={x:y(t,"x","argMax")},o={axis:e};return E.runKernel(Rg,r,o)}var Uu=w({argMax_:$B});function LB(t,e=0){let r={x:y(t,"x","argMin")},o={axis:e};return E.runKernel(Fg,r,o)}var Ww=w({argMin_:LB});function BB(t){let n={x:y(t,"x","asin")};return E.runKernel(Pg,n)}var qw=w({asin_:BB});function jB(t){let n={x:y(t,"x","asinh")};return E.runKernel($g,n)}var Kw=w({asinh_:jB});function VB(t){let n={x:y(t,"x","atan")};return E.runKernel(Lg,n)}var Zw=w({atan_:VB});function UB(t,e){let n=y(t,"a","atan2"),r=y(e,"b","atan2");[n,r]=he(n,r);let o={a:n,b:r};return E.runKernel(jg,o)}var Yw=w({atan2_:UB});function HB(t){let n={x:y(t,"x","atanh")};return E.runKernel(Bg,n)}var Qw=w({atanh_:HB});function zB(t,e,n,r,o="NHWC",s){let i=t[3],a=[...e,i],u=V1(o);return Fs(t,a,n,s,r,null,null,u)}function Jw(t,e,n,r,o,s,i="channelsLast"){let[a,u]=Hu(e),c;if(i==="channelsLast")c=[a,u,t[3],t[3]];else if(i==="channelsFirst")c=[a,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Fs(t,c,n,r,o,s,!1,i)}function GB(t,e,n,r,o,s,i="NDHWC"){let[a,u,c]=Xw(e),f,d;if(i==="NDHWC")d="channelsLast",f=[a,u,c,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",f=[a,u,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return j1(t,f,n,r,o,!1,d,s)}function Fs(t,e,n,r,o,s,i=!1,a="channelsLast"){let[u,c,f,d]=[-1,-1,-1,-1];if(a==="channelsLast")[u,c,f,d]=t;else if(a==="channelsFirst")[u,d,c,f]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,m,,b]=e,[I,T]=Hu(n),[_,O]=Hu(r),A=sa(p,_),M=sa(m,O),{padInfo:$,outHeight:F,outWidth:j}=KB(o,c,f,I,T,A,M,s,a),B=i?b*d:b,G;return a==="channelsFirst"?G=[u,B,F,j]:a==="channelsLast"&&(G=[u,F,j,B]),{batchSize:u,dataFormat:a,inHeight:c,inWidth:f,inChannels:d,outHeight:F,outWidth:j,outChannels:B,padInfo:$,strideHeight:I,strideWidth:T,filterHeight:p,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:M,dilationHeight:_,dilationWidth:O,inShape:t,outShape:G,filterShape:e}}function j1(t,e,n,r,o,s=!1,i="channelsLast",a){let[u,c,f,d,p]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[u,c,f,d,p]=t;else if(i==="channelsFirst")[u,p,c,f,d]=t;else throw new Error(`Unknown dataFormat ${i}`);let[m,b,I,,T]=e,[_,O,A]=Xw(n),[M,$,F]=Xw(r),j=sa(m,M),B=sa(b,$),G=sa(I,F),{padInfo:W,outDepth:H,outHeight:se,outWidth:te}=ZB(o,c,f,d,_,O,A,j,B,G,a),xe=s?T*p:T,Te;return i==="channelsFirst"?Te=[u,xe,H,se,te]:i==="channelsLast"&&(Te=[u,H,se,te,xe]),{batchSize:u,dataFormat:i,inDepth:c,inHeight:f,inWidth:d,inChannels:p,outDepth:H,outHeight:se,outWidth:te,outChannels:xe,padInfo:W,strideDepth:_,strideHeight:O,strideWidth:A,filterDepth:m,filterHeight:b,filterWidth:I,effectiveFilterDepth:j,effectiveFilterHeight:B,effectiveFilterWidth:G,dilationDepth:M,dilationHeight:$,dilationWidth:F,inShape:t,outShape:Te,filterShape:e}}function WB(t,e,n,r,o){r==null&&(r=e0(t,e,n));let s=t[0],i=t[1],a=zu((s-e+2*r)/n+1,o),u=zu((i-e+2*r)/n+1,o);return[a,u]}function qB(t,e,n,r,o,s){o==null&&(o=e0(t,e[0],r[0]));let i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(i[a]=zu((t[a]-e[a]+2*o)/r[a]+1,s));return i}function e0(t,e,n,r=1){let o=sa(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function Hu(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Xw(t){return typeof t=="number"?[t,t,t]:t}function sa(t,e){return e<=1?t:t+(t-1)*(e-1)}function KB(t,e,n,r,o,s,i,a,u){let c,f,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let m=WB([e,n],s,r,t,a);f=m[0],d=m[1]}else if(t==="same"){f=Math.ceil(e/r),d=Math.ceil(n/o);let p=Math.max(0,(f-1)*r+s-e),m=Math.max(0,(d-1)*o+i-n),b=Math.floor(p/2),I=p-b,T=Math.floor(m/2),_=m-T;c={top:b,bottom:I,left:T,right:_,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-s+1)/r),d=Math.ceil((n-i+1)/o);else if(typeof t=="object"){let p=u==="channelsLast"?t[1][0]:t[2][0],m=u==="channelsLast"?t[1][1]:t[2][1],b=u==="channelsLast"?t[2][0]:t[3][0],I=u==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:m,left:b,right:I,type:p===0&&m===0&&b===0&&I===0?"VALID":"EXPLICIT"},f=zu((e-s+p+m)/r+1,a),d=zu((n-i+b+I)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:d}}function ZB(t,e,n,r,o,s,i,a,u,c,f){let d,p,m,b;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let T=qB([e,n,r,1],[a,u,c],1,[o,s,i],t,f);p=T[0],m=T[1],b=T[2]}else if(t==="same"){p=Math.ceil(e/o),m=Math.ceil(n/s),b=Math.ceil(r/i);let I=(p-1)*o+a-e,T=(m-1)*s+u-n,_=(b-1)*i+c-r,O=Math.floor(I/2),A=I-O,M=Math.floor(T/2),$=T-M,F=Math.floor(_/2),j=_-F;d={top:M,bottom:$,left:F,right:j,front:O,back:A,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:m,outWidth:b}}function zu(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Rs(t){let[e,n,r]=Hu(t);return e===1&&n===1&&r===1}function kt(t,e){return Rs(t)||Rs(e)}function Cr(t){return Hu(t).every(e=>e>0)}function V1(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function rt(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")D(Yr(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{D(Yr(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}function YB(t,e){let r={x:y(t,"x","reshape","string_or_numeric")},o={shape:e};return E.runKernel(Sv,r,o)}var R=w({reshape_:YB});function QB(t,e,n,r,o){let s=y(t,"x","avgPool","float32"),i=1;D(kt(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=s,u=!1;s.rank===3&&(u=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2]])),D(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),rt("avgPool",r,o);let c={x:a},f={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=E.runKernel(Vg,c,f);return d=ae(d,s.dtype),u?R(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Gu=w({avgPool_:QB});function XB(t,e,n,r,o,s="NDHWC"){let i=y(t,"x","avgPool3d","float32"),a=i,u=!1;i.rank===4&&(u=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),D(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),D(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),D(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),rt("avgPool3d",r,o);let c={x:a},f={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s},d=E.runKernel(Ug,c,f);return d=ae(d,a.dtype),u?R(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var t0=w({avgPool3d_:XB});function JB(t,e=0){D(t.length>=1,()=>"Pass at least one tensor to concat");let n=Xr(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Yt(n[0]);let r=n,o={axis:e};return E.runKernel(Xg,r,o)}var Be=w({concat_:JB});function ej(t,e,n=!1,r=!1){let o=y(t,"a","matMul"),s=y(e,"b","matMul");[o,s]=he(o,s);let i={a:o,b:s},a={transposeA:n,transposeB:r};return E.runKernel(Hg,i,a)}var Ie=w({matMul_:ej});function tj(t){let n={x:y(t,"x","sigmoid","float32")};return E.runKernel(Uv,n)}var Qt=w({sigmoid_:tj});function nj(t,e,n){let r=y(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},s={begin:e,size:n};return E.runKernel(Lv,o,s)}var we=w({slice_:nj});function rj(t){let n={x:y(t,"x","tanh","float32")};return E.runKernel(uw,n)}var ia=w({tanh_:rj});function oj(t,e,n,r,o,s){let i=y(t,"forgetBias","basicLSTMCell"),a=y(e,"lstmKernel","basicLSTMCell"),u=y(n,"lstmBias","basicLSTMCell"),c=y(r,"data","basicLSTMCell"),f=y(o,"c","basicLSTMCell"),d=y(s,"h","basicLSTMCell"),p=Be([c,d],1),m=Ie(p,a),b=Y(m,u),I=b.shape[0],T=b.shape[1]/4,_=[I,T],O=we(b,[0,0],_),A=we(b,[0,T],_),M=we(b,[0,T*2],_),$=we(b,[0,T*3],_),F=Y(V(Qt(O),ia(A)),V(f,Qt(Y(i,M)))),j=V(ia(F),Qt($));return[F,j]}var n0=w({basicLSTMCell_:oj});function sj(t,e,n){let r=y(t,"x","batchToSpaceND"),o=e.reduce((a,u)=>a*u);D(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),D(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),D(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);let s={x:r},i={blockShape:e,crops:n};return E.runKernel(zg,s,i)}var Wu=w({batchToSpaceND_:sj});function U1(t){let e;return t.rank===0||t.rank===1?e=R(t,[1,1,1,t.size]):t.rank===2?e=R(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}function ij(t,e,n,r,o,s){s==null&&(s=.001);let i=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let f;r!=null&&(f=y(r,"offset","batchNorm")),D(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(f==null||a.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:U1(i),scale:c,offset:f,mean:a,variance:u},m={varianceEpsilon:s},b=E.runKernel(_y,p,m);return R(b,i.shape)}var to=w({batchNorm_:ij});function aj(t,e,n,r,o,s){let i=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let f;return r!=null&&(f=y(r,"offset","batchNorm")),D(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),D(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),D(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&D(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),to(i,a,u,f,c,s)}var r0=w({batchNorm2d_:aj});function uj(t,e,n,r,o,s){let i=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let f;return r!=null&&(f=y(r,"offset","batchNorm")),D(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),D(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),D(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&D(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),to(i,a,u,f,c,s)}var o0=w({batchNorm3d_:uj});function cj(t,e,n,r,o,s){let i=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let f;return r!=null&&(f=y(r,"offset","batchNorm")),D(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),D(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),D(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&D(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),to(i,a,u,f,c,s)}var s0=w({batchNorm4d_:cj});function lj(t,e,n){let r=y(t,"x","bincount"),o=y(e,"weights","bincount");D(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let s={x:r,weights:o},i={size:n};return E.runKernel(Gg,s,i)}var qu=w({bincount_:lj});function fj(t,e){let n=y(t,"x","bitwiseAnd"),r=y(e,"y","bitwiseAnd");if(!Pt(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let o={a:n,b:r};return E.runKernel(Wg,o)}var i0=w({bitwiseAnd_:fj});function dj(t,e){let n=y(t,"s0","broadcastArgs","int32"),r=y(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:n,s1:r};return E.runKernel(qg,o)}var a0=w({broadcastArgs_:dj});function pj(t,e){let n=y(t,"broadcastTo","x"),r=n.shape;if(Ge(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){let c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=R(n,c)}let o=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(o[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return Yt(n);let a={x:n},u={reps:s};return E.runKernel(Cu,a,u)}var Ps=w({broadcastTo_:pj});function hj(t){let n={x:y(t,"x","ceil","float32")};return E.runKernel(Kg,n)}var u0=w({ceil_:hj});function nr(t,e,n){Ge(t),n=n||No(e);let r={shape:t,value:e,dtype:n};return E.runKernel(Ty,{},r)}function mj(t,e,n){let r=y(t,"x","clipByValue");if(D(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return nr(r.shape,e,r.dtype);let o={x:r},s={clipValueMin:e,clipValueMax:n};return E.runKernel(Zg,o,s)}var c0=w({clipByValue_:mj});function gj(t){return Be(t,0)}var l0=w({concat1d_:gj});function yj(t,e){return Be(t,e)}var f0=w({concat2d_:yj});function vj(t,e){return Be(t,e)}var d0=w({concat3d_:vj});function wj(t,e){return Be(t,e)}var p0=w({concat4d_:wj});function bj(t,e,n,r,o="NHWC",s=[1,1],i){let a=y(t,"x","conv2d","float32"),u=y(e,"filter","conv2d","float32"),c=a,f=!1;a.rank===3&&(f=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),D(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),rt("conv2d",r,i);let d=o==="NHWC"?c.shape[3]:c.shape[1];D(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),D(kt(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),D(Cr(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),D(Cr(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},b=E.runKernel(Jg,p,m);return f?R(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var no=w({conv2d_:bj});function Ej(t,e,n,r,o="NWC",s=1,i){let a=y(t,"x","conv1d"),u=y(e,"filter","conv1d"),c=a,f=!1;a.rank===2&&(f=!0,c=R(a,[1,a.shape[0],a.shape[1]])),D(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),D(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),rt("conv1d",r,i),D(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),D(kt(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),D(Cr(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),D(Cr(n),()=>"Error in conv1D: Stride should be larger than 0."),D(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let d=R(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=R(c,[c.shape[0],1,c.shape[1],c.shape[2]]),T=no(p,d,[1,n],r,"NHWC",[1,s],i);return f?R(T,[T.shape[2],T.shape[3]]):R(T,[T.shape[0],T.shape[2],T.shape[3]])}var h0=w({conv1d_:Ej});function xj(t,e,n,r,o,s="NHWC",i){D(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,u=e,c=!1;e.rank===3&&(c=!0,u=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),D(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),D(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),D(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let f=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?u.shape[3]:u.shape[1];D(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),D(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),rt("conv2dDerInput",o,i);let p={dy:u,filter:n},m={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,inputShape:a},b=E.runKernel(ty,p,m);return c?R(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var od=w({conv2DBackpropInput_:xj});function Dj(t,e,n,r,o,s){let i=y(t,"x","conv2dTranspose"),a=y(e,"filter","conv2dTranspose");return od(n,i,a,r,o,"NHWC",s)}var m0=w({conv2dTranspose_:Dj});function Ij(t,e,n,r,o="NDHWC",s=[1,1,1]){let i=y(t,"x","conv3d"),a=y(e,"filter","conv3d"),u=i,c=!1;i.rank===4&&(c=!0,u=R(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),D(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),D(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),D(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),D(kt(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),D(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),D(Cr(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),D(Cr(n),()=>"Error in conv3D: Strides should be larger than 0.");let f={x:u,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:s},p=E.runKernel(ny,f,d);return c?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var g0=w({conv3d_:Ij});function Tj(t,e,n,r,o){D(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,i=e,a=!1;e.rank===4&&(a=!0,i=R(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);let u=s[4],c=i.shape[4];D(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),D(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),D(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),D(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),D(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let f={dy:i,filter:n},d={pad:o,strides:r,inputShape:s},p=E.runKernel(ry,f,d);return a?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var H1=w({conv3DBackpropInput_:Tj});function Sj(t,e,n,r,o){let s=y(t,"x","conv3dTranspose"),i=y(e,"filter","conv3dTranspose");return H1(n,s,i,r,o)}var y0=w({conv3dTranspose_:Sj});function Nj(t){let n={x:y(t,"x","cos","float32")};return E.runKernel(oy,n)}var v0=w({cos_:Nj});function Cj(t){let n={x:y(t,"x","cosh","float32")};return E.runKernel(sy,n)}var w0=w({cosh_:Cj});function _j(t,e=0,n=!1,r=!1){let s={x:y(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return E.runKernel(iy,s,i)}var b0=w({cumprod_:_j});function Aj(t,e=0,n=!1,r=!1){let s={x:y(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return E.runKernel(ay,s,i)}var E0=w({cumsum_:Aj});function Mj(t,e,n,r=!1){let o=y(t,"x","denseBincount"),s=y(e,"weights","denseBincount");D(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),D(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(s.size===o.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${s.shape}.`);let i={x:o,weights:s},a={size:n,binaryOutput:r};return E.runKernel(cy,i,a)}var x0=w({denseBincount_:Mj});function kj(t,e,n="NHWC"){let r=y(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];D(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),D(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),D(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),D(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);let a={x:r},u={blockSize:e,dataFormat:n};return E.runKernel(ly,a,u)}var D0=w({depthToSpace_:kj});function Oj(t,e,n,r,o="NHWC",s=[1,1],i){let a=y(t,"x","depthwiseConv2d","float32"),u=y(e,"filter","depthwiseConv2d","float32"),c=a,f=!1;a.rank===3&&(f=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),D(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let d=o==="NHWC"?c.shape[3]:c.shape[1];D(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),rt("depthwiseConv2d",r,i);let p={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},b=E.runKernel(fy,p,m);return f?R(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var $s=w({depthwiseConv2d_:Oj});function Rj(t){let n={x:y(t,"x","diag")};return E.runKernel(hy,n)}var I0=w({diag_:Rj});function Fj(t,e,n,r,o=[1,1],s="NHWC"){let i=y(t,"x","dilation2d"),a=y(e,"filter","dilation2d");D(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),D(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),D(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=i,c=!1;i.rank===3&&(u=R(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),D(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);let f={x:u,filter:a},d={strides:n,pad:r,dilations:o},p=E.runKernel(my,f,d);return c?R(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var T0=w({dilation2d_:Fj});var Ls={};_e(Ls,{assertAndGetBroadcastShape:()=>Me,getBroadcastDims:()=>z1,getReductionAxes:()=>sd});function z1(t,e){let n=t.length,r=[];for(let o=0;o<n;o++){let s=n-1-o,i=t[s]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}function sd(t,e){let n=[];for(let r=0;r<e.length;r++){let o=t[t.length-r-1],s=e.length-r-1,i=e[s];(o==null||o===1&&i>1)&&n.unshift(s)}return n}function Me(t,e){let n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let s=t[t.length-o-1];s==null&&(s=1);let i=e[e.length-o-1];if(i==null&&(i=1),s===1)r[n-o-1]=i;else if(i===1)r[n-o-1]=s;else if(s!==i){let a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=s}return r}function Pj(t,e){let n=y(t,"a","equal","string_or_numeric"),r=y(e,"b","equal","string_or_numeric");[n,r]=he(n,r),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(by,o)}var ko=w({equal_:Pj});function $j(t,e,n){let r=y(e,"a","where"),o=y(n,"b","where"),s=y(t,"condition","where","bool"),i=Me(Me(s.shape,r.shape),o.shape),a=Ps(s,i),u=Ps(r,i),c=Ps(o,i),f={condition:a,t:u,e:c};return E.runKernel(Pv,f)}var an=w({where_:$j});function Lj(t){let n={x:y(t,"x","zerosLike")};return E.runKernel(hw,n)}var st=w({zerosLike_:Lj});function Bj(t,e){let n=y(t,"a","div"),r=y(e,"b","div");[n,r]=he(n,r);let o=ve(n,r),s=st(o),i=ko(r,s);return an(i,s,o)}var S0=w({divNoNan_:Bj});function jj(t,e){let n=y(t,"t1","dot"),r=y(e,"t2","dot");D((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let o=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(D(o===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${s}.`),n.rank===1&&r.rank===1){let i=R(n,[1,-1]),a=R(r,[-1,1]),u=Ie(i,a);return R(u,[])}else if(n.rank===1&&r.rank===2){let i=R(n,[1,-1]),a=R(r,[r.shape[0],r.shape[1]]),u=Ie(i,a);return R(u,[u.size])}else if(n.rank===2&&r.rank===1){let i=R(r,[-1,1]),a=Ie(n,i);return R(a,[a.size])}else{let i=R(r,[r.shape[0],r.shape[1]]);return Ie(n,i)}}var N0=w({dot_:jj});function Vj(t,...e){let n=e.map((o,s)=>y(o,`tensors${s}`,"einsum")),r={equation:t};return E.runKernel(yy,n,r)}var ro=w({einsum_:Vj});function Uj(t){let n={x:y(t,"x","elu","float32")};return E.runKernel(vy,n)}var Ku=w({elu_:Uj});function Hj(t,e){let n=y(t,"x","ensureShape","string_or_numeric");if(!bg(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}var C0=w({ensureShape_:Hj});function zj(t){let e=y(t,"x","erf");D(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=ae(e,"float32"));let n={x:e};return E.runKernel(wy,n)}var _0=w({erf_:zj});function A0(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function G1(t,e,n){let r=t.length+e.length,o=[],s=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[s++]):o.push(e[i++]);return o}function Gj(t,e){let n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);let o=e.map(s=>t[s]);return[n,o]}function oo(t,e){let n=e.map(r=>1);return G1(t,n,e)}function Wj(t,e,n){D(A0(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function qj(t,e){if(A0(t,e))return null;let n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Kj(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Zj(t,e){let n=[];for(let r=e-t;r<e;++r)n.push(r);return n}function Qj(t,e=null,n=!1){let o={x:y(t,"x","max")},s={reductionIndices:e,keepDims:n};return E.runKernel(Zy,o,s)}var rr=w({max_:Qj});function Xj(t,e=null,n=!1){let o={x:y(t,"x","min")},s={axis:e,keepDims:n};return E.runKernel(tv,o,s)}var aa=w({min_:Xj});function Jj(t,e){let n=y(t,"base","pow"),r=y(e,"exp","pow");[n,r]=he(n,r);let o={a:n,b:r};return E.runKernel(gv,o)}var Ar=w({pow_:Jj});function ee(t,e){if((nt(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&nt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bt(t,[],[],e)}function eV(t){let n={x:y(t,"x","sqrt","float32")};return E.runKernel(zv,n)}var Vt=w({sqrt_:eV});function tV(t){let e=y(t,"x","square"),n={};return E.runKernel("Square",{x:e},n)}var ht=w({square_:tV});function nV(t,e=null,n=!1){let r=y(t,"x","sum");r.dtype==="bool"&&(r=ae(r,"int32"));let o={x:r},s={axis:e,keepDims:n};return E.runKernel(Gv,o,s)}var ke=w({sum_:nV});function rV(t,e="euclidean",n=null,r=!1){t=y(t,"x","norm");let o=W1(t,e,n),s=o.shape;if(r){let i=So(n,t.shape);s=oo(o.shape,i)}return R(o,s)}function W1(t,e,n=null){if(t.rank===0)return pt(t);if(t.rank!==1&&n===null)return W1(R(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return ke(pt(t),n);if(e===1/0)return rr(pt(t),n);if(e===-1/0)return aa(pt(t),n);if(e==="euclidean"||e===2)return Vt(ke(Ar(pt(t),ee(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return rr(ke(pt(t),n[0]),n[1]-1);if(e===1/0)return rr(ke(pt(t),n[1]),n[0]);if(e===-1/0)return aa(ke(pt(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Vt(ke(ht(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var Oo=w({norm_:rV});function oV(t,e=null,n=!1){return Oo(t,"euclidean",e,n)}var M0=w({euclideanNorm_:oV});function sV(t){let n={x:y(t,"x","exp")};return E.runKernel(Ey,n)}var wn=w({exp_:sV});function iV(t,e=0){let n=y(t,"x","expandDims","string_or_numeric");D(e<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},o={dim:e};return E.runKernel(xy,r,o)}var wt=w({expandDims_:iV});function aV(t){let n={x:y(t,"x","expm1")};return E.runKernel(Dy,n)}var k0=w({expm1_:aV});function uV(t,e){let n=y(t,"x","tile","string_or_numeric");D(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);let r={x:n},o={reps:e};return E.runKernel(Cu,r,o)}var so=w({tile_:uV});function cV(t,e,n,r="float32"){e==null&&(e=t);let o=St([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)o.set(1,a,a);let i=R(o.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return so(wt(i,0),[n[0],1,1]);if(n.length===2)return so(wt(wt(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return so(wt(wt(wt(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var Zu=w({eye_:cV});function lV(t){let n={x:y(t,"x","floor","float32")};return E.runKernel(Ny,n)}var Yu=w({floor_:lV});function fV(t,e,n=0,r=0){let o=y(t,"x","gather"),s=y(e,"indices","gather","int32"),i={x:o,indices:s},a={axis:n,batchDims:r};return E.runKernel(Ay,i,a)}var Qu=w({gather_:fV});function dV(t,e){let n=y(t,"a","greater","string_or_numeric"),r=y(e,"b","greater","string_or_numeric");[n,r]=he(n,r),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(ky,o)}var Mr=w({greater_:dV});function pV(t,e){let n=y(t,"a","greaterEqual","string_or_numeric"),r=y(e,"b","greaterEqual","string_or_numeric");[n,r]=he(n,r),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(Oy,o)}var Xu=w({greaterEqual_:pV});function hV(t){let n={input:y(t,"input","imag")};return E.runKernel(Fy,n)}var io=w({imag_:hV});function mV(t){let n={x:y(t,"x","isFinite")};return E.runKernel(Py,n)}var O0=w({isFinite_:mV});function gV(t){let n={x:y(t,"x","isInf")};return E.runKernel($y,n)}var R0=w({isInf_:gV});function yV(t){let n={x:y(t,"x","isNaN")};return E.runKernel(Ly,n)}var F0=w({isNaN_:yV});function vV(t,e=.2){let r={x:y(t,"x","leakyRelu")},o={alpha:e};return E.runKernel(By,r,o)}var Ju=w({leakyRelu_:vV});function wV(t,e){let n=y(t,"a","less","string_or_numeric"),r=y(e,"b","less","string_or_numeric");[n,r]=he(n,r),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(jy,o)}var ua=w({less_:wV});function bV(t,e){let n=y(t,"a","lessEqual","string_or_numeric"),r=y(e,"b","lessEqual","string_or_numeric");[n,r]=he(n,r),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(Vy,o)}var Bs=w({lessEqual_:bV});function P0(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:t,stop:e,num:n};return E.runKernel(Uy,{},r)}function EV(t,e=5,n=1,r=1,o=.5){let s=y(t,"x","localResponseNormalization");D(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),D(Yr(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=s,a=!1;s.rank===3&&(a=!0,i=R(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let u={x:i},c={depthRadius:e,bias:n,alpha:r,beta:o},f=E.runKernel(Ky,u,c);return a?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var $0=w({localResponseNormalization_:EV});function xV(t){let n={x:y(t,"x","log","float32")};return E.runKernel(Hy,n)}var kr=w({log_:xV});function DV(t){let n={x:y(t,"x","log1p")};return E.runKernel(zy,n)}var ec=w({log1p_:DV});function q1(t){return D(Dr(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{let r=y(e,"x","tf.grad","string_or_numeric"),o=n!=null?y(n,"dy","tf.grad"):null;return E.tidy(()=>{let{value:s,grads:i}=E.gradients(()=>t(r),[r],o);return o!=null&&Ue(s.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),ad(i),i[0]})}}function K1(t){return D(Dr(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{D(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Xr(e,"args","tf.grads","string_or_numeric"),o=n!=null?y(n,"dy","tf.grads"):null;return E.tidy(()=>{let{value:s,grads:i}=E.gradients(()=>t(...r),r,o);return o!=null&&Ue(s.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ad(i),i})}}function Z1(t){return D(Dr(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{D(e instanceof ye,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),D(n==null||n instanceof ye,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=E.gradients(()=>t(e),[e],n);return ad(r),{grad:r[0],value:o}}}function Y1(t){return D(Dr(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{D(Array.isArray(e)&&e.every(o=>o instanceof ye),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),D(n==null||n instanceof ye,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=E.gradients(()=>t(...e),e,n);return n!=null&&Ue(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ad(r.grads),r}}function id(t,e){D(Dr(t),()=>"The f passed in variableGrads(f) must be a function"),D(e==null||Array.isArray(e)&&e.every(c=>c instanceof Sr),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=e!=null;if(!n){e=[];for(let c in E.registeredVariables)e.push(E.registeredVariables[c])}let r=n?e.filter(c=>!c.trainable):null,o=e.length;e=e.filter(c=>c.trainable),D(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let s=!0,{value:i,grads:a}=E.gradients(t,e,null,s);D(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),D(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);let u={};return e.forEach((c,f)=>{a[f]!=null&&(u[c.name]=a[f])}),r?.forEach(c=>u[c.name]=null),{value:i,grads:u}}function Ot(t){return E.customGrad(t)}function ad(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function IV(t){let n={x:y(t,"x","neg")};return E.runKernel(av,n)}var bt=w({neg_:IV});function TV(t){let n={x:y(t,"x","softplus")};return E.runKernel(Hv,n)}var tc=w({softplus_:TV});function SV(t){let e=y(t,"x","logSigmoid");return Ot(r=>({value:bt(tc(bt(r))),gradFunc:i=>V(i,Qt(bt(r)))}))(e)}var L0=w({logSigmoid_:SV});function NV(t,e){let n=y(t,"a","sub"),r=y(e,"b","sub");[n,r]=he(n,r);let o={a:n,b:r};return E.runKernel(iw,o)}var ne=w({sub_:NV});function CV(t,e=-1){let n=y(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ot((o,s)=>{let a=rr(o,e,!0),u=ne(o,a),c=ne(ae(u,"float32"),kr(ke(wn(u),e,!0)));return s([c]),{value:c,gradFunc:(d,p)=>{let[m]=p,b=!0,I=wn(m);return ne(d,V(ke(d,e,b),I))}}})(n)}var B0=w({logSoftmax_:CV});function _V(t,e=null,n=!1){let r=y(t,"x","logSumExp"),o=So(e,r.shape),s=rr(r,o,!0),i=ne(r,s),a=wn(i),u=ke(a,o),c=kr(u),f=Y(R(s,c.shape),c);if(n){let d=oo(f.shape,o);return R(f,d)}return f}var nc=w({logSumExp_:_V});function AV(t,e){let n=y(t,"a","logicalAnd","bool"),r=y(e,"b","logicalAnd","bool");Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(Gy,o)}var Ro=w({logicalAnd_:AV});function MV(t){let n={x:y(t,"x","logicalNot","bool")};return E.runKernel(Wy,n)}var rc=w({logicalNot_:MV});function kV(t,e){let n=y(t,"a","logicalOr","bool"),r=y(e,"b","logicalOr","bool");Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(qy,o)}var oc=w({logicalOr_:kV});function OV(t,e){let n=y(t,"a","logicalXor","bool"),r=y(e,"b","logicalXor","bool");return Me(n.shape,r.shape),Ro(oc(t,e),rc(Ro(t,e)))}var j0=w({logicalXor_:OV});var ud=2147483648;function RV(t,e,n="left"){let r=y(t,"sortedSequence","searchSorted"),o=y(e,"values","searchSorted"),s=r.shape[r.shape.length-1],i=o.shape[o.shape.length-1],a=R(r,[-1,s]),u=R(o,[-1,i]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(me(u.shape)>=ud)throw new Error(`values tensor size must less than ${ud}`);if(a.shape[1]>=ud)throw new Error(`trailing dim_size must less than ${ud} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:u},f={side:n};return E.runKernel(Fv,c,f)}var ca=w({searchSorted_:RV});function V0(t,e){return ca(t,e,"left")}function FV(t,e,n,r,o){let s=y(t,"x","maxPool"),i=1,a=s,u=!1;s.rank===3&&(u=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2]])),D(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),D(kt(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),rt("maxPool",r,o);let c={x:a},f={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=E.runKernel(Qy,c,f);return u?R(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var sc=w({maxPool_:FV});function PV(t,e=[1,1,1],n,r,o,s="NDHWC"){let i=y(t,"x","maxPool3d"),a=i,u=!1;i.rank===4&&(u=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),D(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),D(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),rt("maxPool3d",r,o);let c={x:a},f={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s},d=E.runKernel(Xy,c,f);return u?R(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var U0=w({maxPool3d_:PV});function $V(t,e,n,r,o=!1){let i={x:y(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},u=E.runKernel(Jy,i,a);return{result:u[0],indexes:u[1]}}var H0=w({maxPoolWithArgmax_:$V});function LV(t,e){let n=y(t,"a","maximum"),r=y(e,"b","maximum");[n,r]=he(n,r),n.dtype==="bool"&&(n=ae(n,"int32"),r=ae(r,"int32")),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(Yy,o)}var ic=w({maximum_:LV});function BV(t,e=null,n=!1){let o={x:y(t,"x","mean")},s={axis:e,keepDims:n};return E.runKernel(ev,o,s)}var Fo=w({mean_:BV});function or(t,e="float32"){if(Ge(t),e==="complex64"){let r=or(t,"float32"),o=or(t,"float32");return Lt(r,o)}let n=qi(me(t),e);return E.makeTensor(n,t,e)}function sr(t,e="float32"){if(Ge(t),e==="complex64"){let r=sr(t,"float32"),o=or(t,"float32");return Lt(r,o)}let n=Du(me(t),e);return E.makeTensor(n,t,e)}function z0(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=y(t,"x","meshgrid",t instanceof ye?t.dtype:"float32");if(e===void 0)return[r];let o=y(e,"y","meshgrid",e instanceof ye?e.dtype:"float32"),s=me(r.shape),i=me(o.shape);return n==="xy"?(r=R(r,[1,-1]),o=R(o,[-1,1]),[Ie(sr([i,1],r.dtype),r),Ie(o,sr([1,s],o.dtype))]):(r=R(r,[-1,1]),o=R(o,[1,-1]),[Ie(r,sr([1,i],r.dtype)),Ie(sr([s,1],o.dtype),o)])}function jV(t,e){let n=y(t,"a","minimum"),r=y(e,"b","minimum");[n,r]=he(n,r),n.dtype==="bool"&&(n=ae(n,"int32"),r=ae(r,"int32")),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(nv,o)}var Po=w({minimum_:jV});function VV(t,e,n){D(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=y(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");D(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);let o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)D(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),D(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let s={paddings:e,mode:n},i={x:r};return E.runKernel(rv,i,s)}var ac=w({mirrorPad_:VV});function UV(t,e){let n=y(t,"a","mod"),r=y(e,"b","mod");[n,r]=he(n,r);let o={a:n,b:r};return E.runKernel(ov,o)}var G0=w({mod_:UV});function HV(t,e=null,n=!1){t=y(t,"x","moments");let r=So(e,t.shape),o=Fo(t,r,n),s=o.shape;n||(s=oo(o.shape,r));let i=ht(ne(ae(t,"float32"),R(o,s))),a=Fo(i,r,n);return{mean:o,variance:a}}var W0=w({moments_:HV});function zV(t,e,n,r){let o=y(e,"data","multiRNNCell"),s=Xr(n,"c","multiRNNCell"),i=Xr(r,"h","multiRNNCell"),a=o,u=[];for(let d=0;d<t.length;d++){let p=t[d](a,s[d],i[d]);u.push(p[0]),u.push(p[1]),a=p[1]}let c=[],f=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),f.push(u[d+1]);return[c,f]}var q0=w({multiRNNCell_:zV});function GV(t,e,n,r=!1){let o=y(t,"logits","multinomial"),s=o.size,i=o.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();let u={logits:i===1?R(o,[1,-1]):o},c={numSamples:e,seed:n,normalized:r},f=E.runKernel(sv,u,c);return i===1?R(f,[f.size]):f}var K0=w({multinomial_:GV});function WV(t,e){let n=y(t,"a","notEqual","string_or_numeric"),r=y(e,"b","notEqual","string_or_numeric");[n,r]=he(n,r),Me(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(uv,o)}var uc=w({notEqual_:WV});function qV(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let i={indices:y(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return E.runKernel(pv,i,a)}var $o=w({oneHot_:qV});function KV(t){let n={x:y(t,"x","onesLike")};return E.runKernel(dv,n)}var Z0=w({onesLike_:KV});function ZV(t,e){let n=y(t,"v1","outerProduct"),r=y(e,"v2","outerProduct");D(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let o=R(n,[-1,1]),s=R(r,[1,-1]);return Ie(o,s)}var Y0=w({outerProduct_:ZV});function YV(t,e,n=0){let r=y(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:e,constantValue:n},s={x:r};return E.runKernel(mv,s,o)}var bn=w({pad_:YV});function QV(t,e,n=0){return D(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),bn(t,[e],n)}var Q0=w({pad1d_:QV});function XV(t,e,n=0){return D(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),bn(t,e,n)}var X0=w({pad2d_:XV});function JV(t,e,n=0){return D(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),bn(t,e,n)}var cc=w({pad3d_:JV});function eU(t,e,n=0){return D(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),bn(t,e,n)}var J0=w({pad4d_:eU});function tU(t,e,n){let r=y(t,"x","spaceToBatchND");D(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),D(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),D(r.shape.reduce((i,a,u)=>u>0&&u<=e.length?i&&(a+n[u-1][0]+n[u-1][1])%e[u-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);let o={x:r},s={blockShape:e,paddings:n};return E.runKernel(Wv,o,s)}var lc=w({spaceToBatchND_:tU});function nU(t,e,n,r,o,s,i){o==null&&(o=[1,1]),s==null&&(s=1),r===0&&(r="valid");let a=y(t,"x","maxPool"),u=a,c=!1;a.rank===3&&(c=!0,u=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(kt(s,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${o}'`);let f=Jw(u.shape,e,s,o,r),d=[f.dilationHeight,f.dilationWidth],p;r==="same"?p=oU([f.filterHeight,f.filterWidth],d):p=[[0,0],[0,0]];let m=d[0]===1&&d[1]===1,[b,I]=rU([f.inHeight,f.inWidth],d,p),T=m?r:"valid",_=m?u:lc(u,d,b),A=(n==="avg"?()=>Gu(_,e,s,T,i):()=>sc(_,e,s,T,i))(),M=m?A:Wu(A,d,I);return c?R(M,[M.shape[1],M.shape[2],M.shape[3]]):M}function rU(t,e,n){let r=n.map(f=>f[0]),o=n.map(f=>f[1]),s=t.concat(r,o),i=e.map((f,d)=>(f-s[d]%f)%f),a=o.map((f,d)=>f+i[d]),u=e.map((f,d)=>[r[d],a[d]]),c=e.map((f,d)=>[0,i[d]]);return[u,c]}function oU(t,e){let r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),o=r.map(i=>Math.floor(i/2)),s=r.map((i,a)=>i-o[a]);return r.map((i,a)=>[o[a],s[a]])}var eb=w({pool_:nU});function sU(t,e){let n=y(t,"x","prelu"),r=y(e,"alpha","prelu"),o={x:n,alpha:r};return E.runKernel(yv,o)}var fc=w({prelu_:sU});function iU(t,e=null,n=!1){let r=y(t,"x","prod");r.dtype==="bool"&&(r=ae(r,"int32"));let o={x:r},s={axis:e,keepDims:n};return E.runKernel(vv,o,s)}var tb=w({prod_:iU});function aU(t,e,n,r){let o=t.map((f,d)=>y(f,`tensors${d}`,"raggedGather","int32")),s=y(e,"paramsDenseValues","raggedGather"),i=y(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:s,indices:i},u={outputRaggedRank:r},c=E.runKernel(wv,a,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var nb=w({raggedGather_:aU});function uU(t,e,n){let r=y(t,"starts","raggedRange"),o=y(e,"limits","raggedRange",r.dtype),s=y(n,"deltas","raggedRange",r.dtype),i={starts:r,limits:o,deltas:s},a=E.runKernel(bv,i);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var rb=w({raggedRange_:uU});function cU(t,e,n,r,o){let s=y(t,"shape","raggedTensorToTensor","int32"),i=y(e,"values","raggedTensorToTensor"),a=y(n,"defaultValue","raggedTensorToTensor",i.dtype),u=r.map((d,p)=>y(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:s,values:i,defaultValue:a,rowPartitionTensors:u},f={rowPartitionTypes:o};return E.runKernel(Ev,c,f)}var ob=w({raggedTensorToTensor_:cU});function lU(t,e,n){Ge(t);let r=me(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)o[s]=e();return E.makeTensor(o,t,n)}var sb=w({rand_:lU});var dd=Sp(pC());var mb={};_e(mb,{TEST_EPSILON_FLOAT16:()=>hC,createVideoElement:()=>IU,encodeStrings:()=>mC,expectArrayBuffersEqual:()=>DU,expectArraysClose:()=>vU,expectArraysEqual:()=>bU,expectNumbersClose:()=>EU,expectPromiseToFail:()=>wU,expectValuesInRange:()=>xU,play:()=>TU,testEpsilon:()=>pb});var yU=.001,hC=.1;function vU(t,e,n){return n==null&&(n=pb()),db(t,e,(r,o)=>hb(r,o,n))}function pb(){return E.backend.floatPrecision()===32?yU:hC}function db(t,e,n){let r=!0;if((nt(t)||nt(e))&&(r=!1),nt(t)&&nt(e)&&(r=!0),r){let i=t.constructor.name,a=e.constructor.name;if(i!==a)throw new Error(`Arrays are of different type. Actual: ${i}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){let i=It(t),a=It(e);if(!Pt(i,a))throw new Error(`Arrays have different shapes. Actual: [${i}]. Expected: [${a}]`)}let o=nt(t)?t:Jn(t),s=nt(e)?e:Jn(e);if(o.length!==s.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${s.length}.
Actual:   ${o}.
Expected: ${s}.`);for(let i=0;i<s.length;++i){let a=o[i],u=s[i];if(!n(a,u))throw new Error(`Arrays differ: actual[${i}] = ${a}, expected[${i}] = ${u}.
Actual:   ${o}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function wU(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function bU(t,e){let n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Qn(t)||Qn(t[0])||Qn(e)||Qn(e[0])?db(t,n,(r,o)=>r==o):db(t,e,(r,o)=>hb(r,o,0))}function EU(t,e,n){if(n==null&&(n=pb()),!hb(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function hb(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function xU(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function DU(t,e){let n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let o=0;o<r.length;o++)if(n[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${n[o]} instead`)}function mC(t){for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?mC(n):t[e]=_o(n)}return t}function IU(t){let e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}function TU(t){return L(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(e=>{t.requestVideoFrameCallback(e)}))})}var Vs=class{constructor(e,n,r,o,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let i=s||Math.random();this.random=dd.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,s,i;do o=2*this.random()-1,s=2*this.random()-1,i=o*o+s*s;while(i>=1||i===0);let a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},ld=class{constructor(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;let s=o||Math.random();this.randu=dd.alea(s.toString()),this.randn=new Vs(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,o,s,i;for(;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,e=o*o,n=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),s=this.randu(),s<n||Math.log(s)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},fd=class{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=dd.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function SU(t,e,n=1,r="float32",o){if(Ge(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let s=new ld(e,n,r,o),i=St(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var gb=w({randomGamma_:SU});function NU(t,e=0,n=1,r,o){if(Ge(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let s=new Vs(e,n,r,!1,o),i=St(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var dc=w({randomNormal_:NU});function CU(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return dc(t,0,1,e,n)}var yb=w({randomStandardNormal_:CU});function _U(t,e=0,n=1,r="float32",o){Ge(t);let s=St(t,r),i=new fd(e,n,null,o);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var Us=w({randomUniform_:_U});function AU(t,e,n,r){return Us(t,e,n,"int32",r)}var vb=w({randomUniformInt_:AU});function Pn(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let o={start:t,stop:e,step:n,dtype:r};return E.runKernel(xv,{},o)}function MU(t){let n={input:y(t,"input","real")};return E.runKernel(Dv,n)}var Or=w({real_:MU});function kU(t){let n={x:y(t,"x","reciprocal")};return E.runKernel(Iv,n)}var wb=w({reciprocal_:kU});function OU(t){let n={x:y(t,"x","relu")};return E.runKernel(Tv,n)}var ao=w({relu_:OU});function RU(t){let n={x:y(t,"x","relu6")};return E.runKernel(_v,n)}var pc=w({relu6_:RU});function FU(t,e){let r={x:y(t,"x","reverse")},o={dims:e};return E.runKernel(Av,r,o)}var un=w({reverse_:FU});function PU(t){let e=y(t,"x","reverse");return D(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),un(e,0)}var bb=w({reverse1d_:PU});function $U(t,e){let n=y(t,"x","reverse");return D(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),un(n,e)}var Eb=w({reverse2d_:$U});function LU(t,e){let n=y(t,"x","reverse");return D(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),un(n,e)}var xb=w({reverse3d_:LU});function BU(t,e){let n=y(t,"x","reverse");return D(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),un(n,e)}var Db=w({reverse4d_:BU});function jU(t){let n={x:y(t,"x","round")};return E.runKernel(Mv,n)}var hc=w({round_:jU});function VU(t){let n={x:y(t,"x","rsqrt","float32")};return E.runKernel(kv,n)}var Ib=w({rsqrt_:VU});function UU(t){let n={x:y(t,"x","selu")};return E.runKernel($v,n)}var Tb=w({selu_:UU});function HU(t,e,n,r,o,s=[1,1],i="NHWC"){let a=y(t,"x","separableConv2d"),u=y(e,"depthwiseFilter","separableConv2d"),c=y(n,"pointwiseFilter","separableConv2d"),f=a,d=!1;if(a.rank===3&&(d=!0,f=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),D(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),D(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),D(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),D(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=u.shape[2],m=u.shape[3];D(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);let b=$s(f,u,r,o,i,s),T=no(b,c,1,"valid",i);return d?R(T,[T.shape[1],T.shape[2],T.shape[3]]):T}var Sb=w({separableConv2d_:HU});function zU(t,e){return L(this,null,function*(){let n=y(t,"x","setdiff1d"),r=y(e,"y","setdiff1d");D(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),D(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),D(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield n.data(),s=yield r.data(),i=new Set(s),a=0;for(let f=0;f<o.length;f++)i.has(o[f])||a++;let u=new Qr([a],n.dtype),c=new Qr([a],"int32");for(let f=0,d=0;f<o.length;f++)i.has(o[f])||(u.values[d]=o[f],c.values[d]=f,d++);return[u.toTensor(),c.toTensor()]})}var Nb=zU;function GU(t){let n={x:y(t,"x","sign")};return E.runKernel(Vv,n)}var Cb=w({sign_:GU});function WU(t){let n={x:y(t,"x","sin","float32")};return E.runKernel(Bv,n)}var _b=w({sin_:WU});function qU(t){let n={x:y(t,"x","sinh")};return E.runKernel(jv,n)}var Ab=w({sinh_:qU});function KU(t,e,n){let r=y(t,"x","slice1d");return D(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),we(r,[e],[n])}var Mb=w({slice1d_:KU});function ZU(t,e,n){let r=y(t,"x","slice2d");return D(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),we(r,e,n)}var kb=w({slice2d_:ZU});function YU(t,e,n){let r=y(t,"x","slice3d");return D(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),we(r,e,n)}var Ob=w({slice3d_:YU});function QU(t,e,n){let r=y(t,"x","slice4d");return D(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),we(r,e,n)}var Rb=w({slice4d_:QU});function XU(t,e=-1){let n=y(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);let r={logits:n},o={dim:e};return E.runKernel(Kv,r,o)}var Fb=w({softmax_:XU});function JU(t){D(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let e={input:t};return E.runKernel(Iy,e)}var Hs=w({fft_:JU});function eH(t){D(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let e={input:t};return E.runKernel(Ry,e)}var Lo=w({ifft_:eH});function tH(t){let e=t.shape[t.shape.length-1],n=t.size/e,r;if(e<=2){let o=R(t,[n,e]);r=Lo(o)}else{let o=[n,2*(e-1)],s=R(Or(t),[n,e]),i=R(io(t),[n,e]),a=un(we(s,[0,1],[n,e-2]),1),u=V(un(we(i,[0,1],[n,e-2]),1),ee(-1)),c=Be([s,a],1),f=Be([i,u],1),d=R(Lt(c,f),[o[0],o[1]]);r=Lo(d)}if(r=Or(r),t.rank===3&&t.shape[0]!==0){let o=r,s=t.shape[0];r=R(r,[s,r.shape[0]/s,r.shape[1]]),o.dispose()}return r}var mc=w({irfft_:tH});function nH(t,e,n=0){let o={x:y(t,"x","split")},s={numOrSizeSplits:e,axis:n};return E.runKernel(qv,o,s)}var Rr=w({split_:nH});function rH(t,e){D(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],r=t.size/n,o;if(e!=null&&e<n){let b=t.shape.map(T=>0),I=t.shape.map(T=>T);I[t.shape.length-1]=e,o=we(t,b,I),n=e}else if(e!=null&&e>n){let b=t.shape.map(I=>I);b[t.shape.length-1]=e-n,o=Be([t,or(b)],t.shape.length-1),n=e}else o=t;let s=st(o),i=R(Lt(o,s),[r,n]),a=Hs(i),u=Math.floor(n/2)+1,c=Or(a),f=io(a),d=Rr(c,[u,n-u],c.shape.length-1),p=Rr(f,[u,n-u],f.shape.length-1),m=o.shape.slice();return m[o.shape.length-1]=u,R(Lt(d[0],p[0]),m)}var zs=w({rfft_:rH});function oH(t,e){let n=y(t,"a","squaredDifference"),r=y(e,"b","squaredDifference");[n,r]=he(n,r),Me(n.shape,r.shape);let o={a:n,b:r},s={};return E.runKernel(ew,o,s)}var gc=w({squaredDifference_:oH});function sH(t,e){let n=y(t,"x","squeeze","string_or_numeric");return R(n,Eg(n.shape,e).newShape)}var Ut=w({squeeze_:sH});function iH(t,e=0){let n=Xr(t,"tensors","stack","string_or_numeric");D(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&D(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,o={axis:e};return E.runKernel(hv,r,o)}var Rt=w({stack_:iH});function aH(t,e=0){let r={x:y(t,"x","step")},o={alpha:e};return E.runKernel(mw,r,o)}var yc=w({step_:aH});function uH(t,e,n,r,o=0,s=0,i=0,a=0,u=0){let f={x:y(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:u};return E.runKernel(nw,f,d)}var Pb=w({stridedSlice_:uH});function cH(t){let n={x:y(t,"x","tan","float32")};return E.runKernel(aw,n)}var $b=w({tan_:cH});function mt(t,e){vn(t);let n=It(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bt(t,null,n,e)}function ir(t,e,n){if(vn(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=It(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bt(t,e,r,n)}function vc(t,e,n){if(vn(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=It(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Bt(t,e,r,n)}function Lb(t,e,n){if(vn(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=It(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Bt(t,e,r,n)}function Bb(t,e,n){if(vn(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=It(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Bt(t,e,r,n)}function jb(t,e,n){if(vn(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=It(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Bt(t,e,r,n)}var wc={};_e(wc,{calculateShapes:()=>gC,validateInput:()=>la,validateUpdateShape:()=>Vb});function Vb(t,e,n){let r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(s+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(s+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(s+` update.rank != ${o+t.length-r}`);for(let i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(s+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${t[i+o]})`)}function la(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Vb(n,e,t)}function gC(t,e,n){let r=e.shape.length,o=r>1?e.shape[r-1]:1,s=n.length,i=1;for(let d=o;d<s;++d)i*=n[d];let a=o<1?1:o,u=me(e.shape)/a,c=[...Ir(n.slice(0,o)),1],f=me(n);return{sliceRank:o,numUpdates:u,sliceSize:i,strides:c,outputSize:f}}function lH(t,e,n){let r=y(t,"tensor","tensorScatterupdate"),o=y(e,"indices","tensorScatterupdate","int32"),s=y(n,"updates","tensorScatterupdate");if(la(s,o,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);let i={tensor:r,indices:o,updates:s},a={};return E.runKernel(Rv,i,a)}var Ub=w({tensorScatterUpdate_:lH});function fH(t,e=1,n=!0){let r=y(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);let s={x:r},i={k:e,sorted:n},[a,u]=E.runKernel(cw,s,i);return{values:a,indices:u}}var Hb=w({topk_:fH});function dH(t,e=0,n=1,r,o){if(Ge(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let s=new Vs(e,n,r,!0,o),i=St(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var zb=w({truncatedNormal_:dH});function pH(t,e=0){let n=y(t,"x","unique","string_or_numeric");D(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},o={axis:e},[s,i]=E.runKernel(fw,r,o);return{values:s,indices:i}}var Gb=w({unique_:pH});function hH(t,e,n){let r=y(t,"x","unsortedSegmentSum"),o=y(e,"segmentIds","unsortedSegmentSum","int32");D(Yr(n),()=>"numSegments must be of dtype int");let s={x:r,segmentIds:o},i={numSegments:n};return E.runKernel(pw,s,i)}var Wb=w({unsortedSegmentSum_:hH});function mH(t,e=0){let n=y(t,"x","unstack","string_or_numeric");D(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},o={axis:e};return E.runKernel(dw,r,o)}var cn=w({unstack_:mH});function qb(t,e){return ca(t,e,"right")}function Kb(t,e=!0,n,r){return E.makeVariable(t,e,n,r)}function pd(t,e){let n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);let r=St(t,"int32"),o=St([n.length,t.length],"int32");for(let s=0;s<n.length;s++){let i=r.indexToLoc(n[s]),a=s*t.length;o.values.set(i,a)}return o.toTensor()}function gH(t){return L(this,null,function*(){let e=y(t,"condition","whereAsync","bool"),n=yield e.data(),r=pd(e.shape,n);return t!==e&&e.dispose(),r})}var bc=gH;function yH(t,e,n){return L(this,null,function*(){let r=y(t,"tensor","boolMask"),o=y(e,"mask","boolMask","bool"),s=n??0,i=o.rank,a=r.shape;D(i>0,()=>"mask cannot be scalar"),Ue(a.slice(s,s+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let I=s;I<s+i;I++)u*=a[I];let c=a.slice(0,s).concat([u],a.slice(s+i)),f=R(r,c),d=R(o,[-1]),p=yield bc(d),m=Ut(p,[1]),b=Qu(f,m,s);return t!==r&&r.dispose(),e!==o&&o.dispose(),m.dispose(),f.dispose(),d.dispose(),p.dispose(),b})}var yC=yH;function vH(t,e,n){let r=y(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),D(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{D(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();let o={x:r},s={perm:e};return r.dtype==="complex64"?J(()=>{let i=Or(r),a=io(r);return i=E.runKernel(_u,{x:i},s),a=E.runKernel(_u,{x:a},s),n&&(a=bt(a)),Lt(i,a)}):E.runKernel(_u,o,s)}var Gs=w({transpose_:vH});function wH(t,e,n,r,o=!0){let s=y(t,"v","movingAverage"),i=y(e,"x","movingAverage"),a=y(n,"decay","movingAverage");Sw(s,i),D(Pt(s.shape,i.shape),()=>"Shape mismatch in v and x");let u=ee(1),c=ne(u,a),f=V(ne(i,s),c);if(o){D(r!=null,()=>"When using zeroDebias: true, step is required.");let d=y(r,"step","movingAverage");f=ve(f,ne(u,Ar(a,d)))}return Y(s,f)}var vC=w({movingAverage_:wH});function bH(t,e,n){Ge(n);let r=y(t,"indices","scatterND","int32"),o=y(e,"updates","scatterND");la(o,r,n);let s={indices:r,updates:o},i={shape:n};return E.runKernel(Ov,s,i)}var wC=w({scatterND_:bH});function bC(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let o=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);let i=e.size;if(!(e.rank===0||e.rank===1&&i===o))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${o}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function xH(t,e,n,r=0){Ge(n);let o=y(t,"sparseIndices","sparseToDense","int32"),s=y(e,"sparseValues","sparseToDense","string_or_numeric"),i=y(r,"defaultValue","sparseToDense",s.dtype);bC(o,s,n,i);let a={sparseIndices:o,sparseValues:s,defaultValue:i},u={outputShape:n};return E.runKernel(Jv,a,u)}var EC=w({sparseToDense_:xH});function DH(t,e){let n=y(e,"indices","gatherND","int32"),o={params:y(t,"x","gatherND","string_or_numeric"),indices:n};return E.runKernel(My,o)}var xC=w({gatherND_:DH});function DC(t,e){if(e==null)return t.shape.slice();if(Pt(t.shape,e))return e;if(t.shape.length===e.length){let n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}function IH(t,e,n,r){let o=y(t,"x","dropout");if(D(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),D(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof ye?o.clone():o;let s=DC(o,n),i=1-e,a=ve(Yu(Y(Us(s,0,1,"float32",r),i)),i);return V(o,a)}var IC=w({dropout_:IH});function hd(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function fa(t,e,n){let r=1-t%2,o=new Float32Array(t);for(let s=0;s<t;++s){let i=2*Math.PI*s/(t+r-1);o[s]=e-n*Math.cos(i)}return mt(o,"float32")}function TH(t,e,n=1){return L(this,null,function*(){let r=y(t,"predictions","inTopK"),o=y(e,"targets","inTopK");D(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),D(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),Ue(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let s=r.shape[r.shape.length-1];D(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);let i=yield r.data(),a=yield o.data(),[u,c]=[i.length/s,s],f=xg("bool",u);for(let d=0;d<u;d++){let p=d*c,m=i.subarray(p,p+c),b=[];for(let I=0;I<m.length;I++)b.push({value:m[I],index:I});b.sort((I,T)=>T.value-I.value),f[d]=0;for(let I=0;I<n;I++)if(b[I].index===a[d]){f[d]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),vt(f,o.shape,"bool")})}var TC=TH;var md={};_e(md,{conv2d:()=>NC,depthwiseConv2d:()=>AC,matMul:()=>MC});function SH(t,e,n,r,o,s="NHWC",i){let a=t;t.rank===3&&(a=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=R(e,[1,e.shape[0],e.shape[1],e.shape[2]])),D(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),D(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),D(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=s==="NHWC"?a.shape[3]:a.shape[1],f=s==="NHWC"?u.shape[3]:u.shape[1];D(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),D(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),rt("conv2dDerFilter",o,i);let d={x:a,dy:u},p={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,filterShape:n};return E.runKernel(ey,d,p)}var SC=w({conv2DBackpropFilter_:SH});function Ws(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return V(t,yc(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function qs(t,e){let n=e,r=sd(t.shape,e.shape);return r.length>0&&(n=ke(n,r)),R(n,t.shape)}function Ks(t,e,n,r){if(e==="linear")return t;if(e==="relu")return ao(t);if(e==="elu")return Ku(t);if(e==="relu6")return pc(t);if(e==="prelu")return fc(t,n);if(e==="leakyrelu")return Ju(t,r);if(e==="sigmoid")return Qt(t);throw new Error(`Unknown fused activation ${e}.`)}var Zs=(t,e)=>!(t>0)||e==="linear";function NH({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(u=u||"linear",Zs(E.state.gradientDepth,u)===!1){D(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let F=no(t,e,n,r,o,s,i);return a!=null&&(F=Y(F,a)),Ks(F,u,c,f)}let d=y(t,"x","conv2d","float32"),p=y(e,"filter","conv2d","float32"),m=d,b=!1;d.rank===3&&(b=!0,m=R(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),D(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),rt("fused conv2d",r,i);let I=o==="NHWC"?m.shape[3]:m.shape[1];D(p.shape[2]===I,()=>`Error in conv2d: depth of input (${I}) must match input depth for filter ${p.shape[2]}.`),D(kt(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let T=Fs(m.shape,p.shape,n,s,r,i),_;a!=null&&(_=y(a,"bias","fused conv2d"),[_]=he(_,d),o==="NHWC"?Me(T.outShape,_.shape):(D(_.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${_.shape.length}.`),D(_.shape.length===0||_.shape[0]===T.outChannels||_.shape[0]===1,()=>`Error in fused conv2d: bias shape (${_.shape}) is not compatible with the number of output channels (${T.outChannels})`)));let O;if(c!=null){let F=c.shape;if(D(F.length<=1||F.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${F.length}.`),F.length===1)D(F[0]===1||F[0]===T.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${F}) is not compatible with the number of output channels (${T.outChannels}).`);else if(F.length===3)try{Me(F,T.outShape)}catch{let B=`Error in fused conv2d: PReLU activation weights (${F}) is not compatible with the output shape of the conv2d (${T.outShape}).`;throw Error(B)}O=y(c,"prelu weights","fused conv2d")}let A=(F,j)=>{D(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[B,G,W,H]=j,se=Ws(F,W,u);D(Rs(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let te=od(G.shape,se,B,n,r),xe=SC(G,se,B.shape,n,r),Te=[te,xe];if(H!=null){let Qe=qs(H,se);Te.push(Qe)}return Te},M={x:m,filter:p,bias:_,preluActivationWeights:O},$={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:u,leakyreluAlpha:f};return a==null?Ot((j,B,G)=>{let W=E.runKernel(Lf,M,$);return G([B,j,W]),b&&(W=R(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:A}})(m,p):Ot((j,B,G,W)=>{let H=E.runKernel(Lf,M,$);return W([B,j,H,G]),b&&(H=R(H,[H.shape[1],H.shape[2],H.shape[3]])),{value:H,gradFunc:A}})(m,p,_)}var NC=w({fusedConv2d_:NH});function CH(t,e,n,r,o,s=[1,1],i){let a=t;t.rank===3&&(a=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={x:a,dy:u},f={strides:r,pad:o,dimRoundingMode:i,dilations:s,filterShape:n};return E.runKernel(dy,c,f)}var CC=w({depthwiseConv2dNativeBackpropFilter_:CH});function _H(t,e,n,r,o,s=[1,1],i){let a=e,u=!1;e.rank===3&&(u=!0,a=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={dy:a,filter:n},f={strides:r,pad:o,dimRoundingMode:i,dilations:s,inputShape:t},d=E.runKernel(py,c,f);return u?R(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var _C=w({depthwiseConv2dNativeBackpropInput_:_H});function AH({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(Zs(E.state.gradientDepth,u)===!1){let $=$s(t,e,n,r,o,s,i);return a!=null&&($=Y($,a)),Ks($,u,c,f)}let d=y(t,"x","depthwiseConv2d","float32"),p=y(e,"filter","depthwiseConv2d","float32"),m=d,b=!1;d.rank===3&&(b=!0,m=R(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),D(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),D(m.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),s==null&&(s=[1,1]),D(kt(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),rt("fused depthwiseConv2d",r,i);let I=Fs(m.shape,p.shape,n,s,r,i,!0),T;a!=null&&(T=y(a,"bias","fused conv2d"),[T]=he(T,d),Me(I.outShape,T.shape));let _;c!=null&&(_=y(c,"prelu weights","fused depthwiseConv2d"));let O=($,F)=>{D(Rs(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[j,B,G,W]=F,H=Ws($,G,u),se=_C(B.shape,H,j,n,r,s,i),te=CC(B,H,j.shape,n,r,s,i);if(W!=null){let xe=qs(T,H);return[se,te,xe]}return[se,te]},A={x:m,filter:p,bias:T,preluActivationWeights:_},M={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:u,leakyreluAlpha:f};return a==null?Ot((F,j,B)=>{let G=E.runKernel(Bf,A,M);return B([j,F,G]),b&&(G=R(G,[G.shape[1],G.shape[2],G.shape[3]])),{value:G,gradFunc:O}})(m,p):Ot((F,j,B,G)=>{let W=E.runKernel(Bf,A,M);return G([j,F,W,B]),b&&(W=R(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:O}})(m,p,T)}var AC=w({fusedDepthwiseConv2d_:AH});function MH({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(Zs(E.state.gradientDepth,s)===!1){let H=Ie(t,e,n,r);return o!=null&&(H=Y(H,o)),Ks(H,s,i,a)}let u=y(t,"a","fused matMul"),c=y(e,"b","fused matMul");[u,c]=he(u,c);let f=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?u.shape[u.rank-1]:u.shape[u.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],b=u.shape.slice(0,-2),I=c.shape.slice(0,-2),T=me(b),_=me(I);D(f===d,()=>`Error in fused matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);let A=Me(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),M=n?R(u,[T,f,p]):R(u,[T,p,f]),$=r?R(c,[_,m,d]):R(c,[_,d,m]),F;o!=null&&(F=y(o,"bias","fused matMul"),[F]=he(F,u),Me(A,F.shape));let j;i!=null&&(j=y(i,"prelu weights","fused matMul"));let B=(H,se)=>{let[te,xe,Te,Qe]=se,tt=Ws(R(H,Te.shape),Te,s),Et,ct;if(!n&&!r?(Et=Ie(tt,xe,!1,!0),ct=Ie(te,tt,!0,!1)):!n&&r?(Et=Ie(tt,xe,!1,!1),ct=Ie(tt,te,!0,!1)):n&&!r?(Et=Ie(xe,tt,!1,!0),ct=Ie(te,tt,!1,!1)):(Et=Ie(xe,tt,!0,!0),ct=Ie(tt,te,!0,!0)),o!=null){let Pr=qs(Qe,tt);return[Et,ct,Pr]}else return[Et,ct]},G={a:M,b:$,bias:F,preluActivationWeights:j},W={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return o==null?Ot((se,te,xe)=>{let Te=E.runKernel($f,G,W);return xe([se,te,Te]),{value:R(Te,A),gradFunc:B}})(M,$):Ot((se,te,xe,Te)=>{let Qe=E.runKernel($f,G,W);return Te([se,te,Qe,xe]),{value:R(Qe,A),gradFunc:B}})(M,$,F)}var MC=w({fusedMatMul_:MH});function kH(t){return fa(t,.54,.46)}var kC=w({hammingWindow_:kH});function OH(t){return fa(t,.5,.5)}var gd=w({hannWindow_:OH});function RH(t,e,n,r=!1,o=0){let s=0,i=[];for(;s+e<=t.size;)i.push(we(t,s,e)),s+=n;if(r)for(;s<t.size;){let a=s+e-t.size,u=Be([we(t,s,e-a),nr([a],o)]);i.push(u),s+=n}return i.length===0?ir([],[0,e]):R(Be(i),[i.length,e])}var yd=w({frame_:RH});function FH(t,e,n,r,o=gd){r==null&&(r=hd(e));let s=yd(t,e,n),i=V(s,o(e));return zs(i,r)}var OC=w({stft_:FH});function PH(t,e,n,r,o="bilinear",s=0){let i=y(t,"image","cropAndResize"),a=y(e,"boxes","cropAndResize","float32"),u=y(n,"boxInd","cropAndResize","int32"),c=a.shape[0];D(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),D(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),D(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),D(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),D(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),D(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let f={image:i,boxes:a,boxInd:u},d={method:o,extrapolationValue:s,cropSize:r};return E.runKernel(uy,f,d)}var RC=w({cropAndResize_:PH});function $H(t){let e=y(t,"image","flipLeftRight","float32");D(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);let n={image:e};return E.runKernel(Sy,n,{})}var FC=w({flipLeftRight_:$H});function LH(t){let e=y(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];D(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),D(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,so(e,o)}var PC=w({grayscaleToRGB_:LH});function BH(t){let e=y(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];D(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),D(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=e.dtype,s=ae(e,"float32"),i=mt([.2989,.587,.114]),a;switch(e.rank){case 2:a=ro("ij,j->i",s,i);break;case 3:a=ro("ijk,k->ij",s,i);break;case 4:a=ro("ijkl,l->ijk",s,i);break;case 5:a=ro("ijklm,m->ijkl",s,i);break;case 6:a=ro("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return a=wt(a,-1),ae(a,o)}var $C=w({rgbToGrayscale_:BH});function jH(t,e,n=0,r=.5){let o=y(t,"image","rotateWithOffset","float32");D(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let s={image:o},i={radians:e,fillValue:n,center:r};return E.runKernel(gw,s,i)}var LC=w({rotateWithOffset_:jH});function $n(t,e,n,r,o,s){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),s==null&&(s=0);let i=t.shape[0];return n=Math.min(n,i),D(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),D(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),D(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),D(e.rank===1,()=>"scores must be a 1D tensor"),D(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),D(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s}}function VH(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let s=y(t,"boxes","nonMaxSuppression","float32"),i=y(e,"scores","nonMaxSuppression","float32"),a=$n(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return E.runKernel(cv,{boxes:s,scores:i},u)}var BC=w({nonMaxSuppression_:VH});function jC(t,e,n){let r=UH(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function UH(t,e,n){return zH(t,e,n||HH)}function HH(t,e){return t>e?1:t<e?-1:0}function zH(t,e,n){let r=0,o=t.length,s=0,i=!1;for(;r<o;){s=r+(o-r>>>1);let a=n(e,t[s]);a>0?r=s+1:(o=s,i=!a)}return i?r:-r-1}function vd(t,e,n,r,o){return Zb(t,e,n,r,o,0)}function wd(t,e,n,r,o,s){return Zb(t,e,n,r,o,0,!1,s,!0)}function bd(t,e,n,r,o,s){return Zb(t,e,n,r,o,s,!0)}function Zb(t,e,n,r,o,s,i=!1,a=!1,u=!1){let c=[];for(let T=0;T<e.length;T++)e[T]>o&&c.push({score:e[T],boxIndex:T,suppressBeginIndex:0});c.sort(VC);let f=s>0?-.5/s:0,d=[],p=[];for(;d.length<n&&c.length>0;){let T=c.pop(),{score:_,boxIndex:O,suppressBeginIndex:A}=T;if(_<o)break;let M=!1;for(let $=d.length-1;$>=A;--$){let F=GH(t,O,d[$]);if(F>=r){M=!0;break}if(T.score=T.score*WH(r,f,F),T.score<=o)break}T.suppressBeginIndex=d.length,M||(T.score===_?(d.push(O),p.push(T.score)):T.score>o&&jC(c,T,VC))}let m=d.length,b=n-m;a&&b>0&&(d.push(...new Array(b).fill(0)),p.push(...new Array(b).fill(0)));let I={selectedIndices:d};return i&&(I.selectedScores=p),u&&(I.validOutputs=m),I}function GH(t,e,n){let r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),f=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(a-s)*(u-i),b=(d-c)*(p-f);if(m<=0||b<=0)return 0;let I=Math.max(s,c),T=Math.max(i,f),_=Math.min(a,d),O=Math.min(u,p),A=Math.max(_-I,0)*Math.max(O-T,0);return A/(m+b-A)}function WH(t,e,n){let r=Math.exp(e*n*n);return n<=t?r:0}function VC(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function qH(s,i,a){return L(this,arguments,function*(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let u=y(t,"boxes","nonMaxSuppressionAsync"),c=y(e,"scores","nonMaxSuppressionAsync"),f=$n(u,c,n,r,o);n=f.maxOutputSize,r=f.iouThreshold,o=f.scoreThreshold;let d=yield Promise.all([u.data(),c.data()]),p=d[0],m=d[1],{selectedIndices:b}=vd(p,m,n,r,o);return u!==t&&u.dispose(),c!==e&&c.dispose(),mt(b,"int32")})}var UC=qH;function KH(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){let i=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),u=$n(i,a,n,r,o,s);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,s=u.softNmsSigma;let c={boxes:i,scores:a},f={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s},d=E.runKernel(fv,c,f);return{selectedIndices:d[0],selectedScores:d[1]}}var HC=w({nonMaxSuppressionWithScore_:KH});function ZH(i,a,u){return L(this,arguments,function*(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){let c=y(t,"boxes","nonMaxSuppressionAsync"),f=y(e,"scores","nonMaxSuppressionAsync"),d=$n(c,f,n,r,o,s);n=d.maxOutputSize,r=d.iouThreshold,o=d.scoreThreshold,s=d.softNmsSigma;let p=yield Promise.all([c.data(),f.data()]),m=p[0],b=p[1],{selectedIndices:I,selectedScores:T}=bd(m,b,n,r,o,s);return c!==t&&c.dispose(),f!==e&&f.dispose(),{selectedIndices:mt(I,"int32"),selectedScores:mt(T)}})}var zC=ZH;function YH(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){let i=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),u=$n(i,a,n,r,o,null),c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p={boxes:i,scores:a},m={maxOutputSize:c,iouThreshold:f,scoreThreshold:d,padToMaxOutputSize:s},b=E.runKernel(lv,p,m);return{selectedIndices:b[0],validOutputs:b[1]}}var GC=w({nonMaxSuppressionPadded_:YH});function QH(i,a,u){return L(this,arguments,function*(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){let c=y(t,"boxes","nonMaxSuppressionAsync"),f=y(e,"scores","nonMaxSuppressionAsync"),d=$n(c,f,n,r,o,null),p=d.maxOutputSize,m=d.iouThreshold,b=d.scoreThreshold,[I,T]=yield Promise.all([c.data(),f.data()]),{selectedIndices:_,validOutputs:O}=wd(I,T,p,m,b,s);return c!==t&&c.dispose(),f!==e&&f.dispose(),{selectedIndices:mt(_,"int32"),validOutputs:ee(O,"int32")}})}var WC=QH;function XH(t,e,n=!1,r=!1){let o=y(t,"images","resizeBilinear");D(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),D(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),D(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:s},u={alignCorners:n,halfPixelCenters:r,size:e},c=E.runKernel(Cv,a,u);return i?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var qC=w({resizeBilinear_:XH});function JH(t,e,n=!1,r=!1){let o=y(t,"images","resizeNearestNeighbor");D(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),D(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),D(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),D(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:s},u={alignCorners:n,halfPixelCenters:r,size:e},c=E.runKernel(Nv,a,u);return i?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var KC=w({resizeNearestNeighbor_:JH});function e4(t,e="binary",n=!1,r=.5){let o=y(t,"image","threshold"),s=.2989,i=.587,a=.114,u=o.shape[0]*o.shape[1],c=V(mt([r]),255),f,d,p,m;if(D(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),D(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),D(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),D(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[f,d,p]=Rr(o,[1,1,1],-1);let T=V(f,s),_=V(d,i),O=V(p,a);m=Y(Y(T,_),O)}else m=t;if(e==="otsu"){let T=qu(ae(hc(m),"int32"),vt([]),256);c=t4(T,u)}let b=n?Bs(m,c):Mr(m,c);return ae(V(b,255),"int32")}function t4(t,e){let n=mt([-1]),r=mt([0]),o=mt([0]),s,i,a,u,c,f;for(let d=0;d<t.size-1;d++){s=we(t,0,d+1),i=we(t,d+1),c=ve(ke(s),e),f=ve(ke(i),e);let p=ke(V(s,Pn(0,s.size)));a=ve(p,ke(s));let m=nr(i.shape,s.size),b=Y(Pn(0,i.size),m),I=V(i,b);u=ve(ke(I),ke(i));let T=ne(a,u),_=ne(a,u),O=V(c,f);o=V(V(O,T),_);let A=Mr(o,r);r=an(A,o,r),n=an(A,mt([d]),n)}return n}var ZC=w({threshold_:e4});function n4(t,e,n="nearest",r="constant",o=0,s){let i=y(t,"image","transform","float32"),a=y(e,"transforms","transform","float32");D(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),D(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),D(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);let u={image:i,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:s};return E.runKernel(lw,u,c)}var YC=w({transform_:n4});function r4(t,e,n){let r=y(t,"a","bandPart");D(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[s,i]=r.shape.slice(-2),a,u;typeof e=="number"?(D(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),D(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=y(e<0?s:e,"numLower","bandPart")):(D(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=an(ua(e,0),s,Po(e,s))),typeof n=="number"?(D(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),D(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),u=y(n<0?i:n,"numUpper","bandPart")):(D(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=an(ua(n,0),i,Po(n,i)));let c=R(Pn(0,s,1,"int32"),[-1,1]),f=Pn(0,i,1,"int32"),d=ne(c,f),p=Ro(Bs(d,a),Xu(d,bt(u))),m=or([s,i],r.dtype);return R(Rt(cn(R(r,[-1,s,i])).map(b=>an(p,b,m))),o)}var QC=w({bandPart_:r4});function o4(t){let e;if(Array.isArray(t)){e=!1,D(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=t[0].shape[0];for(let s=1;s<t.length;++s)D(t[s].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${o})`)}else e=!0,t=Rr(t,t.shape[0],0).map(o=>Ut(o,[0]));D(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],r=t;for(let o=0;o<t.length;++o)n.push(E.tidy(()=>{let s=r[o];if(o>0)for(let i=0;i<o;++i){let a=V(ke(V(n[i],s)),n[i]);s=ne(s,a)}return ve(s,Oo(s,"euclidean"))}));return e?Rt(n,0):n}var XC=w({gramSchmidt_:o4});function s4(t,e=!1){if(D(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return JC(t,e);{let n=t.shape.slice(0,t.shape.length-2).reduce((u,c)=>u*c),r=cn(R(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],s=[];r.forEach(u=>{let[c,f]=JC(u,e);o.push(c),s.push(f)});let i=R(Rt(o,0),t.shape),a=R(Rt(s,0),t.shape);return[i,a]}}function JC(t,e=!1){return E.tidy(()=>{D(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],r=t.shape[1],o=Zu(n),s=Yt(t),i=ir([[1]],[1,1]),a=Yt(i),u=n>=r?r:n;for(let c=0;c<u;++c){let f=s,d=a,p=o;[a,s,o]=E.tidy(()=>{let m=we(s,[c,c],[n-c,1]),b=Oo(m),I=we(s,[c,c],[1,1]),T=an(Mr(I,0),ir([[-1]]),ir([[1]])),_=ne(I,V(T,b)),O=ve(m,_);O.shape[0]===1?a=Yt(i):a=Be([i,we(O,[1,0],[O.shape[0]-1,O.shape[1]])],0);let A=bt(ve(Ie(T,_),b)),M=we(s,[c,0],[n-c,r]),$=V(A,a),F=Gs(a);if(c===0)s=ne(M,Ie($,Ie(F,M)));else{let G=ne(M,Ie($,Ie(F,M)));s=Be([we(s,[0,0],[c,r]),G],0)}let j=Gs($),B=we(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=ne(B,Ie(Ie(B,a),j));else{let G=ne(B,Ie(Ie(B,a),j));o=Be([we(o,[0,0],[n,c]),G],1)}return[a,s,o]}),Je([f,d,p])}return!e&&n>r&&(o=we(o,[0,0],[n,r]),s=we(s,[0,0],[r,r])),[o,s]})}var e_=w({qr_:s4});var et=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(et||{});function i4(t,e,n=et.SUM_BY_NONZERO_WEIGHTS){let r=y(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=y(e,"weights","computeWeightedLoss"));let s=o==null?r:V(r,o);if(n===et.NONE)return s;if(n===et.SUM)return ke(s);if(n===et.MEAN){if(o==null)return Fo(s);{let i=r.size/o.size,a=ve(ke(s),ke(o));return i>1?ve(a,ee(i)):a}}if(n===et.SUM_BY_NONZERO_WEIGHTS){if(o==null)return ve(ke(s),ee(r.size));{let i=V(o,sr(r.shape)),a=ae(ke(uc(i,ee(0))),"float32");return ve(ke(s),a)}}throw Error(`Unknown reduction: ${n}`)}var Nt=w({computeWeightedLoss_:i4});function a4(t,e,n,r=et.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","absoluteDifference"),s=y(e,"predictions","absoluteDifference"),i=null;n!=null&&(i=y(n,"weights","absoluteDifference")),Ue(o.shape,s.shape,"Error in absoluteDifference: ");let a=pt(ne(o,s));return Nt(a,i,r)}var t_=w({absoluteDifference_:a4});function u4(t,e,n,r,o=et.SUM_BY_NONZERO_WEIGHTS){let s=y(t,"labels","cosineDistance"),i=y(e,"predictions","cosineDistance"),a=null;r!=null&&(a=y(r,"weights","cosineDistance")),Ue(s.shape,i.shape,"Error in cosineDistance: ");let u=ee(1),c=ne(u,ke(V(s,i),n,!0));return Nt(c,a,o)}var n_=w({cosineDistance_:u4});function c4(t,e,n,r=et.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","hingeLoss"),s=y(e,"predictions","hingeLoss"),i=null;n!=null&&(i=y(n,"weights","hingeLoss")),Ue(o.shape,s.shape,"Error in hingeLoss: ");let a=ee(1);o=ne(V(ee(2),o),a);let u=ao(ne(a,V(o,s)));return Nt(u,i,r)}var r_=w({hingeLoss_:c4});function l4(t,e,n,r=1,o=et.SUM_BY_NONZERO_WEIGHTS){let s=y(t,"labels","huberLoss"),i=y(e,"predictions","huberLoss"),a=null;n!=null&&(a=y(n,"weights","huberLoss")),Ue(s.shape,i.shape,"Error in huberLoss: ");let u=ee(r),c=pt(ne(i,s)),f=Po(c,u),d=ne(c,f),p=Y(V(ee(.5),ht(f)),V(u,d));return Nt(p,a,o)}var o_=w({huberLoss_:l4});function f4(t,e,n,r=1e-7,o=et.SUM_BY_NONZERO_WEIGHTS){let s=y(t,"labels","logLoss"),i=y(e,"predictions","logLoss"),a=null;n!=null&&(a=y(n,"weights","logLoss")),Ue(s.shape,i.shape,"Error in logLoss: ");let u=ee(1),c=ee(r),f=bt(V(s,kr(Y(i,c)))),d=V(ne(u,s),kr(Y(ne(u,i),c))),p=ne(f,d);return Nt(p,a,o)}var s_=w({logLoss_:f4});function d4(t,e,n,r=et.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","meanSquaredError"),s=y(e,"predictions","meanSquaredError"),i=null;n!=null&&(i=y(n,"weights","meanSquaredError")),Ue(o.shape,s.shape,"Error in meanSquaredError: ");let a=gc(o,s);return Nt(a,i,r)}var i_=w({meanSquaredError_:d4});function p4(t,e){let n=y(t,"labels","sigmoidCrossEntropyWithLogits"),r=y(e,"logits","sigmoidCrossEntropyWithLogits");Ue(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=ao(r),s=V(r,n),i=ec(wn(bt(pt(r))));return Y(ne(o,s),i)}function h4(t,e,n,r=0,o=et.SUM_BY_NONZERO_WEIGHTS){let s=y(t,"multiClassLabels","sigmoidCrossEntropy"),i=y(e,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","sigmoidCrossEntropy")),Ue(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=ee(r),f=ee(1),d=ee(.5);s=Y(V(s,ne(f,c)),V(d,c))}let u=p4(s,i);return Nt(u,a,o)}var a_=w({sigmoidCrossEntropy_:h4});function m4(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Ot((o,s,i)=>{let u=nc(s,[n],!0),c=ne(ae(s,"float32"),u);i([o,c]);let f=bt(V(c,o));return{value:ke(f,[n]),gradFunc:(m,b)=>{let[I,T]=b,_=oo(m.shape,[n]);return[V(R(m,_),ne(ae(I,"float32"),wn(T))),V(R(m,_),ne(wn(T),ae(I,"float32")))]}}})(t,e)}function g4(t,e,n,r=0,o=et.SUM_BY_NONZERO_WEIGHTS){let s=y(t,"onehotLabels","softmaxCrossEntropy"),i=y(e,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","softmaxCrossEntropy")),Ue(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){let c=ee(r),f=ee(1),d=ee(s.shape[1]);s=Y(V(s,ne(f,c)),ve(c,d))}let u=m4(s,i);return Nt(u,a,o)}var u_=w({softmaxCrossEntropy_:g4});function y4(t,e,n,r){let o=y(t,"indices","sparseFillEmptyRows","int32"),s=y(e,"values","sparseFillEmptyRows"),i=y(n,"denseShape","sparseFillEmptyRows","int32"),a=y(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let u={indices:o,values:s,denseShape:i,defaultValue:a},c=E.runKernel(Zv,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var c_=w({sparseFillEmptyRows_:y4});function v4(t,e,n){let r=y(t,"inputIndices","sparseReshape","int32"),o=y(e,"inputShape","sparseReshape","int32"),s=y(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);let i={inputIndices:r,inputShape:o,newShape:s},a=E.runKernel(Yv,i);return{outputIndices:a[0],outputShape:a[1]}}var l_=w({sparseReshape_:v4});function w4(t,e,n){let r=y(t,"data","sparseSegmentMean"),o=y(e,"indices","sparseSegmentMean","int32"),s=y(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);let i={data:r,indices:o,segmentIds:s};return E.runKernel(Qv,i)}var f_=w({sparseSegmentMean_:w4});function b4(t,e,n){let r=y(t,"data","sparseSegmentSum"),o=y(e,"indices","sparseSegmentSum","int32"),s=y(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);let i={data:r,indices:o,segmentIds:s};return E.runKernel(Xv,i)}var d_=w({sparseSegmentSum_:b4});function E4(t,e,n,r,o,s,i,a){let u=y(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=y(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let f={separator:n,nGramWidths:r,leftPad:o,rightPad:s,padWidth:i,preserveShortSequences:a},d={data:u,dataSplits:c},p=E.runKernel(rw,d,f);return{nGrams:p[0],nGramsSplits:p[1]}}var p_=w({stringNGrams_:E4});function x4(t,e,n=!0){let r=y(t,"input","stringSplit","string"),o=y(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let s={skipEmpty:n},i={input:r,delimiter:o},a=E.runKernel(ow,i,s);return{indices:a[0],values:a[1],shape:a[2]}}var h_=w({stringSplit_:x4});function D4(t,e){let n=y(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");let o={input:n};return E.runKernel(sw,o,r)}var m_=w({stringToHashBucketFast_:D4});function I4(t,e,n,r=!0){let o=y(t,"input","staticRegexReplace","string"),s={pattern:e,rewrite:n,replaceGlobal:r};return E.runKernel(tw,{x:o},s)}var g_=w({staticRegexReplace_:I4});var y_={fft:Hs,ifft:Lo,rfft:zs,irfft:mc},v_={hammingWindow:kC,hannWindow:gd,frame:yd,stft:OC},Bo={flipLeftRight:FC,grayscaleToRGB:PC,resizeNearestNeighbor:KC,resizeBilinear:qC,rgbToGrayscale:$C,rotateWithOffset:LC,cropAndResize:RC,nonMaxSuppression:BC,nonMaxSuppressionAsync:UC,nonMaxSuppressionWithScore:HC,nonMaxSuppressionWithScoreAsync:zC,nonMaxSuppressionPadded:GC,nonMaxSuppressionPaddedAsync:WC,threshold:ZC,transform:YC},w_={bandPart:QC,gramSchmidt:XC,qr:e_},b_={absoluteDifference:t_,computeWeightedLoss:Nt,cosineDistance:n_,hingeLoss:r_,huberLoss:o_,logLoss:s_,meanSquaredError:i_,sigmoidCrossEntropy:a_,softmaxCrossEntropy:u_},E_={sparseFillEmptyRows:c_,sparseReshape:l_,sparseSegmentMean:f_,sparseSegmentSum:d_},x_={stringNGrams:p_,stringSplit:h_,stringToHashBucketFast:m_,staticRegexReplace:g_};var Xb={};_e(Xb,{Serializable:()=>Ec,SerializationMap:()=>Ed,getRegisteredName:()=>S4,registerClass:()=>Qb});var T4=new Map,Yb=new Map,Ec=class{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}},Ed=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function Qb(t,e,n){D(t.className!=null,()=>"Class being registered does not have the static className property defined."),D(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),D(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);let r=n,o=e+">"+r;return Ed.register(t),T4.set(o,t),Yb.set(t,o),t}function S4(t){return Yb.has(t)?Yb.get(t):t.className}var Ft=class extends Ec{minimize(e,n=!1,r){let{value:o,grads:s}=this.computeGradients(e,r);if(r!=null){let i=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(i)}else this.applyGradients(s);return Je(s),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return id(e,n)}dispose(){this.iterations_!=null&&Je(this.iterations_)}saveIterations(){return L(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ee(this.iterations_,"int32")}})}getWeights(){return L(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(e){return L(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(e){return L(this,null,function*(){return this.iterations_=(yield e[0].tensor.data())[0],e.slice(1)})}};Object.defineProperty(Ft,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var jo=class extends Ft{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=E.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let s=E.registeredVariables[r],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:J(()=>st(s).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:J(()=>st(s).variable(i))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let u=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;J(()=>{let f=Y(V(u,this.rho),V(ht(a),1-this.rho)),d=V(ve(Vt(Y(c,this.epsilon)),Vt(Y(u,this.epsilon))),a),p=Y(V(c,this.rho),V(ht(d),1-this.rho));u.assign(f),c.assign(p);let m=Y(V(d,-this.learningRate),s);s.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Je(this.accumulatedGrads.map(e=>e.variable)),Je(this.accumulatedUpdates.map(e=>e.variable)))}getWeights(){return L(this,null,function*(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(e){return L(this,null,function*(){e=yield this.extractIterations(e);let n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}};var Vo=class extends Ft{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let s=E.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:J(()=>nr(s.shape,this.initialAccumulatorValue).variable(!1))});let i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;let a=this.accumulatedGrads[o].variable;J(()=>{let u=Y(a,ht(i));a.assign(u);let c=Y(V(ve(i,Vt(Y(u,E.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Je(this.accumulatedGrads.map(e=>e.variable))}getWeights(){return L(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(e){return L(this,null,function*(){e=yield this.extractIterations(e);let n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}};var Uo=class extends Ft{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],J(()=>{this.accBeta1=ee(n).variable(),this.accBeta2=ee(r).variable()}),o==null&&(this.epsilon=E.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);J(()=>{let r=ne(1,this.accBeta1),o=ne(1,this.accBeta2);n.forEach((s,i)=>{let a=E.registeredVariables[s],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:J(()=>st(a).variable(u))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${s}/v`,variable:J(()=>st(a).variable(u))});let c=Array.isArray(e)?e[i].tensor:e[s];if(c==null)return;let f=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,p=Y(V(f,this.beta1),V(c,1-this.beta1)),m=Y(V(d,this.beta2),V(ht(c),1-this.beta2)),b=ve(p,r),I=ve(m,o);f.assign(p),d.assign(m);let T=Y(V(ve(b,Y(Vt(I),this.epsilon)),-this.learningRate),a);a.assign(T)}),this.accBeta1.assign(V(this.accBeta1,this.beta1)),this.accBeta2.assign(V(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Je(this.accumulatedSecondMoment.map(e=>e.variable))}getWeights(){return L(this,null,function*(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(e){return L(this,null,function*(){e=yield this.extractIterations(e),J(()=>{this.accBeta1.assign(Ar(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ar(this.beta2,this.iterations_+1))});let n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}};var Ho=class extends Ft{static get className(){return"Adamax"}constructor(e,n,r,o=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],J(()=>{this.iteration=ee(0).variable(),this.accBeta1=ee(n).variable()}),o==null&&(this.epsilon=E.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);J(()=>{let r=ne(1,this.accBeta1),o=ve(-this.learningRate,Y(V(this.iteration,this.decay),1));n.forEach((s,i)=>{let a=E.registeredVariables[s],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:st(a).variable(u)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${s}/v`,variable:st(a).variable(u)});let c=Array.isArray(e)?e[i].tensor:e[s];if(c==null)return;let f=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,p=Y(V(f,this.beta1),V(c,1-this.beta1)),m=V(d,this.beta2),b=pt(c),I=ic(m,b);f.assign(p),d.assign(I);let T=Y(V(ve(o,r),ve(p,Y(I,this.epsilon))),a);a.assign(T)}),this.iteration.assign(Y(this.iteration,1)),this.accBeta1.assign(V(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Je(this.accumulatedWeightedInfNorm.map(e=>e.variable))}getWeights(){return L(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(e){return L(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}};var Fr=class extends Ft{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;let i=E.registeredVariables[r];J(()=>{let a=Y(V(this.c,s),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=jt(ee(-e))}dispose(){this.c.dispose()}getWeights(){return L(this,null,function*(){return[yield this.saveIterations()]})}setWeights(e){return L(this,null,function*(){if(e=yield this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}};var zo=class extends Fr{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ee(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let s=E.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:J(()=>st(s).variable(!1))});let i=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&J(()=>{let u,c=Y(V(this.m,i),a);this.useNesterov?u=Y(V(this.c,Y(a,V(c,this.m))),s):u=Y(V(this.c,c),s),i.assign(c),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Je(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}getWeights(){return L(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(e){return L(this,null,function*(){e=yield this.extractIterations(e);let n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}};var Go=class extends Ft{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,o==null&&(this.epsilon=E.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let s=E.registeredVariables[r],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:J(()=>st(s).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:J(()=>st(s).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:J(()=>st(s).variable(i))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let u=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;J(()=>{let f=Y(V(u,this.decay),V(ht(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[o].variable,p=Y(V(d,this.decay),V(a,1-this.decay)),m=ve(V(a,this.learningRate),Vt(ne(f,Y(ht(p),this.epsilon)))),b=Y(V(c,this.momentum),m);u.assign(f),d.assign(p),c.assign(b);let I=ne(s,b);s.assign(I)}else{let d=Y(V(u,this.decay),V(ht(a),1-this.decay)),p=Y(V(c,this.momentum),ve(V(a,this.learningRate),Vt(Y(d,this.epsilon))));u.assign(d),c.assign(p);let m=ne(s,p);s.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Je(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Je(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Je(this.accumulatedMoments.map(e=>e.variable))}getWeights(){return L(this,null,function*(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(e){return L(this,null,function*(){e=yield this.extractIterations(e);let n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}};var N4=[jo,Vo,Uo,Ho,zo,Go,Fr];function D_(){for(let t of N4)Qb(t)}var da={};_e(da,{CompositeArrayBuffer:()=>Tt,browserFiles:()=>T_,browserHTTPRequest:()=>A_,concatenateArrayBuffers:()=>E1,copyModel:()=>F1,decodeWeights:()=>Xf,decodeWeightsStream:()=>Jf,encodeWeights:()=>y1,fromMemory:()=>M_,fromMemorySync:()=>sE,getLoadHandlers:()=>T1,getModelArtifactsForJSON:()=>ta,getModelArtifactsForJSONSync:()=>Rw,getModelArtifactsInfoForJSON:()=>Nr,getSaveHandlers:()=>I1,getWeightSpecs:()=>Bu,http:()=>Dd,isHTTPScheme:()=>xd,listModels:()=>O1,loadWeights:()=>N_,moveModel:()=>P1,registerLoadRouter:()=>D1,registerSaveRouter:()=>x1,removeModel:()=>R1,weightsLoaderFactory:()=>rE,withSaveHandler:()=>k_,withSaveHandlerSync:()=>O_});var C4="model",_4=".json",A4=".weights.bin";function I_(t){return new Promise(e=>setTimeout(e)).then(t)}var Jb=(()=>{class t{constructor(n){if(!X().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=C4),this.modelJsonFileName=n+_4,this.weightDataFileName=n+A4}save(n){return L(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=Tt.join(n.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let s=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i=ed(n,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=a,yield I_(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield I_(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Nr(n)}}})}}return t.URL_SCHEME="downloads://",t})();var eE=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}load(){return L(this,null,function*(){return new Promise((e,n)=>{let r=new FileReader;r.onload=o=>{let s=JSON.parse(o.target.result),i=s.modelTopology;if(i==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}let u=ta(s,c=>this.loadWeights(c));e(u)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(e){let n=[],r=[];for(let i of e)n.push(...i.weights),r.push(...i.paths);let o=this.checkManifestAndWeightFiles(e),s=r.map(i=>this.loadWeightsFile(i,o[i]));return Promise.all(s).then(i=>[n,i])}loadWeightsFile(e,n){return new Promise((r,o)=>{let s=new FileReader;s.onload=i=>{let a=i.target.result;r(a)},s.onerror=i=>o(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){let n=[],r=this.weightsFiles.map(s=>Ow(s.name)),o={};for(let s of e)s.paths.forEach(i=>{let a=Ow(i);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[i]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},M4=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Jb.URL_SCHEME)?k4(t.slice(Jb.URL_SCHEME.length)):null;dt.registerSaveRouter(M4);function k4(t="model"){return new Jb(t)}function T_(t){return new eE(t)}function tE(t,e,n,r){i(t),n=n??0,r=r??1,a(n,r);let o=0,s=u=>(u.then(c=>{let f=n+ ++o/t.length*(r-n);return e(f),c}),u);function i(u){D(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function a(u,c){D(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),D(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),D(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(t.map(s))}function nE(t,e){return L(this,null,function*(){e==null&&(e={});let n=e.fetchFunc==null?X().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?yield Promise.all(r):yield tE(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?yield Promise.all(a):yield tE(a,e.onProgress,.5,1)})}function S_(t,e){var n;let r=e.fetchFunc==null?X().platform.fetch:e.fetchFunc,o=0,s;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:i=>L(this,null,function*(){for(var a;o<t.length;){s||(s=(yield r(t[o],e.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield s.read();if(u){o++,s=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,o/t.length);continue}i.enqueue(c);return}i.close()})})}function N_(t,e="",n,r){return L(this,null,function*(){return rE(i=>nE(i,{requestInit:r}))(t,e,n)})}function rE(t){return(e,n="",r)=>L(this,null,function*(){let o=e.map(()=>!1),s={},i=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((m,b)=>{let I=0;m.weights.forEach(T=>{let _="quantization"in T?T.quantization.dtype:T.dtype,O=Jr[_]*me(T.shape),A=()=>{o[b]=!0,s[b]==null&&(s[b]=[]),s[b].push({manifestEntry:T,groupOffset:I,sizeBytes:O})};r!=null?r.forEach((M,$)=>{M===T.name&&(A(),i[$]=!0)}):A(),a.push(T.name),I+=O})}),!i.every(m=>m)){let m=r.filter((b,I)=>!i[I]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let u=o.reduce((m,b,I)=>(b&&m.push(I),m),[]),c=[];u.forEach(m=>{e[m].paths.forEach(b=>{let I=n+(n.endsWith("/")?"":"/")+b;c.push(I)})});let f=yield t(c),d={},p=0;return u.forEach(m=>{let b=e[m].paths.length,I=new Tt(f.slice(p,p+b));s[m].forEach(_=>{let O=I.slice(_.groupOffset,_.groupOffset+_.sizeBytes),A=Xf(O,[_.manifestEntry]);for(let M in A)d[M]=A[M]}),p+=b}),d})}var O4="application/octet-stream",R4="application/json",C_=(()=>{class t{constructor(n,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(D(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=X().platform.fetch,D(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&D(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(n){return L(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],s=ed(n,o);if(r.body.append("model.json",new Blob([JSON.stringify(s)],{type:R4}),"model.json"),n.weightData!=null){let a=Tt.join(n.weightData);r.body.append("model.weights.bin",new Blob([a],{type:O4}),"model.weights.bin")}let i=yield this.fetch(this.path,r);if(i.ok)return{modelArtifactsInfo:Nr(n),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)})}loadModelJSON(){return L(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield n.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,s=r.weightsManifest;if(o==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return L(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return ta(n,r=>this.loadWeights(r))})}loadStream(){return L(this,null,function*(){let n=yield this.loadModelJSON(),r=yield this.getWeightUrls(n.weightsManifest),o=Bu(n.weightsManifest),s=()=>S_(r,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:o,getWeightStream:s})})}getWeightUrls(n){return L(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,s]=F4(r),i=this.weightPathPrefix||o,a=[],u=[];for(let c of n)for(let f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):a.push(i+f+s);return this.weightUrlConverter&&a.push(...yield Promise.all(u)),a})}loadWeights(n){return L(this,null,function*(){let r=yield this.getWeightUrls(n),o=Bu(n),s=yield nE(r,this.loadOptions);return[o,s]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function F4(t){let e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),o=n>e?t.substring(n):"";return[r+"/",o]}function xd(t){return t.match(C_.URL_SCHEME_REGEX)!=null}var __=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>xd(r)):n=xd(t),n)return Dd(t,e)}return null};dt.registerSaveRouter(__);dt.registerLoadRouter(__);function Dd(t,e){return new C_(t,e)}function A_(t,e){return Dd(t,e)}var xc=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},Id=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},oE=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}};function M_(t,e,n,r){let o=arguments;return new oE(sE(...o))}function sE(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new xc(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xc({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xc({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function k_(t){return new Id(t)}function O_(t){return new Id(t)}var iE={};_e(iE,{confusionMatrix:()=>R_});function P4(t,e,n){let r=y(t,"labels","confusionMatrix"),o=y(e,"predictions","confusionMatrix");D(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),D(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),D(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),D(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),D(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let s=$o(ae(r,"int32"),n),i=$o(ae(o,"int32"),n),a=Gs(s),u=Ie(a,i);return ae(u,"int32")}var R_=w({confusionMatrix_:P4});var ar={};_e(ar,{draw:()=>z4,fromPixels:()=>G4,fromPixelsAsync:()=>V4,toPixels:()=>H4});var Ys,F_=!1;function P_(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,s=!1,i=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Ds(Pf,E.backendName)!=null){let b={pixels:t},I={numChannels:e};return E.runKernel(Pf,b,I)}let[c,f]=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(i)d=t.getContext("2d").getImageData(0,0,c,f).data;else if(r||n)d=t.data;else if(s||o||a){if(Ys==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Ys=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Ys=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Ys.canvas.width=c,Ys.canvas.height=f,Ys.drawImage(t,0,0,c,f),d=Ys.getImageData(0,0,c,f).data}let p;if(e===4)p=new Int32Array(d);else{let b=c*f;p=new Int32Array(b*e);for(let I=0;I<b;I++)for(let T=0;T<e;++T)p[I*e+T]=d[I*4+T]}return vc(p,[f,c,e],"int32")}function $4(t){return t!=null&&t.data instanceof Uint8Array}function L4(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function B4(t){return t!=null&&t.width!==0&&t.height!==0}function j4(t){return L4()&&!(t instanceof ImageBitmap)&&B4(t)&&!$4(t)}function V4(t,e=3){return L(this,null,function*(){let n=null;if(X().getBool("WRAP_TO_IMAGEBITMAP")&&j4(t)){let r;try{r=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return P_(n,e)})}function $_(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function U4(t){let e=t?.alpha||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}function H4(t,e){return L(this,null,function*(){let n=y(t,"img","toPixels");if(!(t instanceof ye)){let c=n;n=ae(c,"int32"),c.dispose()}$_(n);let[r,o]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],i=yield n.data(),a=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let f=[0,0,0,255];for(let p=0;p<s;p++){let m=i[c*s+p];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);s===1?(f[0]=m*a,f[1]=m*a,f[2]=m*a):f[p]=m*a}let d=c*4;u[d+0]=Math.round(f[0]),u[d+1]=Math.round(f[1]),u[d+2]=Math.round(f[2]),u[d+3]=Math.round(f[3])}if(e!=null){F_||Ds(Ff,E.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),F_=!0),e.width=o,e.height=r;let c=e.getContext("2d"),f=new ImageData(u,o,r);c.putImageData(f,0,0)}return n!==t&&n.dispose(),u})}function z4(t,e,n){let r=y(t,"img","draw");if(!(t instanceof ye)){let i=r;r=ae(i,"int32"),i.dispose()}$_(r),U4(n?.imageOptions);let o={image:r},s={canvas:e,options:n};E.runKernel(Ff,o,s)}var G4=w({fromPixels_:P_});var aE={};_e(aE,{prepareAndValidate:()=>L_});function L_(t,e){let n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(me(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let o=e.shape,s=o[o.length-1],i=1;for(let d=0;d<o.length-1;++d)i*=o[d];let a=t.shape,u=o.slice();u.pop();let c=1;for(let d=s;d<n;++d)c*=a[d],u.push(a[d]);let f=[...Ir(t.shape).map(d=>d/c),1].slice(0,s);return[u,i,c,f]}var Dc={};_e(Dc,{assertParamsValid:()=>q4,computeFlatOffset:()=>X4,computeOutShape:()=>Z4,getNormalizedAxes:()=>Y4,isSliceContinous:()=>Q4,maskToAxes:()=>K4,parseSliceParams:()=>J4,sliceInfo:()=>ez,startForAxis:()=>W_,startIndicesWithElidedDims:()=>H_,stopForAxis:()=>q_,stopIndicesWithElidedDims:()=>z_,stridesForAxis:()=>G_,stridesWithElidedDims:()=>j_});var uE=-2,W4=-1;function q4(t,e,n){let r=t.shape.length;D(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),D(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)D(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function K4(t){let e=[],n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function Z4(t,e,n){let r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function j_(t,e,n,r){let o=[...t];for(let s=o.length;s<r.length;s++)o.push(1);for(let s=0;s<n;s++)s===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function V_(t,e,n){return n<=t?n:n-(e-1)}function U_(t,e){let n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Y4(t,e,n,r,o,s,i,a,u){let c=t.length,f=new Array(c),d=new Array(c),p=new Array(c);if(e.length&&n>0){let m=e[0],b=n+1;f=H_(i,m,b,r,t),d=z_(a,m,b,o,t),p=j_(s,m,b,t)}else for(let m=0;m<c;m++)f[m]=W_(i,r,s,t,m,u),d[m]=q_(a,o,s,t,m,u),p[m]=G_(s,m,u);return{begin:f,end:d,strides:p}}function H_(t,e,n,r,o){let s=[...o],i=U_(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=0;else{let u=V_(e,n,a),c=r[u];t&1<<u&&(c=0),s[a]=c}return s}function z_(t,e,n,r,o){let s=[...o],i=U_(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{let u=V_(e,n,a),c=r[u];t&1<<u&&(c=Number.MAX_SAFE_INTEGER),s[a]=c}for(let a=0;a<s.length;a++){let u=o[a];s[a]<0&&(s[a]+=u),s[a]=zi(0,s[a],o[a])}return s}function G_(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function W_(t,e,n,r,o,s){let i=e[o],a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);let u=r[o];return i<0&&(i+=u),i=zi(0,i,u-1),i}function q_(t,e,n,r,o,s){let i=e[o],a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);let u=r[o];return i<0&&(i+=u),a>0?i=zi(0,i,u):i=zi(-1,i,u-1),i}function Q4(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function X4(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function J4(t,e,n){let r,o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(i=>{D(i!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(o).fill(-1):typeof n=="number"?s=[n,...new Array(o-1).fill(-1)]:n.length<o?s=n.concat(new Array(o-n.length).fill(-1)):s=n,s=s.map((i,a)=>i>=0?i:(D(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function ez(t,e,n,r,o,s,i,a,u){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:u};for(let A=0;A<d.dims;A++)f&&1<<A&a&&d.numAddAxisAfterEllipsis++,1<<A&i&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};tz(d,p);let m=!0,b=!0,I=!0,T=[],_=[];for(let A=0;A<t.length;++A){if(p.strides[A]===0)throw Error(`strides[${A}] must be non-zero`);let M=!!(p.shrinkAxisMask&1<<A),$=t[A];if($===-1){T.push(M?1:-1);continue}let F=[p.beginMask&1<<A,p.endMask&1<<A],j=[p.strides[A]>0?0:-1,p.strides[A]>0?$:$-1];if(M&&p.strides[A]<=0)throw Error("only stride 1 allowed on non-range indexing.");I=I&&p.strides[A]===1;let B=!!(p.beginMask&1<<A&&p.endMask&1<<A);if(p.beginValid&&p.endValid){if(M){let se=p.begin[A]<0?$+p.begin[A]:p.begin[A];if(p.begin[A]=se,p.end[A]=p.begin[A]+1,se<0||se>=$)throw Error(`slice index ${p.begin[A]} of dimension ${A} out of bounds.`)}else p.begin[A]=B_(p.begin[A],0,p.strides[A],$,F,j),p.end[A]=B_(p.end[A],1,p.strides[A],$,F,j);let H=p.strides[A]===1&&p.begin[A]===0&&p.end[A]===$;m=m&&H,b=b&&(A===0&&p.strides[A]===1||H)}else m=m&&p.strides[A]===1&&B,b=b&&(A===0&&p.strides[A]===1||B);let G,W=!1;if(p.beginValid&&p.endValid?(G=p.end[A]-p.begin[A],W=!0):M?(G=1,W=!0):B&&$>=0&&(p.strides[A]<0?G=-$:G=$,W=!0),W){let H;G===0||G<0!=p.strides[A]<0?H=0:H=Math.trunc(G/p.strides[A])+(G%p.strides[A]!==0?1:0),T.push(H)}else T.push(-1)}for(let A=0;A<p.finalShapeGatherIndices.length;++A){let M=p.finalShapeGatherIndices[A];M>=0?_.push(T[M]):M===uE&&_.push(1)}return{finalShapeSparse:_.filter((A,M)=>p.finalShapeGatherIndices[M]!==uE),finalShape:_,isIdentity:m,sliceDim0:b,isSimpleSlice:I,begin:p.begin,end:p.end,strides:p.strides}}function tz(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(uE),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(W4),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function B_(t,e,n,r,o,s){if(o[e])return n>0?s[e]:s[e+1&1];{let i=t<0?r+t:t;return i<s[0]?s[0]:i>s[1]?s[1]:i}}var K_="4.20.0";var pa=class{static sgd(e){return new Fr(e)}static momentum(e,n,r=!1){return new zo(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,s=!1){return new Go(e,n,r,o,s)}static adam(e=.001,n=.9,r=.999,o=null){return new Uo(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new jo(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,s=0){return new Ho(e,n,r,o,s)}static adagrad(e,n=.1){return new Vo(e,n)}};var nz=pa;var rz=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Z_(){return new Promise(t=>rz(()=>t()))}var fE={};_e(fE,{ERF_A1:()=>bz,ERF_A2:()=>Ez,ERF_A3:()=>xz,ERF_A4:()=>Dz,ERF_A5:()=>Iz,ERF_P:()=>wz,PARALLELIZE_THRESHOLD:()=>Td,RowPartitionType:()=>uo,SELU_SCALE:()=>vz,SELU_SCALEALPHA:()=>yz,applyActivation:()=>Ks,assertAndGetBroadcastShape:()=>Me,assertAxesAreInnerMostDims:()=>Wj,assertParamsConsistent:()=>oz,assignToTypedArray:()=>Az,axesAreInnerMostDims:()=>A0,calculateShapes:()=>gC,checkEinsumDimSizes:()=>Pz,checkPadOnDimRoundingMode:()=>rt,combineLocations:()=>G1,combineRaggedTensorToTensorShapes:()=>iz,complexWithEvenIndex:()=>Nz,complexWithOddIndex:()=>Cz,computeConv2DInfo:()=>Fs,computeConv3DInfo:()=>j1,computeDefaultPad:()=>e0,computeDilation2DInfo:()=>zB,computeOptimalWindowSize:()=>lz,computeOutAndReduceShapes:()=>Gj,computeOutShape:()=>sz,computePool2DInfo:()=>Jw,computePool3DInfo:()=>GB,convertConv2DDataFormat:()=>V1,decodeEinsumEquation:()=>Rz,eitherStridesOrDilationsAreOne:()=>kt,expandShapeToKeepDim:()=>oo,exponent:()=>kz,exponents:()=>Mz,fromStringArrayToUint8:()=>rG,fromUint8ToStringArray:()=>nG,getAxesPermutation:()=>qj,getBroadcastDims:()=>z1,getComplexWithIndex:()=>_z,getEinsumComputePath:()=>$z,getEinsumPermutation:()=>Fz,getFusedBiasGradient:()=>qs,getFusedDyActivation:()=>Ws,getImageCenter:()=>fz,getInnerMostAxes:()=>Zj,getPermuted:()=>pz,getRaggedRank:()=>uz,getReductionAxes:()=>sd,getReshaped:()=>dz,getReshapedPermuted:()=>hz,getRowPartitionTypesHelper:()=>az,getSliceBeginCoords:()=>mz,getSliceSize:()=>gz,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Vz,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Uz,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Hz,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Wz,getSparseReshapeInputOutputMismatchErrorMessage:()=>Kz,getSparseReshapeInputOutputMultipleErrorMessage:()=>qz,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>zz,getSparseReshapeNegativeOutputDimErrorMessage:()=>Gz,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>Xz,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>Zz,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>Yz,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>Qz,getUndoAxesPermutation:()=>Kj,isIdentityPermutation:()=>Lz,log:()=>v3,mergeRealAndImagArrays:()=>Tz,prepareAndValidate:()=>L_,prepareSplitSize:()=>jz,segment_util:()=>lE,shouldFuse:()=>Zs,slice_util:()=>Dc,splitRealAndImagArrays:()=>Sz,stridesOrDilationsArePositive:()=>Cr,tupleValuesAreOne:()=>Rs,upcastType:()=>_s,validateDefaultValueShape:()=>cz,validateInput:()=>la,validateUpdateShape:()=>Vb,warn:()=>Tr});function oz(t,e){let n=t[0].length;t.forEach((o,s)=>{D(o.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),D(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=t[0];t.forEach((o,s)=>{for(let i=0;i<n;i++)D(i===e||o[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${s}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function sz(t,e){let n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var uo=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(uo||{});function iz(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){let s=n[o],i=r[r.length-n.length+o],a=r[i];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${s} but shape[${o+t}] = ${a}`)}else r[i]=s}return r}function az(t){let e={FIRST_DIM_SIZE:uo.FIRST_DIM_SIZE,VALUE_ROWIDS:uo.VALUE_ROWIDS,ROW_LENGTHS:uo.ROW_LENGTHS,ROW_SPLITS:uo.ROW_SPLITS,ROW_LIMITS:uo.ROW_LIMITS,ROW_STARTS:uo.ROW_STARTS},n=[];for(let r of t)if(r in e)n.push(e[r]);else break;return n}function uz(t){return t.length===0?0:t[0]===uo.FIRST_DIM_SIZE?t.length-1:t.length}function cz(t,e){if(t==null||e==null)return;let n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){let s=t[o],i=e[o+1];if(s>=0&&i>=0&&s!==1&&s!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${s} but ragged tensor input.flatValues.shape[${o-t.length}] = ${i}`)}}var Td=30;function lz(t){return t<=Td?t:Wi(t,Math.floor(Math.sqrt(t)))}function fz(t,e,n){let r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}function dz(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);let s=e.length;for(let i=0;i<s;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(s+1))}return o}function pz(t,e,n=!0){let r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{let o=[],s=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?s.push(i):o.push(i);r.push(...o),r.push(0),r.push(...s)}return r}function hz(t,e,n,r=!0){let o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?o.push(e[s-1]*t[s]):o.push(t[s]/e[s-1]):o.push(t[s]);return o}function mz(t,e){let n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function gz(t,e,n){let r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}var yz=1.7580993408473768,vz=1.0507009873554805;var wz=.3275911,bz=.254829592,Ez=-.284496736,xz=1.421413741,Dz=-1.453152027,Iz=1.061405429;function Tz(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);let n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Sz(t){let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Nz(t){let e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function Cz(t){let e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function _z(t,e){let n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Az(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Mz(t,e){let n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){let s=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(s),r[o]=Math.sin(s)}return{real:n,imag:r}}function kz(t,e,n){let r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),s=Math.sin(r);return{real:o,imag:s}}var cE="->",Oz=/->/g,Y_=",",Q_="...";function Rz(t,e){t=t.replace(/\s/g,"");let n=(t.length-t.replace(Oz,"").length)/cE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${cE}").`);let[r,o]=t.split(cE);D(r.indexOf(Q_)===-1,()=>`The ellipsis notation ("${Q_}") is not supported yet.`);let s=r.split(Y_),i=s.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let m=o[p];if(!s.some(b=>b.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let p=0;p<r.length;++p){let m=r[p];a.indexOf(m)===-1&&m!==Y_&&a.push(m)}let u=new Array(s.length);for(let p=0;p<i;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);u[p]=[];for(let m=0;m<s[p].length;++m)u[p].push(a.indexOf(s[p][m]))}let c=a.length,f=o.length,d=[];for(let p=f;p<c;++p)d.push(p);return{allDims:a,summedDims:d,idDims:u}}function Fz(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;let r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function Pz(t,e,n){let r=new Array(t);for(let o=0;o<n.length;++o){let s=n[o].shape;for(let i=0;i<e[o].length;++i)r[e[o][i]]===void 0?r[e[o][i]]=s[i]:D(r[e[o][i]]===s[i],()=>`Expected dimension ${r[e[o][i]]} at axis ${i} of input shaped ${JSON.stringify(s)}, but got dimension ${s[i]}`)}}function $z(t,e){let n=t,r=[],o=0;t.length===0&&n.push(-1),o=t.length+1;for(let i=0;i<o;++i)r.push([]);let s=[];for(let i=0;i<n.length;++i){let a=n[i],u=Bz(e,a);for(let c of u)s.indexOf(c)===-1&&(r[i].push(c),s.push(c))}return{path:n,steps:r}}function Lz(t){return t.every((e,n)=>e===n)}function Bz(t,e){let n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function jz(t,e,n=0){let r=[];if(typeof e=="number")D(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{let o=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);D(o<=1,()=>"There should be only one negative value in split array.");let s=e.indexOf(-1);if(s!==-1){let i=e.reduce((a,u)=>u>0?a+u:a);e[s]=t.shape[n]-i}D(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}function Vz(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Uz(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Hz(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}function zz(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Gz(t,e){return`size ${t} must be non-negative, not ${e}`}function Wz(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function qz(t,e){let n=me(t),r=me(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Kz(t,e){let n=me(t),r=me(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}function Zz(){return"segment ids must be >= 0"}function Yz(){return"segment ids are not increasing"}function Qz(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function Xz(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}var lE={};_e(lE,{collectGatherOpShapeInfo:()=>tG,computeOutShape:()=>eG,segOpComputeOptimalWindowSize:()=>Jz});function Jz(t,e){let n=!1,r;for(t<=Td?(r=t,n=!0):r=Wi(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Wi(t,r+1);return r}function eG(t,e,n){let r=[],o=t.length;for(let s=0;s<o;s++)s!==e?r.push(t[s]):r.push(n);return r}function tG(t,e,n,r){let o=e.shape.length,s=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);let i=t.shape[n],a=[],u=1,c=1,f=1;for(let d=0;d<r;++d)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),f*=t.shape[d];return{batchSize:u,sliceSize:f,outerSize:c,dimSize:i,outputShape:a}}function nG(t){try{return t.map(e=>Ji(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function rG(t){return t.map(e=>_o(e))}var dE={};_e(dE,{nonMaxSuppressionV3Impl:()=>vd,nonMaxSuppressionV4Impl:()=>wd,nonMaxSuppressionV5Impl:()=>bd,whereImpl:()=>pd});D_();var oG=X();oG.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var ln=function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t}(ln||{}),X_;(function(t){let e;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(X_||(X_={}));var iG={};function Sd(t){return iG[t]}function g(t,e,n,r,o){let s=e.inputParams[t];if(s&&s.inputIndexStart!==void 0){let a=s.inputIndexStart,u=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?a+1:s.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(s.type==="tensor")return ot(e.inputNames[c],n,r,o);if(s.type==="tensors"){let p=e.inputs.slice(a,u);return e.inputNames.slice(a,u).filter((b,I)=>{var T;return((T=p[I])===null||T===void 0?void 0:T.op)!=="NoOp"}).map(b=>ot(b,n,r,o))}let f=ot(e.inputNames[c],n,r,o),d=f.dataSync();return s.type==="number"?d[0]:U.toNestedArray(f.shape,d)}let i=e.attrParams[t];return i&&i.value}function ot(t,e,n,r){let[o,s]=Ht(t,n);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let i=n.currentContextIds.find(a=>!!e[Nd(o,a)]);return i!==void 0?e[Nd(o,i)][s]:void 0}function pE(t,e,n){return e[Nd(t,n.currentContextId)]}function ur(t,e){let[n,r,o]=Ht(t,e);return[Nd(n,e&&e.currentContextId),r,o]}function Nd(t,e){return e?`${t}-${e}`:t}function Ht(t,e){if(t==="")return["",0,void 0];let n=e!=null&&e.parseNodeNameCache!=null;if(n){let s=e.parseNodeNameCache.get(t);if(s!=null)return s}let r=t.split(":"),o;if(r.length===1)o=[t,0,void 0];else{let s=r[0],i=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[s,a,i]}return n&&e.parseNodeNameCache.set(t,o),o}function Tc(t,e,n){let r=g("pad",t,e,n);if(r==="explicit"){r=g("explicitPaddings",t,e,n);let o=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)o[s][0]=r[s*2],o[s][1]=r[s*2+1];return o}return r}function cr(t){return t.kept?t:Yt(t)}var hE={};_e(hE,{json:()=>aG});var aG=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var mE={};_e(mE,{json:()=>uG});var uG=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var gE={};_e(gE,{json:()=>cG});var cG=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var yE={};_e(yE,{json:()=>lG});var lG=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var vE={};_e(vE,{json:()=>fG});var fG=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var wE={};_e(wE,{json:()=>dG});var dG=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var bE={};_e(bE,{json:()=>pG});var pG=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var EE={};_e(EE,{json:()=>hG});var hG=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var xE={};_e(xE,{json:()=>mG});var mG=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var DE={};_e(DE,{json:()=>gG});var gG=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var IE={};_e(IE,{json:()=>yG});var yG=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var TE={};_e(TE,{json:()=>vG});var vG=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var SE={};_e(SE,{json:()=>wG});var wG=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var NE={};_e(NE,{json:()=>bG});var bG=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var CE={};_e(CE,{json:()=>EG});var EG=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var _E={};_e(_E,{json:()=>xG});var xG=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var AE={};_e(AE,{json:()=>DG});var DG=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var ME={};_e(ME,{json:()=>IG});var IG=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var kE={};_e(kE,{json:()=>TG});var TG=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var Sc=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[hE,mE,gE,yE,vE,wE,bE,EE,xE,DE,IE,TE,SE,NE,CE,_E,AE,ME,kE],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(e,n={}){let r=e.node,o=[],s=[],i=[],a=r.reduce((I,T)=>(I[T.name]=this.mapNode(T),T.op.startsWith("Placeholder")?o.push(I[T.name]):T.op==="Const"?s.push(I[T.name]):(T.input==null||T.input.length===0)&&i.push(I[T.name]),I),{}),u=[],c=[],f={},d={};n!=null&&(f=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));let p=Object.keys(a);p.forEach(I=>{let T=a[I];T.inputNames.forEach((_,O)=>{let[A,,M]=ur(_),$=a[A];if($.outputs!=null){let F=$.outputs.indexOf(M);if(F!==-1){let j=`${A}:${F}`;T.inputNames[O]=j}}T.inputs.push($),$.children.push(T)})}),Object.keys(d).length===0?p.forEach(I=>{let T=a[I];T.children.length===0&&c.push(T)}):Object.keys(d).forEach(I=>{let[T]=ur(I),_=a[T];_!=null&&(_.signatureKey=d[I],c.push(_))}),Object.keys(f).length>0?Object.keys(f).forEach(I=>{let[T]=ur(I),_=a[T];_&&(_.signatureKey=f[I],u.push(_))}):u=o;let m={};e.library!=null&&e.library.function!=null&&(m=e.library.function.reduce((I,T)=>(I[T.signature.name]=this.mapFunction(T),I),{}));let b={nodes:a,inputs:u,outputs:c,weights:s,placeholders:o,signature:n,functions:m};return i.length>0&&(b.initNodes=i),b}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){let n=Sd(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,s)=>(o[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,s)=>{let i=s.type,a;switch(s.type){case"string":a=Cd(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=Cd(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":a=Fd(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=Fd(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":a=Ad(e.attr,s.tfName,s.defaultValue||0),a===void 0&&s.tfDeprecatedName&&(a=Ad(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":a=Rd(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=Rd(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":a=_d(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=_d(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":a=$d(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=$d(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":a=Od(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=Od(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":a=Pd(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=Pd(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":a=Md(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=Md(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":a=kd(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=kd(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":a=J_(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=J_(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return o[s.name]={value:a,type:i},o},{})),r}mapFunction(e){let n=e.nodeDef,r=[],o=[],s={};n!=null&&(s=n.reduce((d,p)=>(d[p.name]=this.mapNode(p),p.op==="Const"&&o.push(d[p.name]),d),{}));let i=[],a=[];e.signature.inputArg.forEach(d=>{let[p]=ur(d.name),m={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:OE(d.type),type:"dtype"}},children:[]};m.signatureKey=d.name,i.push(m),s[p]=m}),Object.keys(s).forEach(d=>{let p=s[d];p.inputNames.forEach((m,b)=>{let[I,,T]=ur(m),_=s[I];if(_.outputs!=null){let O=_.outputs.indexOf(T);if(O!==-1){let A=`${I}:${O}`;p.inputNames[b]=A}}p.inputs.push(_),_.children.push(p)})});let c=e.ret;e.signature.outputArg.forEach(d=>{let[p,m]=ur(c[d.name]),b=s[p];b!=null&&(b.defaultOutput=m,a.push(b))});let f=this.mapArgsToSignature(e);return{nodes:s,inputs:i,outputs:a,weights:o,placeholders:r,signature:f}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}};function SG(t){let e=X().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function eA(t,e){let n=Array.isArray(t)?String.fromCharCode.apply(null,t):SG(t);return e?n:n.toLowerCase()}function Cd(t,e,n,r=!1){let o=t[e];return o!=null?eA(o.s,r):n}function _d(t,e,n){let r=t[e];return r?r.b:n}function Ad(t,e,n){let r=t[e]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function OE(t){switch(typeof t=="string"&&(t=ln[t]),t){case ln.DT_FLOAT:case ln.DT_HALF:return"float32";case ln.DT_INT32:case ln.DT_INT64:case ln.DT_INT8:case ln.DT_UINT8:return"int32";case ln.DT_BOOL:return"bool";case ln.DT_DOUBLE:return"float32";case ln.DT_STRING:return"string";case ln.DT_COMPLEX64:case ln.DT_COMPLEX128:return"complex64";default:return null}}function J_(t,e,n){let r=t[e];return r&&r.func?r.func.name:n}function Md(t,e,n){let r=t[e];return r&&r.type?OE(r.type):n}function kd(t,e,n){let r=t[e];return r&&r.list&&r.list.type?r.list.type.map(o=>OE(o)):n}function tA(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Od(t,e,n){let r=t[e];return r&&r.shape?tA(r.shape):n}function Rd(t,e,n){let r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function Fd(t,e,n,r=!1){let o=t[e];return o&&o.list&&o.list.s?o.list.s.map(s=>eA(s,r)):n}function Pd(t,e,n){let r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(o=>tA(o)):n}function $d(t,e,n){let r=t[e];return r&&r.list&&r.list.b?r.list.b:n}var Ld=class{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(o=>this.getInput(o)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((o,s)=>(o[s]=this.getAttr(s),o),{}))}getInput(e){return ot(e,this.tensorMap,this.context)}getAttr(e,n){let r=this.node.rawAttrs[e];if(r.tensor!=null)return ot(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Ad(this.node.rawAttrs,e,n);if(r.s!=null)return Cd(this.node.rawAttrs,e,n);if(r.b!=null)return _d(this.node.rawAttrs,e,n);if(r.shape!=null)return Od(this.node.rawAttrs,e,n);if(r.type!=null)return Md(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Rd(this.node.rawAttrs,e,n);if(r.list.s!=null)return Fd(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Pd(this.node.rawAttrs,e,n);if(r.list.b!=null)return $d(this.node.rawAttrs,e,n);if(r.list.type!=null)return kd(this.node.rawAttrs,e,n)}return n}};var Ae={};_e(Ae,{OP_SCOPE_SUFFIX:()=>Yf,abs:()=>pt,acos:()=>Vw,acosh:()=>Uw,add:()=>Y,addN:()=>Hw,all:()=>zw,any:()=>Gw,argMax:()=>Uu,argMin:()=>Ww,asin:()=>qw,asinh:()=>Kw,atan:()=>Zw,atan2:()=>Yw,atanh:()=>Qw,avgPool:()=>Gu,avgPool3d:()=>t0,basicLSTMCell:()=>n0,batchNorm:()=>to,batchNorm2d:()=>r0,batchNorm3d:()=>o0,batchNorm4d:()=>s0,batchToSpaceND:()=>Wu,bincount:()=>qu,bitwiseAnd:()=>i0,booleanMaskAsync:()=>yC,broadcastArgs:()=>a0,broadcastTo:()=>Ps,buffer:()=>St,cast:()=>ae,ceil:()=>u0,clipByValue:()=>c0,clone:()=>Yt,complex:()=>Lt,concat:()=>Be,concat1d:()=>l0,concat2d:()=>f0,concat3d:()=>d0,concat4d:()=>p0,conv1d:()=>h0,conv2d:()=>no,conv2dTranspose:()=>m0,conv3d:()=>g0,conv3dTranspose:()=>y0,cos:()=>v0,cosh:()=>w0,cosineWindow:()=>fa,cumprod:()=>b0,cumsum:()=>E0,denseBincount:()=>x0,depthToSpace:()=>D0,depthwiseConv2d:()=>$s,diag:()=>I0,dilation2d:()=>T0,div:()=>ve,divNoNan:()=>S0,dot:()=>N0,dropout:()=>IC,einsum:()=>ro,elu:()=>Ku,enclosingPowerOfTwo:()=>hd,ensureShape:()=>C0,equal:()=>ko,erf:()=>_0,euclideanNorm:()=>M0,exp:()=>wn,expandDims:()=>wt,expm1:()=>k0,eye:()=>Zu,fft:()=>Hs,fill:()=>nr,floor:()=>Yu,floorDiv:()=>Vu,fused:()=>md,gather:()=>Qu,gatherND:()=>xC,greater:()=>Mr,greaterEqual:()=>Xu,ifft:()=>Lo,imag:()=>io,image:()=>Bo,inTopKAsync:()=>TC,irfft:()=>mc,isFinite:()=>O0,isInf:()=>R0,isNaN:()=>F0,leakyRelu:()=>Ju,less:()=>ua,lessEqual:()=>Bs,linalg:()=>w_,linspace:()=>P0,localResponseNormalization:()=>$0,log:()=>kr,log1p:()=>ec,logSigmoid:()=>L0,logSoftmax:()=>B0,logSumExp:()=>nc,logicalAnd:()=>Ro,logicalNot:()=>rc,logicalOr:()=>oc,logicalXor:()=>j0,losses:()=>b_,lowerBound:()=>V0,matMul:()=>Ie,max:()=>rr,maxPool:()=>sc,maxPool3d:()=>U0,maxPoolWithArgmax:()=>H0,maximum:()=>ic,mean:()=>Fo,meshgrid:()=>z0,min:()=>aa,minimum:()=>Po,mirrorPad:()=>ac,mod:()=>G0,moments:()=>W0,movingAverage:()=>vC,mul:()=>V,multiRNNCell:()=>q0,multinomial:()=>K0,neg:()=>bt,norm:()=>Oo,notEqual:()=>uc,oneHot:()=>$o,ones:()=>sr,onesLike:()=>Z0,op:()=>w,outerProduct:()=>Y0,pad:()=>bn,pad1d:()=>Q0,pad2d:()=>X0,pad3d:()=>cc,pad4d:()=>J0,pool:()=>eb,pow:()=>Ar,prelu:()=>fc,print:()=>ju,prod:()=>tb,raggedGather:()=>nb,raggedRange:()=>rb,raggedTensorToTensor:()=>ob,rand:()=>sb,randomGamma:()=>gb,randomNormal:()=>dc,randomStandardNormal:()=>yb,randomUniform:()=>Us,randomUniformInt:()=>vb,range:()=>Pn,real:()=>Or,reciprocal:()=>wb,relu:()=>ao,relu6:()=>pc,reshape:()=>R,reverse:()=>un,reverse1d:()=>bb,reverse2d:()=>Eb,reverse3d:()=>xb,reverse4d:()=>Db,rfft:()=>zs,round:()=>hc,rsqrt:()=>Ib,scalar:()=>ee,scatterND:()=>wC,searchSorted:()=>ca,selu:()=>Tb,separableConv2d:()=>Sb,setdiff1dAsync:()=>Nb,sigmoid:()=>Qt,sign:()=>Cb,signal:()=>v_,sin:()=>_b,sinh:()=>Ab,slice:()=>we,slice1d:()=>Mb,slice2d:()=>kb,slice3d:()=>Ob,slice4d:()=>Rb,softmax:()=>Fb,softplus:()=>tc,spaceToBatchND:()=>lc,sparse:()=>E_,sparseToDense:()=>EC,spectral:()=>y_,split:()=>Rr,sqrt:()=>Vt,square:()=>ht,squaredDifference:()=>gc,squeeze:()=>Ut,stack:()=>Rt,step:()=>yc,stridedSlice:()=>Pb,string:()=>x_,sub:()=>ne,sum:()=>ke,tan:()=>$b,tanh:()=>ia,tensor:()=>vt,tensor1d:()=>mt,tensor2d:()=>ir,tensor3d:()=>vc,tensor4d:()=>Lb,tensor5d:()=>Bb,tensor6d:()=>jb,tensorScatterUpdate:()=>Ub,tile:()=>so,topk:()=>Hb,transpose:()=>Gs,truncatedNormal:()=>zb,unique:()=>Gb,unsortedSegmentSum:()=>Wb,unstack:()=>cn,upperBound:()=>qb,variable:()=>Kb,where:()=>an,whereAsync:()=>bc,zeros:()=>or,zerosLike:()=>st});var nA=(t,e,n,r=Ae)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(g("a",t,e,n),g("b",t,e,n))];case"AddN":return[r.addN(g("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(g("a",t,e,n),g("b",t,e,n))];case"Mul":return[r.mul(g("a",t,e,n),g("b",t,e,n))];case"RealDiv":case"Div":return[r.div(g("a",t,e,n),g("b",t,e,n))];case"DivNoNan":return[r.divNoNan(g("a",t,e,n),g("b",t,e,n))];case"FloorDiv":return[r.floorDiv(g("a",t,e,n),g("b",t,e,n))];case"Sub":return[r.sub(g("a",t,e,n),g("b",t,e,n))];case"Minimum":return[r.minimum(g("a",t,e,n),g("b",t,e,n))];case"Maximum":return[r.maximum(g("a",t,e,n),g("b",t,e,n))];case"Pow":return[r.pow(g("a",t,e,n),g("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var rA=(t,e,n,r=Ae)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(g("x",t,e,n))];case"Acos":return[r.acos(g("x",t,e,n))];case"Acosh":return[r.acosh(g("x",t,e,n))];case"Asin":return[r.asin(g("x",t,e,n))];case"Asinh":return[r.asinh(g("x",t,e,n))];case"Atan":return[r.atan(g("x",t,e,n))];case"Atan2":return[r.atan2(g("x",t,e,n),g("y",t,e,n))];case"Atanh":return[r.atanh(g("x",t,e,n))];case"Ceil":return[r.ceil(g("x",t,e,n))];case"Complex":return[r.complex(g("real",t,e,n),g("imag",t,e,n))];case"Cos":return[r.cos(g("x",t,e,n))];case"Cosh":return[r.cosh(g("x",t,e,n))];case"Elu":return[r.elu(g("x",t,e,n))];case"Erf":return[r.erf(g("x",t,e,n))];case"Exp":return[r.exp(g("x",t,e,n))];case"Expm1":return[r.expm1(g("x",t,e,n))];case"Floor":return[r.floor(g("x",t,e,n))];case"Log":return[r.log(g("x",t,e,n))];case"Log1p":return[r.log1p(g("x",t,e,n))];case"Imag":return[r.imag(g("x",t,e,n))];case"Neg":return[r.neg(g("x",t,e,n))];case"Reciprocal":return[r.reciprocal(g("x",t,e,n))];case"Real":return[r.real(g("x",t,e,n))];case"Relu":return[r.relu(g("x",t,e,n))];case"Round":return[r.round(g("x",t,e,n))];case"Selu":return[r.selu(g("x",t,e,n))];case"Sigmoid":return[r.sigmoid(g("x",t,e,n))];case"Sin":return[r.sin(g("x",t,e,n))];case"Sign":return[r.sign(g("x",t,e,n))];case"Sinh":return[r.sinh(g("x",t,e,n))];case"Softplus":return[r.softplus(g("x",t,e,n))];case"Sqrt":return[r.sqrt(g("x",t,e,n))];case"Square":return[r.square(g("x",t,e,n))];case"Tanh":return[r.tanh(g("x",t,e,n))];case"Tan":return[r.tan(g("x",t,e,n))];case"ClipByValue":return[r.clipByValue(g("x",t,e,n),g("clipValueMin",t,e,n),g("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(g("x",t,e,n))];case"Rsqrt":return[r.rsqrt(ot(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(g("x",t,e,n),g("alpha",t,e,n))];case"Prelu":return[r.prelu(g("x",t,e,n),g("alpha",t,e,n))];case"IsNan":return[r.isNaN(ot(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(ot(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(ot(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function fn(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){U.assert(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){let o=t[r],s=e[r];U.assert(o<0||s<0||o===s,()=>n+` Shapes ${t} and ${e} must match`)}}}function oA(t){return!(typeof t=="number"||t.some(e=>e<0))}function ha(t,e,n){let r=Bd(t,n),o=!oA(r);if(o&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&e.forEach(s=>{r=Bd(s.shape,r)}),!oA(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Bd(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);let n=[];for(let r=0;r<t.length;++r){let o=t[r],s=e[r];if(o>=0&&s>=0&&o!==s)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=o>=0?o:s}return n}var jd=class{constructor(e,n,r,o,s,i,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=s,this.dynamicSize=i,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=ee(0),jt(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),fn(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,jt(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,o)=>this.write(r,n[o]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let o=0;o<this.size();o++)e.push(o)}if(e.length===0)return vt([],[0].concat(this.elementShape));let r=this.readMany(e);return fn(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Rt(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return vt([],[0].concat(this.elementShape));let n=[];for(let o=0;o<this.size();o++)n.push(o);let r=this.readMany(n);return fn(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Be(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);let r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,cn(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0,o=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let s=r===0?0:n.size/r,i=[];J(()=>{n=R(n,[1,r,s]);for(let u=0;u<e.length;++u){let f=[0,u===0?0:o[u-1],0],d=[1,e[u],s];i[u]=R(we(n,f,d),this.elementShape)}return i});let a=[];for(let u=0;u<e.length;u++)a[u]=u;this.writeMany(a,i)}};var ma=class t{get id(){return this.idTensor.id}constructor(e,n,r,o=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);fn(n,s.shape,"TensorList shape mismatch: "),jt(s)}),this.idTensor=ee(0),this.maxNumElements=o,jt(this.idTensor)}copy(){return new t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);fn(e,this.elementShape,"TensorList shape mismatch: ");let o=ha(this.elementShape,this.tensors,e);return J(()=>{let s=this.tensors.map(i=>R(i,o));return Rt(s,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=ha(this.elementShape,this.tensors,e),o=this.tensors.pop();return o.kept=!1,fn(o.shape,e,"TensorList shape mismatch: "),R(o,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(fn(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");jt(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let n=new t([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);fn(this.tensors[e].shape,n,"TensorList shape mismatch: ");let o=ha(this.elementShape,this.tensors,n);return R(this.tensors[e],o)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);fn(this.elementShape,n.shape,"TensorList shape mismatch: "),jt(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);fn(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());let o=ha(this.elementShape,this.tensors,r);return e.length===0?vt([],[0].concat(o)):J(()=>{let s=e.map(i=>R(this.tensors[i],o));return Rt(s,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);fn(this.elementShape,n,"TensorList shape mismatch: ");let r=ha(this.elementShape,this.tensors,n);return this.size()===0?vt([],[0].concat(r)):J(()=>{let o=this.tensors.map(s=>R(s,r));return Be(o,0)})}};function sA(t,e,n){let r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);let o=t.shape.slice(1);fn(o,e,"TensorList shape mismatch: ");let s=cn(t);return new ma(s,e,r)}function iA(t,e,n,r){return new ma([],t,e,r)}function aA(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let o=Math.max(...e);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let s=new ma([],n,t.dtype,r),i=cn(t,0);return e.forEach((a,u)=>{s.setItem(a,i[u])}),s}function uA(t,e,n){let r=0,o=e.map(f=>(r+=f,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);let s=t.shape.slice(1),i=Bd(s,n),a=r===0?0:t.size/r,u=J(()=>{let f=[];t=R(t,[1,r,a]);for(let d=0;d<e.length;++d){let m=[0,d===0?0:o[d-1],0],b=[1,e[d],a];f[d]=R(we(t,m,b),i)}return t.dispose(),f}),c=new ma([],n,t.dtype,e.length);for(let f=0;f<u.length;f++)c.setItem(f,u[f]);return c}var cA=(t,e,n)=>L(void 0,null,function*(){switch(t.op){case"If":case"StatelessIf":{let r=g("thenBranch",t,e,n),o=g("elseBranch",t,e,n),s=g("cond",t,e,n),i=g("args",t,e,n);return(yield s.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=g("body",t,e,n),o=g("cond",t,e,n),s=g("args",t,e,n),i=yield n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),a=s.map(f=>f.id),u=yield i[0].data();i.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&f.dispose()});let c=s;for(;u[0];){let f=c;c=yield n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let d=c.map(m=>m.id);f.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()});let p=yield n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=yield p[0].data(),p.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()})}return c}case"LoopCond":{let r=g("pred",t,e,n);return[cr(r)]}case"Switch":{let r=g("pred",t,e,n),o=g("data",t,e,n);return o.kept||(o=cr(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=t.inputNames.find(o=>ot(o,e,n)!==void 0);if(r){let o=ot(r,e,n);return[cr(o)]}return}case"Enter":{let r=g("frameName",t,e,n),o=g("tensor",t,e,n);return n.enterFrame(r),[cr(o)]}case"Exit":{let r=g("tensor",t,e,n);return n.exitFrame(),[cr(r)]}case"NextIteration":{let r=g("tensor",t,e,n);return n.nextIteration(),[cr(r)]}case"TensorArrayV3":{let r=g("size",t,e,n),o=g("dtype",t,e,n),s=g("elementShape",t,e,n),i=g("dynamicSize",t,e,n),a=g("clearAfterRead",t,e,n),u=g("identicalElementShapes",t,e,n),c=g("name",t,e,n),f=new jd(c,o,r,s,u,i,a);return n.addTensorArray(f),[f.idTensor,ee(1)]}case"TensorArrayWriteV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n),s=g("tensor",t,e,n),i=n.getTensorArray(r.id);return i.write(o,s),[i.idTensor]}case"TensorArrayReadV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),s=g("dtype",t,e,n);return[n.getTensorArray(r.id).gather(o,s)]}case"TensorArrayScatterV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),s=g("tensor",t,e,n),i=n.getTensorArray(r.id);return i.scatter(o,s),[i.idTensor]}case"TensorArrayConcatV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id),s=g("dtype",t,e,n);return[o.concat(s)]}case"TensorArraySplitV3":{let r=g("tensorArrayId",t,e,n),o=g("tensor",t,e,n),s=g("lengths",t,e,n),i=n.getTensorArray(r.id);return i.split(s,o),[i.idTensor]}case"TensorArraySizeV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return[ee(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),s=g("tensor",t,e,n),i=n.getTensorList(r.id);return i.setItem(o,s),[i.idTensor]}case"TensorListGetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),s=g("elementShape",t,e,n),i=g("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(o,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{let r=g("indices",t,e,n),o=g("tensor",t,e,n),s=g("elementShape",t,e,n),i=g("numElements",t,e,n),a=aA(o,r,s,i);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=g("elementShape",t,e,n),o=g("elementDType",t,e,n),s;t.op==="TensorListReserve"?s="numElements":s="maxNumElements";let i=g(s,t,e,n),a=t.op==="TensorListReserve"?-1:i,u=iA(r,o,i,a);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{let r=g("tensorListId",t,e,n),o=g("indices",t,e,n),s=g("elementShape",t,e,n),i=g("elementDType",t,e,n);return[n.getTensorList(r.id).gather(o,i,s)]}case"TensorListStack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),s=g("elementDType",t,e,n),i=g("numElements",t,e,n);return[n.getTensorList(r.id).stack(o,s,i)]}case"TensorListFromTensor":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),s=g("elementDType",t,e,n),i=sA(r,o,s);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id),s=g("dtype",t,e,n),i=g("elementShape",t,e,n);return[o.concat(s,i)]}case"TensorListPushBack":{let r=g("tensorListId",t,e,n),o=g("tensor",t,e,n),s=n.getTensorList(r.id);return s.pushBack(o),[s.idTensor]}case"TensorListPopBack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),s=g("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(o,s)]}case"TensorListSplit":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),s=g("lengths",t,e,n),i=uA(r,s,o);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id);return[ee(o.size(),"int32")]}case"TensorListResize":{let r=g("tensorListId",t,e,n),o=g("size",t,e,n),i=n.getTensorList(r.id).resize(o);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});function lA(t,e,n){let[r,o]=g("fusedOps",t,e,n),s=r==="biasadd",i=!s,a=o==="prelu",u=r==="fusedbatchnorm",c=g("numArgs",t,e,n);if(s){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&s&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let f=g("strides",t,e,n),d=Tc(t,e,n),p=g("dataFormat",t,e,n).toUpperCase(),m=g("dilations",t,e,n),[b,I]=g("args",t,e,n);i&&(I=b,b=void 0);let T=g("leakyreluAlpha",t,e,n);return{stride:f,pad:d,dataFormat:p,dilations:m,biasArg:b,preluArg:I,activationFunc:o,leakyreluAlpha:T}}var fA=(t,e,n,r=Ae)=>{switch(t.op){case"Conv1D":{let o=g("stride",t,e,n),s=g("pad",t,e,n),i=g("dataFormat",t,e,n).toUpperCase(),a=g("dilation",t,e,n);return[r.conv1d(g("x",t,e,n),g("filter",t,e,n),o,s,i,a)]}case"Conv2D":{let o=g("strides",t,e,n),s=Tc(t,e,n),i=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv2d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2]],s,i,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:s,dataFormat:i,dilations:a,biasArg:u,preluArg:c,activationFunc:f,leakyreluAlpha:d}=lA(t,e,n);return[r.fused.conv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:s,dataFormat:i,dilations:[a[1],a[2]],bias:u,activation:f,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:s,dataFormat:i,dilations:a,biasArg:u,preluArg:c,activationFunc:f,leakyreluAlpha:d}=lA(t,e,n);return[r.fused.depthwiseConv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:s,dataFormat:i,dilations:[a[1],a[2]],bias:u,activation:f,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=g("outputShape",t,e,n),s=g("strides",t,e,n),i=Tc(t,e,n);return[r.conv2dTranspose(g("x",t,e,n),g("filter",t,e,n),o,[s[1],s[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=g("strides",t,e,n),s=Tc(t,e,n),i=g("dilations",t,e,n),a=g("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(g("input",t,e,n),g("filter",t,e,n),[o[1],o[2]],s,a,[i[1],i[2]])]}case"Conv3D":{let o=g("strides",t,e,n),s=g("pad",t,e,n),i=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv3d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2],o[3]],s,i,[a[1],a[2],a[3]])]}case"AvgPool":{let o=g("strides",t,e,n),s=g("pad",t,e,n),i=g("kernelSize",t,e,n);return[r.avgPool(g("x",t,e,n),[i[1],i[2]],[o[1],o[2]],s)]}case"MaxPool":{let o=g("strides",t,e,n),s=g("pad",t,e,n),i=g("kernelSize",t,e,n);return[r.maxPool(g("x",t,e,n),[i[1],i[2]],[o[1],o[2]],s)]}case"MaxPoolWithArgmax":{let o=g("strides",t,e,n),s=g("pad",t,e,n),i=g("kernelSize",t,e,n),a=g("includeBatchInIndex",t,e,n),{result:u,indexes:c}=r.maxPoolWithArgmax(g("x",t,e,n),[i[1],i[2]],[o[1],o[2]],s,a);return[u,c]}case"AvgPool3D":{let o=g("strides",t,e,n),s=g("pad",t,e,n),i=g("kernelSize",t,e,n);return[r.avgPool3d(g("x",t,e,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],s)]}case"MaxPool3D":{let o=g("strides",t,e,n),s=g("pad",t,e,n),i=g("kernelSize",t,e,n);return[r.maxPool3d(g("x",t,e,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],s)]}case"Dilation2D":{let o=g("strides",t,e,n),s=g("pad",t,e,n),i=g("dilations",t,e,n),a=o[1],u=o[2],c=i[1],f=i[2];return[r.dilation2d(g("x",t,e,n),g("filter",t,e,n),[a,u],s,[c,f],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var dA=(t,e,n,r=Ae)=>{switch(t.op){case"Fill":{let o=g("shape",t,e,n),s=g("dtype",t,e,n),i=g("value",t,e,n);return[r.fill(o,i,s)]}case"LinSpace":{let o=g("start",t,e,n),s=g("stop",t,e,n),i=g("num",t,e,n);return[r.linspace(o,s,i)]}case"Multinomial":{let o=g("logits",t,e,n),s=g("numSamples",t,e,n),i=g("seed",t,e,n);return[r.multinomial(o,s,i)]}case"OneHot":{let o=g("indices",t,e,n),s=g("depth",t,e,n),i=g("onValue",t,e,n),a=g("offValue",t,e,n),u=g("dtype",t,e,n);return[r.oneHot(o,s,i,a,u)]}case"Ones":return[r.ones(g("shape",t,e,n),g("dtype",t,e,n))];case"OnesLike":return[r.onesLike(g("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(g("shape",t,e,n),g("dtype",t,e,n),g("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("seed",t,e,n))];case"Range":{let o=g("start",t,e,n),s=g("stop",t,e,n),i=g("step",t,e,n);return[r.range(o,s,i,g("dtype",t,e,n))]}case"TruncatedNormal":{let o=g("shape",t,e,n),s=g("mean",t,e,n),i=g("stdDev",t,e,n),a=g("seed",t,e,n);return[r.truncatedNormal(o,s,i,g("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(g("shape",t,e,n),g("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function RE(t,e,n){let r=g("boxes",t,e,n),o=g("scores",t,e,n),s=g("maxOutputSize",t,e,n),i=g("iouThreshold",t,e,n),a=g("scoreThreshold",t,e,n),u=g("softNmsSigma",t,e,n);return{boxes:r,scores:o,maxOutputSize:s,iouThreshold:i,scoreThreshold:a,softNmsSigma:u}}var pA=(s,i,a,u,...c)=>L(void 0,[s,i,a,u,...c],function*(t,e,n,r,o=Ae){switch(t.op){case"NonMaxSuppressionV5":{let{boxes:f,scores:d,maxOutputSize:p,iouThreshold:m,scoreThreshold:b,softNmsSigma:I}=RE(t,e,n),T=yield o.image.nonMaxSuppressionWithScoreAsync(f,d,p,m,b,I);return[T.selectedIndices,T.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:f,scores:d,maxOutputSize:p,iouThreshold:m,scoreThreshold:b}=RE(t,e,n),I=g("padToMaxOutputSize",t,e,n),T=yield o.image.nonMaxSuppressionPaddedAsync(f,d,p,m,b,I);return[T.selectedIndices,T.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:f,scores:d,maxOutputSize:p,iouThreshold:m,scoreThreshold:b}=RE(t,e,n);return[yield o.image.nonMaxSuppressionAsync(f,d,p,m,b)]}case"Where":{let f=o.cast(g("condition",t,e,n),"bool"),d=[yield o.whereAsync(f)];return f.dispose(),d}case"ListDiff":return o.setdiff1dAsync(g("x",t,e,n),g("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}});var hA=(t,e,n,r=Ae)=>{switch(t.op){case"LowerBound":{let o=g("sortedSequence",t,e,n),s=g("values",t,e,n);return[r.lowerBound(o,s)]}case"TopKV2":{let o=g("x",t,e,n),s=g("k",t,e,n),i=g("sorted",t,e,n),a=r.topk(o,s,i);return[a.values,a.indices]}case"UpperBound":{let o=g("sortedSequence",t,e,n),s=g("values",t,e,n);return[r.upperBound(o,s)]}case"Unique":{let o=g("x",t,e,n),s=r.unique(o);return[s.values,s.indices]}case"UniqueV2":{let o=g("x",t,e,n),s=g("axis",t,e,n),i=r.unique(o,s);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var mA=(t,e,n,r=Ae)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":let o=g("default",t,e,n);return[ot(t.name,e,n)||o];case"Placeholder":return[ot(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let f=g("x",t,e,n);return[cr(f)]}case"IdentityN":return g("x",t,e,n).map(f=>cr(f));case"Snapshot":let s=g("x",t,e,n);return[cr(s)];case"Shape":return[r.tensor1d(g("x",t,e,n).shape,"int32")];case"ShapeN":return g("x",t,e,n).map(f=>r.tensor1d(f.shape));case"Size":return[r.scalar(g("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(g("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let i=g("x",t,e,n),a=g("data",t,e,n),u=g("message",t,e,n),c=g("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let f=0;f<a.length;f++)console.log(Array.prototype.slice.call(a[f].dataSync()).slice(0,c));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Vd=class{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ee(0),this.tensorMap=new Map,jt(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ee(this.size(),"int32")}import(e,n){return L(this,null,function*(){this.checkKeyAndValueTensor(e,n);let r=yield e.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),J(()=>{let o=cn(n),s=r.length,i=o.length;U.assert(s===i,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${i} elements.`);for(let a=0;a<s;a++){let u=r[a],c=o[a];jt(c),this.tensorMap.set(u,c)}return this.handle})})}find(e,n){return L(this,null,function*(){this.checkKeyAndValueTensor(e,n);let r=yield e.data();return J(()=>{let o=[];for(let s=0;s<r.length;s++){let i=r[s],a=this.findWithDefault(i,n);o.push(a)}return Rt(o)})})}findWithDefault(e,n){let r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}};var gA=(t,e,n,r)=>L(void 0,null,function*(){switch(t.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{let s=g("keyDType",t,e,n),i=g("valueDType",t,e,n),a=new Vd(s,i);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=g("tableHandle",t,e,n,r),s=g("keys",t,e,n),i=g("values",t,e,n);return[yield r.getHashTableById(o.id).import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{let o=g("tableHandle",t,e,n,r),s=g("keys",t,e,n),i=g("defaultValue",t,e,n);return[yield r.getHashTableById(o.id).find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=g("tableHandle",t,e,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});var yA=(t,e,n,r=Ae)=>{switch(t.op){case"ResizeBilinear":{let o=g("images",t,e,n),s=g("size",t,e,n),i=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(o,[s[0],s[1]],i,a)]}case"ResizeNearestNeighbor":{let o=g("images",t,e,n),s=g("size",t,e,n),i=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(o,[s[0],s[1]],i,a)]}case"CropAndResize":{let o=g("image",t,e,n),s=g("boxes",t,e,n),i=g("boxInd",t,e,n),a=g("cropSize",t,e,n),u=g("method",t,e,n),c=g("extrapolationValue",t,e,n);return[r.image.cropAndResize(o,s,i,a,u,c)]}case"ImageProjectiveTransformV3":{let o=g("images",t,e,n),s=g("transforms",t,e,n),i=g("outputShape",t,e,n),a=g("fillValue",t,e,n),u=g("interpolation",t,e,n),c=g("fillMode",t,e,n);return[r.image.transform(o,s,u.toLowerCase(),c.toLowerCase(),a,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var vA=(t,e,n,r=Ae)=>{switch(t.op){case"Equal":return[r.equal(g("a",t,e,n),g("b",t,e,n))];case"NotEqual":return[r.notEqual(g("a",t,e,n),g("b",t,e,n))];case"Greater":return[r.greater(g("a",t,e,n),g("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(g("a",t,e,n),g("b",t,e,n))];case"Less":return[r.less(g("a",t,e,n),g("b",t,e,n))];case"LessEqual":return[r.lessEqual(g("a",t,e,n),g("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(g("a",t,e,n),g("b",t,e,n))];case"LogicalNot":return[r.logicalNot(g("a",t,e,n))];case"LogicalOr":return[r.logicalOr(g("a",t,e,n),g("b",t,e,n))];case"Select":case"SelectV2":return[r.where(g("condition",t,e,n),g("a",t,e,n),g("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var wA=(t,e,n,r=Ae)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(g("a",t,e,n),g("b",t,e,n),g("transposeA",t,e,n),g("transposeB",t,e,n))];case"Einsum":return[r.einsum(g("equation",t,e,n),...g("tensors",t,e,n))];case"Transpose":return[r.transpose(g("x",t,e,n),g("perm",t,e,n))];case"_FusedMatMul":let[o,s]=g("fusedOps",t,e,n),i=o==="biasadd",a=s==="prelu",u=g("numArgs",t,e,n),c=g("leakyreluAlpha",t,e,n);if(i){if(a&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[f,d]=g("args",t,e,n);return[r.fused.matMul({a:g("a",t,e,n),b:g("b",t,e,n),transposeA:g("transposeA",t,e,n),transposeB:g("transposeB",t,e,n),bias:f,activation:s,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(g("a",t,e,n),g("numLower",t,e,n),g("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var bA=(t,e,n,r=Ae)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(g("x",t,e,n),g("axis",t,e,n),g("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(g("x",t,e,n),g("radius",t,e,n),g("bias",t,e,n),g("alpha",t,e,n),g("beta",t,e,n))];case"Softmax":return[r.softmax(g("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var EA=(t,e,n,r=Ae)=>{switch(t.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:s}=r.raggedGather(g("paramsNestedSplits",t,e,n),g("paramsDenseValues",t,e,n),g("indices",t,e,n),g("outputRaggedRank",t,e,n));return o.concat(s)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:s}=r.raggedRange(g("starts",t,e,n),g("limits",t,e,n),g("splits",t,e,n));return[o,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(g("shape",t,e,n),g("values",t,e,n),g("defaultValue",t,e,n),g("rowPartitionTensors",t,e,n),g("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var xA=(t,e,n,r=Ae)=>{switch(t.op){case"Max":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.max(g("x",t,e,n),a,u)]}case"Mean":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.mean(g("x",t,e,n),a,u)]}case"Min":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.min(g("x",t,e,n),a,u)]}case"Sum":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.sum(g("x",t,e,n),a,u)]}case"All":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.all(g("x",t,e,n),a,u)]}case"Any":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.any(g("x",t,e,n),a,u)]}case"ArgMax":{let a=g("axis",t,e,n);return[r.argMax(g("x",t,e,n),a)]}case"ArgMin":{let a=g("axis",t,e,n);return[r.argMin(g("x",t,e,n),a)]}case"Prod":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.prod(g("x",t,e,n),a,u)]}case"Cumprod":{let a=g("axis",t,e,n),u=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumprod(g("x",t,e,n),a,u,c)]}case"Cumsum":{let a=g("axis",t,e,n),u=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumsum(g("x",t,e,n),a,u,c)]}case"Bincount":let o=g("x",t,e,n),s=g("weights",t,e,n),i=g("size",t,e,n);return[r.bincount(o,s,i)];case"DenseBincount":{let a=g("x",t,e,n),u=g("weights",t,e,n),c=g("size",t,e,n),f=g("binaryOutput",t,e,n);return[r.denseBincount(a,u,c,f)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var DA=(t,e,n,r=Ae)=>{switch(t.op){case"ConcatV2":case"Concat":{let o=g("n",t,e,n),s=g("axis",t,e,n),i=g("tensors",t,e,n);return i=i.slice(0,o),[r.concat(i,s)]}case"Gather":{let o=g("x",t,e,n),s=g("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),0)]}case"GatherV2":{let o=g("axis",t,e,n),s=g("batchDims",t,e,n),i=g("x",t,e,n),a=g("indices",t,e,n);return[r.gather(i,r.cast(a,"int32"),o,s)]}case"Reverse":{let o=g("dims",t,e,n),s=[];for(let a=0;a<o.length;a++)o[a]&&s.push(a);let i=g("x",t,e,n);return[r.reverse(i,s)]}case"ReverseV2":{let o=g("axis",t,e,n),s=g("x",t,e,n);return[r.reverse(s,o)]}case"Slice":{let o=g("begin",t,e,n),s=g("size",t,e,n);return[r.slice(g("x",t,e,n),o,s)]}case"StridedSlice":{let o=g("begin",t,e,n),s=g("end",t,e,n),i=g("strides",t,e,n),a=g("beginMask",t,e,n),u=g("endMask",t,e,n),c=g("ellipsisMask",t,e,n),f=g("newAxisMask",t,e,n),d=g("shrinkAxisMask",t,e,n),p=g("x",t,e,n);return[r.stridedSlice(p,o,s,i,a,u,c,f,d)]}case"Pack":return J(()=>{let o=g("axis",t,e,n),s=g("tensors",t,e,n),i=s[0].shape,a=r.squeeze(s[0]).shape,u=s.map(c=>{let f=U.arraysEqual(c.shape,i);if(!f&&!U.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return f?c:r.reshape(c,i)});return[r.stack(u,o)]});case"Unpack":{let o=g("axis",t,e,n),s=g("tensor",t,e,n);return r.unstack(s,o)}case"Tile":{let o=g("reps",t,e,n);return[r.tile(g("x",t,e,n),o)]}case"Split":case"SplitV":{let o=g("axis",t,e,n),s=g("numOrSizeSplits",t,e,n),i=g("x",t,e,n);return r.split(i,s,o)}case"ScatterNd":{let o=g("indices",t,e,n),s=g("values",t,e,n),i=g("shape",t,e,n);return[r.scatterND(o,s,i)]}case"GatherNd":{let o=g("x",t,e,n),s=g("indices",t,e,n);return[r.gatherND(o,s)]}case"SparseToDense":{let o=g("sparseIndices",t,e,n),s=g("outputShape",t,e,n),i=g("sparseValues",t,e,n),a=g("defaultValue",t,e,n);return[r.sparseToDense(o,i,s,i.dtype===a.dtype?a:r.cast(a,i.dtype))]}case"TensorScatterUpdate":{let o=g("indices",t,e,n),s=g("values",t,e,n),i=g("tensor",t,e,n);return[r.tensorScatterUpdate(i,o,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var IA=(t,e,n,r=Ae)=>{switch(t.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:s,emptyRowIndicator:i,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(g("indices",t,e,n),g("values",t,e,n),g("denseShape",t,e,n),g("defaultValue",t,e,n));return[o,s,i,a]}case"SparseReshape":{let{outputIndices:o,outputShape:s}=r.sparse.sparseReshape(g("inputIndices",t,e,n),g("inputShape",t,e,n),g("newShape",t,e,n));return[o,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var TA=(t,e,n,r=Ae)=>{switch(t.op){case"FFT":return[r.fft(g("x",t,e,n))];case"IFFT":return[r.ifft(g("x",t,e,n))];case"RFFT":return[r.rfft(g("x",t,e,n))];case"IRFFT":return[r.irfft(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var SA=(t,e,n,r=Ae)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(g("input",t,e,n),g("pattern",t,e,n),g("rewrite",t,e,n),g("replaceGlobal",t,e,n))];case"StringNGrams":{let{nGrams:o,nGramsSplits:s}=r.string.stringNGrams(g("data",t,e,n),g("dataSplits",t,e,n),g("separator",t,e,n),g("nGramWidths",t,e,n),g("leftPad",t,e,n),g("rightPad",t,e,n),g("padWidth",t,e,n),g("preserveShortSequences",t,e,n));return[o,s]}case"StringSplit":{let{indices:o,values:s,shape:i}=r.string.stringSplit(g("input",t,e,n),g("delimiter",t,e,n),g("skipEmpty",t,e,n));return[o,s,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(g("input",t,e,n),g("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var NA=(t,e,n,r=Ae)=>{switch(t.op){case"Cast":return[r.cast(g("x",t,e,n),g("dtype",t,e,n))];case"ExpandDims":{let o=g("axis",t,e,n);return[r.expandDims(g("x",t,e,n),o)]}case"Squeeze":{let o=g("axis",t,e,n);return[r.squeeze(g("x",t,e,n),o)]}case"Reshape":return[r.reshape(g("x",t,e,n),g("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(g("x",t,e,n),g("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(g("x",t,e,n),g("padding",t,e,n),g("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(g("x",t,e,n),g("padding",t,e,n),g("constantValue",t,e,n))];case"SpaceToBatchND":{let o=g("blockShape",t,e,n),s=g("paddings",t,e,n);return[r.spaceToBatchND(g("x",t,e,n),o,s)]}case"BatchToSpaceND":{let o=g("blockShape",t,e,n),s=g("crops",t,e,n);return[r.batchToSpaceND(g("x",t,e,n),o,s)]}case"DepthToSpace":{let o=g("blockSize",t,e,n),s=g("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(g("x",t,e,n),o,s)]}case"BroadcastTo":return[r.broadcastTo(g("x",t,e,n),g("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(g("s0",t,e,n),g("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function FE(t,e,n,r,o=J){let s=((i,a,u)=>{switch(i.category){case"arithmetic":return o(()=>nA(i,a,u));case"basic_math":return o(()=>rA(i,a,u));case"control":return cA(i,a,u);case"convolution":return o(()=>fA(i,a,u));case"creation":return o(()=>dA(i,a,u));case"dynamic":return pA(i,a,u);case"evaluation":return o(()=>hA(i,a,u));case"image":return o(()=>yA(i,a,u));case"graph":return o(()=>mA(i,a,u));case"logical":return o(()=>vA(i,a,u));case"matrices":return o(()=>wA(i,a,u));case"normalization":return o(()=>bA(i,a,u));case"ragged":return o(()=>EA(i,a,u));case"reduction":return o(()=>xA(i,a,u));case"slice_join":return o(()=>DA(i,a,u));case"sparse":return o(()=>IA(i,a,u));case"spectral":return o(()=>TA(i,a,u));case"string":return o(()=>SA(i,a,u));case"transformation":return o(()=>NA(i,a,u));case"hash_table":return gA(i,a,u,r);case"custom":let c=Sd(i.op);if(c&&c.customExecutor)return c.customExecutor(new Ld(i,a,u));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return U.isPromise(s)?s.then(i=>[].concat(i)):[].concat(s)}var Nc=class{constructor(e={},n={},r={},o={},s){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let n=0;n<this.contexts.length-1;n++){let r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}};function PE(t,e,n,r){let o=new Set,s=[],i=null,a=null,u=new Set,c=new Set(Object.keys(t).map(p=>Ht(p)[0]));r=r||[];let f=new Set(r.map(p=>Ht(p.name)[0])),d=[...e];for(;d.length>0;){let p=d.pop();if((Wo(p)||XG(p)||JG(p))&&i==null&&(i=p,a=i.children.map(m=>m.name).filter(m=>o.has(m))),o.add(p.name),n[p.name]==null&&!c.has(p.name)&&!f.has(p.name)){if(p.inputs.length===0){s.push(p.name);continue}p.inputs.forEach(m=>{u.has(m.name)||(u.add(m.name),d.push(m))})}}return{inputs:t,outputs:e,usedNodes:o,missingInputs:s,dynamicNode:i,syncInputs:a}}function CA(t,e){let{usedNodes:n,inputs:r}=e,o=Object.keys(r).map(T=>Ht(T)[0]).map(T=>t.nodes[T]),s=t.initNodes||[],i=T=>n.has(typeof T=="string"?T:T.name);function a(T){return[...new Map(T.map(_=>[_.name,_])).values()]}let u=a([...o,...t.weights,...s]).filter(i),c=a([...u,...Object.values(t.nodes)]).filter(i),f=new Map(c.map(T=>[T.name,T])),d={};for(let T of c){d[T.name]=d[T.name]||0;for(let _ of T.children)i(_)||(d[_.name]=Number.POSITIVE_INFINITY),d[_.name]=(d[_.name]||0)+1}let p=Object.entries(d).filter(([,T])=>T===0).map(([T])=>T),m=[...p];for(;p.length>0;){let T=p.pop(),_=f.get(T);for(let O of _.children.filter(i))--d[O.name]===0&&(m.push(O.name),p.push(O.name))}let b=m.map(T=>f.get(T)),I=qG(b,u);return KG(I,u),I}function qG(t,e){let n=new Map(t.map(i=>[i.name,i])),r=e.map(i=>i.name),o=new Set(r);for(;r.length>0;){let i=r.pop(),a=n.get(i);for(let u of a.children)!n.has(u.name)||o.has(u.name)||(o.add(u.name),r.push(u.name))}return t.filter(i=>o.has(i.name))}var ga=class extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}};function KG(t,e){let n=new Map(t.map((a,u)=>[a.name,u])),r=new Set(e.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),s=new Set(t.map(a=>a.name)),i=a=>s.has(typeof a=="string"?a:a.name);for(let a of t){for(let u of a.children.filter(i)){if(!n.has(u.name))throw new ga(`Child ${u.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(u.name))throw new ga(`Node ${a.name} is scheduled to run after its child ${u.name}.`)}if(!o(a))for(let u of a.inputs){if(!n.has(u.name))throw new ga(`Input ${u.name} of node ${a.name} is unreachable.`);if(n.get(u.name)>n.get(a.name))throw new ga(`Node ${a.name} is scheduled to run before its input ${u.name}.`)}}}function _A(t){let e=new Map(t.map((a,u)=>[a.name,u])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,u)=>Wo(a)?n:u),o=a=>{let u=r[e.get(a.name)];return u??-1},s=t.map((a,u)=>a.children.map(o).reduce((c,f)=>Math.max(c,f),r[u])),i=new Map;for(let a=0;a<t.length;++a){let u=s[a];if(u===n)continue;let c=t[a],f=t[u];i.has(f.name)||i.set(f.name,[]),i.get(f.name).push(c)}return i}var ZG=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),YG=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),QG=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Wo(t){return ZG.has(t.op)}function XG(t){return YG.has(t.op)}function JG(t){return QG.has(t.op)}var Cc=class t{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let n=Object.keys(e).map(r=>e[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new t(e.functions[r],this)})}getCompilationKey(e,n){let r=e.map(s=>s.name).sort(),o=n.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(e,n){let r=PE(e,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:s,syncInputs:i}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(o.length>0){let c=n.map(d=>d.name),f=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${f}]. Missing the following inputs: [${o}]`)}let a=CA(this.graph,r),u=_A(a);return{orderedNodes:a,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;let n=e.clone();return jt(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);let r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);let o=r.map(p=>this.graph.nodes[Ht(p)[0]]),s=n.map(p=>Ht(p)[0]),i=new Set(s),a=s.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let u=this.getCompilationKey(o,a),c=this.compiledMap.get(u);c==null&&(c=this.compile(e,a),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=X().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let f={},d={};return J(()=>{let p=new Nc(this.weightMap,f,d,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(_=>{let[O,A]=Ht(_,p),M=[];M[A]=e[_],m[O]=M,this.keepIntermediateTensors&&(this.clonedTensorsMap[O]=this.cloneTensorList(M))});let b=this.getFrozenTensorIds(m),{orderedNodes:I,nodeLiveUntilMap:T}=c;for(let _ of I){if(m[_.name])continue;let O=FE(_,m,p,this._resourceManager);if(U.isPromise(O))throw new Error(`The execution of the op '${_.op}' returned a promise. Please use model.executeAsync() instead.`);m[_.name]=O,this.keepIntermediateTensors&&(this.clonedTensorsMap[_.name]=this.cloneTensorList(O)),this.checkTensorForDisposalWithNodeLiveUntilInfo(_,m,p,b,i,T.get(_.name))}return this.parent==null&&p.dispose(b),n.map(_=>ot(_,m,p))})}getFrozenTensorIds(e){let n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(e,n,r,o,s,i,a){if(!(Wo(n)||i.has(e))){for(let u of r[e])u!=null&&(a[u.id]=(a[u.id]||0)+n.children.length);for(let u of n.inputs){if(Wo(u))continue;let c=pE(u.name,r,o);if(c!=null)for(let f of c){if(!f||f.kept||s.has(f.id))continue;let d=a[f.id];d===1?(f.dispose(),delete a[f.id]):d!=null&&a[f.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,o,s,i){function a(u){return Wo(u)||s.has(u.name)}if(!(Wo(e)||i==null))for(let u of i){if(a(u))continue;let c=pE(u.name,n,r);for(let f of c)!f||f.kept||o.has(f.id)||f.dispose()}}executeAsync(e,n){return L(this,null,function*(){return this._executeAsync(e,n)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(i,a){return L(this,arguments,function*(e,n,r=!1,o={},s={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=X().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(b){this.keepIntermediateTensors=!1,console.warn(b.message)}let u=new Nc(this.weightMap,o,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(e,u,n,r),f=n.map(b=>ot(b,c,u)),d=f.map(b=>b.id),p=Object.keys(e).map(b=>e[b].id),m=new Set([...d,...p,...this.weightIds]);return Object.values(c).forEach(b=>{b.forEach(I=>{I&&!I.isDisposed&&!m.has(I.id)&&I.dispose()})}),this.parent==null&&u.dispose(m),f})}executeFunctionAsync(e,n,r){return L(this,null,function*(){let o=e.reduce((s,i,a)=>(s[this.inputs[a].name]=i,s),{});return this._executeAsync(o,this.outputNodes,!0,n,r)})}executeWithControlFlow(e,n,r,o){return L(this,null,function*(){let s=Object.keys(e),i=s.map(M=>this.graph.nodes[Ht(M)[0]]),a=r.map(M=>Ht(M)[0]),u=new Set(a),c=a.map(M=>this.graph.nodes[M]);c.length===0&&(c=this._outputs);let{usedNodes:f,missingInputs:d,dynamicNode:p,syncInputs:m}=PE(e,c,this.weightMap,this._initNodes),b=[...i,...this.graph.weights,...this._initNodes||[]].map(M=>({node:M,contexts:n.currentContext})),I=Object.assign({},this.weightMap);Object.keys(e).forEach(M=>{let[$,F]=Ht(M),j=[];j[F]=e[M],I[$]=j});let T={},_=this.getFrozenTensorIds(I),O={};for(;b.length>0;){let M=this.processStack(i,b,n,I,O,_,u,T,f);yield Promise.all(M)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let A=c.filter(M=>!Wo(M)&&!ot(M.name,I,n)).map(M=>M.name);if(A.length>0){let M="";throw p!=null&&(M=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${A}] from the provided inputs [${s}]. Consider providing the following inputs: [${d}]. ${M}`)}return I})}processStack(e,n,r,o,s,i,a,u,c){let f=[];for(;n.length>0;){let d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&g("isConstant",d.node,o,r)&&([p]=ur(d.node.name,r)),o[d.node.name]==null){let m=FE(d.node,o,r,this._resourceManager);p||([p]=ur(d.node.name,r));let b=r.currentContext;U.isPromise(m)?f.push(m.then(I=>(o[p]=I,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(I)),r.currentContext=b,this.checkTensorForDisposal(p,d.node,o,r,i,a,u),this.processChildNodes(d.node,n,r,o,s,c),I))):(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),this.checkTensorForDisposal(p,d.node,o,r,i,a,u),this.processChildNodes(d.node,n,r,o,s,c))}else this.processChildNodes(d.node,n,r,o,s,c)}return f}processChildNodes(e,n,r,o,s,i){e.children.forEach(a=>{let[u]=ur(a.name,r);s[u]||!i.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!ot(c,o,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!ot(c,o,r))&&(s[u]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{let r=e[n],[o]=Ht(n),s=this.graph.nodes[o];if(s.attrParams.shape&&s.attrParams.shape.value){let i=s.attrParams.shape.value,a=i.length===r.shape.length&&r.shape.every((u,c)=>i[c]===-1||i[c]===u);U.assert(a,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&U.assert(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;let o={};for(let s in e){let i=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[s];i!=null?o[i.name]=e[s]:o[s]=e[s]}return o}checkInputs(e){let n=Object.keys(e).filter(r=>{let[o]=Ht(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,o;let s=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return s!=null?s.name:n},{})}checkOutputs(e){e.forEach(n=>{let[r]=Ht(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}};var Ud=class{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}};var e8="?tfjs-format=file",t8="model.json",Hd=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=da){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Ud}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return U.isPromise(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){let n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}loadStreaming(e){return L(this,null,function*(){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let n=yield Jf(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)})}loadWithWeightMap(e,n){this.artifacts=e;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let s=this.artifacts.userDefinedMetadata;s.signature!=null&&(o=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Cc(Sc.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let s=Sc.Instance.transformGraph(e.modelInitializer);this.initializer=new Cc(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}save(e,n){return L(this,null,function*(){if(typeof e=="string"){let r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)})}addStructuredOutputNames(e){if(this.structuredOutputKeys){let n=e instanceof ye?[e]:e,r={};return n.forEach((o,s)=>r[this.structuredOutputKeys[s]]=o),r}return e}predict(e,n){let r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(e,n){return L(this,null,function*(){let r=yield this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(e){var n;if(!(e instanceof ye)&&!Array.isArray(e)){let s=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(s!=null)for(let i in s){let a=s[i];a.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];let r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((s,i)=>{var a,u,c;let f=(c=(u=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||u===void 0?void 0:u[i])===null||c===void 0?void 0:c.resourceId;return f!=null?s[i]=this.resourceIdToCapturedInput[f]:s[i]=e[o++],s},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return L(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){let s=r[o],i=n[s];this.resourceIdToCapturedInput[i.resourceId]=e[o]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=this.executor.execute(e,n);return r.length>1?r:r[0]}executeAsync(e,n){return L(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=yield this.executor.executeAsync(e,n);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Je(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};function _c(r){return L(this,arguments,function*(t,e={},n=da){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=n8(t));let o=new Hd(t,e,n);return yield o.load(),o})}function n8(t){return t.endsWith("/")||(t=t+"/"),`${t}${t8}${e8}`}var YA=Sp(MA());var HE=function(t,e){return HE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},HE(t,e)};function QA(t,e){function n(){this.constructor=t}HE(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zt=function(){return zt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},zt.apply(this,arguments)};function be(t,e,n,r){return new(n||(n=Promise))(function(o,s){function i(c){try{u(r.next(c))}catch(f){s(f)}}function a(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){var f;c.done?o(c.value):(f=c.value,f instanceof n?f:new n(function(d){d(f)})).then(i,a)}u((r=r.apply(t,e||[])).next())})}function Ee(t,e){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return function(f){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&f[0]?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[2&f[0],o.value]),f[0]){case 0:case 1:o=f;break;case 4:return i.label++,{value:f[1],done:!1};case 5:i.label++,r=f[1],f=[0];continue;case 7:f=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!((o=o.length>0&&o[o.length-1])||f[0]!==6&&f[0]!==2)){i=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){i.label=f[1];break}if(f[0]===6&&i.label<o[1]){i.label=o[1],o=f;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(f);break}o[2]&&i.ops.pop(),i.trys.pop();continue}f=e.call(t,i)}catch(d){f=[6,d],r=0}finally{n=o=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([u,c])}}}function Xd(t){return t instanceof SVGAnimatedLength?t.baseVal.value:t}function GE(t){return be(this,void 0,void 0,function(){var e,n;return Ee(this,function(r){switch(r.label){case 0:return e=document.createElement("canvas"),t instanceof ye?[4,ar.toPixels(t,e)]:[3,2];case 1:return r.sent(),[3,3];case 2:e.width=Xd(t.width),e.height=Xd(t.height),n=e.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0),r.label=3;case 3:return[2,e]}})})}function XA(t){return be(this,void 0,void 0,function(){var e,n,r,o,s,i;return Ee(this,function(a){switch(a.label){case 0:return t instanceof ye?(e=t.shape.slice(0,2),n=e[0],r=e[1],o=ImageData.bind,[4,ar.toPixels(t)]):[3,2];case 1:return[2,new(o.apply(ImageData,[void 0,a.sent(),r,n]))];case 2:return s=document.createElement("canvas"),i=s.getContext("2d"),s.width=Xd(t.width),s.height=Xd(t.height),i.drawImage(t,0,0),[2,i.getImageData(0,0,s.width,s.height)]}})})}function JA(t){return be(this,void 0,void 0,function(){var e,n;return Ee(this,function(r){switch(r.label){case 0:return t instanceof SVGImageElement||t instanceof OffscreenCanvas?[4,GE(t)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:return e=n,[2,ar.fromPixels(e,4)]}})})}function Oc(t){if(t<0||t>=256)throw new Error("Mask value must be in range [0, 255] but got "+t);if(!Number.isInteger(t))throw new Error("Mask value must be an integer but got "+t)}var $E=[[110,64,170],[143,61,178],[178,60,178],[210,62,167],[238,67,149],[255,78,125],[255,94,99],[255,115,75],[255,140,56],[239,167,47],[217,194,49],[194,219,64],[175,240,91],[135,245,87],[96,247,96],[64,243,115],[40,234,141],[28,219,169],[26,199,194],[33,176,213],[47,150,224],[65,125,224],[84,101,214],[99,81,195]];function r8(t){if(Oc(t),t<$E.length){var e=$E[t];return{r:e[0],g:e[1],b:e[2],a:255}}throw new Error("Mask value must be in range [0, "+$E.length+")")}function eM(t){var e=t.shape[2],n=Uu(t,2),r=R(n,[-1]);return $o(r,e)}function zd(t,e){return J(function(){return ae(Mr(t,ee(e)),"int32")})}function o8(t,e){var n=e.shape,r=n[0],o=n[1],s=n[2];return J(function(){var i=eM(e),a=wt(Pn(0,s,1,"int32"),1),u=ae(Ie(i,a),"int32"),c=R(u,[r,o]),f=Y(c,ee(1,"int32"));return ne(function(d,p){return V(d,p)}(f,t),ee(1,"int32"))})}var tM=function(){function t(e,n){this.model=e,this.outputStride=n;var r=this.model.inputs[0].shape;U.assert(r[1]===-1&&r[2]===-1,function(){return"Input shape ["+r[1]+", "+r[2]+"] must both be equal to or -1"})}return t.prototype.predict=function(e){var n=this;return J(function(){var r=n.preprocessInput(ae(e,"float32")),o=wt(r,0),s=n.model.predict(o).map(function(a){return Ut(a,[0])}),i=n.nameOutputResults(s);return{heatmapScores:Qt(i.heatmap),offsets:i.offsets,displacementFwd:i.displacementFwd,displacementBwd:i.displacementBwd,segmentation:i.segmentation,partHeatmaps:i.partHeatmaps,longOffsets:i.longOffsets,partOffsets:i.partOffsets}})},t.prototype.dispose=function(){this.model.dispose()},t}(),s8=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return QA(e,t),e.prototype.preprocessInput=function(n){return J(function(){return ne(ve(n,127.5),1)})},e.prototype.nameOutputResults=function(n){return{offsets:n[0],segmentation:n[1],partHeatmaps:n[2],longOffsets:n[3],heatmap:n[4],displacementFwd:n[5],displacementBwd:n[6],partOffsets:n[7]}},e}(tM),tp=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],lr=tp.length,Jd=tp.reduce(function(t,e,n){return t[e]=n,t},{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(function(t){var e=t[0],n=t[1];return[Jd[e],Jd[n]]});function WE(t,e,n){var r=t[0],o=t[1],s=e[0],i=e[1],a=n.top,u=n.bottom;return[i/(n.left+n.right+o),s/(a+u+r)]}function nM(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+lr)}}function rM(t,e,n){var r=nM(t.heatmapY,t.heatmapX,t.id,n),o=r.y,s=r.x;return{x:t.heatmapX*e+s,y:t.heatmapY*e+o}}function kA(t,e,n){return t<e?e:t>n?n:t}function OA(t,e){return{x:t.x+e.x,y:t.y+e.y}}function i8(t,e,n){n===void 0&&(n=.3);for(var r=0,o=0,s=0;s<t.length;s++)e.keypoints[s].score>n&&(o+=1,r+=Math.pow(t[s].x-e.keypoints[s].position.x,2)+Math.pow(t[s].y-e.keypoints[s].position.y,2));return o===0?r=1/0:r/=o,r}function a8(t,e,n,r,o,s,i){for(var a=i[0],u=i[1],c=n(t),f=c.y*r+c.x,d=o[lr*(2*f)+e],p=o[lr*(2*f+1)+e],m=t.y+d,b=t.x+p,I=0;I<s;I++){m=Math.min(m,a-1);var T=n({x:b=Math.min(b,u-1),y:m}),_=T.y*r+T.x;m+=d=o[lr*(2*_)+e],b+=p=o[lr*(2*_+1)+e]}return{x:b,y:m}}function oM(t,e,n,r,o,s,i,a,u,c){for(var f=o[0],d=o[1],p=s[0],m=s[1],b=a[0],I=a[1],T=[],_=function(B){return function(G,W,H,se){var te=W[0],xe=W[1],Te=H[0],Qe=H[1],tt=Math.round(((te+G.y+1)*Qe-1)/se);return{x:Math.round(((xe+G.x+1)*Te-1)/se),y:tt}}(B,[f,d],[p,m],u)},O=0;O<r;O++){var A=a8(t,O,_,i,e,c,[b,I]);T.push(A)}for(var M=-1,$=1/0,F=0;F<n.length;F++){var j=i8(T,n[F]);j<$&&(M=F,$=j)}return M}function sM(t,e){var n=t[0],r=t[1];return[Math.round((r-1)/e+1),Math.round((n-1)/e+1)]}function iM(t,e,n,r,o,s,i,a,u,c,f){for(var d=i[0],p=i[1],m=t.shape,b=m[0],I=m[1],T=e.shape.slice(0,2),_=T[0],O=T[1],A=R(e,[_,O,2,lr]),M=new Float32Array(f*lr*3).fill(0),$=0;$<n.length;$++)for(var F=$*lr*3,j=n[$],B=0;B<lr;B++){var G=j.keypoints[B],W=F+3*B;M[W]=G.score,M[W+1]=G.position.y,M[W+2]=G.position.x}var H=WE([r,o],[d,p],a),se=H[0],te=H[1],xe=vt(M,[f,lr,3]),Te=a.top,Qe=a.left,tt={variableNames:["segmentation","longOffsets","poses"],outputShape:[b,I],userCode:`
    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {
      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));
    }

    float convertToPositionInOutputFloat(
        int pos, int pad, float scale, int stride) {
      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);
    }

    float dist(float x1, float y1, float x2, float y2) {
      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);
    }

    float sampleLongOffsets(float h, float w, int d, int k) {
      float fh = fract(h);
      float fw = fract(w);
      int clH = int(ceil(h));
      int clW = int(ceil(w));
      int flH = int(floor(h));
      int flW = int(floor(w));
      float o11 = getLongOffsets(flH, flW, d, k);
      float o12 = getLongOffsets(flH, clW, d, k);
      float o21 = getLongOffsets(clH, flW, d, k);
      float o22 = getLongOffsets(clH, clW, d, k);
      float o1 = mix(o11, o12, fw);
      float o2 = mix(o21, o22, fw);
      return mix(o1, o2, fh);
    }

    int findNearestPose(int h, int w) {
      float prob = getSegmentation(h, w);
      if (prob < 1.0) {
        return -1;
      }

      // Done(Tyler): convert from output space h/w to strided space.
      float stridedH = convertToPositionInOutputFloat(
        h, `+Te+", "+te+", "+s+`);
      float stridedW = convertToPositionInOutputFloat(
        w, `+Qe+", "+se+", "+s+`);

      float minDist = 1000000.0;
      int iMin = -1;
      for (int i = 0; i < `+f+`; i++) {
        float curDistSum = 0.0;
        int numKpt = 0;
        for (int k = 0; k < `+lr+`; k++) {
          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);
          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);

          float y = float(h) + dy;
          float x = float(w) + dx;

          for (int s = 0; s < `+u+`; s++) {
            int yRounded = round(min(y, float(`+(r-1)+`)));
            int xRounded = round(min(x, float(`+(o-1)+`)));

            float yStrided = convertToPositionInOutputFloat(
              yRounded, `+Te+", "+te+", "+s+`);
            float xStrided = convertToPositionInOutputFloat(
              xRounded, `+Qe+", "+se+", "+s+`);

            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);
            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);

            y = y + dy;
            x = x + dx;
          }

          float poseScore = getPoses(i, k, 0);
          float poseY = getPoses(i, k, 1);
          float poseX = getPoses(i, k, 2);
          if (poseScore > `+c+`) {
            numKpt = numKpt + 1;
            curDistSum = curDistSum + dist(x, y, poseX, poseY);
          }
        }
        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {
          minDist = curDistSum / float(numKpt);
          iMin = i;
        }
      }
      return iMin;
    }

    void main() {
        ivec2 coords = getOutputCoords();
        int nearestPose = findNearestPose(coords[0], coords[1]);
        setOutput(float(nearestPose));
      }
  `};return Lu().compileAndRun(tt,[t,A,xe])}function aM(){return $u()==="webgl"}function u8(t,e,n,r,o,s,i,a,u,c,f,d){var p=i[0],m=i[1];return u===void 0&&(u=.2),c===void 0&&(c=8),f===void 0&&(f=.3),d===void 0&&(d=10),be(this,void 0,void 0,function(){var b,I,T,_,O;return Ee(this,function(A){switch(A.label){case 0:return b=n.filter(function(M){return M.score>=u}),aM()?(T=J(function(){var M=iM(t,e,b,r,o,s,[p,m],a,c,f,d),$=Qf().makeTensorFromDataId(M.dataId,M.shape,M.dtype);return b.map(function(F,j){return function(B,G){return J(function(){return ae(ko(B,ee(G)),"int32")})}($,j)})}),[4,Promise.all(T.map(function(M){return M.data()}))]):[3,2];case 1:return I=A.sent(),T.forEach(function(M){return M.dispose()}),[3,5];case 2:return[4,t.data()];case 3:return _=A.sent(),[4,e.data()];case 4:O=A.sent(),I=function(M,$,F,j,B,G,W,H,se,te){var xe=W[0],Te=W[1];te===void 0&&(te=5);for(var Qe=F.map(function(Lr){return new Uint8Array(j*B).fill(0)}),tt=H.top,Et=H.left,ct=WE([j,B],[xe,Te],H),Pr=ct[0],Ko=ct[1],$r=sM([xe,Te],G)[0],En=0;En<j;En+=1)for(var xn=0;xn<B;xn+=1){var Ln=En*B+xn;if(M[Ln]===1){var Dn=oM({x:xn,y:En},$,F,te,[tt,Et],[Pr,Ko],$r,[j,B],G,se);Dn>=0&&(Qe[Dn][Ln]=1)}}return Qe}(_,O,b,r,o,s,[p,m],a,c),A.label=5;case 5:return[2,I.map(function(M,$){return{data:M,pose:b[$],width:o,height:r}})]}})})}function c8(t,e,n,r,o,s,i,a,u,c,f,d,p){var m=a[0],b=a[1];return c===void 0&&(c=.2),f===void 0&&(f=8),d===void 0&&(d=.3),p===void 0&&(p=10),be(this,void 0,void 0,function(){var I,T,_,O,A,M;return Ee(this,function($){switch($.label){case 0:return I=r.filter(function(F){return F.score>=c}),aM()?(_=J(function(){var F=iM(t,e,I,o,s,i,[m,b],u,f,d,p),j=Qf().makeTensorFromDataId(F.dataId,F.shape,F.dtype);return I.map(function(B,G){return function(W,H,se){return J(function(){return ne(V(ae(ko(W,ee(se)),"int32"),Y(H,1)),1)})}(j,n,G)})}),[4,Promise.all(_.map(function(F){return F.data()}))]):[3,2];case 1:return T=$.sent(),_.forEach(function(F){return F.dispose()}),[3,6];case 2:return[4,t.data()];case 3:return O=$.sent(),[4,e.data()];case 4:return A=$.sent(),[4,n.data()];case 5:M=$.sent(),T=function(F,j,B,G,W,H,se,te,xe,Te,Qe){var tt=te[0],Et=te[1];Qe===void 0&&(Qe=5);for(var ct=G.map(function(Js){return new Int32Array(W*H).fill(-1)}),Pr=xe.top,Ko=xe.left,$r=WE([W,H],[tt,Et],xe),En=$r[0],xn=$r[1],Ln=sM([tt,Et],se)[0],Dn=0;Dn<W;Dn+=1)for(var Lr=0;Lr<H;Lr+=1){var co=Dn*H+Lr;if(F[co]===1){var Zo=oM({x:Lr,y:Dn},j,G,Qe,[Pr,Ko],[En,xn],Ln,[W,H],se,Te);Zo>=0&&(ct[Zo][co]=B[co])}}return ct}(O,A,M,I,o,s,i,[m,b],u,f),$.label=6;case 6:return[2,T.map(function(F,j){return{pose:I[j],data:F,height:o,width:s}})]}})})}function LE(t){return Math.floor(t/2)}var l8=function(){function t(e,n){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=n}return t.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},t.prototype.empty=function(){return this.numberOfElements===-1},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(e){for(;e>0&&this.less(LE(e),e);)this.exchange(e,LE(e)),e=LE(e)},t.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var n=2*e;if(n<this.numberOfElements&&this.less(n,n+1)&&n++,!this.less(e,n))break;this.exchange(e,n),e=n}},t.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},t.prototype.less=function(e,n){return this.getValueAt(e)<this.getValueAt(n)},t.prototype.exchange=function(e,n){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[n],this.priorityQueue[n]=r},t}();function f8(t,e,n,r,o,s){for(var i=s.shape,a=i[0],u=i[1],c=!0,f=Math.max(n-o,0),d=Math.min(n+o+1,a),p=f;p<d;++p){for(var m=Math.max(r-o,0),b=Math.min(r+o+1,u),I=m;I<b;++I)if(s.get(p,I,t)>e){c=!1;break}if(!c)break}return c}var uM=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map(function(t){var e=t[0],n=t[1];return[Jd[e],Jd[n]]}),BE=uM.map(function(t){return t[1]}),RA=uM.map(function(t){return t[0]});function jE(t,e,n,r){return{y:kA(Math.round(t.y/e),0,n-1),x:kA(Math.round(t.x/e),0,r-1)}}function FA(t,e,n,r,o,s,i,a){a===void 0&&(a=2);for(var u=r.shape,c=u[0],f=u[1],d=function(O,A,M){var $=M.shape[2]/2;return{y:M.get(A.y,A.x,O),x:M.get(A.y,A.x,$+O)}}(t,jE(e.position,s,c,f),i),p=OA(e.position,d),m=0;m<a;m++){var b=jE(p,s,c,f),I=nM(b.y,b.x,n,o);p=OA({x:b.x*s,y:b.y*s},{x:I.x,y:I.y})}var T=jE(p,s,c,f),_=r.get(T.y,T.x,n);return{position:p,part:tp[n],score:_}}function d8(t,e,n,r,o,s){var i=e.shape[2],a=BE.length,u=new Array(i),c=t.part,f=t.score,d=rM(c,r,n);u[c.id]={score:f,part:tp[c.id],position:d};for(var p=a-1;p>=0;--p){var m=BE[p],b=RA[p];u[m]&&!u[b]&&(u[b]=FA(p,u[m],b,e,n,r,s))}for(p=0;p<a;++p)m=RA[p],b=BE[p],u[m]&&!u[b]&&(u[b]=FA(p,u[m],b,e,n,r,o));return u}function cM(t,e,n,r){var o=n.x,s=n.y;return t.some(function(i){var a,u,c,f,d,p,m=i.keypoints[r].position;return a=s,u=o,c=m.y,f=m.x,(d=c-a)*d+(p=f-u)*p<=e})}function p8(t,e,n){var r=n.reduce(function(o,s,i){var a=s.position,u=s.score;return cM(t,e,a,i)||(o+=u),o},0);return r/n.length}function Gd(t,e,n,r,o,s,i,a){i===void 0&&(i=.5),a===void 0&&(a=20);for(var u=[],c=function(b,I,T){for(var _=T.shape,O=_[0],A=_[1],M=_[2],$=new l8(O*A*M,function(W){return W.score}),F=0;F<O;++F)for(var j=0;j<A;++j)for(var B=0;B<M;++B){var G=T.get(F,j,B);G<b||f8(B,G,F,j,I,T)&&$.enqueue({score:G,part:{heatmapY:F,heatmapX:j,id:B}})}return $}(i,1,t),f=a*a;u.length<s&&!c.empty();){var d=c.dequeue();if(!cM(u,f,rM(d.part,o,e),d.part.id)){var p=d8(d,t,e,o,n,r),m=p8(u,f,p);u.push({keypoints:p,score:m})}}return u}var Ac,h8=[-123.15,-115.9,-103.06],m8=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return QA(e,t),e.prototype.preprocessInput=function(n){return Y(n,h8)},e.prototype.nameOutputResults=function(n){var r=n[0],o=n[1],s=n[2],i=n[3],a=n[4],u=n[5];return{offsets:a,segmentation:n[6],partHeatmaps:u,longOffsets:i,heatmap:s,displacementFwd:o,displacementBwd:r,partOffsets:n[7]}},e}(tM),PA="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",$A="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function Mc(t){if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")}(t);if(typeof ImageData<"u"&&t instanceof ImageData)return[t.height,t.width];if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]}(t);if(t instanceof ye)return[t.shape[0],t.shape[1]];throw new Error("error: Unknown input type: "+t+".")}function LA(t,e){return function(n,r){return(n-1)%r==0}(t,e)?t:Math.floor(t/e)*e+1}var kc={low:"low",medium:"medium",high:"high",full:"full"},g8=((Ac={})[kc.low]=.25,Ac[kc.medium]=.5,Ac[kc.high]=.75,Ac[kc.full]=1,Ac);function Wd(t,e,n){var r=n[0],o=n[1],s=function(i){if(typeof i=="string"){var a=g8[i];return U.assert(typeof a=="number",function(){return"string value of inputResolution must be one of "+Object.values(kc).join(",")+" but was "+i+"."}),a}return U.assert(typeof i=="number"&&i<=2&&i>=.1,function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+i}),i}(t);return[LA(r*s,e),LA(o*s,e)]}function ya(t,e,n,r,o){var s=e[0],i=e[1],a=n[0],u=n[1],c=r[0],f=c[0],d=c[1],p=r[1],m=p[0],b=p[1];return o===void 0&&(o=!1),J(function(){var I=Bo.resizeBilinear(t,[a,u],!0);return o&&(I=Qt(I)),function(T,_,O){var A=_[0],M=_[1],$=O[0],F=$[0],j=$[1],B=O[1],G=B[0],W=B[1];return J(function(){var H=wt(T);return Ut(Bo.cropAndResize(H,[[F/(A+F+j-1),G/(M+G+W-1),(F+A-1)/(A+F+j-1),(G+M-1)/(M+G+W-1)]],[0],[A,M]),[0])})}(I,[s,i],[[f,d],[m,b]])})}function qd(t,e){var n=e[0],r=e[1],o=Mc(t),s=o[0],i=o[1],a=r/n,u=[0,0,0,0],c=u[0],f=u[1],d=u[2],p=u[3];i/s<a?(c=0,f=0,d=Math.round(.5*(a*s-i)),p=Math.round(.5*(a*s-i))):(c=Math.round(.5*(1/a*i-s)),f=Math.round(.5*(1/a*i-s)),d=0,p=0);var m=J(function(){var b=function(I){return I instanceof ye?I:ar.fromPixels(I)}(t);return b=cc(b,[[c,f],[d,p],[0,0]]),Bo.resizeBilinear(b,[n,r])});return{resized:m,padding:{top:c,left:d,right:p,bottom:f}}}function Kd(t){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,Promise.all(t.map(function(n){return n.buffer()}))]})})}function Zd(t,e,n,r,o){var s=e[0],i=e[1],a=n[0],u=n[1],c=function(f,d,p,m,b){return m===void 0&&(m=0),b===void 0&&(b=0),p===1&&d===1&&m===0&&b===0?f:f.map(function(I){return function(T,_,O,A,M){return A===void 0&&(A=0),M===void 0&&(M=0),{score:T.score,keypoints:T.keypoints.map(function($){var F=$.score,j=$.part,B=$.position;return{score:F,part:j,position:{x:B.x*O+M,y:B.y*_+A}}})}}(I,d,p,m,b)})}(t,(s+r.top+r.bottom)/a,(i+r.left+r.right)/u,-r.top,-r.left);return o?function(f,d){return d<=0?f:f.map(function(p){return function(m,b){return{score:m.score,keypoints:m.keypoints.map(function(I){var T=I.score,_=I.part,O=I.position;return{score:T,part:_,position:{x:b-1-O.x,y:O.y}}})}}(p,d)})}(c,i):c}var BA={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},jA=["MobileNetV1","ResNet50"],VA={MobileNetV1:[8,16,32],ResNet50:[32,16]},UA={MobileNetV1:[.5,.75,1],ResNet50:[1]},HA=[1,2,4],Yd={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},Qd={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function zA(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".")}function GA(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius,s=t.minKeypointScore,i=t.refineSteps;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".");if(s<0||s>1)throw new Error("Invalid minKeypointScore "+s+".Should be in range [0.0, 1.0]");if(i<=0||i>20)throw new Error("Invalid refineSteps "+i+".Should be in range [1, 20]")}var lM=function(){function t(e){this.baseModel=e}return t.prototype.predictForPersonSegmentation=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForPersonSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,partHeatmapLogits:n.partHeatmaps,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,longOffsets:n.longOffsets,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd,partHeatmaps:n.partHeatmaps}},t.prototype.segmentPersonActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var s=Mc(e),i=s[0],a=s[1],u=Wd(n,this.baseModel.outputStride,[i,a]),c=qd(e,u),f=c.resized,d=c.padding,p=J(function(){var O=o.predictForPersonSegmentation(f),A=O.segmentLogits,M=O.heatmapScores,$=O.offsets,F=O.displacementFwd,j=O.displacementBwd,B=f.shape,G=B[0],W=B[1],H=ya(A,[i,a],[G,W],[[d.top,d.bottom],[d.left,d.right]],!0);return{segmentation:zd(Ut(H),r),heatmapScores:M,offsets:$,displacementFwd:F,displacementBwd:j}}),m=p.segmentation,b=p.heatmapScores,I=p.offsets,T=p.displacementFwd,_=p.displacementBwd;return f.dispose(),{segmentation:m,heatmapScores:b,offsets:I,displacementFwd:T,displacementBwd:_,padding:d,internalResolutionHeightAndWidth:u}},t.prototype.segmentPerson=function(e,n){return n===void 0&&(n=Yd),be(this,void 0,void 0,function(){var r,o,s,i,a,u,c,f,d,p,m,b,I,T,_,O,A,M;return Ee(this,function($){switch($.label){case 0:return zA(n=zt(zt({},Yd),n)),r=this.segmentPersonActivation(e,n.internalResolution,n.segmentationThreshold),o=r.segmentation,s=r.heatmapScores,i=r.offsets,a=r.displacementFwd,u=r.displacementBwd,c=r.padding,f=r.internalResolutionHeightAndWidth,d=o.shape,p=d[0],m=d[1],[4,o.data()];case 1:return b=$.sent(),o.dispose(),[4,Kd([s,i,a,u])];case 2:return I=$.sent(),T=I[0],_=I[1],O=I[2],A=I[3],M=Zd(M=Gd(T,_,O,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],f,c,!1),s.dispose(),i.dispose(),a.dispose(),u.dispose(),[2,{height:p,width:m,data:b,allPoses:M}]}})})},t.prototype.segmentMultiPerson=function(e,n){return n===void 0&&(n=Qd),be(this,void 0,void 0,function(){var r,o,s,i,a,u,c,f,d,p,m,b,I,T,_,O,A,M,$,F,j,B=this;return Ee(this,function(G){switch(G.label){case 0:return GA(n=zt(zt({},Qd),n)),r=Mc(e),o=r[0],s=r[1],i=Wd(n.internalResolution,this.baseModel.outputStride,[o,s]),a=qd(e,i),u=a.resized,c=a.padding,f=J(function(){var W,H=B.predictForMultiPersonInstanceSegmentationAndPart(u),se=H.segmentLogits,te=H.longOffsets,xe=H.heatmapScores,Te=H.offsets,Qe=H.displacementFwd,tt=H.displacementBwd,Et=ya(se,[o,s],i,[[c.top,c.bottom],[c.left,c.right]],!0);return W=te,{segmentation:zd(Ut(Et),n.segmentationThreshold),longOffsets:W,heatmapScoresRaw:xe,offsetsRaw:Te,displacementFwdRaw:Qe,displacementBwdRaw:tt}}),d=f.segmentation,p=f.longOffsets,m=f.heatmapScoresRaw,b=f.offsetsRaw,I=f.displacementFwdRaw,T=f.displacementBwdRaw,[4,Kd([m,b,I,T])];case 1:return _=G.sent(),O=_[0],A=_[1],M=_[2],$=_[3],F=Zd(F=Gd(O,A,M,$,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,s],i,c,!1),[4,u8(d,p,F,o,s,this.baseModel.outputStride,i,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return j=G.sent(),u.dispose(),d.dispose(),p.dispose(),m.dispose(),b.dispose(),I.dispose(),T.dispose(),[2,j]}})})},t.prototype.segmentPersonPartsActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var s=Mc(e),i=s[0],a=s[1],u=Wd(n,this.baseModel.outputStride,[i,a]),c=qd(e,u),f=c.resized,d=c.padding,p=J(function(){var O=o.predictForPersonSegmentationAndPart(f),A=O.segmentLogits,M=O.partHeatmapLogits,$=O.heatmapScores,F=O.offsets,j=O.displacementFwd,B=O.displacementBwd,G=f.shape,W=G[0],H=G[1],se=ya(A,[i,a],[W,H],[[d.top,d.bottom],[d.left,d.right]],!0),te=ya(M,[i,a],[W,H],[[d.top,d.bottom],[d.left,d.right]],!0);return{partSegmentation:o8(zd(Ut(se),r),te),heatmapScores:$,offsets:F,displacementFwd:j,displacementBwd:B}}),m=p.partSegmentation,b=p.heatmapScores,I=p.offsets,T=p.displacementFwd,_=p.displacementBwd;return f.dispose(),{partSegmentation:m,heatmapScores:b,offsets:I,displacementFwd:T,displacementBwd:_,padding:d,internalResolutionHeightAndWidth:u}},t.prototype.segmentPersonParts=function(e,n){return n===void 0&&(n=Yd),be(this,void 0,void 0,function(){var r,o,s,i,a,u,c,f,d,p,m,b,I,T,_,O,A,M;return Ee(this,function($){switch($.label){case 0:return zA(n=zt(zt({},Yd),n)),r=this.segmentPersonPartsActivation(e,n.internalResolution,n.segmentationThreshold),o=r.partSegmentation,s=r.heatmapScores,i=r.offsets,a=r.displacementFwd,u=r.displacementBwd,c=r.padding,f=r.internalResolutionHeightAndWidth,d=o.shape,p=d[0],m=d[1],[4,o.data()];case 1:return b=$.sent(),o.dispose(),[4,Kd([s,i,a,u])];case 2:return I=$.sent(),T=I[0],_=I[1],O=I[2],A=I[3],M=Zd(M=Gd(T,_,O,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],f,c,!1),s.dispose(),i.dispose(),a.dispose(),u.dispose(),[2,{height:p,width:m,data:b,allPoses:M}]}})})},t.prototype.segmentMultiPersonParts=function(e,n){return n===void 0&&(n=Qd),be(this,void 0,void 0,function(){var r,o,s,i,a,u,c,f,d,p,m,b,I,T,_,O,A,M,$,F,j,B,G=this;return Ee(this,function(W){switch(W.label){case 0:return GA(n=zt(zt({},Qd),n)),r=Mc(e),o=r[0],s=r[1],i=Wd(n.internalResolution,this.baseModel.outputStride,[o,s]),a=qd(e,i),u=a.resized,c=a.padding,f=J(function(){var H=G.predictForMultiPersonInstanceSegmentationAndPart(u),se=H.segmentLogits,te=H.longOffsets,xe=H.heatmapScores,Te=H.offsets,Qe=H.displacementFwd,tt=H.displacementBwd,Et=H.partHeatmaps,ct=ya(se,[o,s],i,[[c.top,c.bottom],[c.left,c.right]],!0),Pr=ya(Et,[o,s],i,[[c.top,c.bottom],[c.left,c.right]],!0),Ko=te,$r=zd(Ut(ct),n.segmentationThreshold),En=function(xn){var Ln=xn.shape,Dn=Ln[0],Lr=Ln[1],co=Ln[2];return J(function(){var Zo=eM(xn),Js=wt(Pn(0,co,1,"int32"),1),Yo=ae(Ie(Zo,Js),"int32");return R(Yo,[Dn,Lr])})}(Pr);return{segmentation:$r,longOffsets:Ko,heatmapScoresRaw:xe,offsetsRaw:Te,displacementFwdRaw:Qe,displacementBwdRaw:tt,partSegmentation:En}}),d=f.segmentation,p=f.longOffsets,m=f.heatmapScoresRaw,b=f.offsetsRaw,I=f.displacementFwdRaw,T=f.displacementBwdRaw,_=f.partSegmentation,[4,Kd([m,b,I,T])];case 1:return O=W.sent(),A=O[0],M=O[1],$=O[2],F=O[3],j=Zd(j=Gd(A,M,$,F,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,s],i,c,!1),[4,c8(d,p,_,j,o,s,this.baseModel.outputStride,i,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return B=W.sent(),u.dispose(),d.dispose(),p.dispose(),m.dispose(),b.dispose(),I.dispose(),T.dispose(),_.dispose(),[2,B]}})})},t.prototype.dispose=function(){this.baseModel.dispose()},t}();function y8(t){return be(this,void 0,void 0,function(){var e,n,r,o,s,i;return Ee(this,function(a){switch(a.label){case 0:if(e=t.outputStride,n=t.quantBytes,r=t.multiplier,Ic==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return o=function(u,c,f){var d={1:"100",.75:"075",.5:"050"},p="model-stride"+u+".json";return f===4?$A+"float/"+d[c]+"/"+p:$A+"quant"+f+"/"+d[c]+"/"+p}(e,r,n),[4,_c(t.modelUrl||o)];case 1:return s=a.sent(),i=new s8(s,e),[2,new lM(i)]}})})}function v8(t){return be(this,void 0,void 0,function(){var e,n,r,o,s;return Ee(this,function(i){switch(i.label){case 0:if(e=t.outputStride,n=t.quantBytes,Ic==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return r=function(a,u){var c="model-stride"+a+".json";return u===4?PA+"float/"+c:PA+"quant"+u+"/"+c}(e,n),[4,_c(t.modelUrl||r)];case 1:return o=i.sent(),s=new m8(o,e),[2,new lM(s)]}})})}function w8(t){return t===void 0&&(t=BA),be(this,void 0,void 0,function(){return Ee(this,function(e){return(t=function(n){if((n=n||BA).architecture==null&&(n.architecture="MobileNetV1"),jA.indexOf(n.architecture)<0)throw new Error("Invalid architecture "+n.architecture+". Should be one of "+jA);if(n.outputStride==null&&(n.outputStride=16),VA[n.architecture].indexOf(n.outputStride)<0)throw new Error("Invalid outputStride "+n.outputStride+". Should be one of "+VA[n.architecture]+" for architecture "+n.architecture+".");if(n.multiplier==null&&(n.multiplier=1),UA[n.architecture].indexOf(n.multiplier)<0)throw new Error("Invalid multiplier "+n.multiplier+". Should be one of "+UA[n.architecture]+" for architecture "+n.architecture+".");if(n.quantBytes==null&&(n.quantBytes=4),HA.indexOf(n.quantBytes)<0)throw new Error("Invalid quantBytes "+n.quantBytes+". Should be one of "+HA+" for architecture "+n.architecture+".");return n}(t)).architecture==="ResNet50"?[2,v8(t)]:t.architecture==="MobileNetV1"?[2,y8(t)]:[2,null]})})}var zE=["left_face","right_face","left_upper_arm_front","left_upper_arm_back","right_upper_arm_front","right_upper_arm_back","left_lower_arm_front","left_lower_arm_back","right_lower_arm_front","right_lower_arm_back","left_hand","right_hand","torso_front","torso_back","left_upper_leg_front","left_upper_leg_back","right_upper_leg_front","right_upper_leg_back","left_lower_leg_front","left_lower_leg_back","right_lower_leg_front","right_lower_leg_back","left_feet","right_feet"],WA=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,GE(this.mask)]})})},t.prototype.toImageData=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,this.mask]})})},t.prototype.toTensor=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,JA(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"imagedata"},t}();function b8(t){if(Oc(t),t!==255)throw new Error("Foreground id must be 255 but got "+t);return"person"}function E8(t){if(Oc(t),t>=zE.length)throw new Error("Invalid body part value "+t);return zE[t]}var x8=function(){function t(e){this.bodyPixModel=e}return t.prototype.segmentPeople=function(e,n){return be(this,void 0,void 0,function(){var r,o,s,i;return Ee(this,function(a){switch(a.label){case 0:return e instanceof ImageBitmap&&((r=document.createElement("canvas")).getContext("2d").drawImage(e,0,0),e=r),n.segmentBodyParts?n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPersonParts(e,n)]:[3,2]:[3,5];case 1:return s=a.sent(),[3,4];case 2:return[4,this.bodyPixModel.segmentPersonParts(e,n)];case 3:s=[a.sent()],a.label=4;case 4:return o=s.map(function(u){var c=u.data,f=u.width,d=u.height,p=new Uint8ClampedArray(f*d*4).fill(0);return c.forEach(function(m,b){m===-1?(p[4*b]=zE.length,p[4*b+3]=0):(p[4*b]=m,p[4*b+3]=255)}),{maskValueToLabel:E8,mask:new WA(new ImageData(p,f,d))}}),[3,10];case 5:return n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPerson(e,n)]:[3,7];case 6:return i=a.sent(),[3,9];case 7:return[4,this.bodyPixModel.segmentPerson(e,n)];case 8:i=[a.sent()],a.label=9;case 9:o=i.map(function(u){var c=u.data,f=u.width,d=u.height,p=new Uint8ClampedArray(f*d*4).fill(0);return c.forEach(function(m,b){m===0?(p[4*b]=0,p[4*b+3]=0):(p[4*b]=255,p[4*b+3]=255)}),{maskValueToLabel:b8,mask:new WA(new ImageData(p,f,d))}}),a.label=10;case 10:return[2,o]}})})},t.prototype.dispose=function(){this.bodyPixModel.dispose()},t.prototype.reset=function(){},t}();function D8(t){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,w8(t).then(function(n){return new x8(n)})]})})}var qA={runtime:"mediapipe",modelType:"general"},I8=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,this.mask]})})},t.prototype.toImageData=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,XA(this.mask)]})})},t.prototype.toTensor=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,JA(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"canvasimagesource"},t}();function T8(t){return Oc(t),"person"}var S8=function(){function t(e){var n,r=this;this.selfieMode=!1;var o;this.selfieSegmentationSolution=new YA.SelfieSegmentation({locateFile:(n=e.locateFile)!==null&&n!==void 0?n:function(s,i){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+s:i+"/"+s}}),e.modelType==="landscape"?o=1:o=0,this.selfieSegmentationSolution.setOptions({modelSelection:o,selfieMode:this.selfieMode}),this.selfieSegmentationSolution.onResults(function(s){r.segmentation=[{maskValueToLabel:T8,mask:new I8(s.segmentationMask)}]})}return t.prototype.segmentPeople=function(e,n){return be(this,void 0,void 0,function(){var r,o;return Ee(this,function(s){switch(s.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.selfieSegmentationSolution.setOptions({selfieMode:this.selfieMode})),e instanceof ye?(o=ImageData.bind,[4,ar.toPixels(e)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,s.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,s.label=3;case 3:return e=r,[4,this.selfieSegmentationSolution.send({image:e})];case 4:return s.sent(),[2,this.segmentation]}})})},t.prototype.dispose=function(){this.selfieSegmentationSolution.close()},t.prototype.reset=function(){this.selfieSegmentationSolution.reset(),this.segmentation=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.selfieSegmentationSolution.initialize()},t}();function N8(t){return be(this,void 0,void 0,function(){var e,n;return Ee(this,function(r){switch(r.label){case 0:return e=function(o){if(o==null)return zt({},qA);var s=zt({},o);return s.runtime="mediapipe",s.modelType==null&&(s.modelType=qA.modelType),s}(t),[4,(n=new S8(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function C8(t,e,n,r){var o=t.width,s=t.height,i=r?-1:1,a=Math.cos(t.rotation),u=Math.sin(t.rotation),c=t.xCenter,f=t.yCenter,d=1/e,p=1/n,m=new Array(16);return m[0]=o*a*i*d,m[1]=-s*u*d,m[2]=0,m[3]=(-.5*o*a*i+.5*s*u+c)*d,m[4]=o*u*i*p,m[5]=s*a*p,m[6]=0,m[7]=(-.5*s*a-.5*o*u*i+f)*p,m[8]=0,m[9]=0,m[10]=o*d,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,function(b){if(b.length!==16)throw new Error("Array length must be 16 but got "+b.length);return[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}(m)}function fM(t){return t instanceof ye?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function VE(t,e){U.assert(t.width!==0,function(){return e+" width cannot be 0."}),U.assert(t.height!==0,function(){return e+" height cannot be 0."})}function _8(t,e){var n=function(r,o,s,i){var a=o-r,u=i-s;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=u/a;return{scale:c,offset:s-r*c}}(0,255,e[0],e[1]);return J(function(){return Y(V(t,n.scale),n.offset)})}function A8(t,e,n){var r=e.outputTensorSize,o=e.keepAspectRatio,s=e.borderMode,i=e.outputTensorFloatRange,a=fM(t),u=function(p,m){return m?{xCenter:m.xCenter*p.width,yCenter:m.yCenter*p.height,width:m.width*p.width,height:m.height*p.height,rotation:m.rotation}:{xCenter:.5*p.width,yCenter:.5*p.height,width:p.width,height:p.height,rotation:0}}(a,n),c=function(p,m,b){if(b===void 0&&(b=!1),!b)return{top:0,left:0,right:0,bottom:0};var I=m.height,T=m.width;VE(m,"targetSize"),VE(p,"roi");var _,O,A=I/T,M=p.height/p.width,$=0,F=0;return A>M?(_=p.width,O=p.width*A,F=(1-M/A)/2):(_=p.height/A,O=p.height,$=(1-A/M)/2),p.width=_,p.height=O,{top:F,left:$,right:$,bottom:F}}(u,r,o),f=C8(u,a.width,a.height,!1),d=J(function(){var p,m=(p=t)instanceof ye?p:ar.fromPixels(p),b=ir(function(_,O,A){return VE(A,"inputResolution"),[1/A.width*_[0][0]*O.width,1/A.height*_[0][1]*O.width,_[0][3]*O.width,1/A.width*_[1][0]*O.height,1/A.height*_[1][1]*O.height,_[1][3]*O.height,0,0]}(f,a,r),[1,8]),I=s==="zero"?"constant":"nearest",T=Bo.transform(wt(ae(m,"float32")),b,"bilinear",I,0,[r.height,r.width]);return i!=null?_8(T,i):T});return{imageTensor:d,padding:c,transformationMatrix:f}}function M8(t,e,n){return J(function(){var r=Ut(t,[0]),o=r.shape[2];if(o===1){var s=r;switch(e.activation){case"none":break;case"sigmoid":s=Qt(s);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+e.activation+")")}var i=n?Bo.resizeBilinear(s,[n.height,n.width]):s;return Ut(i,[2])}throw new Error("Unsupported number of tensor channels "+o)})}var KA={runtime:"tfjs",modelType:"general",modelUrl:"https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1"},ZA={flipHorizontal:!1},k8={outputTensorSize:{width:256,height:256},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},O8={outputTensorSize:{width:256,height:144},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},R8={activation:"none"},F8=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,GE(this.mask)]})})},t.prototype.toImageData=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,XA(this.mask)]})})},t.prototype.toTensor=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,this.mask]})})},t.prototype.getUnderlyingType=function(){return"tensor"},t}();function P8(t){return Oc(t),"person"}var Qs,$8=function(){function t(e,n){this.modelType=e,this.model=n}return t.prototype.segmentPeople=function(e,n){return be(this,void 0,void 0,function(){var r,o=this;return Ee(this,function(s){return n=function(i){if(i==null)return zt({},ZA);var a=zt({},i);return a.flipHorizontal==null&&(a.flipHorizontal=ZA.flipHorizontal),a}(n),e==null?(this.reset(),[2,[]]):(r=J(function(){var i=A8(e,o.modelType==="general"?k8:O8).imageTensor,a=we(o.model.predict(i),[0,0,0,1],-1),u=fM(e),c=M8(a,R8,u),f=wt(c,2),d=bn(f,[[0,0],[0,0],[0,1]]);return ac(d,[[0,0],[0,0],[0,2]],"symmetric")}),[2,[{maskValueToLabel:P8,mask:new F8(r)}]])})})},t.prototype.dispose=function(){this.model.dispose()},t.prototype.reset=function(){},t}();function L8(t){return be(this,void 0,void 0,function(){var e,n,r;return Ee(this,function(o){switch(o.label){case 0:return e=function(s){if(s==null)return zt({},KA);var i=zt({},s);if(i.runtime="tfjs",i.modelType==null&&(i.modelType=KA.modelType),i.modelType!=="general"&&i.modelType!=="landscape")throw new Error("Model type must be one of general or landscape, but got "+i.modelType);return i.modelUrl==null&&(i.modelType==="general"?i.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1":i.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/landscape/1"),i}(t),n=typeof e.modelUrl=="string"&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,_c(e.modelUrl,{fromTFHub:n})];case 1:return r=o.sent(),[2,new $8(e.modelType,r)]}})})}function qE(t,e){return be(this,void 0,void 0,function(){var n,r;return Ee(this,function(o){switch(t){case Qs.MediaPipeSelfieSegmentation:if(n=void 0,(r=e)!=null){if(r.runtime==="tfjs")return[2,L8(r)];if(r.runtime==="mediapipe")return[2,N8(r)];n=r.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+n);case Qs.BodyPix:return[2,D8(r=e)];default:throw new Error(t+" is not a supported model name.")}})})}(function(t){t.BodyPix="BodyPix",t.MediaPipeSelfieSegmentation="MediaPipeSelfieSegmentation"})(Qs||(Qs={}));var dM="blurred",np="blurred-mask",rp="mask",B8="lowres-part-mask",j8="draw-image",UE={};function pM(t,e,n,r){var o=t.width,s=t.height,i=e.width,a=e.height;if(o!==i||s!==a)throw new Error("error: dimensions must match. "+n+" has dimensions "+o+"x"+s+", "+r+" has dimensions "+i+"x"+a)}function Xs(t){if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")}(t);if(typeof ImageData<"u"&&t instanceof ImageData)return[t.height,t.width];if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]}(t);if(t instanceof ye)return[t.shape[0],t.shape[1]];throw new Error("error: Unknown input type: "+t+".")}function KE(t){return UE[t]||(UE[t]=function(){if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(0,0);throw new Error("Cannot create a canvas in this context")}()),UE[t]}function Rc(t,e){var n=KE(e);return function(r,o){o.width=r.width,o.height=r.height,o.getContext("2d").putImageData(r,0,0)}(t,n),n}function qo(t,e,n,r,o,s){return be(this,void 0,void 0,function(){var i,a,u,c;return Ee(this,function(f){switch(f.label){case 0:return e instanceof ye?[4,ar.toPixels(e)]:[3,2];case 1:i=f.sent(),a=Xs(e),u=a[0],c=a[1],e=new ImageData(i,c,u),f.label=2;case 2:return e instanceof ImageData&&(e=Rc(e,j8)),o==null||s==null?t.drawImage(e,n,r):t.drawImage(e,n,r,o,s),[2]}})})}function V8(t,e){return be(this,void 0,void 0,function(){var n,r,o;return Ee(this,function(s){switch(s.label){case 0:return n=Xs(t),r=n[0],o=n[1],e.width=o,e.height=r,[4,qo(e.getContext("2d"),t,0,0,o,r)];case 1:return s.sent(),[2]}})})}function op(t){var e=t.getContext("2d");e.scale(-1,1),e.translate(-t.width,0)}function ep(t,e,n){return be(this,void 0,void 0,function(){return Ee(this,function(r){switch(r.label){case 0:return t.globalCompositeOperation=n,[4,qo(t,e,0,0)];case 1:return r.sent(),[2]}})})}function U8(t,e,n){return be(this,void 0,void 0,function(){var r,o,s,i,a,u,c,f;return Ee(this,function(d){switch(d.label){case 0:for(r=t.getContext("2d"),o=0,s=5,i=1/(2*Math.PI*s*s),a=n<3?1:2,c=-n;c<=n;c+=a)for(f=-n;f<=n;f+=a)u=i*Math.exp(-(f*f+c*c)/(2*s*s)),o+=u;c=-n,d.label=1;case 1:if(!(c<=n))return[3,6];f=-n,d.label=2;case 2:return f<=n?(r.globalAlpha=i*Math.exp(-(f*f+c*c)/(2*s*s))/o*n,[4,qo(r,e,f,c)]):[3,5];case 3:d.sent(),d.label=4;case 4:return f+=a,[3,2];case 5:return c+=a,[3,1];case 6:return r.globalAlpha=1,[2]}})})}function H8(t,e,n){return be(this,void 0,void 0,function(){var r,o,s,i;return Ee(this,function(a){switch(a.label){case 0:return r=Xs(t),o=r[0],s=r[1],i=n.getContext("2d"),n.width=s,n.height=o,i.clearRect(0,0,s,o),i.save(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?[4,U8(n,t,e)]:[3,2];case 1:return a.sent(),[3,4];case 2:return i.filter="blur("+e+"px)",[4,qo(i,t,0,0,s,o)];case 3:a.sent(),a.label=4;case 4:return i.restore(),[2]}})})}function va(t,e,n){return be(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=KE(n),e!==0?[3,2]:[4,V8(t,r)];case 1:return o.sent(),[3,4];case 2:return[4,H8(t,e,r)];case 3:o.sent(),o.label=4;case 4:return[2,r]}})})}function z8(t,e,n,r,o,s){s===void 0&&(s={r:0,g:255,b:255,a:255});for(var i=-o;i<=o;i++)for(var a=-o;a<=o;a++)if(i!==0&&a!==0){var u=(e+i)*r+(n+a);t[4*u+0]=s.r,t[4*u+1]=s.g,t[4*u+2]=s.b,t[4*u+3]=s.a}}function G8(t,e,n,r,o,s,i){i===void 0&&(i=1);for(var a=0,u=-i;u<=i;u++)for(var c=-i;c<=i;c++)if(u!==0&&c!==0){var f=(e+u)*r+(n+c);(!o[t[4*f]]||t[4*f+3]<s)&&(a+=1)}return a>0}function Fc(t,e,n,r,o,s){return e===void 0&&(e={r:0,g:0,b:0,a:0}),n===void 0&&(n={r:0,g:0,b:0,a:255}),r===void 0&&(r=!1),o===void 0&&(o=.5),s===void 0&&(s=Array.from(Array(256).keys())),be(this,void 0,void 0,function(){var i,a,u,c,f,d,p,m,b,I,T,_,O,A;return Ee(this,function(M){switch(M.label){case 0:return(i=Array.isArray(t)?t:[t]).length===0?[2,null]:[4,Promise.all(i.map(function($){return $.mask.toImageData()}))];case 1:for(a=M.sent(),u=a[0],c=u.width,f=u.height,d=new Uint8ClampedArray(c*f*4),p=Math.round(255*o),m=new Array(256).fill(!1),s.forEach(function($){return m[$]=!0}),b=0;b<f;b++)for(I=0;I<c;I++)for(d[4*(T=b*c+I)+0]=n.r,d[4*T+1]=n.g,d[4*T+2]=n.b,d[4*T+3]=n.a,_=0,O=a;_<O.length;_++)A=O[_],m[A.data[4*T]]&&A.data[4*T+3]>=p&&(d[4*T]=e.r,d[4*T+1]=e.g,d[4*T+2]=e.b,d[4*T+3]=e.a,r&&b-1>=0&&b+1<f&&I-1>=0&&I+1<c&&G8(A.data,b,I,c,m,p)&&z8(d,b,I,c,1));return[2,new ImageData(d,c,f)]}})})}function W8(t,e,n,r){return n===void 0&&(n={r:0,g:0,b:0,a:255}),r===void 0&&(r=.5),be(this,void 0,void 0,function(){var o,s,i,a,u,c,f,d,p,m,b,I,T,_;return Ee(this,function(O){switch(O.label){case 0:return(o=Array.isArray(t)?t:[t]).length===0?[2,null]:[4,Promise.all(o.map(function(A){return A.mask.toImageData()}))];case 1:for(s=O.sent(),i=s[0],a=i.width,u=i.height,c=new Uint8ClampedArray(a*u*4),f=Math.round(255*r),d=0;d<u*a;++d)for(c[(p=4*d)+0]=n.r,c[p+1]=n.g,c[p+2]=n.b,c[p+3]=n.a,m=0,b=s;m<b.length;m++)(I=b[m]).data[p+3]>=f&&(T=I.data[p],_=e(T),c[p+0]=_.r,c[p+1]=_.g,c[p+2]=_.b,c[p+3]=_.a);return[2,new ImageData(c,a,u)]}})})}function q8(t,e,n,r,o,s){return r===void 0&&(r=.7),o===void 0&&(o=0),s===void 0&&(s=!1),be(this,void 0,void 0,function(){var i,a,u,c,f;return Ee(this,function(d){switch(d.label){case 0:return i=Xs(e),a=i[0],u=i[1],t.width=u,t.height=a,(c=t.getContext("2d")).save(),s&&op(t),[4,qo(c,e,0,0)];case 1:return d.sent(),c.globalAlpha=r,n?(pM({width:u,height:a},n,"image","mask"),[4,va(Rc(n,rp),o,np)]):[3,3];case 2:f=d.sent(),c.drawImage(f,0,0,u,a),d.label=3;case 3:return c.restore(),[2]}})})}function K8(t,e,n,r,o,s,i){return r===void 0&&(r=.7),o===void 0&&(o=0),s===void 0&&(s=!1),i===void 0&&(i=10),be(this,void 0,void 0,function(){var a,u,c,f,d,p,m;return Ee(this,function(b){switch(b.label){case 0:return a=Xs(e),u=a[0],pM({width:a[1],height:u},n,"image","mask"),[4,va(Rc(n,rp),o,np)];case 1:for(c=b.sent(),t.width=c.width,t.height=c.height,(f=t.getContext("2d")).save(),s&&op(t),d=KE(B8),p=d.getContext("2d"),d.width=c.width*(1/i),d.height=c.height*(1/i),p.drawImage(c,0,0,c.width,c.height,0,0,d.width,d.height),f.imageSmoothingEnabled=!1,f.drawImage(d,0,0,d.width,d.height,0,0,t.width,t.height),m=0;m<d.width;m++)f.beginPath(),f.strokeStyle="#ffffff",f.moveTo(i*m,0),f.lineTo(i*m,t.height),f.stroke();for(m=0;m<d.height;m++)f.beginPath(),f.strokeStyle="#ffffff",f.moveTo(0,i*m),f.lineTo(t.width,i*m),f.stroke();return f.globalAlpha=1-r,[4,qo(f,e,0,0,c.width,c.height)];case 2:return b.sent(),f.restore(),[2]}})})}function Z8(t,e,n){return be(this,void 0,void 0,function(){var r,o;return Ee(this,function(s){switch(s.label){case 0:return[4,Fc(t,{r:0,g:0,b:0,a:255},{r:0,g:0,b:0,a:0},!1,e)];case 1:return r=s.sent(),o=Rc(r,rp),n===0?[2,o]:[2,va(o,n,np)]}})})}function Y8(t,e,n,r,o,s,i){return r===void 0&&(r=.5),o===void 0&&(o=3),s===void 0&&(s=3),i===void 0&&(i=!1),be(this,void 0,void 0,function(){var a,u,c,f,d,p;return Ee(this,function(m){switch(m.label){case 0:return[4,va(e,o,dM)];case 1:return a=m.sent(),t.width=a.width,t.height=a.height,u=t.getContext("2d"),Array.isArray(n)&&n.length===0?(u.drawImage(a,0,0),[2]):[4,Z8(n,r,s)];case 2:return c=m.sent(),u.save(),i&&op(t),f=Xs(e),d=f[0],p=f[1],[4,qo(u,e,0,0,p,d)];case 3:return m.sent(),[4,ep(u,c,"destination-in")];case 4:return m.sent(),[4,ep(u,a,"destination-over")];case 5:return m.sent(),u.restore(),[2]}})})}function Q8(t,e,n,r){return be(this,void 0,void 0,function(){var o,s;return Ee(this,function(i){switch(i.label){case 0:return[4,Fc(t,{r:0,g:0,b:0,a:0},{r:0,g:0,b:0,a:255},!0,n,e)];case 1:return o=i.sent(),s=Rc(o,rp),r===0?[2,s]:[2,va(s,r,np)]}})})}function X8(t,e,n,r,o,s,i,a){return o===void 0&&(o=.5),s===void 0&&(s=3),i===void 0&&(i=3),a===void 0&&(a=!1),be(this,void 0,void 0,function(){var u,c,f,d,p,m;return Ee(this,function(b){switch(b.label){case 0:return[4,va(e,s,dM)];case 1:return u=b.sent(),t.width=u.width,t.height=u.height,c=t.getContext("2d"),Array.isArray(n)&&n.length===0?(c.drawImage(u,0,0),[2]):[4,Q8(n,r,o,i)];case 2:return f=b.sent(),c.save(),a&&op(t),d=Xs(e),p=d[0],m=d[1],[4,qo(c,e,0,0,m,p)];case 3:return b.sent(),[4,ep(c,f,"destination-in")];case 4:return b.sent(),[4,ep(c,u,"destination-over")];case 5:return b.sent(),c.restore(),[2]}})})}var hM=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var mM=(()=>{let e=class e{constructor(r){this.computerVisionService=r,this.cocoSsdModel=cocoSsd.load(),e6()}ngAfterViewInit(){}ngOnInit(){}};e.\u0275fac=function(o){return new(o||e)(Wa(hM))},e.\u0275cmp=Ul({type:e,selectors:[["app-root"]],decls:7,vars:0,consts:[["id","video","autoplay","","playsinline",""],["id","canvas"],["id","output"]],template:function(o,s){o&1&&(qa(0,"h1"),hm(1,"Computer Vison POC"),Ka(),qa(2,"h3"),hm(3,"This will take a while to load. On mobile it will take a really really long time"),Ka(),Za(4,"video",0)(5,"canvas",1)(6,"canvas",2))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{display:none;width:80%;max-width:600px;border:2px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a}#output[_ngcontent-%COMP%]{display:block;width:80%;max-width:600px;border:2px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a;margin-top:20px}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-top:20px;font-family:Roboto,sans-serif;font-weight:300}"]});let t=e;return t})();function e6(){document.addEventListener("DOMContentLoaded",()=>L(this,null,function*(){let t=document.getElementById("video"),e=document.getElementById("canvas"),n=e.getContext("2d"),r=document.getElementById("output"),o=r.getContext("2d"),s=640,i=480;t.width=e.width=r.width=s,t.height=e.height=r.height=i,console.log(ZE,"bodySegmentation");let a=Qs.MediaPipeSelfieSegmentation,c=yield qE(a,{runtime:"tfjs"});navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(p=>{t.srcObject=p,t.play(),d()}).catch(p=>{console.error("Error accessing media devices.",p)}):console.error("Media devices not supported by this browser.");let f;function d(){return L(this,null,function*(){f||(f=yield cocoSsd.load());let m=(yield f.detect(t).catch(console.error)).find(B=>B.class==="person");n.drawImage(t,0,0,s,i);let b=n.getImageData(0,0,s,i),I=yield c.segmentPeople(b).catch(B=>{console.error("Error segmenting people.",B)});if(console.log(11),console.log(I,"segmentation"),!I||Array.isArray(I)&&I.length===0)throw new Error("No person detected");let T=yield Fc(I);debugger;let _=n.getImageData(0,0,s,i),O=_.data,A=new Uint8ClampedArray(T.data);debugger;console.log(O,"pixels");for(let B=0;B<O.length;B+=4)A[B+3]===0?O[B+3]*=.9:(O[B]=255,O[B+1]=255,O[B+2]=255,O[B+3]=255);let M=document.getElementById("canvas"),$=1,F=!1,j=0;if(o.putImageData(_,0,0),m){let[B,G,W,H]=m.bbox,se=.1,te=new Image;te.src="crown.1024.995.svg",te.width*=se,te.height*=se;let xe=B+W/2-te.width/2,Te=G-te.height+35;o.drawImage(te,xe,Te,te.width,te.height)}requestAnimationFrame(d),console.log(3)})}}))}var gM=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=qn({type:e,bootstrap:[mM]}),e.\u0275inj=Wn({imports:[$S,_N]});let t=e;return t})();PS().bootstrapModule(gM,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
