var F3=Object.create;var ic=Object.defineProperty,P3=Object.defineProperties,$3=Object.getOwnPropertyDescriptor,L3=Object.getOwnPropertyDescriptors,V3=Object.getOwnPropertyNames,cN=Object.getOwnPropertySymbols,j3=Object.getPrototypeOf,fN=Object.prototype.hasOwnProperty,B3=Object.prototype.propertyIsEnumerable;var lN=(t,e,n)=>e in t?ic(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,re=(t,e)=>{for(var n in e||={})fN.call(e,n)&&lN(t,n,e[n]);if(cN)for(var n of cN(e))B3.call(e,n)&&lN(t,n,e[n]);return t},Ge=(t,e)=>P3(t,L3(e));var D=(t,e)=>()=>(t&&(e=t(t=0)),e);var Cn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Re=(t,e)=>{for(var n in e)ic(t,n,{get:e[n],enumerable:!0})},dN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of V3(e))!fN.call(t,o)&&o!==n&&ic(t,o,{get:()=>e[o],enumerable:!(r=$3(e,o))||r.enumerable});return t};var Hf=(t,e,n)=>(n=t!=null?F3(j3(t)):{},dN(e||!t||!t.__esModule?ic(n,"default",{value:t,enumerable:!0}):n,t)),pN=t=>dN(ic({},"__esModule",{value:!0}),t);var G=(t,e,n)=>new Promise((r,o)=>{var i=u=>{try{a(n.next(u))}catch(c){o(c)}},s=u=>{try{a(n.throw(u))}catch(c){o(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,s);a((n=n.apply(t,e)).next())});function Fn(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var Yp,cu,Uw=D(()=>{"use strict";Yp=class{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},cu=class{refCount(e){return Fn("refCount")}incRef(e){return Fn("incRef")}timerAvailable(){return!0}time(e){return Fn("time")}read(e){return Fn("read")}readSync(e){return Fn("readSync")}readToGPU(e,n){return Fn("readToGPU")}numDataIds(){return Fn("numDataIds")}disposeData(e,n){return Fn("disposeData")}write(e,n,r){return Fn("write")}move(e,n,r,o,i){return Fn("move")}createTensorFromGPUData(e,n,r){return Fn("createTensorFromGPUData")}memory(){return Fn("memory")}floatPrecision(){return Fn("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Fn("dispose")}}});function hM(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Qp(t,e,n)}function A6(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Qp(t,n,r),Qp(e,n,r)}function lu(t,e,n){return Math.max(t,Math.min(e,n))}function M6(t){return t%2===0?t:t+1}function Qp(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function k6(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function O6(t,e){let n=Math.random();return e*n+(1-n)*t}function R6(t,e){let n=0;for(let r=0;r<t.length;r++){let o=Number(t[r])-Number(e[r]);n+=o*o}return n}function I(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Qe(t,e,n=""){I(sn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Zn(t){I(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function xe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function F6(t){return t.length===0}function Hw(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function sn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function $o(t){return t%1===0}function P6(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let e=Math.exp(2*t);return(e-1)/(e+1)}}function $6(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function L6(t){let e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return hM(e),e}function Ss(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function V6(t,e=o=>0,n,r){return new Promise((o,i)=>{let s=0,a=()=>{if(t()){o();return}s++;let u=e(s);if(n!=null&&s>=n){i();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function j6(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);let o=t.slice();return o[r]=e/n,o}function Ei(t,e){let n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),I(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),I(t.every(r=>$o(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Gw(t,e){let n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||o?null:Ei(e,t).sort(),s=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[s]==null||i[s]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[s]<=a&&s++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function zw(t,e){return Xp(t,e)}function Xp(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Ww(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function qw(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function B6(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function fu(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Kw(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Ar(t){return typeof t=="string"||t instanceof String}function mM(t){return typeof t=="boolean"}function gM(t){return typeof t=="number"}function Di(t){return Array.isArray(t)?Di(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":gM(t)?"float32":Ar(t)?"string":mM(t)?"bool":"float32"}function so(t){return!!(t&&t.constructor&&t.call&&t.apply)}function du(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function ao(t){let e=t.length;if(e<2)return[];let n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function yM(t,e,n,r=!1){let o=new Array;if(e.length===1){let i=e[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=n[t+s]}else{let i=e[0],s=e.slice(1),a=s.reduce((u,c)=>u*c)*(r?2:1);for(let u=0;u<i;u++)o[u]=yM(t+u*a,s,n,r)}return o}function Is(t,e,n=!1){if(t.length===0)return e[0];let r=t.reduce((o,i)=>o*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return yM(0,t,e,n)}function U6(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function nl(t,e){let n=pu(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function pu(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function H6(t,e){let n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return Is(t,new Float32Array(n));if(e==="int32")return Is(t,new Int32Array(n));if(e==="bool")return Is(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Je(t){t.forEach(e=>{I(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function G6(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function z6(t,e,n){if(e===0)return[];if(e===1)return[t];let r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function Ts(t){return t&&t.then&&typeof t.then=="function"}var Tt=D(()=>{"use strict";});function q6(t){let e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(K6(e,r[0],r[1]),r.join("="))),e}function K6(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Z6(t,e){let n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ie(){return Jp}function wM(t){Jp=t}var vM,hu,Jp,Pt=D(()=>{"use strict";Tt();vM="tfjsflags",hu=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=q6,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ie().getBool("IS_TEST")||ie().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){let o=this.urlFlags[e];ie().getBool("IS_TEST")||ie().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}getAsync(e){return G(this,null,function*(){return e in this.flags?this.flags[e]:(this.flags[e]=yield this.evaluateFlag(e),this.flags[e])})}get(e){if(e in this.flags)return this.flags[e];let n=this.evaluateFlag(e);if(Ts(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);vM in e&&e[vM].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=Z6(o,i)})}};Jp=null});function Yw(){if(Zw==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Zw=t}return Zw}function Y6(){let t=Yw();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function rl(t,e){let n=Y6();if(n.has(t))return n.get(t);{let r=e();return n.set(t,r),n.get(t)}}var Zw,eh=D(()=>{"use strict";});var Qw,Xw,Jw,ol,e0,t0,n0,r0,o0,i0,s0,a0,u0,c0,l0,Q6,f0,X6,d0,p0,h0,m0,J6,g0,il,y0,v0,w0,b0,E0,D0,x0,I0,S0,eW,T0,N0,C0,_0,A0,M0,k0,O0,R0,F0,P0,$0,L0,tW,nW,th,V0,j0,B0,rW,U0,H0,G0,z0,W0,q0,K0,Z0,Y0,Q0,X0,J0,eb,tb,nb,sl,rb,ob,ib,sb,ab,ub,cb,lb,fb,db,pb,hb,mb,gb,oW,iW,sW,yb,aW,uW,vb,wb,bb,cW,Eb,lW,Db,xb,Ib,Sb,Tb,Nb,Cb,_b,Ab,Mb,kb,Ob,Rb,Fb,Pb,$b,Lb,fW,Vb,jb,Bb,Ub,Hb,Gb,zb,Wb,qb,Kb,Zb,Yb,dW,Qb,pW,Xb,Jb,eE,tE,nE,rE,oE,iE,sE,aE,uE,cE,lE,fE,dE,pE,hE,mE,gE,yE,vE,wE,bE,EE,DE,xE,hW,IE,SE,TE,NE,CE,_E,AE,ME,al,kE,OE,ul,RE,FE,PE,mW,$E,LE,nh,VE,rh,oh,ih,V=D(()=>{"use strict";Qw="Abs",Xw="Acos",Jw="Acosh",ol="Add",e0="AddN",t0="All",n0="Any",r0="ArgMax",o0="ArgMin",i0="Asin",s0="Asinh",a0="Atan",u0="Atanh",c0="Atan2",l0="AvgPool",Q6="AvgPoolGrad",f0="AvgPool3D",X6="AvgPool3DGrad",d0="BatchMatMul",p0="BatchToSpaceND",h0="Bincount",m0="BitwiseAnd",J6="BroadcastTo",g0="BroadcastArgs",il="Cast",y0="Ceil",v0="ClipByValue",w0="Complex",b0="ComplexAbs",E0="Concat",D0="Conv2D",x0="Conv2DBackpropFilter",I0="Conv2DBackpropInput",S0="Conv3D",eW="Conv3DBackpropFilterV2",T0="Conv3DBackpropInputV2",N0="Cos",C0="Cosh",_0="Cumprod",A0="Cumsum",M0="CropAndResize",k0="DenseBincount",O0="DepthToSpace",R0="DepthwiseConv2dNative",F0="DepthwiseConv2dNativeBackpropFilter",P0="DepthwiseConv2dNativeBackpropInput",$0="Diag",L0="Dilation2D",tW="Dilation2DBackpropInput",nW="Dilation2DBackpropFilter",th="Draw",V0="RealDiv",j0="Einsum",B0="Elu",rW="EluGrad",U0="Erf",H0="Equal",G0="Exp",z0="ExpandDims",W0="Expm1",q0="FFT",K0="Fill",Z0="FlipLeftRight",Y0="Floor",Q0="FloorDiv",X0="FusedBatchNorm",J0="GatherV2",eb="GatherNd",tb="Greater",nb="GreaterEqual",sl="Identity",rb="IFFT",ob="Imag",ib="IsFinite",sb="IsInf",ab="IsNan",ub="LeakyRelu",cb="Less",lb="LessEqual",fb="LinSpace",db="Log",pb="Log1p",hb="LogicalAnd",mb="LogicalNot",gb="LogicalOr",oW="LogicalXor",iW="LogSoftmax",sW="LowerBound",yb="LRN",aW="LRNGrad",uW="MatrixBandPart",vb="Max",wb="Maximum",bb="MaxPool",cW="MaxPoolGrad",Eb="MaxPool3D",lW="MaxPool3DGrad",Db="MaxPoolWithArgmax",xb="Mean",Ib="Min",Sb="Minimum",Tb="MirrorPad",Nb="Mod",Cb="Multinomial",_b="Multiply",Ab="Neg",Mb="NotEqual",kb="NonMaxSuppressionV3",Ob="NonMaxSuppressionV4",Rb="NonMaxSuppressionV5",Fb="OnesLike",Pb="OneHot",$b="Pack",Lb="PadV2",fW="Pool",Vb="Pow",jb="Prelu",Bb="Prod",Ub="RaggedGather",Hb="RaggedRange",Gb="RaggedTensorToTensor",zb="Range",Wb="Real",qb="Reciprocal",Kb="Relu",Zb="Reshape",Yb="ResizeNearestNeighbor",dW="ResizeNearestNeighborGrad",Qb="ResizeBilinear",pW="ResizeBilinearGrad",Xb="Relu6",Jb="Reverse",eE="Round",tE="Rsqrt",nE="ScatterNd",rE="TensorScatterUpdate",oE="SearchSorted",iE="Select",sE="Selu",aE="Slice",uE="Sin",cE="Sinh",lE="Sign",fE="Sigmoid",dE="Softplus",pE="Sqrt",hE="Sum",mE="SpaceToBatchND",gE="SplitV",yE="Softmax",vE="SparseFillEmptyRows",wE="SparseReshape",bE="SparseSegmentMean",EE="SparseSegmentSum",DE="SparseToDense",xE="SquaredDifference",hW="Square",IE="StaticRegexReplace",SE="StridedSlice",TE="StringNGrams",NE="StringSplit",CE="StringToHashBucketFast",_E="Sub",AE="Tan",ME="Tanh",al="Tile",kE="TopK",OE="Transform",ul="Transpose",RE="Unique",FE="Unpack",PE="UnsortedSegmentSum",mW="UpperBound",$E="ZerosLike",LE="Step",nh="FromPixels",VE="RotateWithOffset",rh="_FusedMatMul",oh="FusedConv2D",ih="FusedDepthwiseConv2D"});function uo(...t){ie().getBool("IS_TEST")||ie().getBool("PROD")||console.warn(...t)}function gW(...t){ie().getBool("IS_TEST")||ie().getBool("PROD")||console.log(...t)}var sh=D(()=>{"use strict";Pt();});function Ns(t,e){let n=jE(t,e);return mu.get(n)}function ah(t){return cl.get(t)}function ll(t){let e=mu.entries(),n=[];for(;;){let{done:r,value:o}=e.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===t&&n.push(s)}return n}function EM(t){let{kernelName:e,backendName:n}=t,r=jE(e,n);mu.has(r)&&uo(`The kernel '${e}' for backend '${n}' is already registered`),mu.set(r,t)}function yW(t){let{kernelName:e}=t;cl.has(e)&&ie().getBool("DEBUG")&&uo(`Overriding the gradient for '${e}'`),cl.set(e,t)}function vW(t,e){let n=jE(t,e);if(!mu.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);mu.delete(n)}function wW(t){if(!cl.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);cl.delete(t)}function bW(t,e){ll(t).forEach(r=>{let o=Object.assign({},r,{backendName:e});EM(o)})}function jE(t,e){return`${e}_${t}`}var mu,cl,uh=D(()=>{"use strict";Pt();eh();sh();mu=rl("kernelRegistry",()=>new Map),cl=rl("gradRegistry",()=>new Map)});function ch(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var BE=D(()=>{"use strict";});var kM=Cn((Pse,MM)=>{"use strict";MM.exports=it;var lr=null;try{lr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function it(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}it.prototype.__isLong__;Object.defineProperty(it.prototype,"__isLong__",{value:!0});function $n(t){return(t&&t.__isLong__)===!0}it.isLong=$n;var DM={},xM={};function _s(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=xM[t],r)?r:(n=st(t,(t|0)<0?-1:0,!0),o&&(xM[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=DM[t],r)?r:(n=st(t,t<0?-1:0,!1),o&&(DM[t]=n),n))}it.fromInt=_s;function fr(t,e){if(isNaN(t))return e?Cs:dr;if(e){if(t<0)return Cs;if(t>=NM)return AM}else{if(t<=-SM)return Pn;if(t+1>=SM)return _M}return t<0?fr(-t,e).neg():st(t%yu|0,t/yu|0,e)}it.fromNumber=fr;function st(t,e,n){return new it(t,e,n)}it.fromBits=st;var lh=Math.pow;function HE(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return dr;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return HE(t.substring(1),e,n).neg();for(var o=fr(lh(n,8)),i=dr,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+a),n);if(a<8){var c=fr(lh(n,a));i=i.mul(c).add(fr(u))}else i=i.mul(o),i=i.add(fr(u))}return i.unsigned=e,i}it.fromString=HE;function Mr(t,e){return typeof t=="number"?fr(t,e):typeof t=="string"?HE(t,e):st(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}it.fromValue=Mr;var IM=65536,EW=1<<24,yu=IM*IM,NM=yu*yu,SM=NM/2,TM=_s(EW),dr=_s(0);it.ZERO=dr;var Cs=_s(0,!0);it.UZERO=Cs;var gu=_s(1);it.ONE=gu;var CM=_s(1,!0);it.UONE=CM;var UE=_s(-1);it.NEG_ONE=UE;var _M=st(-1,2147483647,!1);it.MAX_VALUE=_M;var AM=st(-1,-1,!0);it.MAX_UNSIGNED_VALUE=AM;var Pn=st(0,-2147483648,!1);it.MIN_VALUE=Pn;var te=it.prototype;te.toInt=function(){return this.unsigned?this.low>>>0:this.low};te.toNumber=function(){return this.unsigned?(this.high>>>0)*yu+(this.low>>>0):this.high*yu+(this.low>>>0)};te.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Pn)){var n=fr(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=fr(lh(e,6),this.unsigned),s=this,a="";;){var u=s.div(i),c=s.sub(u.mul(i)).toInt()>>>0,l=c.toString(e);if(s=u,s.isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}};te.getHighBits=function(){return this.high};te.getHighBitsUnsigned=function(){return this.high>>>0};te.getLowBits=function(){return this.low};te.getLowBitsUnsigned=function(){return this.low>>>0};te.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Pn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};te.isZero=function(){return this.high===0&&this.low===0};te.eqz=te.isZero;te.isNegative=function(){return!this.unsigned&&this.high<0};te.isPositive=function(){return this.unsigned||this.high>=0};te.isOdd=function(){return(this.low&1)===1};te.isEven=function(){return(this.low&1)===0};te.equals=function(e){return $n(e)||(e=Mr(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};te.eq=te.equals;te.notEquals=function(e){return!this.eq(e)};te.neq=te.notEquals;te.ne=te.notEquals;te.lessThan=function(e){return this.comp(e)<0};te.lt=te.lessThan;te.lessThanOrEqual=function(e){return this.comp(e)<=0};te.lte=te.lessThanOrEqual;te.le=te.lessThanOrEqual;te.greaterThan=function(e){return this.comp(e)>0};te.gt=te.greaterThan;te.greaterThanOrEqual=function(e){return this.comp(e)>=0};te.gte=te.greaterThanOrEqual;te.ge=te.greaterThanOrEqual;te.compare=function(e){if($n(e)||(e=Mr(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};te.comp=te.compare;te.negate=function(){return!this.unsigned&&this.eq(Pn)?Pn:this.not().add(gu)};te.neg=te.negate;te.add=function(e){$n(e)||(e=Mr(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,d=0,p=0,m=0;return m+=i+c,p+=m>>>16,m&=65535,p+=o+u,d+=p>>>16,p&=65535,d+=r+a,l+=d>>>16,d&=65535,l+=n+s,l&=65535,st(p<<16|m,l<<16|d,this.unsigned)};te.subtract=function(e){return $n(e)||(e=Mr(e)),this.add(e.neg())};te.sub=te.subtract;te.multiply=function(e){if(this.isZero())return dr;if($n(e)||(e=Mr(e)),lr){var n=lr.mul(this.low,this.high,e.low,e.high);return st(n,lr.get_high(),this.unsigned)}if(e.isZero())return dr;if(this.eq(Pn))return e.isOdd()?Pn:dr;if(e.eq(Pn))return this.isOdd()?Pn:dr;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TM)&&e.lt(TM))return fr(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,l=e.low&65535,d=0,p=0,m=0,b=0;return b+=s*l,m+=b>>>16,b&=65535,m+=i*l,p+=m>>>16,m&=65535,m+=s*c,p+=m>>>16,m&=65535,p+=o*l,d+=p>>>16,p&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=s*u,d+=p>>>16,p&=65535,d+=r*l+o*c+i*u+s*a,d&=65535,st(m<<16|b,d<<16|p,this.unsigned)};te.mul=te.multiply;te.divide=function(e){if($n(e)||(e=Mr(e)),e.isZero())throw Error("division by zero");if(lr){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?lr.div_u:lr.div_s)(this.low,this.high,e.low,e.high);return st(n,lr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Cs:dr;var r,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Cs;if(e.gt(this.shru(1)))return CM;i=Cs}else{if(this.eq(Pn)){if(e.eq(gu)||e.eq(UE))return Pn;if(e.eq(Pn))return gu;var s=this.shr(1);return r=s.div(e).shl(1),r.eq(dr)?e.isNegative()?gu:UE:(o=this.sub(e.mul(r)),i=r.add(o.div(e)),i)}else if(e.eq(Pn))return this.unsigned?Cs:dr;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=dr}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:lh(2,a-48),c=fr(r),l=c.mul(e);l.isNegative()||l.gt(o);)r-=u,c=fr(r,this.unsigned),l=c.mul(e);c.isZero()&&(c=gu),i=i.add(c),o=o.sub(l)}return i};te.div=te.divide;te.modulo=function(e){if($n(e)||(e=Mr(e)),lr){var n=(this.unsigned?lr.rem_u:lr.rem_s)(this.low,this.high,e.low,e.high);return st(n,lr.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};te.mod=te.modulo;te.rem=te.modulo;te.not=function(){return st(~this.low,~this.high,this.unsigned)};te.and=function(e){return $n(e)||(e=Mr(e)),st(this.low&e.low,this.high&e.high,this.unsigned)};te.or=function(e){return $n(e)||(e=Mr(e)),st(this.low|e.low,this.high|e.high,this.unsigned)};te.xor=function(e){return $n(e)||(e=Mr(e)),st(this.low^e.low,this.high^e.high,this.unsigned)};te.shiftLeft=function(e){return $n(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?st(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):st(0,this.low<<e-32,this.unsigned)};te.shl=te.shiftLeft;te.shiftRight=function(e){return $n(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?st(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):st(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};te.shr=te.shiftRight;te.shiftRightUnsigned=function(e){if($n(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return st(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?st(n,0,this.unsigned):st(n>>>e-32,0,this.unsigned)};te.shru=te.shiftRightUnsigned;te.shr_u=te.shiftRightUnsigned;te.toSigned=function(){return this.unsigned?st(this.low,this.high,!1):this};te.toUnsigned=function(){return this.unsigned?this:st(this.low,this.high,!0)};te.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};te.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};te.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};it.fromBytes=function(e,n,r){return r?it.fromBytesLE(e,n):it.fromBytesBE(e,n)};it.fromBytesLE=function(e,n){return new it(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};it.fromBytesBE=function(e,n){return new it(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)}});function fl(t){return Ms.fromString(t,!0,16)}function GE(t){return t.xor(t.shru(47))}function FM(t,e,n){let r=t.slice(e,e+n);return Ms.fromBytes(Array.from(r),!0,!0)}function et(t,e){return FM(t,e,8)}function OM(t,e){return FM(t,e,4)}function $t(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function xi(t,e,n=fl("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function DW(t,e,n,r,o,i){o=o.add(t),i=$t(i.add(o).add(r),21);let s=o;return o=o.add(e),o=o.add(n),i=i.add($t(o,44)),[o.add(r),i.add(s)]}function fh(t,e,n,r){return DW(et(t,e),et(t,e+8),et(t,e+16),et(t,e+24),n,r)}function xW(t,e=t.length){if(e>=8){let n=an.add(e*2),r=et(t,0).add(an),o=et(t,e-8),i=$t(o,37).mul(n).add(r),s=$t(r,25).add(o).mul(n);return xi(i,s,n)}if(e>=4){let n=an.add(e*2),r=OM(t,0);return xi(r.shl(3).add(e),OM(t,e-4),n)}if(e>0){let n=t[0],r=t[e>>1],o=t[e-1],i=n+(r<<8),s=e+(o<<2);return GE(an.mul(i).xor(RM.mul(s))).mul(an)}return an}function IW(t,e=t.length){let n=an.add(e*2),r=et(t,0).mul(As),o=et(t,8),i=et(t,e-8).mul(n),s=et(t,e-16).mul(an);return xi($t(r.add(o),43).add($t(i,30)).add(s),r.add($t(o.add(an),18)).add(i),n)}function SW(t,e=t.length){let n=an.add(e*2),r=et(t,0).mul(an),o=et(t,8),i=et(t,e-8).mul(n),s=et(t,e-16).mul(an),a=$t(r.add(o),43).add($t(i,30)).add(s),u=xi(a,r.add($t(o.add(an),18)).add(i),n),c=et(t,16).mul(n),l=et(t,24),d=a.add(et(t,e-32)).mul(n),p=u.add(et(t,e-24)).mul(n);return xi($t(c.add(l),43).add($t(d,30)).add(p),c.add($t(l.add(r),18)).add(d),n)}function TW(t,e=t.length){let n=Ms.fromNumber(81,!0);if(e<=32)return e<=16?xW(t,e):IW(t,e);if(e<=64)return SW(t,e);let r=n,o=n.mul(As).add(113),i=GE(o.mul(an).add(113)).mul(an),s=[Ms.UZERO,Ms.UZERO],a=[Ms.UZERO,Ms.UZERO];r=r.mul(an).add(et(t,0));let u=0,c=(e-1>>6)*64,l=c+(e-1&63)-63;do r=$t(r.add(o).add(s[0]).add(et(t,u+8)),37).mul(As),o=$t(o.add(s[1]).add(et(t,u+48)),42).mul(As),r=r.xor(a[1]),o=o.add(s[0]).add(et(t,u+40)),i=$t(i.add(a[0]),33).mul(As),s=fh(t,u,s[1].mul(As),r.add(a[0])),a=fh(t,u+32,i.add(a[1]),o.add(et(t,u+16))),[i,r]=[r,i],u+=64;while(u!==c);let d=As.add(i.and(255).shl(1));return u=l,a[0]=a[0].add(e-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=$t(r.add(o).add(s[0]).add(et(t,u+8)),37).mul(d),o=$t(o.add(s[1]).add(et(t,u+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(et(t,u+40))),i=$t(i.add(a[0]),33).mul(d),s=fh(t,u,s[1].mul(d),r.add(a[0])),a=fh(t,u+32,i.add(a[1]),o.add(et(t,u+16))),[i,r]=[r,i],xi(xi(s[0],a[0],d).add(GE(o).mul(RM)).add(i),xi(s[1],a[1],d).add(r),d)}var zE,Ms,RM,As,an,PM=D(()=>{"use strict";zE=Hf(kM());Ms=zE.default||zE;RM=fl("c3a5c85c97cb3127"),As=fl("b492b66fbe98f273"),an=fl("9ae16a3b2f90404f")});var q={};Re(q,{arraysEqual:()=>sn,arraysEqualWithNull:()=>Hw,assert:()=>I,assertNonNegativeIntegerDimensions:()=>Je,assertNonNull:()=>Zn,assertShapesMatch:()=>Qe,bytesFromStringArray:()=>Kw,bytesPerElement:()=>fu,checkConversionForErrors:()=>Ww,clamp:()=>lu,computeStrides:()=>ao,convertBackendValuesAndArrayBuffer:()=>U6,createScalarValue:()=>NW,createShuffledIndices:()=>L6,decodeString:()=>wu,distSquared:()=>R6,encodeString:()=>Ii,fetch:()=>_W,fingerPrint64:()=>TW,flatten:()=>kr,getArrayFromDType:()=>Xp,getTypedArrayFromDType:()=>zw,hasEncodingLoss:()=>B6,hexToLong:()=>fl,indexToLoc:()=>z6,inferDtype:()=>Di,inferFromImplicitShape:()=>j6,isBoolean:()=>mM,isFunction:()=>so,isInt:()=>$o,isNumber:()=>gM,isPromise:()=>Ts,isScalarShape:()=>F6,isString:()=>Ar,isTypedArray:()=>pt,isValidDtype:()=>qw,locToIndex:()=>G6,makeOnesTypedArray:()=>nl,makeZerosNestedTypedArray:()=>H6,makeZerosTypedArray:()=>pu,nearestDivisor:()=>du,nearestLargerEven:()=>M6,now:()=>ks,parseAxisParam:()=>Ei,randUniform:()=>O6,repeatedTry:()=>V6,rightPad:()=>Ss,shuffle:()=>hM,shuffleCombo:()=>A6,sizeFromShape:()=>xe,sizeToSquarishShape:()=>$6,squeezeShape:()=>Gw,sum:()=>k6,swap:()=>Qp,tanh:()=>P6,toNestedArray:()=>Is,toTypedArray:()=>vu});function NW(t,e){return e==="string"?Ii(t):vu([t],e)}function CW(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function vu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=kr(t)),ie().getBool("DEBUG")&&Ww(t,e),CW(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){let n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function ks(){return ie().platform.now()}function _W(t,e){return ie().platform.fetch(t,e)}function Ii(t,e="utf-8"){return e=e||"utf-8",ie().platform.encode(t,e)}function wu(t,e="utf-8"){return e=e||"utf-8",ie().platform.decode(t,e)}function pt(t){return ie().platform.isTypedArray!=null?ie().platform.isTypedArray(t):ch(t)}function kr(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Ts(t)||t==null||pt(t)&&n)e.push(t);else if(Array.isArray(t)||pt(t))for(let r=0;r<t.length;++r)kr(t[r],e,n);else{let r=-1;for(let o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)kr(t[o],e,n)}return e}var H=D(()=>{"use strict";Pt();BE();Tt();Tt();PM();});function AW(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){let o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}var dh,WE,$M=D(()=>{"use strict";Pt();H();dh=class{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new WE)}profileKernel(e,n,r){let o,i=()=>{o=r()},s,a=ks();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:ks()-a})}if(ie().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let l=o[c];l.data().then(d=>{AW(d,l.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:n,outputs:r,timeMs:o,inputs:i,extraInfo:s}=e;r.forEach(a=>{Promise.all([a.data(),o,s]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],i,u[2])})})}};WE=class{logKernelProfile(e,n,r,o,i,s){let a=typeof o=="number"?Ss(`${o}ms`,9):o.error,u=Ss(e,25),c=n.rank,l=n.size,d=Ss(n.shape.toString(),14),p="";for(let m in i){let b=i[m];if(b!=null){let S=b.shape||n.shape,T=S.length;p+=`${m}: ${T}D ${T>0?S:""} `}}console.log(`%c${u}	%c${a}	%c${c}D ${d}	%c${l}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function LM(t,e,n){let r={},o={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){let c=t[u],l=c.inputs;for(let d in l){let p=l[d],m=!1;for(let b=0;b<e.length;b++)if(r[p.id]){c.outputs.forEach(S=>r[S.id]=!0),m=!0,o[c.id]=!0;break}if(m)break}}let i={};i[n.id]=!0;let s={};for(let u=t.length-1;u>=0;u--){let c=t[u],l=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(let p in l)i[l[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let u=0;u<t.length;u++){let c=t[u];if(o[c.id]&&s[c.id]){let l={};for(let p in c.inputs){let m=c.inputs[p];r[m.id]&&(l[p]=m)}let d=Object.assign({},c);d.inputs=l,d.outputs=c.outputs,a.push(d)}}return a}function VM(t,e,n,r){for(let o=e.length-1;o>=0;o--){let i=e[o],s=[];if(i.outputs.forEach(u=>{let c=t[u.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let u in i.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);let c=n(()=>a[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let l=i.inputs[u];if(!sn(c.shape,l.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${l.shape}'`);if(t[l.id]==null)t[l.id]=c;else{let d=t[l.id];t[l.id]=r(d,c),d.dispose()}}}}var jM=D(()=>{"use strict";H();});function UM(t,e,n,r){let o=ao(e),i=MW(t,e,n,o),s=e.length,a=ph(t,e,n,o,i),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${s}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(a.map(c=>"    "+c).join(`
`)),u.join(`
`)}function MW(t,e,n,r){let o=xe(e),i=r[r.length-1],s=new Array(i).fill(0),a=e.length,u=n==="complex64"?hl(t):t;if(a>1)for(let c=0;c<o/i;c++){let l=c*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],pl(u[l+d],0,n).length)}return s}function pl(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(qE))} + ${parseFloat(t[1].toFixed(qE))}j`:Ar(t)?r=`'${t}'`:n==="bool"?r=HM(t):r=parseFloat(t.toFixed(qE)).toString(),Ss(r,e)}function HM(t){return t===0?"false":"true"}function ph(t,e,n,r,o,i=!0){let s=n==="complex64"?2:1,a=e[0],u=e.length;if(u===0){if(n==="complex64"){let S=hl(t);return[pl(S[0],0,n)]}return n==="bool"?[HM(t[0])]:[t[0].toString()]}if(u===1){if(a>BM){let T=dl*s,A=Array.from(t.slice(0,T)),$=Array.from(t.slice((a-dl)*s,a*s));return n==="complex64"&&(A=hl(A),$=hl($)),["["+A.map((M,O)=>pl(M,o[O],n)).join(", ")+", ..., "+$.map((M,O)=>pl(M,o[a-dl+O],n)).join(", ")+"]"]}return["["+(n==="complex64"?hl(t):Array.from(t)).map((T,A)=>pl(T,o[A],n)).join(", ")+"]"]}let c=e.slice(1),l=r.slice(1),d=r[0]*s,p=[];if(a>BM){for(let S=0;S<dl;S++){let T=S*d,A=T+d;p.push(...ph(t.slice(T,A),c,n,l,o,!1))}p.push("...");for(let S=a-dl;S<a;S++){let T=S*d,A=T+d;p.push(...ph(t.slice(T,A),c,n,l,o,S===a-1))}}else for(let S=0;S<a;S++){let T=S*d,A=T+d;p.push(...ph(t.slice(T,A),c,n,l,o,S===a-1))}let m=u===2?",":"";p[0]="["+(a>0?p[0]+m:"");for(let S=1;S<p.length-1;S++)p[S]=" "+p[S]+m;let b=`,
`;for(let S=2;S<u;S++)b+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":b),p}function hl(t){let e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var BM,dl,qE,GM=D(()=>{"use strict";H();BM=20,dl=3,qE=7});function zM(t){Or=t}function WM(t){bu=t}function qM(t){kW=t}function KE(){return rl("Tensor",()=>_e)}var Lo,Or,bu,kW,_e,co,Yn=D(()=>{"use strict";eh();GM();H();H();Lo=class{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=xe(e),r!=null){let o=r.length;I(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Xp(n,this.size),this.strides=ao(e)}set(e,...n){n.length===0&&(n=[0]),I(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(let o of e){if(o<0||o>=this.shape[n]){let i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Or().makeTensor(this.values,this.shape,this.dtype)}},Or=null,bu=null,kW=null;_e=class{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=xe(e),this.strides=ao(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return G(this,null,function*(){let e=yield this.data();return bu.buffer(this.shape,this.dtype,e)})}bufferSync(){return bu.buffer(this.shape,this.dtype,this.dataSync())}array(){return G(this,null,function*(){let e=yield this.data();return Is(this.shape,e,this.dtype==="complex64")})}arraySync(){return Is(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return G(this,null,function*(){this.throwIfDisposed();let e=Or().read(this.dataId);if(this.dtype==="string"){let n=yield e;try{return n.map(r=>wu(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e})}dataToGPU(e){return this.throwIfDisposed(),Or().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=Or().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>wu(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}bytes(){return G(this,null,function*(){this.throwIfDisposed();let e=yield Or().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Or().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return bu.print(this,e)}clone(){return this.throwIfDisposed(),bu.clone(this)}toString(e=!1){let n=this.dataSync();return UM(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),bu.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Or().makeVariable(this,e,n,r)}};Object.defineProperty(_e,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});KE();co=class extends _e{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!sn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Or().disposeTensor(this),this.dataId=e.dataId,Or().incRef(this,null)}dispose(){Or().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(co,Symbol.hasInstance,{value:t=>t instanceof _e&&t.assign!=null&&t.assign instanceof Function})});function Os(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return OW[t][e]}function XM(t){return Os(t,"int32")}function hh(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function mh(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}var ZE,KM,ZM,YM,QM,OW,Eu=D(()=>{"use strict";ZE=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(ZE||{}),KM=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(KM||{}),ZM=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(ZM||{}),YM=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(YM||{}),QM=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(QM||{}),OW={float32:YM,int32:KM,bool:ZM,complex64:QM}});var QE={};Re(QE,{assertTypesMatch:()=>YE,getTensorsInContainer:()=>ml,isTensorInList:()=>RW,makeTypesMatch:()=>be});function be(t,e){if(t.dtype===e.dtype)return[t,e];let n=Os(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function YE(t,e){I(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function RW(t,e){return e.some(n=>n.id===t.id)}function ml(t){let e=[];return JM(t,e,new Set),e}function JM(t,e,n){if(t==null)return;if(t instanceof _e){e.push(t);return}if(!FW(t))return;let r=t;for(let o in r){let i=r[o];n.has(i)||(n.add(i),JM(i,e,n))}}function FW(t){return Array.isArray(t)||typeof t=="object"}var tt=D(()=>{"use strict";Yn();Eu();H();});function XE(t){return t.kernelName!=null}function $W(t){let e=nl(xe(t),"float32");return E.makeTensor(e,t,"float32")}function JE(){let t=Yw();if(t._tfengine==null){let e=new hu(t);t._tfengine=new PW(e)}return wM(t._tfengine.ENV),zM(()=>t._tfengine),t._tfengine}function LW(t,e){let n={a:t,b:e};return E.runKernel(ol,n)}var gh,PW,E,P=D(()=>{"use strict";Uw();Pt();eh();V();uh();sh();$M();jM();Yn();tt();H();H();gh=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},PW=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new gh}ready(){return G(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:r}=this.initializeBackend(n);if(r)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,o=1){return n in this.registryFactory?(uo(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:o},!0)}setBackend(n){return G(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(n);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new dh(this.backendInstance),!0})}setupRegisteredKernels(){ll(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){ll(n).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[n])})}initializeBackend(n){let r=this.registryFactory[n];if(r==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof cu)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[n]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,uo(`Initialization of backend ${n} failed`),uo(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(o){return uo(`Initialization of backend ${n} failed`),uo(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=n,n.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let o=null;if(r==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");r=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(n,r,o){n();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let r=E.runKernel(sl,{x:n}),o={x:n},i=a=>({x:()=>{let u="float32",c={x:a},l={dtype:u};return E.runKernel(il,c,l)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(n,r,o){if(this.backendName==null&&this.backend,!(Ns(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=i-r-s-a;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,l=XE(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(XE(n)){let{kernelName:S,inputs:T,attrs:A}=n;this.backendName==null&&this.backend;let $=Ns(S,this.backendName);I($!=null,()=>`Cannot find registered kernel '${S}' for backend '${this.backendName}'`),u=()=>{let M=this.backend.numDataIds();c=$.kernelFunc({inputs:T,attrs:A,backend:this.backend});let O=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(S,M,O);let U=O.map(j=>j.rank!=null?j:this.makeTensorFromTensorInfo(j));if(i){let j=this.getTensorsForGradient(S,T,U);o=this.saveTensorsForBackwardMode(j)}return U}}else{let{forwardFunc:S}=n,T=A=>{i&&(o=A.map($=>this.keep(this.clone($))))};u=()=>{let A=this.backend.numDataIds();c=this.tidy(()=>S(this.backend,T));let $=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,A,$),$}}let{inputs:d,attrs:p}=n,m=XE(n)?null:n.backwardsFunc,b;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=u():(b=this.profiler.profileKernel(l,d,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(b),r=b.outputs)}),i&&this.addTapeNode(l,d,r,m,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(S=>d[S]!=null?d[S].shape:null),outputShapes:r.map(S=>S.shape),kernelTimeMs:b.timeMs,extraInfo:b.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(n,r,o){let i=ah(n);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],u;i.saveAllInputs?(I(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(r).map(l=>r[l])):u=s.map(l=>r[l]);let c=o.filter((l,d)=>a[d]);return u.concat(c)}return[]}makeTensor(n,r,o,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=n;o==="string"&&Ar(n[0])&&(s=n.map(c=>Ii(c)));let a=i.write(s,r,o),u=new _e(r,o,a,this.nextTensorId());if(this.trackTensor(u,i),o==="string"){let c=this.state.tensorInfo.get(a),l=Kw(s);this.state.numBytes+=l-c.bytes,c.bytes=l}return u}makeTensorFromDataId(n,r,o,i){o=o||"float32";let s={dataId:n,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(n,r){let{dataId:o,shape:i,dtype:s}=n,a=new _e(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.cast(i));let s=new co(n,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(n,r){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*fu(n.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:o})),n instanceof co||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let o=n.size*fu(n.dtype);this.state.numBytes-=o}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let r=this.state.registeredVariables[n];this.disposeVariable(r)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return G(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=yield i.kernelTimeMs,i.extraInfo=yield i.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,r,o,i,s,a){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:o,saved:s},c=ah(n);c!=null&&(i=c.gradFunc),i!=null&&(u.gradient=l=>(l=l.map((d,p)=>{if(d==null){let m=o[p],b=pu(m.size,m.dtype);return this.makeTensor(b,m.shape,m.dtype)}return d}),i(l.length>1?l:l[0],s,a))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){let r=ml(n),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(n,r,o,i=!1){if(I(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));I(s instanceof _e,()=>"The result y returned by f() must be a tensor.");let a=LM(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[s.id]=o??$W(s.shape),VM(u,a,l=>this.tidy(l),LW);let c=r.map(l=>u[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(let d of l.saved)d.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(n){return I(so(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{I(r.every(u=>u instanceof _e),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((u,c)=>{i[c]=u});let s=(u,c)=>(o=n(...r,c),I(o.value instanceof _e,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),I(so(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(u,c)=>{let l=o.gradFunc(u,c),d=Array.isArray(l)?l:[l];I(d.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),I(d.every(m=>m instanceof _e),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((m,b)=>{p[b]=()=>m}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}time(n){return G(this,null,function*(){let r=ks(),o=yield this.backend.time(n);return o.wallMs=ks()-r,o})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new gh;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();E=JE()});var yh={};Re(yh,{isBrowser:()=>tD,isMobile:()=>BW,mockIsMobile:()=>jW});function VW(){return typeof navigator<"u"&&navigator!=null}function jW(t){eD=t}function BW(t){if(eD!==void 0)return eD;if(t||VW()){if(t||(t=navigator),t.product==="ReactNative")return!0;let e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function tD(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var eD,nD=D(()=>{"use strict";});var En,Du=D(()=>{"use strict";P();nD();Pt();En=ie();En.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});En.registerFlag("IS_BROWSER",()=>tD());En.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");En.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));En.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));En.registerFlag("PROD",()=>!1);En.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>En.getBool("DEBUG"));En.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);En.registerFlag("IS_TEST",()=>!1);En.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>En.getBool("DEBUG"));En.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);En.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);En.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)});function Gt(t,e){let n=t;if(pt(t))return e==="string"?[]:[t.length];if(hh(t)){let o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(mh(t))return[t.buffer.size/(e==null?4:fu(e))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(n)||pt(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ie().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&tk(t,r,[]),r}function tk(t,e,n){if(n=n||[],!Array.isArray(t)&&!pt(t)){I(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}I(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),I(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);let r=e.slice(1);for(let o=0;o<t.length;++o)tk(t[o],r,n.concat(o))}function ek(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function y(t,e,n,r="numeric"){if(t instanceof KE())return ek(r,t.dtype,e,n),t;let o=Di(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),ek(r,o,e,n),t==null||!pt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let i=Gt(t,o);!pt(t)&&!Array.isArray(t)&&(t=[t]);let a=o!=="string"?vu(t,o):kr(t,[],!0);return E.makeTensor(a,i,o)}function Vo(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>y(i,`${e}[${s}]`,n,r))}var R=D(()=>{"use strict";P();Pt();Yn();Eu();H();Tt();});function w(t){let e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+vh;let o=(...i)=>{E.startScope(n);try{let s=r(...i);return Ts(s)&&console.error("Cannot return a Promise inside of tidy."),E.endScope(s),s}catch(s){throw E.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}var vh,k=D(()=>{"use strict";P();H();vh="__op"});function UW(t,e){let n=y(t,"real","complex"),r=y(e,"imag","complex");Qe(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:n,imag:r};return E.runKernel(w0,o)}var un,Si=D(()=>{"use strict";P();V();R();H();k();un=w({complex_:UW})});function cn(t,e,n,r){if(r==null)r=Di(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(mh(t)||hh(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return E.backend.createTensorFromGPUData(t,e||n,r)}if(!pt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Je(e);let o=xe(e),i=xe(n);I(o===i,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<n.length;++s){let a=n[s],u=s===n.length-1?a!==xe(e.slice(s)):!0;I(n[s]===e[s]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!pt(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?vu(t,r):kr(t,[],!0),E.makeTensor(t,e,r)}var jo=D(()=>{"use strict";P();Eu();H();});function Lt(t,e,n){let r=Gt(t,n);return cn(t,e,r,n)}var gl=D(()=>{"use strict";R();jo();});var Bo,rD=D(()=>{"use strict";Bo={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});function HW(t,e){let n=0,r=t.length;for(;n<=r;){let o=Math.floor((r-n)/2)+n,i=e(t[o]);if(i===0)return o;i<0?r=o:n=o+1}return-1}var zt,Ti=D(()=>{"use strict";H();zt=class t{static join(e){return new t(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>pt(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){let o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=n+o.byteLength;this.shards.push({buffer:o,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);let r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);let o=n-e,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let u=r;u<this.shards.length;u++){let c=this.shards[u],d=e+a-c.start,p=a,b=Math.min(n,c.end)-c.start,S=new Uint8Array(c.buffer,d,b-d);if(s.set(S,p),a+=S.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=HW(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}});function GW(){ie().set("PROD",!0)}function zW(){ie().set("DEBUG",!0)}function WW(){ie().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function nk(t){ie().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function qW(){E.disposeVariables()}function wh(){return E}function KW(){return E.memory()}function ZW(t){return E.profile(t)}function se(t,e){return E.tidy(t,e)}function ct(t){ml(t).forEach(n=>n.dispose())}function ln(t){return E.keep(t)}function YW(t){return E.time(t)}function QW(t){return E.setBackend(t)}function XW(){return E.ready()}function yl(){return E.backendName}function JW(t){E.removeBackend(t)}function eq(t){return E.findBackend(t)}function tq(t){return E.findBackendFactory(t)}function nq(t,e,n=1){return E.registerBackend(t,e,n)}function vl(){return E.backend}function rq(t,e){ie().setPlatform(t,e)}var Ln=D(()=>{"use strict";P();Pt();Yn();tt();qM(nk)});function ik(t,e){return G(this,null,function*(){let n=[],r=[],o=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<o.length;++s){let a=o[s],u=Array.isArray(t)?t[s].tensor:t[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);let c={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let l=new Promise(d=>G(this,null,function*(){let p=yield u.bytes(),m=p.reduce((T,A)=>T+A.length,0)+Ni*p.length,b=new Uint8Array(m),S=0;for(let T=0;T<p.length;T++){let A=p[T],$=new Uint8Array(new Uint32Array([A.length]).buffer);b.set($,S),S+=Ni,b.set(A,S),S+=A.length}d(b)}));r.push(l)}else r.push(u.data());e!=null&&(c.group=e),n.push(c)}let i=yield Promise.all(r);return{data:sq(i),specs:n}})}function bh(t,e){let n=new zt(t),r={},o=0;for(let i of e){let s=oq(i,(a,u)=>n.slice(o+a,o+u));r[i.name]=sk(i,n.slice(o,o+s)),o+=s}return r}function oq(t,e){let n=xe(t.shape),r;if("quantization"in t){let o=t.quantization;r=Bo[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Ni+new Uint32Array(e(o,o+Ni))[0];return o}else r=Bo[t.dtype];return n*r}function iq(t,e){return G(this,null,function*(){let n=xe(t.shape),r;if("quantization"in t){let o=t.quantization;r=Bo[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Ni+new Uint32Array(yield e(o,o+Ni))[0];return o}else r=Bo[t.dtype];return n*r})}function sk(t,e){let n=t.name,r=t.dtype,o=t.shape,i=xe(o),s,a=0;if("quantization"in t){let u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Bo[u.dtype],l=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){s=new Float32Array(l.length);for(let d=0;d<l.length;d++){let p=l[d];s[d]=p*u.scale+u.min}}else if(u.dtype==="float16")s=lq()(l);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);s=new Int32Array(l.length);for(let d=0;d<l.length;d++){let p=l[d];s[d]=Math.round(p*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){let u=xe(t.shape);s=[];for(let c=0;c<u;c++){let l=new Uint32Array(e.slice(a,a+Ni))[0];a+=Ni;let d=new Uint8Array(e.slice(a,a+l));s.push(d),a+=l}}else{let u=Bo[r];if(r==="float32")s=new Float32Array(e);else if(r==="int32")s=new Int32Array(e);else if(r==="bool")s=new Uint8Array(e);else if(r==="complex64"){s=new Float32Array(e);let c=new Float32Array(s.length/2),l=new Float32Array(s.length/2);for(let b=0;b<c.length;b++)c[b]=s[b*2],l[b]=s[b*2+1];let d=Lt(c,o,"float32"),p=Lt(l,o,"float32"),m=un(d,p);return d.dispose(),p.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*u}return Lt(s,o,r)}function rk(t,e,n){return G(this,null,function*(){let r=new Uint8Array(e);for(;r.byteLength<n;){let{done:o,value:i}=yield t.read();if(o&&i==null){let a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer})}function Eh(t,e){return G(this,null,function*(){let n={},r=t.getReader(),o=new ArrayBuffer(0);for(let i of e){let s=yield iq(i,(c,l)=>G(this,null,function*(){return o=yield rk(r,o,l),o.slice(c,l)}));o=yield rk(r,o,s);let a=o.slice(0,s);o=o.slice(s);let u=sk(i,a);if(n[i.name]=u,yl()==="webgpu"){let c=vl();"uploadToGPU"in c&&xe(u.shape)>=ie().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function sq(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0,n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(e),o=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}function ok(t){return oD?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function ak(t){if(oD)return Buffer.from(t).toString("base64");let e=new Uint8Array(t),n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function uk(t){if(oD){let r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function ck(t){return zt.join(t)}function iD(t){let e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);let n=t.split(e);return n[n.length-1]}function Dh(t,e){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function sD(t,e,n){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}function xu(t,e){return G(this,null,function*(){let n,r;return t.weightsManifest!=null&&([n,r]=yield e(t.weightsManifest)),sD(t,n,r)})}function lo(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:ok(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:ok(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new zt(t.weightData).byteLength}}function wl(t){let e=[];for(let n of t)e.push(...n.weights);return e}function aq(){let t=n=>{let r=n<<13,o=0;for(;!(r&8388608);)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function uq(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function cq(){let t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function lq(){let t=aq(),e=uq(),n=cq();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],u=t[n[a>>10]+(a&1023)]+e[a>>10];i[s]=u}return new Float32Array(o)}}var Ni,oD,Ci=D(()=>{"use strict";Si();gl();H();rD();Ti();Ln();Pt();Ln();Ni=4;oD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var Nt,lk,fk,dk,pk,Rs=D(()=>{"use strict";Nt=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(e){t.getInstance().saveRouters.push(e)}static registerLoadRouter(e){t.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return t.getHandlers(e,"save")}static getLoadHandlers(e,n){return t.getHandlers(e,"load",n)}static getHandlers(e,n,r){let o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(e,r);a!==null&&o.push(a)}),o}},lk=t=>Nt.registerSaveRouter(t),fk=t=>Nt.registerLoadRouter(t),dk=t=>Nt.getSaveHandlers(t),pk=(t,e)=>Nt.getLoadHandlers(t,e)});function hk(){if(!ie().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function cD(t){let e=t.result;e.createObjectStore(Fs,{keyPath:"modelPath"}),e.createObjectStore(_i,{keyPath:"modelPath"})}function fq(t){return new Ps(t)}function dq(t){return t.startsWith(Ps.URL_SCHEME)?t.slice(Ps.URL_SCHEME.length):t}var aD,uD,Fs,_i,Ps,mk,xh,lD=D(()=>{"use strict";Du();Pt();Ci();Rs();Ti();aD="tensorflowjs",uD=1,Fs="models_store",_i="model_info_store";Ps=(()=>{class t{constructor(n){if(this.indexedDB=hk(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return G(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return G(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,r){return new Promise((o,i)=>{let s=this.indexedDB.open(aD,uD);s.onupgradeneeded=()=>cD(s),s.onsuccess=()=>{let a=s.result;if(r==null){let u=a.transaction(Fs,"readonly"),l=u.objectStore(Fs).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(l.result.modelArtifacts)},l.onerror=d=>(a.close(),i(l.error)),u.oncomplete=()=>a.close()}else{r.weightData=zt.join(r.weightData);let u=lo(r),c=a.transaction(_i,"readwrite"),l=c.objectStore(_i),d;try{d=l.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(m){return i(m)}let p;d.onsuccess=()=>{p=a.transaction(Fs,"readwrite");let m=p.objectStore(Fs),b;try{b=m.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:u})}catch(S){return i(S)}b.onsuccess=()=>o({modelArtifactsInfo:u}),b.onerror=S=>{l=c.objectStore(_i);let T=l.delete(this.modelPath);T.onsuccess=()=>(a.close(),i(b.error)),T.onerror=A=>(a.close(),i(b.error))}},d.onerror=m=>(a.close(),i(d.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return t.URL_SCHEME="indexeddb://",t})(),mk=t=>ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ps.URL_SCHEME)?fq(t.slice(Ps.URL_SCHEME.length)):null;Nt.registerSaveRouter(mk);Nt.registerLoadRouter(mk);xh=class{constructor(){this.indexedDB=hk()}listModels(){return G(this,null,function*(){return new Promise((e,n)=>{let r=this.indexedDB.open(aD,uD);r.onupgradeneeded=()=>cD(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(_i,"readonly"),a=i.objectStore(_i).getAll();a.onsuccess=()=>{let u={};for(let c of a.result)u[c.modelPath]=c.modelArtifactsInfo;e(u)},a.onerror=u=>(o.close(),n(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})})}removeModel(e){return G(this,null,function*(){return e=dq(e),new Promise((n,r)=>{let o=this.indexedDB.open(aD,uD);o.onupgradeneeded=()=>cD(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(_i,"readwrite"),a=s.objectStore(_i),u=a.get(e),c;u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let l=a.delete(e),d=()=>{c=i.transaction(Fs,"readwrite");let m=c.objectStore(Fs).delete(e);m.onsuccess=()=>n(u.result.modelArtifactsInfo),m.onerror=b=>r(u.error)};l.onsuccess=d,l.onerror=p=>(d(),i.close(),r(u.error))}},u.onerror=l=>(i.close(),r(u.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})})}}});function yk(t){return{info:[Iu,t,gk].join(Uo),topology:[Iu,t,pq].join(Uo),weightSpecs:[Iu,t,hq].join(Uo),weightData:[Iu,t,mq].join(Uo),modelMetadata:[Iu,t,gq].join(Uo)}}function vk(t){for(let e of Object.values(t))window.localStorage.removeItem(e)}function yq(t){let e=t.split(Uo);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Uo)}function vq(t){return t.startsWith($s.URL_SCHEME)?t.slice($s.URL_SCHEME.length):t}function wq(t){return new $s(t)}var Uo,Iu,gk,pq,hq,mq,gq,$s,wk,Ih,fD=D(()=>{"use strict";Du();Pt();H();Ci();Ti();Rs();Uo="/",Iu="tensorflowjs_models",gk="info",pq="model_topology",hq="weight_specs",mq="weight_data",gq="model_metadata";$s=(()=>{class t{constructor(n){if(!ie().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=yk(this.modelPath)}save(n){return G(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(n.modelTopology),o=JSON.stringify(n.weightSpecs),i=lo(n),s=zt.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,ak(s));let a={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw vk(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}})}load(){return G(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let u=JSON.parse(s);r.format=u.format,r.generatedBy=u.generatedBy,r.convertedBy=u.convertedBy,u.signature!=null&&(r.signature=u.signature),u.userDefinedMetadata!=null&&(r.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(r.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(r.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(r.trainingConfig=u.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=uk(a),r})}}return t.URL_SCHEME="localstorage://",t})(),wk=t=>ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith($s.URL_SCHEME)?wq(t.slice($s.URL_SCHEME.length)):null;Nt.registerSaveRouter(wk);Nt.registerLoadRouter(wk);Ih=class{constructor(){I(ie().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),I(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return G(this,null,function*(){let e={},n=Iu+Uo,r=Uo+gk;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(n)&&i.endsWith(r)){let s=yq(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e})}removeModel(e){return G(this,null,function*(){e=vq(e);let n=yk(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);let r=JSON.parse(this.LS.getItem(n.info));return vk(n),r})}}});function Sh(t){if(t.indexOf(Su)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Rr.getSchemes().join(",")}`);return{scheme:t.split(Su)[0],path:t.split(Su)[1]}}function bk(t,e,n=!1){return G(this,null,function*(){I(t!==e,()=>`Old path and new path are the same: '${t}'`);let r=Nt.getLoadHandlers(t);I(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),I(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let o=r[0],i=Nt.getSaveHandlers(e);I(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),I(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);let s=i[0],a=Sh(t).scheme,u=Sh(t).path,c=a===Sh(t).scheme,l=yield o.load();n&&c&&(yield Rr.getManager(a).removeModel(u));let d=yield s.save(l);return n&&!c&&(yield Rr.getManager(a).removeModel(u)),d.modelArtifactsInfo})}function Ek(){return G(this,null,function*(){let t=Rr.getSchemes(),e={};for(let n of t){let r=yield Rr.getManager(n).listModels();for(let o in r){let i=n+Su+o;e[i]=r[o]}}return e})}function Dk(t){return G(this,null,function*(){let e=Sh(t);return Rr.getManager(e.scheme).removeModel(e.path)})}function xk(t,e){return G(this,null,function*(){return bk(t,e,!1)})}function Ik(t,e){return G(this,null,function*(){return bk(t,e,!0)})}var Su,Rr,dD=D(()=>{"use strict";H();Rs();Su="://",Rr=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(e,n){I(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Su)&&(e=e.slice(0,e.indexOf(Su))),I(e.length>0,()=>"scheme must not be an empty string.");let r=t.getInstance();I(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){let n=t.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}}});var pD,Sk=D(()=>{"use strict";Du();Pt();lD();fD();dD();BE();pD=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ie().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return ch(e)}};if(ie().get("IS_BROWSER")){ie().setPlatform("browser",new pD);try{Rr.registerManager($s.URL_SCHEME,new Ih)}catch{}try{Rr.registerManager(Ps.URL_SCHEME,new xh)}catch{}}});var Nk=Cn((Tu,Tk)=>{"use strict";var bq=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ls=bq();Tk.exports=Tu=Ls.fetch;Ls.fetch&&(Tu.default=Ls.fetch.bind(Ls));Tu.Headers=Ls.Headers;Tu.Request=Ls.Request;Tu.Response=Ls.Response});var Ck=Cn(()=>{"use strict"});var Eq,hD,mD,_k=D(()=>{"use strict";Pt();Eq={importFetch:()=>Nk()},mD=class{constructor(){this.util=Ck(),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ie().global.fetch!=null?ie().global.fetch(e,n):(hD==null&&(hD=Eq.importFetch()),hD(e,n))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};ie().get("IS_NODE")&&!ie().get("IS_BROWSER")&&ie().setPlatform("node",new mD)});function Wt(t,e="float32",n){return e=e||"float32",Je(t),new Lo(t,e,n)}var Ho=D(()=>{"use strict";Yn();H();});function Dq(t,e){let n=y(t,"x","cast");if(!qw(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},o={dtype:e};return E.runKernel(il,r,o)}var me,qt=D(()=>{"use strict";P();V();R();H();k();me=w({cast_:Dq})});function xq(t){let n={x:y(t,"x","clone","string_or_numeric")};return E.runKernel(sl,n)}var Dn,Nu=D(()=>{"use strict";P();V();R();k();Dn=w({clone_:xq})});function bl(t,e=!1){console.log(t.toString(e))}var gD=D(()=>{"use strict";});var Iq,Ak=D(()=>{"use strict";P();Du();Sk();_k();Ho();qt();Nu();gD();Yn();JE();Iq={buffer:Wt,cast:me,clone:Dn,print:bl};WM(Iq)});function Sq(t,e){let n=y(t,"a","add"),r=y(e,"b","add");[n,r]=be(n,r);let o={a:n,b:r};return E.runKernel(ol,o)}var ne,Et=D(()=>{"use strict";P();V();tt();R();k();ne=w({add_:Sq})});function Tq(t,e){let n=y(t,"a","floorDiv"),r=y(e,"b","floorDiv");[n,r]=be(n,r);let o={a:n,b:r};return E.runKernel(Q0,o)}var El,yD=D(()=>{"use strict";P();V();tt();R();k();El=w({floorDiv_:Tq})});function Nq(t,e){let n=y(t,"a","div"),r=y(e,"b","div");if([n,r]=be(n,r),n.dtype==="int32"&&r.dtype==="int32")return El(n,r);let o={a:n,b:r},i={};return E.runKernel(V0,o,i)}var Se,xn=D(()=>{"use strict";P();V();tt();R();yD();k();Se=w({div_:Nq})});function Cq(t,e){let n=y(t,"a","mul"),r=y(e,"b","mul");[n,r]=be(n,r);let o={a:n,b:r};return E.runKernel(_b,o)}var W,nt=D(()=>{"use strict";P();V();tt();R();k();W=w({mul_:Cq})});function _q(t){let e=y(t,"x","abs");if(e.dtype==="complex64"){let n={x:e};return E.runKernel(b0,n)}else{let n={x:e};return E.runKernel(Qw,n)}}var Ct,Vs=D(()=>{"use strict";P();V();R();k();Ct=w({abs_:_q})});function Aq(t){let n={x:y(t,"x","acos")};return E.runKernel(Xw,n)}var vD,Mk=D(()=>{"use strict";P();V();R();k();vD=w({acos_:Aq})});function Mq(t){let n={x:y(t,"x","acosh")};return E.runKernel(Jw,n)}var wD,kk=D(()=>{"use strict";P();V();R();k();wD=w({acosh_:Mq})});function kq(t){I(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),I(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let e=t.map((o,i)=>y(o,`tensors${i}`,"addN")),n=e[0];e.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(o=>{if(!sn(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=e;return E.runKernel(e0,r)}var bD,Ok=D(()=>{"use strict";P();V();R();H();k();bD=w({addN_:kq})});function Oq(t,e=null,n=!1){let o={x:y(t,"x","all","bool")},i={axis:e,keepDims:n};return E.runKernel(t0,o,i)}var ED,Rk=D(()=>{"use strict";P();V();R();k();ED=w({all_:Oq})});function Rq(t,e=null,n=!1){let o={x:y(t,"x","any","bool")},i={axis:e,keepDims:n};return E.runKernel(n0,o,i)}var DD,Fk=D(()=>{"use strict";P();V();R();k();DD=w({any_:Rq})});function Fq(t,e=0){let r={x:y(t,"x","argMax")},o={axis:e};return E.runKernel(r0,r,o)}var Dl,Pk=D(()=>{"use strict";P();V();R();k();Dl=w({argMax_:Fq})});function Pq(t,e=0){let r={x:y(t,"x","argMin")},o={axis:e};return E.runKernel(o0,r,o)}var xD,$k=D(()=>{"use strict";P();V();R();k();xD=w({argMin_:Pq})});function $q(t){let n={x:y(t,"x","asin")};return E.runKernel(i0,n)}var ID,Lk=D(()=>{"use strict";P();V();R();k();ID=w({asin_:$q})});function Lq(t){let n={x:y(t,"x","asinh")};return E.runKernel(s0,n)}var SD,Vk=D(()=>{"use strict";P();V();R();k();SD=w({asinh_:Lq})});function Vq(t){let n={x:y(t,"x","atan")};return E.runKernel(a0,n)}var TD,jk=D(()=>{"use strict";P();V();R();k();TD=w({atan_:Vq})});function jq(t,e){let n=y(t,"a","atan2"),r=y(e,"b","atan2");[n,r]=be(n,r);let o={a:n,b:r};return E.runKernel(c0,o)}var ND,Bk=D(()=>{"use strict";P();V();tt();R();k();ND=w({atan2_:jq})});function Bq(t){let n={x:y(t,"x","atanh")};return E.runKernel(u0,n)}var CD,Uk=D(()=>{"use strict";P();V();R();k();CD=w({atanh_:Bq})});function Uq(t,e,n,r,o="NHWC",i){let s=t[3],a=[...e,s],u=Gk(o);return Bs(t,a,n,i,r,null,null,u)}function AD(t,e,n,r,o,i,s="channelsLast"){let[a,u]=xl(e),c;if(s==="channelsLast")c=[a,u,t[3],t[3]];else if(s==="channelsFirst")c=[a,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Bs(t,c,n,r,o,i,!1,s)}function Hq(t,e,n,r,o,i,s="NDHWC"){let[a,u,c]=_D(e),l,d;if(s==="NDHWC")d="channelsLast",l=[a,u,c,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",l=[a,u,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Hk(t,l,n,r,o,!1,d,i)}function Bs(t,e,n,r,o,i,s=!1,a="channelsLast"){let[u,c,l,d]=[-1,-1,-1,-1];if(a==="channelsLast")[u,c,l,d]=t;else if(a==="channelsFirst")[u,d,c,l]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,m,,b]=e,[S,T]=xl(n),[A,$]=xl(r),M=Cu(p,A),O=Cu(m,$),{padInfo:U,outHeight:j,outWidth:z}=Wq(o,c,l,S,T,M,O,i,a),Z=s?b*d:b,Q;return a==="channelsFirst"?Q=[u,Z,j,z]:a==="channelsLast"&&(Q=[u,j,z,Z]),{batchSize:u,dataFormat:a,inHeight:c,inWidth:l,inChannels:d,outHeight:j,outWidth:z,outChannels:Z,padInfo:U,strideHeight:S,strideWidth:T,filterHeight:p,filterWidth:m,effectiveFilterHeight:M,effectiveFilterWidth:O,dilationHeight:A,dilationWidth:$,inShape:t,outShape:Q,filterShape:e}}function Hk(t,e,n,r,o,i=!1,s="channelsLast",a){let[u,c,l,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[u,c,l,d,p]=t;else if(s==="channelsFirst")[u,p,c,l,d]=t;else throw new Error(`Unknown dataFormat ${s}`);let[m,b,S,,T]=e,[A,$,M]=_D(n),[O,U,j]=_D(r),z=Cu(m,O),Z=Cu(b,U),Q=Cu(S,j),{padInfo:X,outDepth:K,outHeight:he,outWidth:le}=qq(o,c,l,d,A,$,M,z,Z,Q,a),Ae=i?T*p:T,Me;return s==="channelsFirst"?Me=[u,Ae,K,he,le]:s==="channelsLast"&&(Me=[u,K,he,le,Ae]),{batchSize:u,dataFormat:s,inDepth:c,inHeight:l,inWidth:d,inChannels:p,outDepth:K,outHeight:he,outWidth:le,outChannels:Ae,padInfo:X,strideDepth:A,strideHeight:$,strideWidth:M,filterDepth:m,filterHeight:b,filterWidth:S,effectiveFilterDepth:z,effectiveFilterHeight:Z,effectiveFilterWidth:Q,dilationDepth:O,dilationHeight:U,dilationWidth:j,inShape:t,outShape:Me,filterShape:e}}function Gq(t,e,n,r,o){r==null&&(r=MD(t,e,n));let i=t[0],s=t[1],a=Il((i-e+2*r)/n+1,o),u=Il((s-e+2*r)/n+1,o);return[a,u]}function zq(t,e,n,r,o,i){o==null&&(o=MD(t,e[0],r[0]));let s=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(s[a]=Il((t[a]-e[a]+2*o)/r[a]+1,i));return s}function MD(t,e,n,r=1){let o=Cu(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function xl(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function _D(t){return typeof t=="number"?[t,t,t]:t}function Cu(t,e){return e<=1?t:t+(t-1)*(e-1)}function Wq(t,e,n,r,o,i,s,a,u){let c,l,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let m=Gq([e,n],i,r,t,a);l=m[0],d=m[1]}else if(t==="same"){l=Math.ceil(e/r),d=Math.ceil(n/o);let p=Math.max(0,(l-1)*r+i-e),m=Math.max(0,(d-1)*o+s-n),b=Math.floor(p/2),S=p-b,T=Math.floor(m/2),A=m-T;c={top:b,bottom:S,left:T,right:A,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-i+1)/r),d=Math.ceil((n-s+1)/o);else if(typeof t=="object"){let p=u==="channelsLast"?t[1][0]:t[2][0],m=u==="channelsLast"?t[1][1]:t[2][1],b=u==="channelsLast"?t[2][0]:t[3][0],S=u==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:m,left:b,right:S,type:p===0&&m===0&&b===0&&S===0?"VALID":"EXPLICIT"},l=Il((e-i+p+m)/r+1,a),d=Il((n-s+b+S)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:l,outWidth:d}}function qq(t,e,n,r,o,i,s,a,u,c,l){let d,p,m,b;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let T=zq([e,n,r,1],[a,u,c],1,[o,i,s],t,l);p=T[0],m=T[1],b=T[2]}else if(t==="same"){p=Math.ceil(e/o),m=Math.ceil(n/i),b=Math.ceil(r/s);let S=(p-1)*o+a-e,T=(m-1)*i+u-n,A=(b-1)*s+c-r,$=Math.floor(S/2),M=S-$,O=Math.floor(T/2),U=T-O,j=Math.floor(A/2),z=A-j;d={top:O,bottom:U,left:j,right:z,front:$,back:M,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:m,outWidth:b}}function Il(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function js(t){let[e,n,r]=xl(t);return e===1&&n===1&&r===1}function en(t,e){return js(t)||js(e)}function fo(t){return xl(t).every(e=>e>0)}function Gk(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function gt(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")I($o(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{I($o(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}var In=D(()=>{"use strict";H();});function Kq(t,e){let r={x:y(t,"x","reshape","string_or_numeric")},o={shape:e};return E.runKernel(Zb,r,o)}var L,De=D(()=>{"use strict";P();V();R();k();L=w({reshape_:Kq})});function Zq(t,e,n,r,o){let i=y(t,"x","avgPool","float32"),s=1;I(en(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=i,u=!1;i.rank===3&&(u=!0,a=L(i,[1,i.shape[0],i.shape[1],i.shape[2]])),I(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),gt("avgPool",r,o);let c={x:a},l={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=E.runKernel(l0,c,l);return d=me(d,i.dtype),u?L(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Sl,kD=D(()=>{"use strict";P();V();R();H();qt();In();k();De();Sl=w({avgPool_:Zq})});function Yq(t,e,n,r,o,i="NDHWC"){let s=y(t,"x","avgPool3d","float32"),a=s,u=!1;s.rank===4&&(u=!0,a=L(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),I(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),I(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),I(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),gt("avgPool3d",r,o);let c={x:a},l={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},d=E.runKernel(f0,c,l);return d=me(d,a.dtype),u?L(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var OD,zk=D(()=>{"use strict";P();V();R();H();qt();In();k();De();OD=w({avgPool3d_:Yq})});function Qq(t,e=0){I(t.length>=1,()=>"Pass at least one tensor to concat");let n=Vo(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Dn(n[0]);let r=n,o={axis:e};return E.runKernel(E0,r,o)}var Ye,Fr=D(()=>{"use strict";P();V();R();H();Nu();k();Ye=w({concat_:Qq})});function Xq(t,e,n=!1,r=!1){let o=y(t,"a","matMul"),i=y(e,"b","matMul");[o,i]=be(o,i);let s={a:o,b:i},a={transposeA:n,transposeB:r};return E.runKernel(d0,s,a)}var Ne,Go=D(()=>{"use strict";P();V();tt();R();k();Ne=w({matMul_:Xq})});function Jq(t){let n={x:y(t,"x","sigmoid","float32")};return E.runKernel(fE,n)}var Sn,Tl=D(()=>{"use strict";P();V();R();k();Sn=w({sigmoid_:Jq})});function e5(t,e,n){let r=y(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:e,size:n};return E.runKernel(aE,o,i)}var Te,pr=D(()=>{"use strict";P();V();R();k();Te=w({slice_:e5})});function t5(t){let n={x:y(t,"x","tanh","float32")};return E.runKernel(ME,n)}var _u,RD=D(()=>{"use strict";P();V();R();k();_u=w({tanh_:t5})});function n5(t,e,n,r,o,i){let s=y(t,"forgetBias","basicLSTMCell"),a=y(e,"lstmKernel","basicLSTMCell"),u=y(n,"lstmBias","basicLSTMCell"),c=y(r,"data","basicLSTMCell"),l=y(o,"c","basicLSTMCell"),d=y(i,"h","basicLSTMCell"),p=Ye([c,d],1),m=Ne(p,a),b=ne(m,u),S=b.shape[0],T=b.shape[1]/4,A=[S,T],$=Te(b,[0,0],A),M=Te(b,[0,T],A),O=Te(b,[0,T*2],A),U=Te(b,[0,T*3],A),j=ne(W(Sn($),_u(M)),W(l,Sn(ne(s,O)))),z=W(_u(j),Sn(U));return[j,z]}var FD,Wk=D(()=>{"use strict";R();Et();Fr();Go();nt();k();Tl();pr();RD();FD=w({basicLSTMCell_:n5})});function r5(t,e,n){let r=y(t,"x","batchToSpaceND"),o=e.reduce((a,u)=>a*u);I(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),I(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),I(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);let i={x:r},s={blockShape:e,crops:n};return E.runKernel(p0,i,s)}var Nl,PD=D(()=>{"use strict";P();V();R();H();k();Nl=w({batchToSpaceND_:r5})});function qk(t){let e;return t.rank===0||t.rank===1?e=L(t,[1,1,1,t.size]):t.rank===2?e=L(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=L(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}var Kk=D(()=>{"use strict";De()});function o5(t,e,n,r,o,i){i==null&&(i=.001);let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let l;r!=null&&(l=y(r,"offset","batchNorm")),I(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),I(l==null||a.rank===l.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),I(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:qk(s),scale:c,offset:l,mean:a,variance:u},m={varianceEpsilon:i},b=E.runKernel(X0,p,m);return L(b,s.shape)}var zo,Cl=D(()=>{"use strict";P();V();R();H();Kk();k();De();zo=w({batchNorm_:o5})});function i5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let l;return r!=null&&(l=y(r,"offset","batchNorm")),I(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),I(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),I(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&I(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),l!=null&&I(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`),zo(s,a,u,l,c,i)}var $D,Zk=D(()=>{"use strict";R();H();Cl();k();$D=w({batchNorm2d_:i5})});function s5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let l;return r!=null&&(l=y(r,"offset","batchNorm")),I(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),I(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),I(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&I(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),l!=null&&I(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`),zo(s,a,u,l,c,i)}var LD,Yk=D(()=>{"use strict";R();H();Cl();k();LD=w({batchNorm3d_:s5})});function a5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),u=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let l;return r!=null&&(l=y(r,"offset","batchNorm")),I(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),I(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),I(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&I(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),l!=null&&I(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`),zo(s,a,u,l,c,i)}var VD,Qk=D(()=>{"use strict";R();H();Cl();k();VD=w({batchNorm4d_:a5})});function u5(t,e,n){let r=y(t,"x","bincount"),o=y(e,"weights","bincount");I(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),I(n>=0,()=>`size must be non-negative, but got ${n}.`),I(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:n};return E.runKernel(h0,i,s)}var _l,jD=D(()=>{"use strict";P();V();R();H();k();_l=w({bincount_:u5})});function c5(t,e){let n=y(t,"x","bitwiseAnd"),r=y(e,"y","bitwiseAnd");if(!sn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let o={a:n,b:r};return E.runKernel(m0,o)}var BD,Xk=D(()=>{"use strict";P();V();R();Tt();k();BD=w({bitwiseAnd_:c5})});function l5(t,e){let n=y(t,"s0","broadcastArgs","int32"),r=y(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:n,s1:r};return E.runKernel(g0,o)}var UD,Jk=D(()=>{"use strict";P();V();R();k();UD=w({broadcastArgs_:l5})});function f5(t,e){let n=y(t,"broadcastTo","x"),r=n.shape;if(Je(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){let c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=L(n,c)}let o=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(o[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,l)=>c>1?l:-1).filter(c=>c>=0).length===0)return Dn(n);let a={x:n},u={reps:i};return E.runKernel(al,a,u)}var Us,HD=D(()=>{"use strict";P();V();R();Tt();Nu();k();De();Us=w({broadcastTo_:f5})});function d5(t){let n={x:y(t,"x","ceil","float32")};return E.runKernel(y0,n)}var GD,eO=D(()=>{"use strict";P();V();R();k();GD=w({ceil_:d5})});function Pr(t,e,n){Je(t),n=n||Di(e);let r={shape:t,value:e,dtype:n};return E.runKernel(K0,{},r)}var Au=D(()=>{"use strict";P();V();H();Tt();});function p5(t,e,n){let r=y(t,"x","clipByValue");if(I(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Pr(r.shape,e,r.dtype);let o={x:r},i={clipValueMin:e,clipValueMax:n};return E.runKernel(v0,o,i)}var zD,tO=D(()=>{"use strict";P();V();R();H();Au();k();zD=w({clipByValue_:p5})});function h5(t){return Ye(t,0)}var WD,nO=D(()=>{"use strict";Fr();k();WD=w({concat1d_:h5})});function m5(t,e){return Ye(t,e)}var qD,rO=D(()=>{"use strict";Fr();k();qD=w({concat2d_:m5})});function g5(t,e){return Ye(t,e)}var KD,oO=D(()=>{"use strict";Fr();k();KD=w({concat3d_:g5})});function y5(t,e){return Ye(t,e)}var ZD,iO=D(()=>{"use strict";Fr();k();ZD=w({concat4d_:y5})});function v5(t,e,n,r,o="NHWC",i=[1,1],s){let a=y(t,"x","conv2d","float32"),u=y(e,"filter","conv2d","float32"),c=a,l=!1;a.rank===3&&(l=!0,c=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),I(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),I(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),gt("conv2d",r,s);let d=o==="NHWC"?c.shape[3]:c.shape[1];I(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),I(en(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),I(fo(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),I(fo(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},b=E.runKernel(D0,p,m);return l?L(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var Wo,Al=D(()=>{"use strict";P();V();R();H();In();k();De();Wo=w({conv2d_:v5})});function w5(t,e,n,r,o="NWC",i=1,s){let a=y(t,"x","conv1d"),u=y(e,"filter","conv1d"),c=a,l=!1;a.rank===2&&(l=!0,c=L(a,[1,a.shape[0],a.shape[1]])),I(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),I(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),gt("conv1d",r,s),I(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),I(en(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),I(fo(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),I(fo(n),()=>"Error in conv1D: Stride should be larger than 0."),I(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let d=L(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=L(c,[c.shape[0],1,c.shape[1],c.shape[2]]),T=Wo(p,d,[1,n],r,"NHWC",[1,i],s);return l?L(T,[T.shape[2],T.shape[3]]):L(T,[T.shape[0],T.shape[2],T.shape[3]])}var YD,sO=D(()=>{"use strict";R();H();Al();In();k();De();YD=w({conv1d_:w5})});function b5(t,e,n,r,o,i="NHWC",s){I(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,u=e,c=!1;e.rank===3&&(c=!0,u=L(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),I(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),I(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),I(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let l=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?u.shape[3]:u.shape[1];I(l===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[2]}.`),I(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),gt("conv2dDerInput",o,s);let p={dy:u,filter:n},m={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},b=E.runKernel(I0,p,m);return c?L(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var Th,QD=D(()=>{"use strict";P();V();H();In();k();De();Th=w({conv2DBackpropInput_:b5})});function E5(t,e,n,r,o,i){let s=y(t,"x","conv2dTranspose"),a=y(e,"filter","conv2dTranspose");return Th(n,s,a,r,o,"NHWC",i)}var XD,aO=D(()=>{"use strict";R();QD();k();XD=w({conv2dTranspose_:E5})});function D5(t,e,n,r,o="NDHWC",i=[1,1,1]){let s=y(t,"x","conv3d"),a=y(e,"filter","conv3d"),u=s,c=!1;s.rank===4&&(c=!0,u=L(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),I(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),I(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),I(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),I(en(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),I(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),I(fo(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),I(fo(n),()=>"Error in conv3D: Strides should be larger than 0.");let l={x:u,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:i},p=E.runKernel(S0,l,d);return c?L(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var JD,uO=D(()=>{"use strict";P();V();R();H();In();k();De();JD=w({conv3d_:D5})});function x5(t,e,n,r,o){I(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,s=e,a=!1;e.rank===4&&(a=!0,s=L(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);let u=i[4],c=s.shape[4];I(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),I(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),I(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),I(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),I(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let l={dy:s,filter:n},d={pad:o,strides:r,inputShape:i},p=E.runKernel(T0,l,d);return a?L(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var cO,lO=D(()=>{"use strict";P();V();H();k();De();cO=w({conv3DBackpropInput_:x5})});function I5(t,e,n,r,o){let i=y(t,"x","conv3dTranspose"),s=y(e,"filter","conv3dTranspose");return cO(n,i,s,r,o)}var ex,fO=D(()=>{"use strict";R();lO();k();ex=w({conv3dTranspose_:I5})});function S5(t){let n={x:y(t,"x","cos","float32")};return E.runKernel(N0,n)}var tx,dO=D(()=>{"use strict";P();V();R();k();tx=w({cos_:S5})});function T5(t){let n={x:y(t,"x","cosh","float32")};return E.runKernel(C0,n)}var nx,pO=D(()=>{"use strict";P();V();R();k();nx=w({cosh_:T5})});function N5(t,e=0,n=!1,r=!1){let i={x:y(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return E.runKernel(_0,i,s)}var rx,hO=D(()=>{"use strict";P();V();R();k();rx=w({cumprod_:N5})});function C5(t,e=0,n=!1,r=!1){let i={x:y(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return E.runKernel(A0,i,s)}var ox,mO=D(()=>{"use strict";P();V();R();k();ox=w({cumsum_:C5})});function _5(t,e,n,r=!1){let o=y(t,"x","denseBincount"),i=y(e,"weights","denseBincount");I(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),I(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),I(n>=0,()=>`size must be non-negative, but got ${n}.`),I(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n,binaryOutput:r};return E.runKernel(k0,s,a)}var ix,gO=D(()=>{"use strict";P();V();R();H();k();ix=w({denseBincount_:_5})});function A5(t,e,n="NHWC"){let r=y(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];I(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),I(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),I(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),I(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},u={blockSize:e,dataFormat:n};return E.runKernel(O0,a,u)}var sx,yO=D(()=>{"use strict";P();V();R();H();k();sx=w({depthToSpace_:A5})});function M5(t,e,n,r,o="NHWC",i=[1,1],s){let a=y(t,"x","depthwiseConv2d","float32"),u=y(e,"filter","depthwiseConv2d","float32"),c=a,l=!1;a.rank===3&&(l=!0,c=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),I(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),I(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let d=o==="NHWC"?c.shape[3]:c.shape[1];I(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),gt("depthwiseConv2d",r,s);let p={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},b=E.runKernel(R0,p,m);return l?L(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var Hs,Nh=D(()=>{"use strict";P();V();R();H();In();k();De();Hs=w({depthwiseConv2d_:M5})});function k5(t){let n={x:y(t,"x","diag")};return E.runKernel($0,n)}var ax,vO=D(()=>{"use strict";P();V();R();k();ax=w({diag_:k5})});function O5(t,e,n,r,o=[1,1],i="NHWC"){let s=y(t,"x","dilation2d"),a=y(e,"filter","dilation2d");I(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),I(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),I(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let u=s,c=!1;s.rank===3&&(u=L(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),I(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);let l={x:u,filter:a},d={strides:n,pad:r,dilations:o},p=E.runKernel(L0,l,d);return c?L(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var ux,wO=D(()=>{"use strict";P();V();R();H();k();De();ux=w({dilation2d_:O5})});var Gs={};Re(Gs,{assertAndGetBroadcastShape:()=>$e,getBroadcastDims:()=>bO,getReductionAxes:()=>Ch});function bO(t,e){let n=t.length,r=[];for(let o=0;o<n;o++){let i=n-1-o,s=t[i]||1;(e[e.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function Ch(t,e){let n=[];for(let r=0;r<e.length;r++){let o=t[t.length-r-1],i=e.length-r-1,s=e[i];(o==null||o===1&&s>1)&&n.unshift(i)}return n}function $e(t,e){let n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let i=t[t.length-o-1];i==null&&(i=1);let s=e[e.length-o-1];if(s==null&&(s=1),i===1)r[n-o-1]=s;else if(s===1)r[n-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=i}return r}var _t=D(()=>{"use strict";});function R5(t,e){let n=y(t,"a","equal","string_or_numeric"),r=y(e,"b","equal","string_or_numeric");[n,r]=be(n,r),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(H0,o)}var Ai,cx=D(()=>{"use strict";P();V();tt();R();_t();k();Ai=w({equal_:R5})});function F5(t,e,n){let r=y(e,"a","where"),o=y(n,"b","where"),i=y(t,"condition","where","bool"),s=$e($e(i.shape,r.shape),o.shape),a=Us(i,s),u=Us(r,s),c=Us(o,s),l={condition:a,t:u,e:c};return E.runKernel(iE,l)}var Vn,Mu=D(()=>{"use strict";P();V();R();HD();_t();k();Vn=w({where_:F5})});function P5(t){let n={x:y(t,"x","zerosLike")};return E.runKernel($E,n)}var wt,qo=D(()=>{"use strict";P();V();R();k();wt=w({zerosLike_:P5})});function $5(t,e){let n=y(t,"a","div"),r=y(e,"b","div");[n,r]=be(n,r);let o=Se(n,r),i=wt(o),s=Ai(r,i);return Vn(s,i,o)}var lx,EO=D(()=>{"use strict";tt();R();xn();cx();k();Mu();qo();lx=w({divNoNan_:$5})});function L5(t,e){let n=y(t,"t1","dot"),r=y(e,"t2","dot");I((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(I(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),n.rank===1&&r.rank===1){let s=L(n,[1,-1]),a=L(r,[-1,1]),u=Ne(s,a);return L(u,[])}else if(n.rank===1&&r.rank===2){let s=L(n,[1,-1]),a=L(r,[r.shape[0],r.shape[1]]),u=Ne(s,a);return L(u,[u.size])}else if(n.rank===2&&r.rank===1){let s=L(r,[-1,1]),a=Ne(n,s);return L(a,[a.size])}else{let s=L(r,[r.shape[0],r.shape[1]]);return Ne(n,s)}}var fx,DO=D(()=>{"use strict";R();H();Go();k();De();fx=w({dot_:L5})});function V5(t,...e){let n=e.map((o,i)=>y(o,`tensors${i}`,"einsum")),r={equation:t};return E.runKernel(j0,n,r)}var Ko,dx=D(()=>{"use strict";P();V();R();k();Ko=w({einsum_:V5})});function j5(t){let n={x:y(t,"x","elu","float32")};return E.runKernel(B0,n)}var Ml,px=D(()=>{"use strict";P();V();R();k();Ml=w({elu_:j5})});function B5(t,e){let n=y(t,"x","ensureShape","string_or_numeric");if(!Hw(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}var hx,xO=D(()=>{"use strict";R();Tt();k();hx=w({ensureShape_:B5})});function U5(t){let e=y(t,"x","erf");I(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=me(e,"float32"));let n={x:e};return E.runKernel(U0,n)}var mx,IO=D(()=>{"use strict";P();V();R();H();qt();k();mx=w({erf_:U5})});function gx(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function SO(t,e,n){let r=t.length+e.length,o=[],i=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[i++]):o.push(e[s++]);return o}function H5(t,e){let n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);let o=e.map(i=>t[i]);return[n,o]}function Zo(t,e){let n=e.map(r=>1);return SO(t,n,e)}function G5(t,e,n){I(gx(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function z5(t,e){if(gx(t,e))return null;let n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function W5(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function q5(t,e){let n=[];for(let r=e-t;r<e;++r)n.push(r);return n}var ku=D(()=>{"use strict";H();});function Z5(t,e=null,n=!1){let o={x:y(t,"x","max")},i={reductionIndices:e,keepDims:n};return E.runKernel(vb,o,i)}var $r,kl=D(()=>{"use strict";P();V();R();k();$r=w({max_:Z5})});function Y5(t,e=null,n=!1){let o={x:y(t,"x","min")},i={axis:e,keepDims:n};return E.runKernel(Ib,o,i)}var Ou,yx=D(()=>{"use strict";P();V();R();k();Ou=w({min_:Y5})});function Q5(t,e){let n=y(t,"base","pow"),r=y(e,"exp","pow");[n,r]=be(n,r);let o={a:n,b:r};return E.runKernel(Vb,o)}var ho,Ol=D(()=>{"use strict";P();V();tt();R();k();ho=w({pow_:Q5})});function ae(t,e){if((pt(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&pt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return cn(t,[],[],e)}var tn=D(()=>{"use strict";H();jo();});function X5(t){let n={x:y(t,"x","sqrt","float32")};return E.runKernel(pE,n)}var fn,Ru=D(()=>{"use strict";P();V();R();k();fn=w({sqrt_:X5})});function J5(t){let e=y(t,"x","square"),n={};return E.runKernel("Square",{x:e},n)}var At,Yo=D(()=>{"use strict";P();R();k();At=w({square_:J5})});function e7(t,e=null,n=!1){let r=y(t,"x","sum");r.dtype==="bool"&&(r=me(r,"int32"));let o={x:r},i={axis:e,keepDims:n};return E.runKernel(hE,o,i)}var Le,Lr=D(()=>{"use strict";P();V();R();qt();k();Le=w({sum_:e7})});function t7(t,e="euclidean",n=null,r=!1){t=y(t,"x","norm");let o=TO(t,e,n),i=o.shape;if(r){let s=Ei(n,t.shape);i=Zo(o.shape,s)}return L(o,i)}function TO(t,e,n=null){if(t.rank===0)return Ct(t);if(t.rank!==1&&n===null)return TO(L(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Le(Ct(t),n);if(e===1/0)return $r(Ct(t),n);if(e===-1/0)return Ou(Ct(t),n);if(e==="euclidean"||e===2)return fn(Le(ho(Ct(t),ae(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return $r(Le(Ct(t),n[0]),n[1]-1);if(e===1/0)return $r(Le(Ct(t),n[1]),n[0]);if(e===-1/0)return Ou(Le(Ct(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return fn(Le(At(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var Mi,Rl=D(()=>{"use strict";R();H();Vs();ku();kl();yx();k();Ol();De();tn();Ru();Yo();Lr();Mi=w({norm_:t7})});function n7(t,e=null,n=!1){return Mi(t,"euclidean",e,n)}var vx,NO=D(()=>{"use strict";Rl();k();vx=w({euclideanNorm_:n7})});function r7(t){let n={x:y(t,"x","exp")};return E.runKernel(G0,n)}var Qn,Fu=D(()=>{"use strict";P();V();R();k();Qn=w({exp_:r7})});function o7(t,e=0){let n=y(t,"x","expandDims","string_or_numeric");I(e<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},o={dim:e};return E.runKernel(z0,r,o)}var Vt,_h=D(()=>{"use strict";P();V();R();H();k();Vt=w({expandDims_:o7})});function i7(t){let n={x:y(t,"x","expm1")};return E.runKernel(W0,n)}var wx,CO=D(()=>{"use strict";P();V();R();k();wx=w({expm1_:i7})});function s7(t,e){let n=y(t,"x","tile","string_or_numeric");I(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);let r={x:n},o={reps:e};return E.runKernel(al,r,o)}var Qo,Ah=D(()=>{"use strict";P();V();R();H();k();Qo=w({tile_:s7})});function a7(t,e,n,r="float32"){e==null&&(e=t);let o=Wt([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)o.set(1,a,a);let s=L(o.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return Qo(Vt(s,0),[n[0],1,1]);if(n.length===2)return Qo(Vt(Vt(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Qo(Vt(Vt(Vt(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var Fl,bx=D(()=>{"use strict";Ho();_h();k();De();Ah();Fl=w({eye_:a7})});function u7(t){let n={x:y(t,"x","floor","float32")};return E.runKernel(Y0,n)}var Pl,Ex=D(()=>{"use strict";P();V();R();k();Pl=w({floor_:u7})});function c7(t,e,n=0,r=0){let o=y(t,"x","gather"),i=y(e,"indices","gather","int32"),s={x:o,indices:i},a={axis:n,batchDims:r};return E.runKernel(J0,s,a)}var $l,Dx=D(()=>{"use strict";P();V();R();k();$l=w({gather_:c7})});function l7(t,e){let n=y(t,"a","greater","string_or_numeric"),r=y(e,"b","greater","string_or_numeric");[n,r]=be(n,r),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(tb,o)}var mo,Mh=D(()=>{"use strict";P();V();tt();R();_t();k();mo=w({greater_:l7})});function f7(t,e){let n=y(t,"a","greaterEqual","string_or_numeric"),r=y(e,"b","greaterEqual","string_or_numeric");[n,r]=be(n,r),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(nb,o)}var Ll,xx=D(()=>{"use strict";P();V();tt();R();_t();k();Ll=w({greaterEqual_:f7})});function d7(t){let n={input:y(t,"input","imag")};return E.runKernel(ob,n)}var Xo,Vl=D(()=>{"use strict";P();V();R();k();Xo=w({imag_:d7})});function p7(t){let n={x:y(t,"x","isFinite")};return E.runKernel(ib,n)}var Ix,_O=D(()=>{"use strict";P();V();R();k();Ix=w({isFinite_:p7})});function h7(t){let n={x:y(t,"x","isInf")};return E.runKernel(sb,n)}var Sx,AO=D(()=>{"use strict";P();V();R();k();Sx=w({isInf_:h7})});function m7(t){let n={x:y(t,"x","isNaN")};return E.runKernel(ab,n)}var Tx,MO=D(()=>{"use strict";P();V();R();k();Tx=w({isNaN_:m7})});function g7(t,e=.2){let r={x:y(t,"x","leakyRelu")},o={alpha:e};return E.runKernel(ub,r,o)}var jl,Nx=D(()=>{"use strict";P();V();R();k();jl=w({leakyRelu_:g7})});function y7(t,e){let n=y(t,"a","less","string_or_numeric"),r=y(e,"b","less","string_or_numeric");[n,r]=be(n,r),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(cb,o)}var Pu,Cx=D(()=>{"use strict";P();V();tt();R();_t();k();Pu=w({less_:y7})});function v7(t,e){let n=y(t,"a","lessEqual","string_or_numeric"),r=y(e,"b","lessEqual","string_or_numeric");[n,r]=be(n,r),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(lb,o)}var zs,kh=D(()=>{"use strict";P();V();tt();R();_t();k();zs=w({lessEqual_:v7})});function _x(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:t,stop:e,num:n};return E.runKernel(fb,{},r)}var kO=D(()=>{"use strict";P();V();});function w7(t,e=5,n=1,r=1,o=.5){let i=y(t,"x","localResponseNormalization");I(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),I($o(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=L(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let u={x:s},c={depthRadius:e,bias:n,alpha:r,beta:o},l=E.runKernel(yb,u,c);return a?L(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var Ax,OO=D(()=>{"use strict";P();V();R();H();k();De();Ax=w({localResponseNormalization_:w7})});function b7(t){let n={x:y(t,"x","log","float32")};return E.runKernel(db,n)}var go,Bl=D(()=>{"use strict";P();V();R();k();go=w({log_:b7})});function E7(t){let n={x:y(t,"x","log1p")};return E.runKernel(pb,n)}var Ul,Mx=D(()=>{"use strict";P();V();R();k();Ul=w({log1p_:E7})});function RO(t){return I(so(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{let r=y(e,"x","tf.grad","string_or_numeric"),o=n!=null?y(n,"dy","tf.grad"):null;return E.tidy(()=>{let{value:i,grads:s}=E.gradients(()=>t(r),[r],o);return o!=null&&Qe(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Rh(s),s[0]})}}function FO(t){return I(so(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{I(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Vo(e,"args","tf.grads","string_or_numeric"),o=n!=null?y(n,"dy","tf.grads"):null;return E.tidy(()=>{let{value:i,grads:s}=E.gradients(()=>t(...r),r,o);return o!=null&&Qe(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Rh(s),s})}}function PO(t){return I(so(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{I(e instanceof _e,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),I(n==null||n instanceof _e,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=E.gradients(()=>t(e),[e],n);return Rh(r),{grad:r[0],value:o}}}function $O(t){return I(so(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{I(Array.isArray(e)&&e.every(o=>o instanceof _e),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),I(n==null||n instanceof _e,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=E.gradients(()=>t(...e),e,n);return n!=null&&Qe(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Rh(r.grads),r}}function Oh(t,e){I(so(t),()=>"The f passed in variableGrads(f) must be a function"),I(e==null||Array.isArray(e)&&e.every(c=>c instanceof co),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=e!=null;if(!n){e=[];for(let c in E.registeredVariables)e.push(E.registeredVariables[c])}let r=n?e.filter(c=>!c.trainable):null,o=e.length;e=e.filter(c=>c.trainable),I(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=E.gradients(t,e,null,i);I(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),I(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let u={};return e.forEach((c,l)=>{a[l]!=null&&(u[c.name]=a[l])}),r?.forEach(c=>u[c.name]=null),{value:s,grads:u}}function nn(t){return E.customGrad(t)}function Rh(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var Jo=D(()=>{"use strict";P();Yn();R();H();});function D7(t){let n={x:y(t,"x","neg")};return E.runKernel(Ab,n)}var jt,ei=D(()=>{"use strict";P();V();R();k();jt=w({neg_:D7})});function x7(t){let n={x:y(t,"x","softplus")};return E.runKernel(dE,n)}var Hl,kx=D(()=>{"use strict";P();V();R();k();Hl=w({softplus_:x7})});function I7(t){let e=y(t,"x","logSigmoid");return nn(r=>({value:jt(Hl(jt(r))),gradFunc:s=>W(s,Sn(jt(r)))}))(e)}var Ox,LO=D(()=>{"use strict";Jo();R();nt();ei();k();Tl();kx();Ox=w({logSigmoid_:I7})});function S7(t,e){let n=y(t,"a","sub"),r=y(e,"b","sub");[n,r]=be(n,r);let o={a:n,b:r};return E.runKernel(_E,o)}var ue,Mt=D(()=>{"use strict";P();V();tt();R();k();ue=w({sub_:S7})});function T7(t,e=-1){let n=y(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return nn((o,i)=>{let a=$r(o,e,!0),u=ue(o,a),c=ue(me(u,"float32"),go(Le(Qn(u),e,!0)));return i([c]),{value:c,gradFunc:(d,p)=>{let[m]=p,b=!0,S=Qn(m);return ue(d,W(Le(d,e,b),S))}}})(n)}var Rx,VO=D(()=>{"use strict";Jo();R();qt();Fu();Bl();kl();nt();k();Mt();Lr();Rx=w({logSoftmax_:T7})});function N7(t,e=null,n=!1){let r=y(t,"x","logSumExp"),o=Ei(e,r.shape),i=$r(r,o,!0),s=ue(r,i),a=Qn(s),u=Le(a,o),c=go(u),l=ne(L(i,c.shape),c);if(n){let d=Zo(l.shape,o);return L(l,d)}return l}var Gl,Fx=D(()=>{"use strict";R();H();Et();ku();Fu();Bl();kl();k();De();Mt();Lr();Gl=w({logSumExp_:N7})});function C7(t,e){let n=y(t,"a","logicalAnd","bool"),r=y(e,"b","logicalAnd","bool");$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(hb,o)}var ki,Fh=D(()=>{"use strict";P();V();R();_t();k();ki=w({logicalAnd_:C7})});function _7(t){let n={x:y(t,"x","logicalNot","bool")};return E.runKernel(mb,n)}var zl,Px=D(()=>{"use strict";P();V();R();k();zl=w({logicalNot_:_7})});function A7(t,e){let n=y(t,"a","logicalOr","bool"),r=y(e,"b","logicalOr","bool");$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(gb,o)}var Wl,$x=D(()=>{"use strict";P();V();R();_t();k();Wl=w({logicalOr_:A7})});function M7(t,e){let n=y(t,"a","logicalXor","bool"),r=y(e,"b","logicalXor","bool");return $e(n.shape,r.shape),ki(Wl(t,e),zl(ki(t,e)))}var Lx,jO=D(()=>{"use strict";R();_t();Fh();Px();$x();k();Lx=w({logicalXor_:M7})});function k7(t,e,n="left"){let r=y(t,"sortedSequence","searchSorted"),o=y(e,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=L(r,[-1,i]),u=L(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(xe(u.shape)>=Ph)throw new Error(`values tensor size must less than ${Ph}`);if(a.shape[1]>=Ph)throw new Error(`trailing dim_size must less than ${Ph} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:u},l={side:n};return E.runKernel(oE,c,l)}var Ph,$u,$h=D(()=>{"use strict";P();V();R();Tt();k();De();Ph=2147483648;$u=w({searchSorted_:k7})});function Vx(t,e){return $u(t,e,"left")}var BO=D(()=>{"use strict";$h();});function O7(t,e,n,r,o){let i=y(t,"x","maxPool"),s=1,a=i,u=!1;i.rank===3&&(u=!0,a=L(i,[1,i.shape[0],i.shape[1],i.shape[2]])),I(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),I(en(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),gt("maxPool",r,o);let c={x:a},l={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=E.runKernel(bb,c,l);return u?L(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var ql,jx=D(()=>{"use strict";P();V();R();H();In();k();De();ql=w({maxPool_:O7})});function R7(t,e=[1,1,1],n,r,o,i="NDHWC"){let s=y(t,"x","maxPool3d"),a=s,u=!1;s.rank===4&&(u=!0,a=L(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),I(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),I(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),gt("maxPool3d",r,o);let c={x:a},l={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},d=E.runKernel(Eb,c,l);return u?L(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var Bx,UO=D(()=>{"use strict";P();V();R();H();In();k();De();Bx=w({maxPool3d_:R7})});function F7(t,e,n,r,o=!1){let s={x:y(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},u=E.runKernel(Db,s,a);return{result:u[0],indexes:u[1]}}var Ux,HO=D(()=>{"use strict";P();V();R();k();Ux=w({maxPoolWithArgmax_:F7})});function P7(t,e){let n=y(t,"a","maximum"),r=y(e,"b","maximum");[n,r]=be(n,r),n.dtype==="bool"&&(n=me(n,"int32"),r=me(r,"int32")),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(wb,o)}var Kl,Hx=D(()=>{"use strict";P();V();tt();R();_t();qt();k();Kl=w({maximum_:P7})});function $7(t,e=null,n=!1){let o={x:y(t,"x","mean")},i={axis:e,keepDims:n};return E.runKernel(xb,o,i)}var Oi,Lh=D(()=>{"use strict";P();V();R();k();Oi=w({mean_:$7})});function Vr(t,e="float32"){if(Je(t),e==="complex64"){let r=Vr(t,"float32"),o=Vr(t,"float32");return un(r,o)}let n=pu(xe(t),e);return E.makeTensor(n,t,e)}var Zl=D(()=>{"use strict";P();H();Si();});function jr(t,e="float32"){if(Je(t),e==="complex64"){let r=jr(t,"float32"),o=Vr(t,"float32");return un(r,o)}let n=nl(xe(t),e);return E.makeTensor(n,t,e)}var Vh=D(()=>{"use strict";P();H();Tt();Si();Zl();});function Gx(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=y(t,"x","meshgrid",t instanceof _e?t.dtype:"float32");if(e===void 0)return[r];let o=y(e,"y","meshgrid",e instanceof _e?e.dtype:"float32"),i=xe(r.shape),s=xe(o.shape);return n==="xy"?(r=L(r,[1,-1]),o=L(o,[-1,1]),[Ne(jr([s,1],r.dtype),r),Ne(o,jr([1,i],o.dtype))]):(r=L(r,[-1,1]),o=L(o,[1,-1]),[Ne(r,jr([1,s],r.dtype)),Ne(jr([i,1],o.dtype),o)])}var GO=D(()=>{"use strict";Go();Vh();De();Yn();R();Tt();});function L7(t,e){let n=y(t,"a","minimum"),r=y(e,"b","minimum");[n,r]=be(n,r),n.dtype==="bool"&&(n=me(n,"int32"),r=me(r,"int32")),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(Sb,o)}var Ri,jh=D(()=>{"use strict";P();V();tt();R();_t();qt();k();Ri=w({minimum_:L7})});function V7(t,e,n){I(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=y(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");I(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);let o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)I(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),I(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:e,mode:n},s={x:r};return E.runKernel(Tb,s,i)}var Yl,zO=D(()=>{"use strict";P();V();R();H();k();Yl=w({mirrorPad_:V7})});function j7(t,e){let n=y(t,"a","mod"),r=y(e,"b","mod");[n,r]=be(n,r);let o={a:n,b:r};return E.runKernel(Nb,o)}var zx,WO=D(()=>{"use strict";P();V();tt();R();k();zx=w({mod_:j7})});function B7(t,e=null,n=!1){t=y(t,"x","moments");let r=Ei(e,t.shape),o=Oi(t,r,n),i=o.shape;n||(i=Zo(o.shape,r));let s=At(ue(me(t,"float32"),L(o,i))),a=Oi(s,r,n);return{mean:o,variance:a}}var Wx,qO=D(()=>{"use strict";R();H();ku();qt();Lh();k();De();Yo();Mt();Wx=w({moments_:B7})});function U7(t,e,n,r){let o=y(e,"data","multiRNNCell"),i=Vo(n,"c","multiRNNCell"),s=Vo(r,"h","multiRNNCell"),a=o,u=[];for(let d=0;d<t.length;d++){let p=t[d](a,i[d],s[d]);u.push(p[0]),u.push(p[1]),a=p[1]}let c=[],l=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),l.push(u[d+1]);return[c,l]}var qx,KO=D(()=>{"use strict";R();k();qx=w({multiRNNCell_:U7})});function H7(t,e,n,r=!1){let o=y(t,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();let u={logits:s===1?L(o,[1,-1]):o},c={numSamples:e,seed:n,normalized:r},l=E.runKernel(Cb,u,c);return s===1?L(l,[l.size]):l}var Kx,ZO=D(()=>{"use strict";P();V();R();k();De();Kx=w({multinomial_:H7})});function G7(t,e){let n=y(t,"a","notEqual","string_or_numeric"),r=y(e,"b","notEqual","string_or_numeric");[n,r]=be(n,r),$e(n.shape,r.shape);let o={a:n,b:r};return E.runKernel(Mb,o)}var Ql,Zx=D(()=>{"use strict";P();V();tt();R();_t();k();Ql=w({notEqual_:G7})});function z7(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let s={indices:y(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return E.runKernel(Pb,s,a)}var Fi,Yx=D(()=>{"use strict";P();V();R();k();Fi=w({oneHot_:z7})});function W7(t){let n={x:y(t,"x","onesLike")};return E.runKernel(Fb,n)}var Qx,YO=D(()=>{"use strict";P();V();R();k();Qx=w({onesLike_:W7})});function q7(t,e){let n=y(t,"v1","outerProduct"),r=y(e,"v2","outerProduct");I(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let o=L(n,[-1,1]),i=L(r,[1,-1]);return Ne(o,i)}var Xx,QO=D(()=>{"use strict";R();H();Go();k();De();Xx=w({outerProduct_:q7})});function K7(t,e,n=0){let r=y(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:e,constantValue:n},i={x:r};return E.runKernel(Lb,i,o)}var Xn,Lu=D(()=>{"use strict";P();V();R();k();Xn=w({pad_:K7})});function Z7(t,e,n=0){return I(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Xn(t,[e],n)}var Jx,XO=D(()=>{"use strict";H();k();Lu();Jx=w({pad1d_:Z7})});function Y7(t,e,n=0){return I(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Xn(t,e,n)}var eI,JO=D(()=>{"use strict";H();k();Lu();eI=w({pad2d_:Y7})});function Q7(t,e,n=0){return I(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Xn(t,e,n)}var Xl,eR=D(()=>{"use strict";H();k();Lu();Xl=w({pad3d_:Q7})});function X7(t,e,n=0){return I(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Xn(t,e,n)}var tI,tR=D(()=>{"use strict";H();k();Lu();tI=w({pad4d_:X7})});function J7(t,e,n){let r=y(t,"x","spaceToBatchND");I(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),I(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),I(r.shape.reduce((s,a,u)=>u>0&&u<=e.length?s&&(a+n[u-1][0]+n[u-1][1])%e[u-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);let o={x:r},i={blockShape:e,paddings:n};return E.runKernel(mE,o,i)}var Jl,nI=D(()=>{"use strict";P();V();R();H();k();Jl=w({spaceToBatchND_:J7})});function e9(t,e,n,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=y(t,"x","maxPool"),u=a,c=!1;a.rank===3&&(c=!0,u=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),I(en(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let l=AD(u.shape,e,i,o,r),d=[l.dilationHeight,l.dilationWidth],p;r==="same"?p=n9([l.filterHeight,l.filterWidth],d):p=[[0,0],[0,0]];let m=d[0]===1&&d[1]===1,[b,S]=t9([l.inHeight,l.inWidth],d,p),T=m?r:"valid",A=m?u:Jl(u,d,b),M=(n==="avg"?()=>Sl(A,e,i,T,s):()=>ql(A,e,i,T,s))(),O=m?M:Nl(M,d,S);return c?L(O,[O.shape[1],O.shape[2],O.shape[3]]):O}function t9(t,e,n){let r=n.map(l=>l[0]),o=n.map(l=>l[1]),i=t.concat(r,o),s=e.map((l,d)=>(l-i[d]%l)%l),a=o.map((l,d)=>l+s[d]),u=e.map((l,d)=>[r[d],a[d]]),c=e.map((l,d)=>[0,s[d]]);return[u,c]}function n9(t,e){let r=t.map((s,a)=>s+(s-1)*(e[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var rI,nR=D(()=>{"use strict";R();H();kD();PD();In();jx();k();De();nI();rI=w({pool_:e9})});function r9(t,e){let n=y(t,"x","prelu"),r=y(e,"alpha","prelu"),o={x:n,alpha:r};return E.runKernel(jb,o)}var ef,oI=D(()=>{"use strict";P();V();R();k();ef=w({prelu_:r9})});function o9(t,e=null,n=!1){let r=y(t,"x","prod");r.dtype==="bool"&&(r=me(r,"int32"));let o={x:r},i={axis:e,keepDims:n};return E.runKernel(Bb,o,i)}var iI,rR=D(()=>{"use strict";P();V();R();qt();k();iI=w({prod_:o9})});function i9(t,e,n,r){let o=t.map((l,d)=>y(l,`tensors${d}`,"raggedGather","int32")),i=y(e,"paramsDenseValues","raggedGather"),s=y(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},u={outputRaggedRank:r},c=E.runKernel(Ub,a,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var sI,oR=D(()=>{"use strict";P();V();R();k();sI=w({raggedGather_:i9})});function s9(t,e,n){let r=y(t,"starts","raggedRange"),o=y(e,"limits","raggedRange",r.dtype),i=y(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=E.runKernel(Hb,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var aI,iR=D(()=>{"use strict";P();V();R();k();aI=w({raggedRange_:s9})});function a9(t,e,n,r,o){let i=y(t,"shape","raggedTensorToTensor","int32"),s=y(e,"values","raggedTensorToTensor"),a=y(n,"defaultValue","raggedTensorToTensor",s.dtype),u=r.map((d,p)=>y(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:u},l={rowPartitionTypes:o};return E.runKernel(Gb,c,l)}var uI,sR=D(()=>{"use strict";P();V();R();k();uI=w({raggedTensorToTensor_:a9})});function u9(t,e,n){Je(t);let r=xe(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)o[i]=e();return E.makeTensor(o,t,n)}var cI,aR=D(()=>{"use strict";P();H();Tt();k();cI=w({rand_:u9})});var cR=Cn((uR,lI)=>{"use strict";(function(t,e,n){function r(a){var u=this,c=s();u.next=function(){var l=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=l-(u.c=l|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(a),u.s0<0&&(u.s0+=1),u.s1-=c(a),u.s1<0&&(u.s1+=1),u.s2-=c(a),u.s2<0&&(u.s2+=1),c=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function i(a,u){var c=new r(a),l=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,l&&(typeof l=="object"&&o(l,c),d.state=function(){return o(c,{})}),d}function s(){var a=4022871197,u=function(c){c=String(c);for(var l=0;l<c.length;l++){a+=c.charCodeAt(l);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.alea=i})(uR,typeof lI=="object"&&lI,typeof define=="function"&&define)});var fR=Cn((lR,fI)=>{"use strict";(function(t,e,n){function r(s){var a=this,u="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var l=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^l^l>>>8},s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var u=new r(s),c=a&&a.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&o(c,u),l.state=function(){return o(u,{})}),l}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i})(lR,typeof fI=="object"&&fI,typeof define=="function"&&define)});var pR=Cn((dR,dI)=>{"use strict";(function(t,e,n){function r(s){var a=this,u="";a.next=function(){var l=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(l^l<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,c==u.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var u=new r(s),c=a&&a.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&o(c,u),l.state=function(){return o(u,{})}),l}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i})(dR,typeof dI=="object"&&dI,typeof define=="function"&&define)});var mR=Cn((hR,pI)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var c=a.x,l=a.i,d,p,m;return d=c[l],d^=d>>>7,p=d^d<<24,d=c[l+1&7],p^=d^d>>>10,d=c[l+3&7],p^=d^d>>>3,d=c[l+4&7],p^=d^d<<7,d=c[l+7&7],d=d^d<<13,p^=d^d<<9,c[l]=p,a.i=l+1&7,p};function u(c,l){var d,p,m=[];if(l===(l|0))p=m[0]=l;else for(l=""+l,d=0;d<l.length;++d)m[d&7]=m[d&7]<<15^l.charCodeAt(d)+m[d+1&7]<<13;for(;m.length<8;)m.push(0);for(d=0;d<8&&m[d]===0;++d);for(d==8?p=m[7]=-1:p=m[d],c.x=m,c.i=0,d=256;d>0;--d)c.next()}u(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var u=new r(s),c=a&&a.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(c.x&&o(c,u),l.state=function(){return o(u,{})}),l}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i})(hR,typeof pI=="object"&&pI,typeof define=="function"&&define)});var yR=Cn((gR,hI)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var c=a.w,l=a.X,d=a.i,p,m;return a.w=c=c+1640531527|0,m=l[d+34&127],p=l[d=d+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=l[d]=m^p,a.i=d,m+(c^c>>>16)|0};function u(c,l){var d,p,m,b,S,T=[],A=128;for(l===(l|0)?(p=l,l=null):(l=l+"\0",p=0,A=Math.max(A,l.length)),m=0,b=-32;b<A;++b)l&&(p^=l.charCodeAt((b+32)%l.length)),b===0&&(S=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,b>=0&&(S=S+1640531527|0,d=T[b&127]^=p+S,m=d==0?m+1:0);for(m>=128&&(T[(l&&l.length||0)&127]=-1),m=127,b=4*128;b>0;--b)p=T[m+34&127],d=T[m=m+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,T[m]=p^d;c.w=S,c.X=T,c.i=m}u(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var u=new r(s),c=a&&a.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(c.X&&o(c,u),l.state=function(){return o(u,{})}),l}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i})(gR,typeof hI=="object"&&hI,typeof define=="function"&&define)});var wR=Cn((vR,mI)=>{"use strict";(function(t,e,n){function r(s){var a=this,u="";a.next=function(){var l=a.b,d=a.c,p=a.d,m=a.a;return l=l<<25^l>>>7^d,d=d-p|0,p=p<<24^p>>>8^m,m=m-l|0,a.b=l=l<<20^l>>>12^d,a.c=d=d-p|0,a.d=p<<16^d>>>16^m,a.a=m-l|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)a.b^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var u=new r(s),c=a&&a.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,m=(d+p)/(1<<21);while(m===0);return m},l.int32=u.next,l.quick=l,c&&(typeof c=="object"&&o(c,u),l.state=function(){return o(u,{})}),l}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i})(vR,typeof mI=="object"&&mI,typeof define=="function"&&define)});var bR=Cn(()=>{"use strict"});var DR=Cn((ER,Bh)=>{"use strict";(function(t,e,n){var r=256,o=6,i=52,s="random",a=n.pow(r,o),u=n.pow(2,i),c=u*2,l=r-1,d;function p(M,O,U){var j=[];O=O==!0?{entropy:!0}:O||{};var z=T(S(O.entropy?[M,$(e)]:M??A(),3),j),Z=new m(j),Q=function(){for(var X=Z.g(o),K=a,he=0;X<u;)X=(X+he)*r,K*=r,he=Z.g(1);for(;X>=c;)X/=2,K/=2,he>>>=1;return(X+he)/K};return Q.int32=function(){return Z.g(4)|0},Q.quick=function(){return Z.g(4)/4294967296},Q.double=Q,T($(Z.S),e),(O.pass||U||function(X,K,he,le){return le&&(le.S&&b(le,Z),X.state=function(){return b(Z,{})}),he?(n[s]=X,K):X})(Q,z,"global"in O?O.global:this==n,O.state)}function m(M){var O,U=M.length,j=this,z=0,Z=j.i=j.j=0,Q=j.S=[];for(U||(M=[U++]);z<r;)Q[z]=z++;for(z=0;z<r;z++)Q[z]=Q[Z=l&Z+M[z%U]+(O=Q[z])],Q[Z]=O;(j.g=function(X){for(var K,he=0,le=j.i,Ae=j.j,Me=j.S;X--;)K=Me[le=l&le+1],he=he*r+Me[l&(Me[le]=Me[Ae=l&Ae+K])+(Me[Ae]=K)];return j.i=le,j.j=Ae,he})(r)}function b(M,O){return O.i=M.i,O.j=M.j,O.S=M.S.slice(),O}function S(M,O){var U=[],j=typeof M,z;if(O&&j=="object")for(z in M)try{U.push(S(M[z],O-1))}catch{}return U.length?U:j=="string"?M:M+"\0"}function T(M,O){for(var U=M+"",j,z=0;z<U.length;)O[l&z]=l&(j^=O[l&z]*19)+U.charCodeAt(z++);return $(O)}function A(){try{var M;return d&&(M=d.randomBytes)?M=M(r):(M=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(M)),$(M)}catch{var O=t.navigator,U=O&&O.plugins;return[+new Date,t,U,t.screen,$(e)]}}function $(M){return String.fromCharCode.apply(0,M)}if(T(n.random(),e),typeof Bh=="object"&&Bh.exports){Bh.exports=p;try{d=bR()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+s]=p})(typeof self<"u"?self:ER,[],Math)});var IR=Cn((xDe,xR)=>{"use strict";var c9=cR(),l9=fR(),f9=pR(),d9=mR(),p9=yR(),h9=wR(),Ws=DR();Ws.alea=c9;Ws.xor128=l9;Ws.xorwow=f9;Ws.xorshift7=d9;Ws.xor4096=p9;Ws.tychei=h9;xR.exports=Ws});var wI={};Re(wI,{TEST_EPSILON_FLOAT16:()=>SR,createVideoElement:()=>D9,encodeStrings:()=>TR,expectArrayBuffersEqual:()=>E9,expectArraysClose:()=>g9,expectArraysEqual:()=>v9,expectNumbersClose:()=>w9,expectPromiseToFail:()=>y9,expectValuesInRange:()=>b9,play:()=>x9,testEpsilon:()=>yI});function g9(t,e,n){return n==null&&(n=yI()),gI(t,e,(r,o)=>vI(r,o,n))}function yI(){return E.backend.floatPrecision()===32?m9:SR}function gI(t,e,n){let r=!0;if((pt(t)||pt(e))&&(r=!1),pt(t)&&pt(e)&&(r=!0),r){let s=t.constructor.name,a=e.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){let s=Gt(t),a=Gt(e);if(!sn(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=pt(t)?t:kr(t),i=pt(e)?e:kr(e);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],u=i[s];if(!n(a,u))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${u}.
Actual:   ${o}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function y9(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function v9(t,e){let n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Ar(t)||Ar(t[0])||Ar(e)||Ar(e[0])?gI(t,n,(r,o)=>r==o):gI(t,e,(r,o)=>vI(r,o,0))}function w9(t,e,n){if(n==null&&(n=yI()),!vI(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function vI(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function b9(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function E9(t,e){let n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let o=0;o<r.length;o++)if(n[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${n[o]} instead`)}function TR(t){for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?TR(n):t[e]=Ii(n)}return t}function D9(t){let e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}function x9(t){return G(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(e=>{t.requestVideoFrameCallback(e)}))})}var m9,SR,NR=D(()=>{"use strict";P();R();H();m9=.001,SR=.1});var Gh,qs,Uh,Hh,tf=D(()=>{"use strict";Gh=Hf(IR());qs=class{constructor(e,n,r,o,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=Gh.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},Uh=class{constructor(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;let i=o||Math.random();this.randu=Gh.alea(i.toString()),this.randn=new qs(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,e=o*o,n=1-.331*e*e,r=.5*e+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},Hh=class{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Gh.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function I9(t,e,n=1,r="float32",o){if(Je(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new Uh(e,n,r,o),s=Wt(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var bI,CR=D(()=>{"use strict";Tt();Ho();k();tf();bI=w({randomGamma_:I9})});function S9(t,e=0,n=1,r,o){if(Je(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new qs(e,n,r,!1,o),s=Wt(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var nf,EI=D(()=>{"use strict";Tt();Ho();k();tf();nf=w({randomNormal_:S9})});function T9(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return nf(t,0,1,e,n)}var DI,_R=D(()=>{"use strict";k();EI();DI=w({randomStandardNormal_:T9})});function N9(t,e=0,n=1,r="float32",o){Je(t);let i=Wt(t,r),s=new Hh(e,n,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var Ks,zh=D(()=>{"use strict";Tt();Ho();k();tf();Ks=w({randomUniform_:N9})});function C9(t,e,n,r){return Ks(t,e,n,"int32",r)}var xI,AR=D(()=>{"use strict";k();zh();xI=w({randomUniformInt_:C9})});function hr(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let o={start:t,stop:e,step:n,dtype:r};return E.runKernel(zb,{},o)}var Wh=D(()=>{"use strict";P();V();});function _9(t){let n={input:y(t,"input","real")};return E.runKernel(Wb,n)}var yo,rf=D(()=>{"use strict";P();V();R();k();yo=w({real_:_9})});function A9(t){let n={x:y(t,"x","reciprocal")};return E.runKernel(qb,n)}var II,MR=D(()=>{"use strict";P();V();R();k();II=w({reciprocal_:A9})});function M9(t){let n={x:y(t,"x","relu")};return E.runKernel(Kb,n)}var ti,of=D(()=>{"use strict";P();V();R();k();ti=w({relu_:M9})});function k9(t){let n={x:y(t,"x","relu6")};return E.runKernel(Xb,n)}var sf,SI=D(()=>{"use strict";P();V();R();k();sf=w({relu6_:k9})});function O9(t,e){let r={x:y(t,"x","reverse")},o={dims:e};return E.runKernel(Jb,r,o)}var jn,Zs=D(()=>{"use strict";P();V();R();k();jn=w({reverse_:O9})});function R9(t){let e=y(t,"x","reverse");return I(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),jn(e,0)}var TI,kR=D(()=>{"use strict";R();H();k();Zs();TI=w({reverse1d_:R9})});function F9(t,e){let n=y(t,"x","reverse");return I(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),jn(n,e)}var NI,OR=D(()=>{"use strict";R();H();k();Zs();NI=w({reverse2d_:F9})});function P9(t,e){let n=y(t,"x","reverse");return I(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),jn(n,e)}var CI,RR=D(()=>{"use strict";R();H();k();Zs();CI=w({reverse3d_:P9})});function $9(t,e){let n=y(t,"x","reverse");return I(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),jn(n,e)}var _I,FR=D(()=>{"use strict";R();H();k();Zs();_I=w({reverse4d_:$9})});function L9(t){let n={x:y(t,"x","round")};return E.runKernel(eE,n)}var af,AI=D(()=>{"use strict";P();V();R();k();af=w({round_:L9})});function V9(t){let n={x:y(t,"x","rsqrt","float32")};return E.runKernel(tE,n)}var MI,PR=D(()=>{"use strict";P();V();R();k();MI=w({rsqrt_:V9})});function j9(t){let n={x:y(t,"x","selu")};return E.runKernel(sE,n)}var kI,$R=D(()=>{"use strict";P();V();R();k();kI=w({selu_:j9})});function B9(t,e,n,r,o,i=[1,1],s="NHWC"){let a=y(t,"x","separableConv2d"),u=y(e,"depthwiseFilter","separableConv2d"),c=y(n,"pointwiseFilter","separableConv2d"),l=a,d=!1;if(a.rank===3&&(d=!0,l=L(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");I(l.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`),I(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),I(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),I(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),I(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=u.shape[2],m=u.shape[3];I(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);let b=Hs(l,u,r,o,s,i),T=Wo(b,c,1,"valid",s);return d?L(T,[T.shape[1],T.shape[2],T.shape[3]]):T}var OI,LR=D(()=>{"use strict";R();H();Al();Nh();k();De();OI=w({separableConv2d_:B9})});function U9(t,e){return G(this,null,function*(){let n=y(t,"x","setdiff1d"),r=y(e,"y","setdiff1d");I(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),I(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),I(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield n.data(),i=yield r.data(),s=new Set(i),a=0;for(let l=0;l<o.length;l++)s.has(o[l])||a++;let u=new Lo([a],n.dtype),c=new Lo([a],"int32");for(let l=0,d=0;l<o.length;l++)s.has(o[l])||(u.values[d]=o[l],c.values[d]=l,d++);return[u.toTensor(),c.toTensor()]})}var RI,VR=D(()=>{"use strict";Yn();R();H();RI=U9});function H9(t){let n={x:y(t,"x","sign")};return E.runKernel(lE,n)}var FI,jR=D(()=>{"use strict";P();V();R();k();FI=w({sign_:H9})});function G9(t){let n={x:y(t,"x","sin","float32")};return E.runKernel(uE,n)}var PI,BR=D(()=>{"use strict";P();V();R();k();PI=w({sin_:G9})});function z9(t){let n={x:y(t,"x","sinh")};return E.runKernel(cE,n)}var $I,UR=D(()=>{"use strict";P();V();R();k();$I=w({sinh_:z9})});function W9(t,e,n){let r=y(t,"x","slice1d");return I(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Te(r,[e],[n])}var LI,HR=D(()=>{"use strict";R();H();k();pr();LI=w({slice1d_:W9})});function q9(t,e,n){let r=y(t,"x","slice2d");return I(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Te(r,e,n)}var VI,GR=D(()=>{"use strict";R();H();k();pr();VI=w({slice2d_:q9})});function K9(t,e,n){let r=y(t,"x","slice3d");return I(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Te(r,e,n)}var jI,zR=D(()=>{"use strict";R();H();k();pr();jI=w({slice3d_:K9})});function Z9(t,e,n){let r=y(t,"x","slice4d");return I(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Te(r,e,n)}var BI,WR=D(()=>{"use strict";R();H();k();pr();BI=w({slice4d_:Z9})});function Y9(t,e=-1){let n=y(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);let r={logits:n},o={dim:e};return E.runKernel(yE,r,o)}var UI,qR=D(()=>{"use strict";P();V();R();k();UI=w({softmax_:Y9})});function Q9(t){I(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let e={input:t};return E.runKernel(q0,e)}var Ys,qh=D(()=>{"use strict";P();V();H();k();Ys=w({fft_:Q9})});function X9(t){I(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let e={input:t};return E.runKernel(rb,e)}var Pi,Kh=D(()=>{"use strict";P();V();H();k();Pi=w({ifft_:X9})});function J9(t){let e=t.shape[t.shape.length-1],n=t.size/e,r;if(e<=2){let o=L(t,[n,e]);r=Pi(o)}else{let o=[n,2*(e-1)],i=L(yo(t),[n,e]),s=L(Xo(t),[n,e]),a=jn(Te(i,[0,1],[n,e-2]),1),u=W(jn(Te(s,[0,1],[n,e-2]),1),ae(-1)),c=Ye([i,a],1),l=Ye([s,u],1),d=L(un(c,l),[o[0],o[1]]);r=Pi(d)}if(r=yo(r),t.rank===3&&t.shape[0]!==0){let o=r,i=t.shape[0];r=L(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var uf,HI=D(()=>{"use strict";Si();Fr();Vl();nt();k();rf();De();Zs();tn();pr();Kh();uf=w({irfft_:J9})});function eK(t,e,n=0){let o={x:y(t,"x","split")},i={numOrSizeSplits:e,axis:n};return E.runKernel(gE,o,i)}var vo,cf=D(()=>{"use strict";P();V();R();k();vo=w({split_:eK})});function tK(t,e){I(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],r=t.size/n,o;if(e!=null&&e<n){let b=t.shape.map(T=>0),S=t.shape.map(T=>T);S[t.shape.length-1]=e,o=Te(t,b,S),n=e}else if(e!=null&&e>n){let b=t.shape.map(S=>S);b[t.shape.length-1]=e-n,o=Ye([t,Vr(b)],t.shape.length-1),n=e}else o=t;let i=wt(o),s=L(un(o,i),[r,n]),a=Ys(s),u=Math.floor(n/2)+1,c=yo(a),l=Xo(a),d=vo(c,[u,n-u],c.shape.length-1),p=vo(l,[u,n-u],l.shape.length-1),m=o.shape.slice();return m[o.shape.length-1]=u,L(un(d[0],p[0]),m)}var Qs,Zh=D(()=>{"use strict";H();Si();Fr();Vl();k();rf();De();pr();cf();Zl();qo();qh();Qs=w({rfft_:tK})});function nK(t,e){let n=y(t,"a","squaredDifference"),r=y(e,"b","squaredDifference");[n,r]=be(n,r),$e(n.shape,r.shape);let o={a:n,b:r},i={};return E.runKernel(xE,o,i)}var lf,GI=D(()=>{"use strict";P();V();tt();R();_t();k();lf=w({squaredDifference_:nK})});function rK(t,e){let n=y(t,"x","squeeze","string_or_numeric");return L(n,Gw(n.shape,e).newShape)}var dn,Yh=D(()=>{"use strict";R();H();k();De();dn=w({squeeze_:rK})});function oK(t,e=0){let n=Vo(t,"tensors","stack","string_or_numeric");I(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&I(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,o={axis:e};return E.runKernel($b,r,o)}var rn,ff=D(()=>{"use strict";P();V();R();H();k();rn=w({stack_:oK})});function iK(t,e=0){let r={x:y(t,"x","step")},o={alpha:e};return E.runKernel(LE,r,o)}var df,zI=D(()=>{"use strict";P();V();R();k();df=w({step_:iK})});function sK(t,e,n,r,o=0,i=0,s=0,a=0,u=0){let l={x:y(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:u};return E.runKernel(SE,l,d)}var WI,KR=D(()=>{"use strict";P();V();R();k();WI=w({stridedSlice_:sK})});function aK(t){let n={x:y(t,"x","tan","float32")};return E.runKernel(AE,n)}var qI,ZR=D(()=>{"use strict";P();V();R();k();qI=w({tan_:aK})});function kt(t,e){Zn(t);let n=Gt(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return cn(t,null,n,e)}var $i=D(()=>{"use strict";R();H();jo();});function Br(t,e,n){if(Zn(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=Gt(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return cn(t,e,r,n)}var Qh=D(()=>{"use strict";R();H();jo();});function pf(t,e,n){if(Zn(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=Gt(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return cn(t,e,r,n)}var KI=D(()=>{"use strict";R();H();jo();});function ZI(t,e,n){if(Zn(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=Gt(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return cn(t,e,r,n)}var YR=D(()=>{"use strict";R();H();jo();});function YI(t,e,n){if(Zn(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=Gt(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return cn(t,e,r,n)}var QR=D(()=>{"use strict";R();H();jo();});function QI(t,e,n){if(Zn(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=Gt(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,cn(t,e,r,n)}var XR=D(()=>{"use strict";R();H();jo();});var hf={};Re(hf,{calculateShapes:()=>JR,validateInput:()=>Vu,validateUpdateShape:()=>XI});function XI(t,e,n){let r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(i+` update.rank != ${o+t.length-r}`);for(let s=0;s<o;++s)if(n.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-o;++s)if(n.shape[s+o]!==t[s+r])throw new Error(i+` updates.shape[${s+o}] (${n.shape[s+o]}) != shape[${s+o}] (${t[s+o]})`)}function Vu(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}XI(n,e,t)}function JR(t,e,n){let r=e.shape.length,o=r>1?e.shape[r-1]:1,i=n.length,s=1;for(let d=o;d<i;++d)s*=n[d];let a=o<1?1:o,u=xe(e.shape)/a,c=[...ao(n.slice(0,o)),1],l=xe(n);return{sliceRank:o,numUpdates:u,sliceSize:s,strides:c,outputSize:l}}var mf=D(()=>{"use strict";H()});function uK(t,e,n){let r=y(t,"tensor","tensorScatterupdate"),o=y(e,"indices","tensorScatterupdate","int32"),i=y(n,"updates","tensorScatterupdate");if(Vu(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return E.runKernel(rE,s,a)}var JI,eF=D(()=>{"use strict";P();V();R();k();mf();JI=w({tensorScatterUpdate_:uK})});function cK(t,e=1,n=!0){let r=y(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);let i={x:r},s={k:e,sorted:n},[a,u]=E.runKernel(kE,i,s);return{values:a,indices:u}}var eS,tF=D(()=>{"use strict";P();V();R();k();eS=w({topk_:cK})});function lK(t,e=0,n=1,r,o){if(Je(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new qs(e,n,r,!0,o),s=Wt(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var tS,nF=D(()=>{"use strict";Tt();Ho();k();tf();tS=w({truncatedNormal_:lK})});function fK(t,e=0){let n=y(t,"x","unique","string_or_numeric");I(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},o={axis:e},[i,s]=E.runKernel(RE,r,o);return{values:i,indices:s}}var nS,rF=D(()=>{"use strict";P();V();R();H();k();nS=w({unique_:fK})});function dK(t,e,n){let r=y(t,"x","unsortedSegmentSum"),o=y(e,"segmentIds","unsortedSegmentSum","int32");I($o(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:n};return E.runKernel(PE,i,s)}var rS,oF=D(()=>{"use strict";P();V();R();H();k();rS=w({unsortedSegmentSum_:dK})});function pK(t,e=0){let n=y(t,"x","unstack","string_or_numeric");I(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},o={axis:e};return E.runKernel(FE,r,o)}var Bn,Xh=D(()=>{"use strict";P();V();R();H();k();Bn=w({unstack_:pK})});function oS(t,e){return $u(t,e,"right")}var iF=D(()=>{"use strict";$h();});function iS(t,e=!0,n,r){return E.makeVariable(t,e,n,r)}var sF=D(()=>{"use strict";P();});function Jh(t,e){let n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);let r=Wt(t,"int32"),o=Wt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),a=i*t.length;o.values.set(s,a)}return o.toTensor()}var sS=D(()=>{"use strict";Ho();});function hK(t){return G(this,null,function*(){let e=y(t,"condition","whereAsync","bool"),n=yield e.data(),r=Jh(e.shape,n);return t!==e&&e.dispose(),r})}var gf,aS=D(()=>{"use strict";sS();R();gf=hK});function mK(t,e,n){return G(this,null,function*(){let r=y(t,"tensor","boolMask"),o=y(e,"mask","boolMask","bool"),i=n??0,s=o.rank,a=r.shape;I(s>0,()=>"mask cannot be scalar"),Qe(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let S=i;S<i+s;S++)u*=a[S];let c=a.slice(0,i).concat([u],a.slice(i+s)),l=L(r,c),d=L(o,[-1]),p=yield gf(d),m=dn(p,[1]),b=$l(l,m,i);return t!==r&&r.dispose(),e!==o&&o.dispose(),m.dispose(),l.dispose(),d.dispose(),p.dispose(),b})}var aF,uF=D(()=>{"use strict";R();H();Dx();De();Yh();aS();aF=mK});function gK(t,e,n){let r=y(t,"x","transpose");if(e==null&&(e=r.shape.map((s,a)=>a).reverse()),I(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{I(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:e};return r.dtype==="complex64"?se(()=>{let s=yo(r),a=Xo(r);return s=E.runKernel(ul,{x:s},i),a=E.runKernel(ul,{x:a},i),n&&(a=jt(a)),un(s,a)}):E.runKernel(ul,o,i)}var Xs,em=D(()=>{"use strict";P();Ln();V();R();H();Si();Vl();ei();k();rf();Xs=w({transpose_:gK})});function yK(t,e,n,r,o=!0){let i=y(t,"v","movingAverage"),s=y(e,"x","movingAverage"),a=y(n,"decay","movingAverage");YE(i,s),I(sn(i.shape,s.shape),()=>"Shape mismatch in v and x");let u=ae(1),c=ue(u,a),l=W(ue(s,i),c);if(o){I(r!=null,()=>"When using zeroDebias: true, step is required.");let d=y(r,"step","movingAverage");l=Se(l,ue(u,ho(a,d)))}return ne(i,l)}var cF,lF=D(()=>{"use strict";tt();R();H();Et();xn();nt();k();Ol();tn();Mt();cF=w({movingAverage_:yK})});function vK(t,e,n){Je(n);let r=y(t,"indices","scatterND","int32"),o=y(e,"updates","scatterND");Vu(o,r,n);let i={indices:r,updates:o},s={shape:n};return E.runKernel(nE,i,s)}var fF,dF=D(()=>{"use strict";P();V();R();Tt();k();mf();fF=w({scatterND_:vK})});function pF(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let o=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);let s=e.size;if(!(e.rank===0||e.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${o}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var hF=D(()=>{"use strict"});function bK(t,e,n,r=0){Je(n);let o=y(t,"sparseIndices","sparseToDense","int32"),i=y(e,"sparseValues","sparseToDense","string_or_numeric"),s=y(r,"defaultValue","sparseToDense",i.dtype);pF(o,i,n,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},u={outputShape:n};return E.runKernel(DE,a,u)}var mF,gF=D(()=>{"use strict";P();V();hF();R();Tt();k();mF=w({sparseToDense_:bK})});function EK(t,e){let n=y(e,"indices","gatherND","int32"),o={params:y(t,"x","gatherND","string_or_numeric"),indices:n};return E.runKernel(eb,o)}var yF,vF=D(()=>{"use strict";P();V();R();k();yF=w({gatherND_:EK})});function wF(t,e){if(e==null)return t.shape.slice();if(sn(t.shape,e))return e;if(t.shape.length===e.length){let n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}var bF=D(()=>{"use strict";H();});function DK(t,e,n,r){let o=y(t,"x","dropout");if(I(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),I(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof _e?o.clone():o;let i=wF(o,n),s=1-e,a=Se(Pl(ne(Ks(i,0,1,"float32",r),s)),s);return W(o,a)}var EF,DF=D(()=>{"use strict";Yn();R();H();Et();xn();bF();Ex();nt();k();zh();EF=w({dropout_:DK})});function tm(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function ju(t,e,n){let r=1-t%2,o=new Float32Array(t);for(let i=0;i<t;++i){let s=2*Math.PI*i/(t+r-1);o[i]=e-n*Math.cos(s)}return kt(o,"float32")}var yf=D(()=>{"use strict";$i();});function xK(t,e,n=1){return G(this,null,function*(){let r=y(t,"predictions","inTopK"),o=y(e,"targets","inTopK");I(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),I(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),Qe(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];I(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);let s=yield r.data(),a=yield o.data(),[u,c]=[s.length/i,i],l=zw("bool",u);for(let d=0;d<u;d++){let p=d*c,m=s.subarray(p,p+c),b=[];for(let S=0;S<m.length;S++)b.push({value:m[S],index:S});b.sort((S,T)=>T.value-S.value),l[d]=0;for(let S=0;S<n;S++)if(b[S].index===a[d]){l[d]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),Lt(l,o.shape,"bool")})}var xF,IF=D(()=>{"use strict";R();H();gl();xF=xK});function IK(t,e,n,r,o,i="NHWC",s){let a=t;t.rank===3&&(a=L(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=L(e,[1,e.shape[0],e.shape[1],e.shape[2]])),I(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),I(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),I(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],l=i==="NHWC"?u.shape[3]:u.shape[1];I(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),I(l===n[3],()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${n[3]}).`),gt("conv2dDerFilter",o,s);let d={x:a,dy:u},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return E.runKernel(x0,d,p)}var SF,TF=D(()=>{"use strict";P();V();H();In();k();De();SF=w({conv2DBackpropFilter_:IK})});function Js(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return W(t,df(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function ea(t,e){let n=e,r=Ch(t.shape,e.shape);return r.length>0&&(n=Le(n,r)),L(n,t.shape)}function ta(t,e,n,r){if(e==="linear")return t;if(e==="relu")return ti(t);if(e==="elu")return Ml(t);if(e==="relu6")return sf(t);if(e==="prelu")return ef(t,n);if(e==="leakyrelu")return jl(t,r);if(e==="sigmoid")return Sn(t);throw new Error(`Unknown fused activation ${e}.`)}var na,Bu=D(()=>{"use strict";_t();px();Nx();nt();oI();of();SI();De();Tl();zI();Lr();na=(t,e)=>!(t>0)||e==="linear"});function SK({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:l}){if(u=u||"linear",na(E.state.gradientDepth,u)===!1){I(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let j=Wo(t,e,n,r,o,i,s);return a!=null&&(j=ne(j,a)),ta(j,u,c,l)}let d=y(t,"x","conv2d","float32"),p=y(e,"filter","conv2d","float32"),m=d,b=!1;d.rank===3&&(b=!0,m=L(d,[1,d.shape[0],d.shape[1],d.shape[2]])),I(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),I(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),gt("fused conv2d",r,s);let S=o==="NHWC"?m.shape[3]:m.shape[1];I(p.shape[2]===S,()=>`Error in conv2d: depth of input (${S}) must match input depth for filter ${p.shape[2]}.`),I(en(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let T=Bs(m.shape,p.shape,n,i,r,s),A;a!=null&&(A=y(a,"bias","fused conv2d"),[A]=be(A,d),o==="NHWC"?$e(T.outShape,A.shape):(I(A.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${A.shape.length}.`),I(A.shape.length===0||A.shape[0]===T.outChannels||A.shape[0]===1,()=>`Error in fused conv2d: bias shape (${A.shape}) is not compatible with the number of output channels (${T.outChannels})`)));let $;if(c!=null){let j=c.shape;if(I(j.length<=1||j.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${j.length}.`),j.length===1)I(j[0]===1||j[0]===T.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${j}) is not compatible with the number of output channels (${T.outChannels}).`);else if(j.length===3)try{$e(j,T.outShape)}catch{let Z=`Error in fused conv2d: PReLU activation weights (${j}) is not compatible with the output shape of the conv2d (${T.outShape}).`;throw Error(Z)}$=y(c,"prelu weights","fused conv2d")}let M=(j,z)=>{I(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[Z,Q,X,K]=z,he=Js(j,X,u);I(js(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let le=Th(Q.shape,he,Z,n,r),Ae=SF(Q,he,Z.shape,n,r),Me=[le,Ae];if(K!=null){let at=ea(K,he);Me.push(at)}return Me},O={x:m,filter:p,bias:A,preluActivationWeights:$},U={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:l};return a==null?nn((z,Z,Q)=>{let X=E.runKernel(oh,O,U);return Q([Z,z,X]),b&&(X=L(X,[X.shape[1],X.shape[2],X.shape[3]])),{value:X,gradFunc:M}})(m,p):nn((z,Z,Q,X)=>{let K=E.runKernel(oh,O,U);return X([Z,z,K,Q]),b&&(K=L(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:M}})(m,p,A)}var NF,CF=D(()=>{"use strict";P();Jo();V();tt();R();H();Et();_t();Al();TF();QD();In();Bu();k();De();NF=w({fusedConv2d_:SK})});function TK(t,e,n,r,o,i=[1,1],s){let a=t;t.rank===3&&(a=L(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=L(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={x:a,dy:u},l={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return E.runKernel(F0,c,l)}var _F,AF=D(()=>{"use strict";P();V();k();De();_F=w({depthwiseConv2dNativeBackpropFilter_:TK})});function NK(t,e,n,r,o,i=[1,1],s){let a=e,u=!1;e.rank===3&&(u=!0,a=L(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={dy:a,filter:n},l={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:t},d=E.runKernel(P0,c,l);return u?L(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var MF,kF=D(()=>{"use strict";P();V();k();De();MF=w({depthwiseConv2dNativeBackpropInput_:NK})});function CK({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:l}){if(na(E.state.gradientDepth,u)===!1){let U=Hs(t,e,n,r,o,i,s);return a!=null&&(U=ne(U,a)),ta(U,u,c,l)}let d=y(t,"x","depthwiseConv2d","float32"),p=y(e,"filter","depthwiseConv2d","float32"),m=d,b=!1;d.rank===3&&(b=!0,m=L(d,[1,d.shape[0],d.shape[1],d.shape[2]])),I(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),I(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),I(m.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),I(en(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),gt("fused depthwiseConv2d",r,s);let S=Bs(m.shape,p.shape,n,i,r,s,!0),T;a!=null&&(T=y(a,"bias","fused conv2d"),[T]=be(T,d),$e(S.outShape,T.shape));let A;c!=null&&(A=y(c,"prelu weights","fused depthwiseConv2d"));let $=(U,j)=>{I(js(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[z,Z,Q,X]=j,K=Js(U,Q,u),he=MF(Z.shape,K,z,n,r,i,s),le=_F(Z,K,z.shape,n,r,i,s);if(X!=null){let Ae=ea(T,K);return[he,le,Ae]}return[he,le]},M={x:m,filter:p,bias:T,preluActivationWeights:A},O={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:l};return a==null?nn((j,z,Z)=>{let Q=E.runKernel(ih,M,O);return Z([z,j,Q]),b&&(Q=L(Q,[Q.shape[1],Q.shape[2],Q.shape[3]])),{value:Q,gradFunc:$}})(m,p):nn((j,z,Z,Q)=>{let X=E.runKernel(ih,M,O);return Q([z,j,X,Z]),b&&(X=L(X,[X.shape[1],X.shape[2],X.shape[3]])),{value:X,gradFunc:$}})(m,p,T)}var OF,RF=D(()=>{"use strict";P();Jo();V();tt();R();H();Et();_t();In();Nh();AF();kF();Bu();k();De();OF=w({fusedDepthwiseConv2d_:CK})});function _K({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(na(E.state.gradientDepth,i)===!1){let K=Ne(t,e,n,r);return o!=null&&(K=ne(K,o)),ta(K,i,s,a)}let u=y(t,"a","fused matMul"),c=y(e,"b","fused matMul");[u,c]=be(u,c);let l=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?u.shape[u.rank-1]:u.shape[u.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],b=u.shape.slice(0,-2),S=c.shape.slice(0,-2),T=xe(b),A=xe(S);I(l===d,()=>`Error in fused matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);let M=$e(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),O=n?L(u,[T,l,p]):L(u,[T,p,l]),U=r?L(c,[A,m,d]):L(c,[A,d,m]),j;o!=null&&(j=y(o,"bias","fused matMul"),[j]=be(j,u),$e(M,j.shape));let z;s!=null&&(z=y(s,"prelu weights","fused matMul"));let Z=(K,he)=>{let[le,Ae,Me,at]=he,dt=Js(L(K,Me.shape),Me,i),Bt,Dt;if(!n&&!r?(Bt=Ne(dt,Ae,!1,!0),Dt=Ne(le,dt,!0,!1)):!n&&r?(Bt=Ne(dt,Ae,!1,!1),Dt=Ne(dt,le,!0,!1)):n&&!r?(Bt=Ne(Ae,dt,!1,!0),Dt=Ne(le,dt,!1,!1)):(Bt=Ne(Ae,dt,!0,!0),Dt=Ne(dt,le,!0,!0)),o!=null){let xo=ea(at,dt);return[Bt,Dt,xo]}else return[Bt,Dt]},Q={a:O,b:U,bias:j,preluActivationWeights:z},X={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?nn((he,le,Ae)=>{let Me=E.runKernel(rh,Q,X);return Ae([he,le,Me]),{value:L(Me,M),gradFunc:Z}})(O,U):nn((he,le,Ae,Me)=>{let at=E.runKernel(rh,Q,X);return Me([he,le,at,Ae]),{value:L(at,M),gradFunc:Z}})(O,U,j)}var FF,PF=D(()=>{"use strict";P();Jo();V();tt();R();H();Et();_t();Bu();Go();k();De();FF=w({fusedMatMul_:_K})});var nm={};Re(nm,{conv2d:()=>NF,depthwiseConv2d:()=>OF,matMul:()=>FF});var $F=D(()=>{"use strict";CF();RF();PF();});function AK(t){return ju(t,.54,.46)}var LF,VF=D(()=>{"use strict";k();yf();LF=w({hammingWindow_:AK})});function MK(t){return ju(t,.5,.5)}var rm,uS=D(()=>{"use strict";k();yf();rm=w({hannWindow_:MK})});function kK(t,e,n,r=!1,o=0){let i=0,s=[];for(;i+e<=t.size;)s.push(Te(t,i,e)),i+=n;if(r)for(;i<t.size;){let a=i+e-t.size,u=Ye([Te(t,i,e-a),Pr([a],o)]);s.push(u),i+=n}return s.length===0?Br([],[0,e]):L(Ye(s),[s.length,e])}var om,cS=D(()=>{"use strict";Fr();Au();k();De();pr();Qh();om=w({frame_:kK})});function OK(t,e,n,r,o=rm){r==null&&(r=tm(e));let i=om(t,e,n),s=W(i,o(e));return Qs(s,r)}var jF,BF=D(()=>{"use strict";nt();k();yf();Zh();cS();uS();jF=w({stft_:OK})});function RK(t,e,n,r,o="bilinear",i=0){let s=y(t,"image","cropAndResize"),a=y(e,"boxes","cropAndResize","float32"),u=y(n,"boxInd","cropAndResize","int32"),c=a.shape[0];I(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),I(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),I(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),I(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),I(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),I(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let l={image:s,boxes:a,boxInd:u},d={method:o,extrapolationValue:i,cropSize:r};return E.runKernel(M0,l,d)}var UF,HF=D(()=>{"use strict";P();V();R();H();k();UF=w({cropAndResize_:RK})});function FK(t){let e=y(t,"image","flipLeftRight","float32");I(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);let n={image:e};return E.runKernel(Z0,n,{})}var GF,zF=D(()=>{"use strict";P();V();R();H();k();GF=w({flipLeftRight_:FK})});function PK(t){let e=y(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];I(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),I(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,Qo(e,o)}var WF,qF=D(()=>{"use strict";R();H();k();Ah();WF=w({grayscaleToRGB_:PK})});function $K(t){let e=y(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];I(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),I(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=e.dtype,i=me(e,"float32"),s=kt([.2989,.587,.114]),a;switch(e.rank){case 2:a=Ko("ij,j->i",i,s);break;case 3:a=Ko("ijk,k->ij",i,s);break;case 4:a=Ko("ijkl,l->ijk",i,s);break;case 5:a=Ko("ijklm,m->ijkl",i,s);break;case 6:a=Ko("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=Vt(a,-1),me(a,o)}var KF,ZF=D(()=>{"use strict";R();H();qt();dx();_h();k();$i();KF=w({rgbToGrayscale_:$K})});function LK(t,e,n=0,r=.5){let o=y(t,"image","rotateWithOffset","float32");I(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:e,fillValue:n,center:r};return E.runKernel(VE,i,s)}var YF,QF=D(()=>{"use strict";P();V();R();H();k();YF=w({rotateWithOffset_:LK})});function mr(t,e,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=t.shape[0];return n=Math.min(n,s),I(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),I(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),I(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),I(e.rank===1,()=>"scores must be a 1D tensor"),I(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),I(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var ra=D(()=>{"use strict";H();});function VK(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=y(t,"boxes","nonMaxSuppression","float32"),s=y(e,"scores","nonMaxSuppression","float32"),a=mr(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return E.runKernel(kb,{boxes:i,scores:s},u)}var XF,JF=D(()=>{"use strict";P();V();R();ra();k();XF=w({nonMaxSuppression_:VK})});function e2(t,e,n){let r=jK(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function jK(t,e,n){return UK(t,e,n||BK)}function BK(t,e){return t>e?1:t<e?-1:0}function UK(t,e,n){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=n(e,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}var t2=D(()=>{"use strict";});function im(t,e,n,r,o){return lS(t,e,n,r,o,0)}function sm(t,e,n,r,o,i){return lS(t,e,n,r,o,0,!1,i,!0)}function am(t,e,n,r,o,i){return lS(t,e,n,r,o,i,!0)}function lS(t,e,n,r,o,i,s=!1,a=!1,u=!1){let c=[];for(let T=0;T<e.length;T++)e[T]>o&&c.push({score:e[T],boxIndex:T,suppressBeginIndex:0});c.sort(n2);let l=i>0?-.5/i:0,d=[],p=[];for(;d.length<n&&c.length>0;){let T=c.pop(),{score:A,boxIndex:$,suppressBeginIndex:M}=T;if(A<o)break;let O=!1;for(let U=d.length-1;U>=M;--U){let j=HK(t,$,d[U]);if(j>=r){O=!0;break}if(T.score=T.score*GK(r,l,j),T.score<=o)break}T.suppressBeginIndex=d.length,O||(T.score===A?(d.push($),p.push(T.score)):T.score>o&&e2(c,T,n2))}let m=d.length,b=n-m;a&&b>0&&(d.push(...new Array(b).fill(0)),p.push(...new Array(b).fill(0)));let S={selectedIndices:d};return s&&(S.selectedScores=p),u&&(S.validOutputs=m),S}function HK(t,e,n){let r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(a-i)*(u-s),b=(d-c)*(p-l);if(m<=0||b<=0)return 0;let S=Math.max(i,c),T=Math.max(s,l),A=Math.min(a,d),$=Math.min(u,p),M=Math.max(A-S,0)*Math.max($-T,0);return M/(m+b-M)}function GK(t,e,n){let r=Math.exp(e*n*n);return n<=t?r:0}function n2(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}var vf=D(()=>{"use strict";t2();});function zK(i,s,a){return G(this,arguments,function*(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let u=y(t,"boxes","nonMaxSuppressionAsync"),c=y(e,"scores","nonMaxSuppressionAsync"),l=mr(u,c,n,r,o);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold;let d=yield Promise.all([u.data(),c.data()]),p=d[0],m=d[1],{selectedIndices:b}=im(p,m,n,r,o);return u!==t&&u.dispose(),c!==e&&c.dispose(),kt(b,"int32")})}var r2,o2=D(()=>{"use strict";vf();R();ra();$i();r2=zK});function WK(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),u=mr(s,a,n,r,o,i);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma;let c={boxes:s,scores:a},l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},d=E.runKernel(Rb,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}var i2,s2=D(()=>{"use strict";P();V();R();ra();k();i2=w({nonMaxSuppressionWithScore_:WK})});function qK(s,a,u){return G(this,arguments,function*(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let c=y(t,"boxes","nonMaxSuppressionAsync"),l=y(e,"scores","nonMaxSuppressionAsync"),d=mr(c,l,n,r,o,i);n=d.maxOutputSize,r=d.iouThreshold,o=d.scoreThreshold,i=d.softNmsSigma;let p=yield Promise.all([c.data(),l.data()]),m=p[0],b=p[1],{selectedIndices:S,selectedScores:T}=am(m,b,n,r,o,i);return c!==t&&c.dispose(),l!==e&&l.dispose(),{selectedIndices:kt(S,"int32"),selectedScores:kt(T)}})}var a2,u2=D(()=>{"use strict";vf();R();ra();$i();a2=qK});function KK(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),u=mr(s,a,n,r,o,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,p={boxes:s,scores:a},m={maxOutputSize:c,iouThreshold:l,scoreThreshold:d,padToMaxOutputSize:i},b=E.runKernel(Ob,p,m);return{selectedIndices:b[0],validOutputs:b[1]}}var c2,l2=D(()=>{"use strict";P();V();R();ra();k();c2=w({nonMaxSuppressionPadded_:KK})});function ZK(s,a,u){return G(this,arguments,function*(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let c=y(t,"boxes","nonMaxSuppressionAsync"),l=y(e,"scores","nonMaxSuppressionAsync"),d=mr(c,l,n,r,o,null),p=d.maxOutputSize,m=d.iouThreshold,b=d.scoreThreshold,[S,T]=yield Promise.all([c.data(),l.data()]),{selectedIndices:A,validOutputs:$}=sm(S,T,p,m,b,i);return c!==t&&c.dispose(),l!==e&&l.dispose(),{selectedIndices:kt(A,"int32"),validOutputs:ae($,"int32")}})}var f2,d2=D(()=>{"use strict";vf();R();ra();tn();$i();f2=ZK});function YK(t,e,n=!1,r=!1){let o=y(t,"images","resizeBilinear");I(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),I(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),I(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=L(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},c=E.runKernel(Qb,a,u);return s?L(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var p2,h2=D(()=>{"use strict";P();V();R();H();k();De();p2=w({resizeBilinear_:YK})});function QK(t,e,n=!1,r=!1){let o=y(t,"images","resizeNearestNeighbor");I(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),I(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),I(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),I(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=L(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},c=E.runKernel(Yb,a,u);return s?L(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var m2,g2=D(()=>{"use strict";P();V();R();H();k();De();m2=w({resizeNearestNeighbor_:QK})});function XK(t,e="binary",n=!1,r=.5){let o=y(t,"image","threshold"),i=.2989,s=.587,a=.114,u=o.shape[0]*o.shape[1],c=W(kt([r]),255),l,d,p,m;if(I(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),I(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),I(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),I(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[l,d,p]=vo(o,[1,1,1],-1);let T=W(l,i),A=W(d,s),$=W(p,a);m=ne(ne(T,A),$)}else m=t;if(e==="otsu"){let T=_l(me(af(m),"int32"),Lt([]),256);c=JK(T,u)}let b=n?zs(m,c):mo(m,c);return me(W(b,255),"int32")}function JK(t,e){let n=kt([-1]),r=kt([0]),o=kt([0]),i,s,a,u,c,l;for(let d=0;d<t.size-1;d++){i=Te(t,0,d+1),s=Te(t,d+1),c=Se(Le(i),e),l=Se(Le(s),e);let p=Le(W(i,hr(0,i.size)));a=Se(p,Le(i));let m=Pr(s.shape,i.size),b=ne(hr(0,s.size),m),S=W(s,b);u=Se(Le(S),Le(s));let T=ue(a,u),A=ue(a,u),$=W(c,l);o=W(W($,T),A);let M=mo(o,r);r=Vn(M,o,r),n=Vn(M,kt([d]),n)}return n}var y2,v2=D(()=>{"use strict";$i();k();qt();cf();jD();kh();Mh();Lr();Et();nt();xn();Mt();AI();Mu();Au();pr();Wh();gl();H();R();y2=w({threshold_:XK})});function eZ(t,e,n="nearest",r="constant",o=0,i){let s=y(t,"image","transform","float32"),a=y(e,"transforms","transform","float32");I(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),I(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),I(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let u={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return E.runKernel(OE,u,c)}var w2,b2=D(()=>{"use strict";P();V();R();H();k();w2=w({transform_:eZ})});function tZ(t,e,n){let r=y(t,"a","bandPart");I(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,u;typeof e=="number"?(I(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),I(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=y(e<0?i:e,"numLower","bandPart")):(I(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Vn(Pu(e,0),i,Ri(e,i))),typeof n=="number"?(I(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),I(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),u=y(n<0?s:n,"numUpper","bandPart")):(I(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=Vn(Pu(n,0),s,Ri(n,s)));let c=L(hr(0,i,1,"int32"),[-1,1]),l=hr(0,s,1,"int32"),d=ue(c,l),p=ki(zs(d,a),Ll(d,jt(u))),m=Vr([i,s],r.dtype);return L(rn(Bn(L(r,[-1,i,s])).map(b=>Vn(p,b,m))),o)}var E2,D2=D(()=>{"use strict";R();H();xx();Cx();kh();Fh();jh();ei();k();Wh();De();ff();Mt();Xh();Mu();Zl();E2=w({bandPart_:tZ})});function nZ(t){let e;if(Array.isArray(t)){e=!1,I(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=t[0].shape[0];for(let i=1;i<t.length;++i)I(t[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${o})`)}else e=!0,t=vo(t,t.shape[0],0).map(o=>dn(o,[0]));I(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],r=t;for(let o=0;o<t.length;++o)n.push(E.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=W(Le(W(n[s],i)),n[s]);i=ue(i,a)}return Se(i,Mi(i,"euclidean"))}));return e?rn(n,0):n}var x2,I2=D(()=>{"use strict";P();H();xn();nt();Rl();k();cf();Yh();ff();Mt();Lr();x2=w({gramSchmidt_:nZ})});function rZ(t,e=!1){if(I(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return S2(t,e);{let n=t.shape.slice(0,t.shape.length-2).reduce((u,c)=>u*c),r=Bn(L(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];r.forEach(u=>{let[c,l]=S2(u,e);o.push(c),i.push(l)});let s=L(rn(o,0),t.shape),a=L(rn(i,0),t.shape);return[s,a]}}function S2(t,e=!1){return E.tidy(()=>{I(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],r=t.shape[1],o=Fl(n),i=Dn(t),s=Br([[1]],[1,1]),a=Dn(s),u=n>=r?r:n;for(let c=0;c<u;++c){let l=i,d=a,p=o;[a,i,o]=E.tidy(()=>{let m=Te(i,[c,c],[n-c,1]),b=Mi(m),S=Te(i,[c,c],[1,1]),T=Vn(mo(S,0),Br([[-1]]),Br([[1]])),A=ue(S,W(T,b)),$=Se(m,A);$.shape[0]===1?a=Dn(s):a=Ye([s,Te($,[1,0],[$.shape[0]-1,$.shape[1]])],0);let M=jt(Se(Ne(T,A),b)),O=Te(i,[c,0],[n-c,r]),U=W(M,a),j=Xs(a);if(c===0)i=ue(O,Ne(U,Ne(j,O)));else{let Q=ue(O,Ne(U,Ne(j,O)));i=Ye([Te(i,[0,0],[c,r]),Q],0)}let z=Xs(U),Z=Te(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=ue(Z,Ne(Ne(Z,a),z));else{let Q=ue(Z,Ne(Ne(Z,a),z));o=Ye([Te(o,[0,0],[n,c]),Q],1)}return[a,i,o]}),ct([l,d,p])}return!e&&n>r&&(o=Te(o,[0,0],[n,r]),i=Te(i,[0,0],[r,r])),[o,i]})}var T2,N2=D(()=>{"use strict";P();Ln();H();Nu();Fr();xn();bx();Mh();Go();nt();ei();Rl();k();De();pr();ff();Mt();Qh();em();Xh();Mu();T2=w({qr_:rZ})});var lt,Ur=D(()=>{"use strict";lt=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(lt||{})});function oZ(t,e,n=lt.SUM_BY_NONZERO_WEIGHTS){let r=y(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=y(e,"weights","computeWeightedLoss"));let i=o==null?r:W(r,o);if(n===lt.NONE)return i;if(n===lt.SUM)return Le(i);if(n===lt.MEAN){if(o==null)return Oi(i);{let s=r.size/o.size,a=Se(Le(i),Le(o));return s>1?Se(a,ae(s)):a}}if(n===lt.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Se(Le(i),ae(r.size));{let s=W(o,jr(r.shape)),a=me(Le(Ql(s,ae(0))),"float32");return Se(Le(i),a)}}throw Error(`Unknown reduction: ${n}`)}var Kt,wo=D(()=>{"use strict";R();qt();xn();Ur();Lh();nt();Zx();Vh();k();tn();Lr();Kt=w({computeWeightedLoss_:oZ})});function iZ(t,e,n,r=lt.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","absoluteDifference"),i=y(e,"predictions","absoluteDifference"),s=null;n!=null&&(s=y(n,"weights","absoluteDifference")),Qe(o.shape,i.shape,"Error in absoluteDifference: ");let a=Ct(ue(o,i));return Kt(a,s,r)}var C2,_2=D(()=>{"use strict";R();H();Vs();Ur();k();Mt();wo();C2=w({absoluteDifference_:iZ})});function sZ(t,e,n,r,o=lt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","cosineDistance"),s=y(e,"predictions","cosineDistance"),a=null;r!=null&&(a=y(r,"weights","cosineDistance")),Qe(i.shape,s.shape,"Error in cosineDistance: ");let u=ae(1),c=ue(u,Le(W(i,s),n,!0));return Kt(c,a,o)}var A2,M2=D(()=>{"use strict";R();H();Ur();nt();k();tn();Mt();Lr();wo();A2=w({cosineDistance_:sZ})});function aZ(t,e,n,r=lt.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","hingeLoss"),i=y(e,"predictions","hingeLoss"),s=null;n!=null&&(s=y(n,"weights","hingeLoss")),Qe(o.shape,i.shape,"Error in hingeLoss: ");let a=ae(1);o=ue(W(ae(2),o),a);let u=ti(ue(a,W(o,i)));return Kt(u,s,r)}var k2,O2=D(()=>{"use strict";R();H();Ur();nt();k();of();tn();Mt();wo();k2=w({hingeLoss_:aZ})});function uZ(t,e,n,r=1,o=lt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","huberLoss"),s=y(e,"predictions","huberLoss"),a=null;n!=null&&(a=y(n,"weights","huberLoss")),Qe(i.shape,s.shape,"Error in huberLoss: ");let u=ae(r),c=Ct(ue(s,i)),l=Ri(c,u),d=ue(c,l),p=ne(W(ae(.5),At(l)),W(u,d));return Kt(p,a,o)}var R2,F2=D(()=>{"use strict";R();H();Vs();Et();Ur();jh();nt();k();tn();Yo();Mt();wo();R2=w({huberLoss_:uZ})});function cZ(t,e,n,r=1e-7,o=lt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","logLoss"),s=y(e,"predictions","logLoss"),a=null;n!=null&&(a=y(n,"weights","logLoss")),Qe(i.shape,s.shape,"Error in logLoss: ");let u=ae(1),c=ae(r),l=jt(W(i,go(ne(s,c)))),d=W(ue(u,i),go(ne(ue(u,s),c))),p=ue(l,d);return Kt(p,a,o)}var P2,$2=D(()=>{"use strict";R();H();Et();Bl();Ur();nt();ei();k();tn();Mt();wo();P2=w({logLoss_:cZ})});function lZ(t,e,n,r=lt.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","meanSquaredError"),i=y(e,"predictions","meanSquaredError"),s=null;n!=null&&(s=y(n,"weights","meanSquaredError")),Qe(o.shape,i.shape,"Error in meanSquaredError: ");let a=lf(o,i);return Kt(a,s,r)}var L2,V2=D(()=>{"use strict";R();H();Ur();k();GI();wo();L2=w({meanSquaredError_:lZ})});function fZ(t,e){let n=y(t,"labels","sigmoidCrossEntropyWithLogits"),r=y(e,"logits","sigmoidCrossEntropyWithLogits");Qe(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=ti(r),i=W(r,n),s=Ul(Qn(jt(Ct(r))));return ne(ue(o,i),s)}function dZ(t,e,n,r=0,o=lt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"multiClassLabels","sigmoidCrossEntropy"),s=y(e,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","sigmoidCrossEntropy")),Qe(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=ae(r),l=ae(1),d=ae(.5);i=ne(W(i,ue(l,c)),W(d,c))}let u=fZ(i,s);return Kt(u,a,o)}var j2,B2=D(()=>{"use strict";R();H();Vs();Et();Fu();Mx();Ur();nt();ei();k();of();tn();Mt();wo();j2=w({sigmoidCrossEntropy_:dZ})});function pZ(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return nn((o,i,s)=>{let u=Gl(i,[n],!0),c=ue(me(i,"float32"),u);s([o,c]);let l=jt(W(c,o));return{value:Le(l,[n]),gradFunc:(m,b)=>{let[S,T]=b,A=Zo(m.shape,[n]);return[W(L(m,A),ue(me(S,"float32"),Qn(T))),W(L(m,A),ue(Qn(T),me(S,"float32")))]}}})(t,e)}function hZ(t,e,n,r=0,o=lt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"onehotLabels","softmaxCrossEntropy"),s=y(e,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","softmaxCrossEntropy")),Qe(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=ae(r),l=ae(1),d=ae(i.shape[1]);i=ne(W(i,ue(l,c)),Se(c,d))}let u=pZ(i,s);return Kt(u,a,o)}var U2,H2=D(()=>{"use strict";Jo();R();H();Et();ku();qt();xn();Fu();Fx();Ur();nt();ei();k();De();tn();Mt();Lr();wo();U2=w({softmaxCrossEntropy_:hZ})});function mZ(t,e,n,r){let o=y(t,"indices","sparseFillEmptyRows","int32"),i=y(e,"values","sparseFillEmptyRows"),s=y(n,"denseShape","sparseFillEmptyRows","int32"),a=y(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let u={indices:o,values:i,denseShape:s,defaultValue:a},c=E.runKernel(vE,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var G2,z2=D(()=>{"use strict";P();V();R();k();G2=w({sparseFillEmptyRows_:mZ})});function gZ(t,e,n){let r=y(t,"inputIndices","sparseReshape","int32"),o=y(e,"inputShape","sparseReshape","int32"),i=y(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=E.runKernel(wE,s);return{outputIndices:a[0],outputShape:a[1]}}var W2,q2=D(()=>{"use strict";P();V();R();k();W2=w({sparseReshape_:gZ})});function yZ(t,e,n){let r=y(t,"data","sparseSegmentMean"),o=y(e,"indices","sparseSegmentMean","int32"),i=y(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return E.runKernel(bE,s)}var K2,Z2=D(()=>{"use strict";P();V();R();k();K2=w({sparseSegmentMean_:yZ})});function vZ(t,e,n){let r=y(t,"data","sparseSegmentSum"),o=y(e,"indices","sparseSegmentSum","int32"),i=y(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return E.runKernel(EE,s)}var Y2,Q2=D(()=>{"use strict";P();V();R();k();Y2=w({sparseSegmentSum_:vZ})});function wZ(t,e,n,r,o,i,s,a){let u=y(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=y(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let l={separator:n,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},d={data:u,dataSplits:c},p=E.runKernel(TE,d,l);return{nGrams:p[0],nGramsSplits:p[1]}}var X2,J2=D(()=>{"use strict";P();V();R();k();X2=w({stringNGrams_:wZ})});function bZ(t,e,n=!0){let r=y(t,"input","stringSplit","string"),o=y(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:n},s={input:r,delimiter:o},a=E.runKernel(NE,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var eP,tP=D(()=>{"use strict";P();V();R();k();eP=w({stringSplit_:bZ})});function EZ(t,e){let n=y(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");let o={input:n};return E.runKernel(CE,o,r)}var nP,rP=D(()=>{"use strict";P();V();R();k();nP=w({stringToHashBucketFast_:EZ})});function DZ(t,e,n,r=!0){let o=y(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return E.runKernel(IE,{x:o},i)}var oP,iP=D(()=>{"use strict";P();V();R();k();oP=w({staticRegexReplace_:DZ})});var sP,aP,Li,uP,cP,lP,fP,wf=D(()=>{"use strict";Vs();Mk();kk();Et();Ok();Rk();Fk();Pk();$k();Lk();Vk();jk();Bk();Uk();kD();zk();Wk();PD();Cl();Zk();Yk();Qk();jD();Xk();Jk();HD();Ho();qt();eO();tO();Nu();Si();Fr();nO();rO();oO();iO();sO();Al();aO();uO();fO();dO();pO();hO();mO();gO();yO();Nh();vO();wO();xn();EO();DO();dx();px();xO();cx();IO();NO();Fu();_h();CO();bx();Au();Ex();yD();Dx();Mh();xx();Vl();_O();AO();MO();Nx();Cx();kh();kO();OO();Bl();Mx();LO();VO();Fx();Fh();Px();$x();jO();BO();Go();kl();jx();UO();HO();Hx();Lh();GO();yx();jh();zO();WO();qO();nt();KO();ZO();ei();Zx();Yx();Vh();YO();QO();Lu();XO();JO();eR();tR();nR();Ol();oI();gD();rR();oR();iR();sR();aR();CR();EI();_R();zh();AR();Wh();rf();MR();of();SI();De();Zs();kR();OR();RR();FR();AI();PR();tn();$R();LR();VR();Tl();jR();BR();UR();pr();HR();GR();zR();WR();qR();kx();nI();qh();Kh();HI();Zh();cf();Ru();Yo();GI();Yh();ff();zI();KR();Mt();Lr();ZR();RD();gl();$i();Qh();KI();YR();QR();XR();eF();Ah();tF();nF();rF();oF();Xh();iF();sF();Mu();aS();Zl();qo();uF();em();Rl();lF();dF();$h();gF();vF();DF();yf();IF();k();Zh();qh();Kh();HI();$F();VF();uS();cS();BF();HF();zF();qF();ZF();QF();JF();o2();s2();u2();l2();d2();h2();g2();v2();b2();D2();I2();N2();_2();wo();M2();O2();F2();$2();V2();B2();H2();z2();q2();Z2();Q2();J2();tP();rP();iP();sP={fft:Ys,ifft:Pi,rfft:Qs,irfft:uf},aP={hammingWindow:LF,hannWindow:rm,frame:om,stft:jF},Li={flipLeftRight:GF,grayscaleToRGB:WF,resizeNearestNeighbor:m2,resizeBilinear:p2,rgbToGrayscale:KF,rotateWithOffset:YF,cropAndResize:UF,nonMaxSuppression:XF,nonMaxSuppressionAsync:r2,nonMaxSuppressionWithScore:i2,nonMaxSuppressionWithScoreAsync:a2,nonMaxSuppressionPadded:c2,nonMaxSuppressionPaddedAsync:f2,threshold:y2,transform:w2},uP={bandPart:E2,gramSchmidt:x2,qr:T2},cP={absoluteDifference:C2,computeWeightedLoss:Kt,cosineDistance:A2,hingeLoss:k2,huberLoss:R2,logLoss:P2,meanSquaredError:L2,sigmoidCrossEntropy:j2,softmaxCrossEntropy:U2},lP={sparseFillEmptyRows:G2,sparseReshape:W2,sparseSegmentMean:K2,sparseSegmentSum:Y2},fP={stringNGrams:X2,stringSplit:eP,stringToHashBucketFast:nP,staticRegexReplace:oP}});var pS={};Re(pS,{Serializable:()=>bf,SerializationMap:()=>um,getRegisteredName:()=>IZ,registerClass:()=>dS});function dS(t,e,n){I(t.className!=null,()=>"Class being registered does not have the static className property defined."),I(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),I(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);let r=n,o=e+">"+r;return um.register(t),xZ.set(o,t),fS.set(t,o),t}function IZ(t){return fS.has(t)?fS.get(t):t.className}var xZ,fS,bf,um,cm=D(()=>{"use strict";H();xZ=new Map,fS=new Map,bf=class{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}},um=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]}}});var on,Vi=D(()=>{"use strict";Ln();Jo();wf();cm();on=class extends bf{minimize(e,n=!1,r){let{value:o,grads:i}=this.computeGradients(e,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return ct(i),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Oh(e,n)}dispose(){this.iterations_!=null&&ct(this.iterations_)}saveIterations(){return G(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ae(this.iterations_,"int32")}})}getWeights(){return G(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(e){return G(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(e){return G(this,null,function*(){return this.iterations_=(yield e[0].tensor.data())[0],e.slice(1)})}};Object.defineProperty(on,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null})});var ji,lm=D(()=>{"use strict";P();Ln();Et();xn();nt();wf();Yo();qo();Vi();ji=class extends on{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=E.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=E.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:se(()=>wt(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:se(()=>wt(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let u=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;se(()=>{let l=ne(W(u,this.rho),W(At(a),1-this.rho)),d=W(Se(fn(ne(c,this.epsilon)),fn(ne(u,this.epsilon))),a),p=ne(W(c,this.rho),W(At(d),1-this.rho));u.assign(l),c.assign(p);let m=ne(W(d,-this.learningRate),i);i.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ct(this.accumulatedGrads.map(e=>e.variable)),ct(this.accumulatedUpdates.map(e=>e.variable)))}getWeights(){return G(this,null,function*(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(e){return G(this,null,function*(){e=yield this.extractIterations(e);let n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}});var Bi,fm=D(()=>{"use strict";P();Ln();Et();xn();Au();nt();Ru();Yo();Vi();Bi=class extends on{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=E.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:se(()=>Pr(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;se(()=>{let u=ne(a,At(s));a.assign(u);let c=ne(W(Se(s,fn(ne(u,E.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ct(this.accumulatedGrads.map(e=>e.variable))}getWeights(){return G(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(e){return G(this,null,function*(){e=yield this.extractIterations(e);let n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}});var Ui,dm=D(()=>{"use strict";P();Ln();Et();xn();nt();Ol();tn();Ru();Yo();Mt();qo();Vi();Ui=class extends on{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],se(()=>{this.accBeta1=ae(n).variable(),this.accBeta2=ae(r).variable()}),o==null&&(this.epsilon=E.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);se(()=>{let r=ue(1,this.accBeta1),o=ue(1,this.accBeta2);n.forEach((i,s)=>{let a=E.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:se(()=>wt(a).variable(u))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:se(()=>wt(a).variable(u))});let c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;let l=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,p=ne(W(l,this.beta1),W(c,1-this.beta1)),m=ne(W(d,this.beta2),W(At(c),1-this.beta2)),b=Se(p,r),S=Se(m,o);l.assign(p),d.assign(m);let T=ne(W(Se(b,ne(fn(S),this.epsilon)),-this.learningRate),a);a.assign(T)}),this.accBeta1.assign(W(this.accBeta1,this.beta1)),this.accBeta2.assign(W(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ct(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&ct(this.accumulatedSecondMoment.map(e=>e.variable))}getWeights(){return G(this,null,function*(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(e){return G(this,null,function*(){e=yield this.extractIterations(e),se(()=>{this.accBeta1.assign(ho(this.beta1,this.iterations_+1)),this.accBeta2.assign(ho(this.beta2,this.iterations_+1))});let n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}});var Hi,pm=D(()=>{"use strict";P();Ln();Vs();Et();xn();Hx();nt();tn();Mt();qo();Vi();Hi=class extends on{static get className(){return"Adamax"}constructor(e,n,r,o=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],se(()=>{this.iteration=ae(0).variable(),this.accBeta1=ae(n).variable()}),o==null&&(this.epsilon=E.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);se(()=>{let r=ue(1,this.accBeta1),o=Se(-this.learningRate,ne(W(this.iteration,this.decay),1));n.forEach((i,s)=>{let a=E.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:wt(a).variable(u)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:wt(a).variable(u)});let c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;let l=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,p=ne(W(l,this.beta1),W(c,1-this.beta1)),m=W(d,this.beta2),b=Ct(c),S=Kl(m,b);l.assign(p),d.assign(S);let T=ne(W(Se(o,r),Se(p,ne(S,this.epsilon))),a);a.assign(T)}),this.iteration.assign(ne(this.iteration,1)),this.accBeta1.assign(W(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ct(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&ct(this.accumulatedWeightedInfNorm.map(e=>e.variable))}getWeights(){return G(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(e){return G(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}});var bo,Ef=D(()=>{"use strict";P();Ln();Et();nt();tn();Vi();bo=class extends on{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;let s=E.registeredVariables[r];se(()=>{let a=ne(W(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=ln(ae(-e))}dispose(){this.c.dispose()}getWeights(){return G(this,null,function*(){return[yield this.saveIterations()]})}setWeights(e){return G(this,null,function*(){if(e=yield this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}});var Gi,hm=D(()=>{"use strict";P();Ln();Et();nt();tn();qo();Ef();Gi=class extends bo{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ae(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=E.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:se(()=>wt(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&se(()=>{let u,c=ne(W(this.m,s),a);this.useNesterov?u=ne(W(this.c,ne(a,W(c,this.m))),i):u=ne(W(this.c,c),i),s.assign(c),i.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ct(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}getWeights(){return G(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(e){return G(this,null,function*(){e=yield this.extractIterations(e);let n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}});var zi,mm=D(()=>{"use strict";P();Ln();Et();xn();nt();Ru();Yo();Mt();qo();Vi();zi=class extends on{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=E.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=E.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:se(()=>wt(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:se(()=>wt(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:se(()=>wt(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let u=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;se(()=>{let l=ne(W(u,this.decay),W(At(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[o].variable,p=ne(W(d,this.decay),W(a,1-this.decay)),m=Se(W(a,this.learningRate),fn(ue(l,ne(At(p),this.epsilon)))),b=ne(W(c,this.momentum),m);u.assign(l),d.assign(p),c.assign(b);let S=ue(i,b);i.assign(S)}else{let d=ne(W(u,this.decay),W(At(a),1-this.decay)),p=ne(W(c,this.momentum),Se(W(a,this.learningRate),fn(ne(d,this.epsilon))));u.assign(d),c.assign(p);let m=ue(i,p);i.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ct(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ct(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&ct(this.accumulatedMoments.map(e=>e.variable))}getWeights(){return G(this,null,function*(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(e){return G(this,null,function*(){e=yield this.extractIterations(e);let n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}});function dP(){for(let t of SZ)dS(t)}var SZ,pP=D(()=>{"use strict";lm();fm();dm();pm();hm();mm();Ef();cm();SZ=[ji,Bi,Ui,Hi,Gi,zi,bo]});function hP(t){return new Promise(e=>setTimeout(e)).then(t)}function AZ(t="model"){return new hS(t)}function mP(t){return new mS(t)}var TZ,NZ,CZ,hS,mS,_Z,gP=D(()=>{"use strict";Du();Pt();Ci();Rs();Ti();TZ="model",NZ=".json",CZ=".weights.bin";hS=(()=>{class t{constructor(n){if(!ie().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=TZ),this.modelJsonFileName=n+NZ,this.weightDataFileName=n+CZ}save(n){return G(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=zt.join(n.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],s=Dh(n,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=a,yield hP(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield hP(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:lo(n)}}})}}return t.URL_SCHEME="downloads://",t})(),mS=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}load(){return G(this,null,function*(){return new Promise((e,n)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:s});return}let u=xu(i,c=>this.loadWeights(c));e(u)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(e){let n=[],r=[];for(let s of e)n.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(e),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(e,n){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){let n=[],r=this.weightsFiles.map(i=>iD(i.name)),o={};for(let i of e)i.paths.forEach(s=>{let a=iD(s);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},_Z=t=>ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(hS.URL_SCHEME)?AZ(t.slice(hS.URL_SCHEME.length)):null;Nt.registerSaveRouter(_Z)});function gS(t,e,n,r){s(t),n=n??0,r=r??1,a(n,r);let o=0,i=u=>(u.then(c=>{let l=n+ ++o/t.length*(r-n);return e(l),c}),u);function s(u){I(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function a(u,c){I(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),I(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),I(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(t.map(i))}var yP=D(()=>{"use strict";H();});function yS(t,e){return G(this,null,function*(){e==null&&(e={});let n=e.fetchFunc==null?ie().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?yield Promise.all(r):yield gS(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?yield Promise.all(a):yield gS(a,e.onProgress,.5,1)})}function vP(t,e){var n;let r=e.fetchFunc==null?ie().platform.fetch:e.fetchFunc,o=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:s=>G(this,null,function*(){for(var a;o<t.length;){i||(i=(yield r(t[o],e.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield i.read();if(u){o++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,o/t.length);continue}s.enqueue(c);return}s.close()})})}function wP(t,e="",n,r){return G(this,null,function*(){return vS(s=>yS(s,{requestInit:r}))(t,e,n)})}function vS(t){return(e,n="",r)=>G(this,null,function*(){let o=e.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((m,b)=>{let S=0;m.weights.forEach(T=>{let A="quantization"in T?T.quantization.dtype:T.dtype,$=Bo[A]*xe(T.shape),M=()=>{o[b]=!0,i[b]==null&&(i[b]=[]),i[b].push({manifestEntry:T,groupOffset:S,sizeBytes:$})};r!=null?r.forEach((O,U)=>{O===T.name&&(M(),s[U]=!0)}):M(),a.push(T.name),S+=$})}),!s.every(m=>m)){let m=r.filter((b,S)=>!s[S]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let u=o.reduce((m,b,S)=>(b&&m.push(S),m),[]),c=[];u.forEach(m=>{e[m].paths.forEach(b=>{let S=n+(n.endsWith("/")?"":"/")+b;c.push(S)})});let l=yield t(c),d={},p=0;return u.forEach(m=>{let b=e[m].paths.length,S=new zt(l.slice(p,p+b));i[m].forEach(A=>{let $=S.slice(A.groupOffset,A.groupOffset+A.sizeBytes),M=bh($,[A.manifestEntry]);for(let O in M)d[O]=M[O]}),p+=b}),d})}var wS=D(()=>{"use strict";Pt();H();Ti();Ci();yP();rD();});function OZ(t){let e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),o=n>e?t.substring(n):"";return[r+"/",o]}function gm(t){return t.match(bP.URL_SCHEME_REGEX)!=null}function ym(t,e){return new bP(t,e)}function DP(t,e){return ym(t,e)}var MZ,kZ,bP,EP,xP=D(()=>{"use strict";Pt();H();Ci();Ti();Rs();wS();MZ="application/octet-stream",kZ="application/json",bP=(()=>{class t{constructor(n,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(I(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=ie().platform.fetch,I(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&I(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(n){return G(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i=Dh(n,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:kZ}),"model.json"),n.weightData!=null){let a=zt.join(n.weightData);r.body.append("model.weights.bin",new Blob([a],{type:MZ}),"model.weights.bin")}let s=yield this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:lo(n),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return G(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield n.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return G(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return xu(n,r=>this.loadWeights(r))})}loadStream(){return G(this,null,function*(){let n=yield this.loadModelJSON(),r=yield this.getWeightUrls(n.weightsManifest),o=wl(n.weightsManifest),i=()=>vP(r,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:o,getWeightStream:i})})}getWeightUrls(n){return G(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=OZ(r),s=this.weightPathPrefix||o,a=[],u=[];for(let c of n)for(let l of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(l)):a.push(s+l+i);return this.weightUrlConverter&&a.push(...yield Promise.all(u)),a})}loadWeights(n){return G(this,null,function*(){let r=yield this.getWeightUrls(n),o=wl(n),i=yield yS(r,this.loadOptions);return[o,i]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();EP=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>gm(r)):n=gm(t),n)return ym(t,e)}return null};Nt.registerSaveRouter(EP);Nt.registerLoadRouter(EP)});function IP(t,e,n,r){let o=arguments;return new bS(ES(...o))}function ES(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Df(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Df({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Df({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function SP(t){return new vm(t)}function TP(t){return new vm(t)}var Df,vm,bS,NP=D(()=>{"use strict";Df=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},vm=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},bS=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}});var Eo={};Re(Eo,{CompositeArrayBuffer:()=>zt,browserFiles:()=>mP,browserHTTPRequest:()=>DP,concatenateArrayBuffers:()=>ck,copyModel:()=>xk,decodeWeights:()=>bh,decodeWeightsStream:()=>Eh,encodeWeights:()=>ik,fromMemory:()=>IP,fromMemorySync:()=>ES,getLoadHandlers:()=>pk,getModelArtifactsForJSON:()=>xu,getModelArtifactsForJSONSync:()=>sD,getModelArtifactsInfoForJSON:()=>lo,getSaveHandlers:()=>dk,getWeightSpecs:()=>wl,http:()=>ym,isHTTPScheme:()=>gm,listModels:()=>Ek,loadWeights:()=>wP,moveModel:()=>Ik,registerLoadRouter:()=>fk,registerSaveRouter:()=>lk,removeModel:()=>Dk,weightsLoaderFactory:()=>vS,withSaveHandler:()=>SP,withSaveHandlerSync:()=>TP});var CP=D(()=>{"use strict";lD();fD();gP();xP();Ci();NP();Rs();wS();Ti();dD();});function RZ(t,e,n){let r=y(t,"labels","confusionMatrix"),o=y(e,"predictions","confusionMatrix");I(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),I(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),I(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),I(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),I(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let i=Fi(me(r,"int32"),n),s=Fi(me(o,"int32"),n),a=Xs(i),u=Ne(a,s);return me(u,"int32")}var _P,AP=D(()=>{"use strict";R();H();qt();Go();Yx();k();em();_P=w({confusionMatrix_:RZ})});var DS={};Re(DS,{confusionMatrix:()=>_P});var MP=D(()=>{"use strict";AP();});var Do={};Re(Do,{draw:()=>UZ,fromPixels:()=>HZ,fromPixelsAsync:()=>VZ,toPixels:()=>BZ});function OP(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Ns(nh,E.backendName)!=null){let b={pixels:t},S={numChannels:e};return E.runKernel(nh,b,S)}let[c,l]=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(s)d=t.getContext("2d").getImageData(0,0,c,l).data;else if(r||n)d=t.data;else if(i||o||a){if(oa==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")oa=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else oa=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});oa.canvas.width=c,oa.canvas.height=l,oa.drawImage(t,0,0,c,l),d=oa.getImageData(0,0,c,l).data}let p;if(e===4)p=new Int32Array(d);else{let b=c*l;p=new Int32Array(b*e);for(let S=0;S<b;S++)for(let T=0;T<e;++T)p[S*e+T]=d[S*4+T]}return pf(p,[l,c,e],"int32")}function FZ(t){return t!=null&&t.data instanceof Uint8Array}function PZ(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function $Z(t){return t!=null&&t.width!==0&&t.height!==0}function LZ(t){return PZ()&&!(t instanceof ImageBitmap)&&$Z(t)&&!FZ(t)}function VZ(t,e=3){return G(this,null,function*(){let n=null;if(ie().getBool("WRAP_TO_IMAGEBITMAP")&&LZ(t)){let r;try{r=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return OP(n,e)})}function RP(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function jZ(t){let e=t?.alpha||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}function BZ(t,e){return G(this,null,function*(){let n=y(t,"img","toPixels");if(!(t instanceof _e)){let c=n;n=me(c,"int32"),c.dispose()}RP(n);let[r,o]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=yield n.data(),a=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let l=[0,0,0,255];for(let p=0;p<i;p++){let m=s[c*i+p];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);i===1?(l[0]=m*a,l[1]=m*a,l[2]=m*a):l[p]=m*a}let d=c*4;u[d+0]=Math.round(l[0]),u[d+1]=Math.round(l[1]),u[d+2]=Math.round(l[2]),u[d+3]=Math.round(l[3])}if(e!=null){kP||Ns(th,E.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),kP=!0),e.width=o,e.height=r;let c=e.getContext("2d"),l=new ImageData(u,o,r);c.putImageData(l,0,0)}return n!==t&&n.dispose(),u})}function UZ(t,e,n){let r=y(t,"img","draw");if(!(t instanceof _e)){let s=r;r=me(s,"int32"),s.dispose()}RP(r),jZ(n?.imageOptions);let o={image:r},i={canvas:e,options:n};E.runKernel(th,o,i)}var oa,kP,HZ,FP=D(()=>{"use strict";P();Pt();V();uh();Yn();R();qt();k();KI();kP=!1;HZ=w({fromPixels_:OP})});var xS={};Re(xS,{prepareAndValidate:()=>PP});function PP(t,e){let n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(xe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let o=e.shape,i=o[o.length-1],s=1;for(let d=0;d<o.length-1;++d)s*=o[d];let a=t.shape,u=o.slice();u.pop();let c=1;for(let d=i;d<n;++d)c*=a[d],u.push(a[d]);let l=[...ao(t.shape).map(d=>d/c),1].slice(0,i);return[u,s,c,l]}var IS=D(()=>{"use strict";H()});var xf={};Re(xf,{assertParamsValid:()=>zZ,computeFlatOffset:()=>YZ,computeOutShape:()=>qZ,getNormalizedAxes:()=>KZ,isSliceContinous:()=>ZZ,maskToAxes:()=>WZ,parseSliceParams:()=>QZ,sliceInfo:()=>XZ,startForAxis:()=>GP,startIndicesWithElidedDims:()=>BP,stopForAxis:()=>zP,stopIndicesWithElidedDims:()=>UP,stridesForAxis:()=>HP,stridesWithElidedDims:()=>LP});function zZ(t,e,n){let r=t.shape.length;I(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),I(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)I(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function WZ(t){let e=[],n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function qZ(t,e,n){let r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function LP(t,e,n,r){let o=[...t];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)i===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function VP(t,e,n){return n<=t?n:n-(e-1)}function jP(t,e){let n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function KZ(t,e,n,r,o,i,s,a,u){let c=t.length,l=new Array(c),d=new Array(c),p=new Array(c);if(e.length&&n>0){let m=e[0],b=n+1;l=BP(s,m,b,r,t),d=UP(a,m,b,o,t),p=LP(i,m,b,t)}else for(let m=0;m<c;m++)l[m]=GP(s,r,i,t,m,u),d[m]=zP(a,o,i,t,m,u),p[m]=HP(i,m,u);return{begin:l,end:d,strides:p}}function BP(t,e,n,r,o){let i=[...o],s=jP(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let u=VP(e,n,a),c=r[u];t&1<<u&&(c=0),i[a]=c}return i}function UP(t,e,n,r,o){let i=[...o],s=jP(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let u=VP(e,n,a),c=r[u];t&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let u=o[a];i[a]<0&&(i[a]+=u),i[a]=lu(0,i[a],o[a])}return i}function HP(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function GP(t,e,n,r,o,i){let s=e[o],a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let u=r[o];return s<0&&(s+=u),s=lu(0,s,u-1),s}function zP(t,e,n,r,o,i){let s=e[o],a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let u=r[o];return s<0&&(s+=u),a>0?s=lu(0,s,u):s=lu(-1,s,u-1),s}function ZZ(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function YZ(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function QZ(t,e,n){let r,o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(s=>{I(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(o).fill(-1):typeof n=="number"?i=[n,...new Array(o-1).fill(-1)]:n.length<o?i=n.concat(new Array(o-n.length).fill(-1)):i=n,i=i.map((s,a)=>s>=0?s:(I(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function XZ(t,e,n,r,o,i,s,a,u){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:u};for(let M=0;M<d.dims;M++)l&&1<<M&a&&d.numAddAxisAfterEllipsis++,1<<M&s&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};JZ(d,p);let m=!0,b=!0,S=!0,T=[],A=[];for(let M=0;M<t.length;++M){if(p.strides[M]===0)throw Error(`strides[${M}] must be non-zero`);let O=!!(p.shrinkAxisMask&1<<M),U=t[M];if(U===-1){T.push(O?1:-1);continue}let j=[p.beginMask&1<<M,p.endMask&1<<M],z=[p.strides[M]>0?0:-1,p.strides[M]>0?U:U-1];if(O&&p.strides[M]<=0)throw Error("only stride 1 allowed on non-range indexing.");S=S&&p.strides[M]===1;let Z=!!(p.beginMask&1<<M&&p.endMask&1<<M);if(p.beginValid&&p.endValid){if(O){let he=p.begin[M]<0?U+p.begin[M]:p.begin[M];if(p.begin[M]=he,p.end[M]=p.begin[M]+1,he<0||he>=U)throw Error(`slice index ${p.begin[M]} of dimension ${M} out of bounds.`)}else p.begin[M]=$P(p.begin[M],0,p.strides[M],U,j,z),p.end[M]=$P(p.end[M],1,p.strides[M],U,j,z);let K=p.strides[M]===1&&p.begin[M]===0&&p.end[M]===U;m=m&&K,b=b&&(M===0&&p.strides[M]===1||K)}else m=m&&p.strides[M]===1&&Z,b=b&&(M===0&&p.strides[M]===1||Z);let Q,X=!1;if(p.beginValid&&p.endValid?(Q=p.end[M]-p.begin[M],X=!0):O?(Q=1,X=!0):Z&&U>=0&&(p.strides[M]<0?Q=-U:Q=U,X=!0),X){let K;Q===0||Q<0!=p.strides[M]<0?K=0:K=Math.trunc(Q/p.strides[M])+(Q%p.strides[M]!==0?1:0),T.push(K)}else T.push(-1)}for(let M=0;M<p.finalShapeGatherIndices.length;++M){let O=p.finalShapeGatherIndices[M];O>=0?A.push(T[O]):O===SS&&A.push(1)}return{finalShapeSparse:A.filter((M,O)=>p.finalShapeGatherIndices[O]!==SS),finalShape:A,isIdentity:m,sliceDim0:b,isSimpleSlice:S,begin:p.begin,end:p.end,strides:p.strides}}function JZ(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(SS),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(GZ),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function $P(t,e,n,r,o,i){if(o[e])return n>0?i[e]:i[e+1&1];{let s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var SS,GZ,TS=D(()=>{"use strict";H();SS=-2,GZ=-1});var WP,qP=D(()=>{"use strict";WP="4.20.0"});var Uu,NS=D(()=>{"use strict";lm();fm();dm();pm();hm();mm();Ef();Uu=class{static sgd(e){return new bo(e)}static momentum(e,n,r=!1){return new Gi(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,i=!1){return new zi(e,n,r,o,i)}static adam(e=.001,n=.9,r=.999,o=null){return new Ui(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new ji(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,i=0){return new Hi(e,n,r,o,i)}static adagrad(e,n=.1){return new Bi(e,n)}}});var eY,KP=D(()=>{"use strict";NS();eY=Uu});function ZP(){return new Promise(t=>tY(()=>t()))}var tY,YP=D(()=>{"use strict";tY=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t()});function nY(t,e){let n=t[0].length;t.forEach((o,i)=>{I(o.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),I(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=t[0];t.forEach((o,i)=>{for(let s=0;s<n;s++)I(s===e||o[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function rY(t,e){let n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var QP=D(()=>{"use strict";H();});var XP=D(()=>{"use strict";});function oY(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){let i=n[o],s=r[r.length-n.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${i} but shape[${o+t}] = ${a}`)}else r[s]=i}return r}function iY(t){let e={FIRST_DIM_SIZE:ni.FIRST_DIM_SIZE,VALUE_ROWIDS:ni.VALUE_ROWIDS,ROW_LENGTHS:ni.ROW_LENGTHS,ROW_SPLITS:ni.ROW_SPLITS,ROW_LIMITS:ni.ROW_LIMITS,ROW_STARTS:ni.ROW_STARTS},n=[];for(let r of t)if(r in e)n.push(e[r]);else break;return n}function sY(t){return t.length===0?0:t[0]===ni.FIRST_DIM_SIZE?t.length-1:t.length}function aY(t,e){if(t==null||e==null)return;let n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){let i=t[o],s=e[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${i} but ragged tensor input.flatValues.shape[${o-t.length}] = ${s}`)}}var ni,JP=D(()=>{"use strict";ni=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(ni||{})});function uY(t){return t<=wm?t:du(t,Math.floor(Math.sqrt(t)))}var wm,CS=D(()=>{"use strict";H();wm=30});function cY(t,e,n){let r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}var e$=D(()=>{"use strict";});function lY(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);let i=e.length;for(let s=0;s<i;++s)o=o.concat([t[s+1]/e[s],e[s]]);o=o.concat(t.slice(i+1))}return o}function fY(t,e,n=!0){let r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function dY(t,e,n,r=!0){let o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?o.push(e[i-1]*t[i]):o.push(t[i]/e[i-1]):o.push(t[i]);return o}function pY(t,e){let n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function hY(t,e,n){let r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}var t$=D(()=>{"use strict";});var mY,gY,n$=D(()=>{"use strict";mY=1.7580993408473768,gY=1.0507009873554805});var yY,vY,wY,bY,EY,DY,r$=D(()=>{"use strict";yY=.3275911,vY=.254829592,wY=-.284496736,bY=1.421413741,EY=-1.453152027,DY=1.061405429});function xY(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);let n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function IY(t){let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function SY(t){let e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function TY(t){let e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function NY(t,e){let n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function CY(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function _Y(t,e){let n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){let i=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function AY(t,e,n){let r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var o$=D(()=>{"use strict";});function kY(t,e){t=t.replace(/\s/g,"");let n=(t.length-t.replace(MY,"").length)/_S.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${_S}").`);let[r,o]=t.split(_S);I(r.indexOf(s$)===-1,()=>`The ellipsis notation ("${s$}") is not supported yet.`);let i=r.split(i$),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let m=o[p];if(!i.some(b=>b.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let p=0;p<r.length;++p){let m=r[p];a.indexOf(m)===-1&&m!==i$&&a.push(m)}let u=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);u[p]=[];for(let m=0;m<i[p].length;++m)u[p].push(a.indexOf(i[p][m]))}let c=a.length,l=o.length,d=[];for(let p=l;p<c;++p)d.push(p);return{allDims:a,summedDims:d,idDims:u}}function OY(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;let r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function RY(t,e,n){let r=new Array(t);for(let o=0;o<n.length;++o){let i=n[o].shape;for(let s=0;s<e[o].length;++s)r[e[o][s]]===void 0?r[e[o][s]]=i[s]:I(r[e[o][s]]===i[s],()=>`Expected dimension ${r[e[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function FY(t,e){let n=t,r=[],o=0;t.length===0&&n.push(-1),o=t.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let a=n[s],u=$Y(e,a);for(let c of u)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function PY(t){return t.every((e,n)=>e===n)}function $Y(t,e){let n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}var _S,MY,i$,s$,a$=D(()=>{"use strict";Tt();_S="->",MY=/->/g,i$=",",s$="..."});function LY(t,e,n=0){let r=[];if(typeof e=="number")I(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{let o=e.reduce((s,a)=>(a===-1&&(s+=1),s),0);I(o<=1,()=>"There should be only one negative value in split array.");let i=e.indexOf(-1);if(i!==-1){let s=e.reduce((a,u)=>u>0?a+u:a);e[i]=t.shape[n]-s}I(t.shape[n]===e.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}var u$=D(()=>{"use strict";H()});function VY(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function jY(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function BY(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}var c$=D(()=>{"use strict";});function UY(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function HY(t,e){return`size ${t} must be non-negative, not ${e}`}function GY(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function zY(t,e){let n=xe(t),r=xe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function WY(t,e){let n=xe(t),r=xe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}var l$=D(()=>{"use strict";H();});function qY(){return"segment ids must be >= 0"}function KY(){return"segment ids are not increasing"}function ZY(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function YY(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}var f$=D(()=>{"use strict";});var AS={};Re(AS,{collectGatherOpShapeInfo:()=>JY,computeOutShape:()=>XY,segOpComputeOptimalWindowSize:()=>QY});function QY(t,e){let n=!1,r;for(t<=wm?(r=t,n=!0):r=du(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=du(t,r+1);return r}function XY(t,e,n){let r=[],o=t.length;for(let i=0;i<o;i++)i!==e?r.push(t[i]):r.push(n);return r}function JY(t,e,n,r){let o=e.shape.length,i=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);let s=t.shape[n],a=[],u=1,c=1,l=1;for(let d=0;d<r;++d)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<i;d++)a.push(t.shape[d]),l*=t.shape[d];return{batchSize:u,sliceSize:l,outerSize:c,dimSize:s,outputShape:a}}var d$=D(()=>{"use strict";H();CS();});var MS={};Re(MS,{ERF_A1:()=>vY,ERF_A2:()=>wY,ERF_A3:()=>bY,ERF_A4:()=>EY,ERF_A5:()=>DY,ERF_P:()=>yY,PARALLELIZE_THRESHOLD:()=>wm,RowPartitionType:()=>ni,SELU_SCALE:()=>gY,SELU_SCALEALPHA:()=>mY,applyActivation:()=>ta,assertAndGetBroadcastShape:()=>$e,assertAxesAreInnerMostDims:()=>G5,assertParamsConsistent:()=>nY,assignToTypedArray:()=>CY,axesAreInnerMostDims:()=>gx,calculateShapes:()=>JR,checkEinsumDimSizes:()=>RY,checkPadOnDimRoundingMode:()=>gt,combineLocations:()=>SO,combineRaggedTensorToTensorShapes:()=>oY,complexWithEvenIndex:()=>SY,complexWithOddIndex:()=>TY,computeConv2DInfo:()=>Bs,computeConv3DInfo:()=>Hk,computeDefaultPad:()=>MD,computeDilation2DInfo:()=>Uq,computeOptimalWindowSize:()=>uY,computeOutAndReduceShapes:()=>H5,computeOutShape:()=>rY,computePool2DInfo:()=>AD,computePool3DInfo:()=>Hq,convertConv2DDataFormat:()=>Gk,decodeEinsumEquation:()=>kY,eitherStridesOrDilationsAreOne:()=>en,expandShapeToKeepDim:()=>Zo,exponent:()=>AY,exponents:()=>_Y,fromStringArrayToUint8:()=>tQ,fromUint8ToStringArray:()=>eQ,getAxesPermutation:()=>z5,getBroadcastDims:()=>bO,getComplexWithIndex:()=>NY,getEinsumComputePath:()=>FY,getEinsumPermutation:()=>OY,getFusedBiasGradient:()=>ea,getFusedDyActivation:()=>Js,getImageCenter:()=>cY,getInnerMostAxes:()=>q5,getPermuted:()=>fY,getRaggedRank:()=>sY,getReductionAxes:()=>Ch,getReshaped:()=>lY,getReshapedPermuted:()=>dY,getRowPartitionTypesHelper:()=>iY,getSliceBeginCoords:()=>pY,getSliceSize:()=>hY,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>VY,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>jY,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>BY,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>GY,getSparseReshapeInputOutputMismatchErrorMessage:()=>WY,getSparseReshapeInputOutputMultipleErrorMessage:()=>zY,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>UY,getSparseReshapeNegativeOutputDimErrorMessage:()=>HY,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>YY,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>qY,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>KY,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>ZY,getUndoAxesPermutation:()=>W5,isIdentityPermutation:()=>PY,log:()=>gW,mergeRealAndImagArrays:()=>xY,prepareAndValidate:()=>PP,prepareSplitSize:()=>LY,segment_util:()=>AS,shouldFuse:()=>na,slice_util:()=>xf,splitRealAndImagArrays:()=>IY,stridesOrDilationsArePositive:()=>fo,tupleValuesAreOne:()=>js,upcastType:()=>Os,validateDefaultValueShape:()=>aY,validateInput:()=>Vu,validateUpdateShape:()=>XI,warn:()=>uo});function eQ(t){try{return t.map(e=>wu(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function tQ(t){return t.map(e=>Ii(e))}var p$=D(()=>{"use strict";H();ku();_t();QP();In();Bu();XP();JP();CS();TS();Eu();e$();t$();IS();mf();n$();Bu();r$();sh();o$();a$();u$();c$();l$();f$();d$();});var kS={};Re(kS,{nonMaxSuppressionV3Impl:()=>im,nonMaxSuppressionV4Impl:()=>sm,nonMaxSuppressionV5Impl:()=>am,whereImpl:()=>Jh});var h$=D(()=>{"use strict";vf();sS();});var m$=D(()=>{"use strict";CP();MP();_t();FP();IS();mf();TS();cm();tt();NR();H();qP();lm();fm();dm();pm();hm();Vi();NS();mm();Ef();Yn();Eu();wf();Ur();KP();Ln();uh();Jo();Pt();YP();p$();nD();h$();Uw();V();});var Hu={};Re(Hu,{Abs:()=>Qw,Acos:()=>Xw,Acosh:()=>Jw,AdadeltaOptimizer:()=>ji,AdagradOptimizer:()=>Bi,AdamOptimizer:()=>Ui,AdamaxOptimizer:()=>Hi,Add:()=>ol,AddN:()=>e0,All:()=>t0,Any:()=>n0,ArgMax:()=>r0,ArgMin:()=>o0,Asin:()=>i0,Asinh:()=>s0,Atan:()=>a0,Atan2:()=>c0,Atanh:()=>u0,AvgPool:()=>l0,AvgPool3D:()=>f0,AvgPool3DGrad:()=>X6,AvgPoolGrad:()=>Q6,BatchMatMul:()=>d0,BatchToSpaceND:()=>p0,Bincount:()=>h0,BitwiseAnd:()=>m0,BroadcastArgs:()=>g0,BroadcastTo:()=>J6,Cast:()=>il,Ceil:()=>y0,ClipByValue:()=>v0,Complex:()=>w0,ComplexAbs:()=>b0,Concat:()=>E0,Conv2D:()=>D0,Conv2DBackpropFilter:()=>x0,Conv2DBackpropInput:()=>I0,Conv3D:()=>S0,Conv3DBackpropFilterV2:()=>eW,Conv3DBackpropInputV2:()=>T0,Cos:()=>N0,Cosh:()=>C0,CropAndResize:()=>M0,Cumprod:()=>_0,Cumsum:()=>A0,DataStorage:()=>Yp,DenseBincount:()=>k0,DepthToSpace:()=>O0,DepthwiseConv2dNative:()=>R0,DepthwiseConv2dNativeBackpropFilter:()=>F0,DepthwiseConv2dNativeBackpropInput:()=>P0,Diag:()=>$0,Dilation2D:()=>L0,Dilation2DBackpropFilter:()=>nW,Dilation2DBackpropInput:()=>tW,Draw:()=>th,ENV:()=>Jp,Einsum:()=>j0,Elu:()=>B0,EluGrad:()=>rW,Environment:()=>hu,Equal:()=>H0,Erf:()=>U0,Exp:()=>G0,ExpandDims:()=>z0,Expm1:()=>W0,FFT:()=>q0,Fill:()=>K0,FlipLeftRight:()=>Z0,Floor:()=>Y0,FloorDiv:()=>Q0,FromPixels:()=>nh,FusedBatchNorm:()=>X0,FusedConv2D:()=>oh,FusedDepthwiseConv2D:()=>ih,GatherNd:()=>eb,GatherV2:()=>J0,Greater:()=>tb,GreaterEqual:()=>nb,IFFT:()=>rb,Identity:()=>sl,Imag:()=>ob,IsFinite:()=>ib,IsInf:()=>sb,IsNan:()=>ab,KernelBackend:()=>cu,LRN:()=>yb,LRNGrad:()=>aW,LeakyRelu:()=>ub,Less:()=>cb,LessEqual:()=>lb,LinSpace:()=>fb,Log:()=>db,Log1p:()=>pb,LogSoftmax:()=>iW,LogicalAnd:()=>hb,LogicalNot:()=>mb,LogicalOr:()=>gb,LogicalXor:()=>oW,LowerBound:()=>sW,MatrixBandPart:()=>uW,Max:()=>vb,MaxPool:()=>bb,MaxPool3D:()=>Eb,MaxPool3DGrad:()=>lW,MaxPoolGrad:()=>cW,MaxPoolWithArgmax:()=>Db,Maximum:()=>wb,Mean:()=>xb,Min:()=>Ib,Minimum:()=>Sb,MirrorPad:()=>Tb,Mod:()=>Nb,MomentumOptimizer:()=>Gi,Multinomial:()=>Cb,Multiply:()=>_b,Neg:()=>Ab,NonMaxSuppressionV3:()=>kb,NonMaxSuppressionV4:()=>Ob,NonMaxSuppressionV5:()=>Rb,NotEqual:()=>Mb,OP_SCOPE_SUFFIX:()=>vh,OneHot:()=>Pb,OnesLike:()=>Fb,Optimizer:()=>on,OptimizerConstructors:()=>Uu,Pack:()=>$b,PadV2:()=>Lb,Pool:()=>fW,Pow:()=>Vb,Prelu:()=>jb,Prod:()=>Bb,RMSPropOptimizer:()=>zi,RaggedGather:()=>Ub,RaggedRange:()=>Hb,RaggedTensorToTensor:()=>Gb,Range:()=>zb,Rank:()=>ZE,Real:()=>Wb,RealDiv:()=>V0,Reciprocal:()=>qb,Reduction:()=>lt,Relu:()=>Kb,Relu6:()=>Xb,Reshape:()=>Zb,ResizeBilinear:()=>Qb,ResizeBilinearGrad:()=>pW,ResizeNearestNeighbor:()=>Yb,ResizeNearestNeighborGrad:()=>dW,Reverse:()=>Jb,RotateWithOffset:()=>VE,Round:()=>eE,Rsqrt:()=>tE,SGDOptimizer:()=>bo,ScatterNd:()=>nE,SearchSorted:()=>oE,Select:()=>iE,Selu:()=>sE,Sigmoid:()=>fE,Sign:()=>lE,Sin:()=>uE,Sinh:()=>cE,Slice:()=>aE,Softmax:()=>yE,Softplus:()=>dE,SpaceToBatchND:()=>mE,SparseFillEmptyRows:()=>vE,SparseReshape:()=>wE,SparseSegmentMean:()=>bE,SparseSegmentSum:()=>EE,SparseToDense:()=>DE,SplitV:()=>gE,Sqrt:()=>pE,Square:()=>hW,SquaredDifference:()=>xE,StaticRegexReplace:()=>IE,Step:()=>LE,StridedSlice:()=>SE,StringNGrams:()=>TE,StringSplit:()=>NE,StringToHashBucketFast:()=>CE,Sub:()=>_E,Sum:()=>hE,Tan:()=>AE,Tanh:()=>ME,Tensor:()=>_e,TensorBuffer:()=>Lo,TensorScatterUpdate:()=>rE,Tile:()=>al,TopK:()=>kE,Transform:()=>OE,Transpose:()=>ul,Unique:()=>RE,Unpack:()=>FE,UnsortedSegmentSum:()=>PE,UpperBound:()=>mW,Variable:()=>co,ZerosLike:()=>$E,_FusedMatMul:()=>rh,abs:()=>Ct,acos:()=>vD,acosh:()=>wD,add:()=>ne,addN:()=>bD,all:()=>ED,any:()=>DD,argMax:()=>Dl,argMin:()=>xD,asin:()=>ID,asinh:()=>SD,atan:()=>TD,atan2:()=>ND,atanh:()=>CD,avgPool:()=>Sl,avgPool3d:()=>OD,backend:()=>vl,backend_util:()=>MS,basicLSTMCell:()=>FD,batchNorm:()=>zo,batchNorm2d:()=>$D,batchNorm3d:()=>LD,batchNorm4d:()=>VD,batchToSpaceND:()=>Nl,bincount:()=>_l,bitwiseAnd:()=>BD,booleanMaskAsync:()=>aF,broadcastArgs:()=>UD,broadcastTo:()=>Us,broadcast_util:()=>Gs,browser:()=>Do,buffer:()=>Wt,cast:()=>me,ceil:()=>GD,clipByValue:()=>zD,clone:()=>Dn,complex:()=>un,concat:()=>Ye,concat1d:()=>WD,concat2d:()=>qD,concat3d:()=>KD,concat4d:()=>ZD,conv1d:()=>YD,conv2d:()=>Wo,conv2dTranspose:()=>XD,conv3d:()=>JD,conv3dTranspose:()=>ex,copyRegisteredKernels:()=>bW,cos:()=>tx,cosh:()=>nx,cosineWindow:()=>ju,cumprod:()=>rx,cumsum:()=>ox,customGrad:()=>nn,denseBincount:()=>ix,deprecationWarn:()=>nk,depthToSpace:()=>sx,depthwiseConv2d:()=>Hs,device_util:()=>yh,diag:()=>ax,dilation2d:()=>ux,disableDeprecationWarnings:()=>WW,dispose:()=>ct,disposeVariables:()=>qW,div:()=>Se,divNoNan:()=>lx,dot:()=>fx,dropout:()=>EF,einsum:()=>Ko,elu:()=>Ml,enableDebugMode:()=>zW,enableProdMode:()=>GW,enclosingPowerOfTwo:()=>tm,engine:()=>wh,ensureShape:()=>hx,env:()=>ie,equal:()=>Ai,erf:()=>mx,euclideanNorm:()=>vx,exp:()=>Qn,expandDims:()=>Vt,expm1:()=>wx,eye:()=>Fl,fft:()=>Ys,fill:()=>Pr,findBackend:()=>eq,findBackendFactory:()=>tq,floor:()=>Pl,floorDiv:()=>El,fused:()=>nm,gather:()=>$l,gatherND:()=>yF,gather_util:()=>xS,getBackend:()=>yl,getGradient:()=>ah,getKernel:()=>Ns,getKernelsForBackend:()=>ll,grad:()=>RO,grads:()=>FO,greater:()=>mo,greaterEqual:()=>Ll,ifft:()=>Pi,imag:()=>Xo,image:()=>Li,inTopKAsync:()=>xF,io:()=>Eo,irfft:()=>uf,isFinite:()=>Ix,isInf:()=>Sx,isNaN:()=>Tx,keep:()=>ln,kernel_impls:()=>kS,leakyRelu:()=>jl,less:()=>Pu,lessEqual:()=>zs,linalg:()=>uP,linspace:()=>_x,localResponseNormalization:()=>Ax,log:()=>go,log1p:()=>Ul,logSigmoid:()=>Ox,logSoftmax:()=>Rx,logSumExp:()=>Gl,logicalAnd:()=>ki,logicalNot:()=>zl,logicalOr:()=>Wl,logicalXor:()=>Lx,losses:()=>cP,lowerBound:()=>Vx,matMul:()=>Ne,math:()=>DS,max:()=>$r,maxPool:()=>ql,maxPool3d:()=>Bx,maxPoolWithArgmax:()=>Ux,maximum:()=>Kl,mean:()=>Oi,memory:()=>KW,meshgrid:()=>Gx,min:()=>Ou,minimum:()=>Ri,mirrorPad:()=>Yl,mod:()=>zx,moments:()=>Wx,movingAverage:()=>cF,mul:()=>W,multiRNNCell:()=>qx,multinomial:()=>Kx,neg:()=>jt,nextFrame:()=>ZP,norm:()=>Mi,notEqual:()=>Ql,oneHot:()=>Fi,ones:()=>jr,onesLike:()=>Qx,op:()=>w,outerProduct:()=>Xx,pad:()=>Xn,pad1d:()=>Jx,pad2d:()=>eI,pad3d:()=>Xl,pad4d:()=>tI,pool:()=>rI,pow:()=>ho,prelu:()=>ef,print:()=>bl,prod:()=>iI,profile:()=>ZW,raggedGather:()=>sI,raggedRange:()=>aI,raggedTensorToTensor:()=>uI,rand:()=>cI,randomGamma:()=>bI,randomNormal:()=>nf,randomStandardNormal:()=>DI,randomUniform:()=>Ks,randomUniformInt:()=>xI,range:()=>hr,ready:()=>XW,real:()=>yo,reciprocal:()=>II,registerBackend:()=>nq,registerGradient:()=>yW,registerKernel:()=>EM,relu:()=>ti,relu6:()=>sf,removeBackend:()=>JW,reshape:()=>L,reverse:()=>jn,reverse1d:()=>TI,reverse2d:()=>NI,reverse3d:()=>CI,reverse4d:()=>_I,rfft:()=>Qs,round:()=>af,rsqrt:()=>MI,scalar:()=>ae,scatterND:()=>fF,scatter_util:()=>hf,searchSorted:()=>$u,selu:()=>kI,separableConv2d:()=>OI,serialization:()=>pS,setBackend:()=>QW,setPlatform:()=>rq,setdiff1dAsync:()=>RI,sigmoid:()=>Sn,sign:()=>FI,signal:()=>aP,sin:()=>PI,sinh:()=>$I,slice:()=>Te,slice1d:()=>LI,slice2d:()=>VI,slice3d:()=>jI,slice4d:()=>BI,slice_util:()=>xf,softmax:()=>UI,softplus:()=>Hl,spaceToBatchND:()=>Jl,sparse:()=>lP,sparseToDense:()=>mF,spectral:()=>sP,split:()=>vo,sqrt:()=>fn,square:()=>At,squaredDifference:()=>lf,squeeze:()=>dn,stack:()=>rn,step:()=>df,stridedSlice:()=>WI,string:()=>fP,sub:()=>ue,sum:()=>Le,sumOutType:()=>XM,tan:()=>qI,tanh:()=>_u,tensor:()=>Lt,tensor1d:()=>kt,tensor2d:()=>Br,tensor3d:()=>pf,tensor4d:()=>ZI,tensor5d:()=>YI,tensor6d:()=>QI,tensorScatterUpdate:()=>JI,tensor_util:()=>QE,test_util:()=>wI,tidy:()=>se,tile:()=>Qo,time:()=>YW,topk:()=>eS,train:()=>eY,transpose:()=>Xs,truncatedNormal:()=>tS,unique:()=>nS,unregisterGradient:()=>wW,unregisterKernel:()=>vW,unsortedSegmentSum:()=>rS,unstack:()=>Bn,upcastType:()=>Os,upperBound:()=>oS,util:()=>q,valueAndGrad:()=>PO,valueAndGrads:()=>$O,variable:()=>iS,variableGrads:()=>Oh,version_core:()=>WP,where:()=>Vn,whereAsync:()=>gf,zeros:()=>Vr,zerosLike:()=>wt});var pn=D(()=>{"use strict";Ak();pP();m$();dP()});var nQ,g$=D(()=>{"use strict";pn();nQ=ie();nQ.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})});var Un,y$,v$=D(()=>{"use strict";Un=function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t}(Un||{});(function(t){let e;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(y$||(y$={}))});function w$(t,e){let n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};OS[t]=n}function bm(t){return OS[t]}function b$(t){delete OS[t]}var OS,Em=D(()=>{"use strict";OS={}});function g(t,e,n,r,o){let i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,u=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return yt(e.inputNames[c],n,r,o);if(i.type==="tensors"){let p=e.inputs.slice(a,u);return e.inputNames.slice(a,u).filter((b,S)=>{var T;return((T=p[S])===null||T===void 0?void 0:T.op)!=="NoOp"}).map(b=>yt(b,n,r,o))}let l=yt(e.inputNames[c],n,r,o),d=l.dataSync();return i.type==="number"?d[0]:q.toNestedArray(l.shape,d)}let s=e.attrParams[t];return s&&s.value}function yt(t,e,n,r){let[o,i]=hn(t,n);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=n.currentContextIds.find(a=>!!e[Dm(o,a)]);return s!==void 0?e[Dm(o,s)][i]:void 0}function RS(t,e,n){return e[Dm(t,n.currentContextId)]}function Hr(t,e){let[n,r,o]=hn(t,e);return[Dm(n,e&&e.currentContextId),r,o]}function Dm(t,e){return e?`${t}-${e}`:t}function hn(t,e){if(t==="")return["",0,void 0];let n=e!=null&&e.parseNodeNameCache!=null;if(n){let i=e.parseNodeNameCache.get(t);if(i!=null)return i}let r=t.split(":"),o;if(r.length===1)o=[t,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return n&&e.parseNodeNameCache.set(t,o),o}function If(t,e,n){let r=g("pad",t,e,n);if(r==="explicit"){r=g("explicitPaddings",t,e,n);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Gr(t){return t.kept?t:Dn(t)}var ft=D(()=>{"use strict";pn();});var FS={};Re(FS,{json:()=>oQ});var oQ,E$=D(()=>{"use strict";oQ=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var PS={};Re(PS,{json:()=>iQ});var iQ,D$=D(()=>{"use strict";iQ=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var $S={};Re($S,{json:()=>sQ});var sQ,x$=D(()=>{"use strict";sQ=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}]});var LS={};Re(LS,{json:()=>aQ});var aQ,I$=D(()=>{"use strict";aQ=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]});var VS={};Re(VS,{json:()=>uQ});var uQ,S$=D(()=>{"use strict";uQ=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]});var jS={};Re(jS,{json:()=>cQ});var cQ,T$=D(()=>{"use strict";cQ=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var BS={};Re(BS,{json:()=>lQ});var lQ,N$=D(()=>{"use strict";lQ=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]});var US={};Re(US,{json:()=>fQ});var fQ,C$=D(()=>{"use strict";fQ=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]});var HS={};Re(HS,{json:()=>dQ});var dQ,_$=D(()=>{"use strict";dQ=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]});var GS={};Re(GS,{json:()=>pQ});var pQ,A$=D(()=>{"use strict";pQ=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}]});var zS={};Re(zS,{json:()=>hQ});var hQ,M$=D(()=>{"use strict";hQ=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}]});var WS={};Re(WS,{json:()=>mQ});var mQ,k$=D(()=>{"use strict";mQ=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}]});var qS={};Re(qS,{json:()=>gQ});var gQ,O$=D(()=>{"use strict";gQ=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}]});var KS={};Re(KS,{json:()=>yQ});var yQ,R$=D(()=>{"use strict";yQ=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]});var ZS={};Re(ZS,{json:()=>vQ});var vQ,F$=D(()=>{"use strict";vQ=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]});var YS={};Re(YS,{json:()=>wQ});var wQ,P$=D(()=>{"use strict";wQ=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]});var QS={};Re(QS,{json:()=>bQ});var bQ,$$=D(()=>{"use strict";bQ=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]});var XS={};Re(XS,{json:()=>EQ});var EQ,L$=D(()=>{"use strict";EQ=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]});var JS={};Re(JS,{json:()=>DQ});var DQ,V$=D(()=>{"use strict";DQ=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]});function xQ(t){let e=ie().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function B$(t,e){let n=Array.isArray(t)?String.fromCharCode.apply(null,t):xQ(t);return e?n:n.toLowerCase()}function xm(t,e,n,r=!1){let o=t[e];return o!=null?B$(o.s,r):n}function Im(t,e,n){let r=t[e];return r?r.b:n}function Sm(t,e,n){let r=t[e]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function eT(t){switch(typeof t=="string"&&(t=Un[t]),t){case Un.DT_FLOAT:case Un.DT_HALF:return"float32";case Un.DT_INT32:case Un.DT_INT64:case Un.DT_INT8:case Un.DT_UINT8:return"int32";case Un.DT_BOOL:return"bool";case Un.DT_DOUBLE:return"float32";case Un.DT_STRING:return"string";case Un.DT_COMPLEX64:case Un.DT_COMPLEX128:return"complex64";default:return null}}function j$(t,e,n){let r=t[e];return r&&r.func?r.func.name:n}function Tm(t,e,n){let r=t[e];return r&&r.type?eT(r.type):n}function Nm(t,e,n){let r=t[e];return r&&r.list&&r.list.type?r.list.type.map(o=>eT(o)):n}function U$(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Cm(t,e,n){let r=t[e];return r&&r.shape?U$(r.shape):n}function _m(t,e,n){let r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function Am(t,e,n,r=!1){let o=t[e];return o&&o.list&&o.list.s?o.list.s.map(i=>B$(i,r)):n}function Mm(t,e,n){let r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(o=>U$(o)):n}function km(t,e,n){let r=t[e];return r&&r.list&&r.list.b?r.list.b:n}var Sf,tT=D(()=>{"use strict";pn();v$();Em();ft();E$();D$();x$();I$();S$();T$();N$();C$();_$();A$();M$();k$();O$();R$();F$();P$();$$();L$();V$();Sf=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[FS,PS,$S,LS,VS,jS,BS,US,HS,GS,zS,WS,qS,KS,ZS,YS,QS,XS,JS],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(e,n={}){let r=e.node,o=[],i=[],s=[],a=r.reduce((S,T)=>(S[T.name]=this.mapNode(T),T.op.startsWith("Placeholder")?o.push(S[T.name]):T.op==="Const"?i.push(S[T.name]):(T.input==null||T.input.length===0)&&s.push(S[T.name]),S),{}),u=[],c=[],l={},d={};n!=null&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));let p=Object.keys(a);p.forEach(S=>{let T=a[S];T.inputNames.forEach((A,$)=>{let[M,,O]=Hr(A),U=a[M];if(U.outputs!=null){let j=U.outputs.indexOf(O);if(j!==-1){let z=`${M}:${j}`;T.inputNames[$]=z}}T.inputs.push(U),U.children.push(T)})}),Object.keys(d).length===0?p.forEach(S=>{let T=a[S];T.children.length===0&&c.push(T)}):Object.keys(d).forEach(S=>{let[T]=Hr(S),A=a[T];A!=null&&(A.signatureKey=d[S],c.push(A))}),Object.keys(l).length>0?Object.keys(l).forEach(S=>{let[T]=Hr(S),A=a[T];A&&(A.signatureKey=l[S],u.push(A))}):u=o;let m={};e.library!=null&&e.library.function!=null&&(m=e.library.function.reduce((S,T)=>(S[T.signature.name]=this.mapFunction(T),S),{}));let b={nodes:a,inputs:u,outputs:c,weights:i,placeholders:o,signature:n,functions:m};return s.length>0&&(b.initNodes=s),b}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){let n=bm(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=xm(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=xm(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=Am(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Am(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=Sm(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=Sm(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=_m(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=_m(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Im(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Im(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=km(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=km(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Cm(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Cm(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Mm(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Mm(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Tm(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Tm(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Nm(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Nm(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=j$(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=j$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(e){let n=e.nodeDef,r=[],o=[],i={};n!=null&&(i=n.reduce((d,p)=>(d[p.name]=this.mapNode(p),p.op==="Const"&&o.push(d[p.name]),d),{}));let s=[],a=[];e.signature.inputArg.forEach(d=>{let[p]=Hr(d.name),m={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:eT(d.type),type:"dtype"}},children:[]};m.signatureKey=d.name,s.push(m),i[p]=m}),Object.keys(i).forEach(d=>{let p=i[d];p.inputNames.forEach((m,b)=>{let[S,,T]=Hr(m),A=i[S];if(A.outputs!=null){let $=A.outputs.indexOf(T);if($!==-1){let M=`${S}:${$}`;p.inputNames[b]=M}}p.inputs.push(A),A.children.push(p)})});let c=e.ret;e.signature.outputArg.forEach(d=>{let[p,m]=Hr(c[d.name]),b=i[p];b!=null&&(b.defaultOutput=m,a.push(b))});let l=this.mapArgsToSignature(e);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}});var Om,H$=D(()=>{"use strict";ft();tT();Om=class{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(o=>this.getInput(o)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(e){return yt(e,this.tensorMap,this.context)}getAttr(e,n){let r=this.node.rawAttrs[e];if(r.tensor!=null)return yt(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Sm(this.node.rawAttrs,e,n);if(r.s!=null)return xm(this.node.rawAttrs,e,n);if(r.b!=null)return Im(this.node.rawAttrs,e,n);if(r.shape!=null)return Cm(this.node.rawAttrs,e,n);if(r.type!=null)return Tm(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return _m(this.node.rawAttrs,e,n);if(r.list.s!=null)return Am(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Mm(this.node.rawAttrs,e,n);if(r.list.b!=null)return km(this.node.rawAttrs,e,n);if(r.list.type!=null)return Nm(this.node.rawAttrs,e,n)}return n}}});var Fe={};Re(Fe,{OP_SCOPE_SUFFIX:()=>vh,abs:()=>Ct,acos:()=>vD,acosh:()=>wD,add:()=>ne,addN:()=>bD,all:()=>ED,any:()=>DD,argMax:()=>Dl,argMin:()=>xD,asin:()=>ID,asinh:()=>SD,atan:()=>TD,atan2:()=>ND,atanh:()=>CD,avgPool:()=>Sl,avgPool3d:()=>OD,basicLSTMCell:()=>FD,batchNorm:()=>zo,batchNorm2d:()=>$D,batchNorm3d:()=>LD,batchNorm4d:()=>VD,batchToSpaceND:()=>Nl,bincount:()=>_l,bitwiseAnd:()=>BD,booleanMaskAsync:()=>aF,broadcastArgs:()=>UD,broadcastTo:()=>Us,buffer:()=>Wt,cast:()=>me,ceil:()=>GD,clipByValue:()=>zD,clone:()=>Dn,complex:()=>un,concat:()=>Ye,concat1d:()=>WD,concat2d:()=>qD,concat3d:()=>KD,concat4d:()=>ZD,conv1d:()=>YD,conv2d:()=>Wo,conv2dTranspose:()=>XD,conv3d:()=>JD,conv3dTranspose:()=>ex,cos:()=>tx,cosh:()=>nx,cosineWindow:()=>ju,cumprod:()=>rx,cumsum:()=>ox,denseBincount:()=>ix,depthToSpace:()=>sx,depthwiseConv2d:()=>Hs,diag:()=>ax,dilation2d:()=>ux,div:()=>Se,divNoNan:()=>lx,dot:()=>fx,dropout:()=>EF,einsum:()=>Ko,elu:()=>Ml,enclosingPowerOfTwo:()=>tm,ensureShape:()=>hx,equal:()=>Ai,erf:()=>mx,euclideanNorm:()=>vx,exp:()=>Qn,expandDims:()=>Vt,expm1:()=>wx,eye:()=>Fl,fft:()=>Ys,fill:()=>Pr,floor:()=>Pl,floorDiv:()=>El,fused:()=>nm,gather:()=>$l,gatherND:()=>yF,greater:()=>mo,greaterEqual:()=>Ll,ifft:()=>Pi,imag:()=>Xo,image:()=>Li,inTopKAsync:()=>xF,irfft:()=>uf,isFinite:()=>Ix,isInf:()=>Sx,isNaN:()=>Tx,leakyRelu:()=>jl,less:()=>Pu,lessEqual:()=>zs,linalg:()=>uP,linspace:()=>_x,localResponseNormalization:()=>Ax,log:()=>go,log1p:()=>Ul,logSigmoid:()=>Ox,logSoftmax:()=>Rx,logSumExp:()=>Gl,logicalAnd:()=>ki,logicalNot:()=>zl,logicalOr:()=>Wl,logicalXor:()=>Lx,losses:()=>cP,lowerBound:()=>Vx,matMul:()=>Ne,max:()=>$r,maxPool:()=>ql,maxPool3d:()=>Bx,maxPoolWithArgmax:()=>Ux,maximum:()=>Kl,mean:()=>Oi,meshgrid:()=>Gx,min:()=>Ou,minimum:()=>Ri,mirrorPad:()=>Yl,mod:()=>zx,moments:()=>Wx,movingAverage:()=>cF,mul:()=>W,multiRNNCell:()=>qx,multinomial:()=>Kx,neg:()=>jt,norm:()=>Mi,notEqual:()=>Ql,oneHot:()=>Fi,ones:()=>jr,onesLike:()=>Qx,op:()=>w,outerProduct:()=>Xx,pad:()=>Xn,pad1d:()=>Jx,pad2d:()=>eI,pad3d:()=>Xl,pad4d:()=>tI,pool:()=>rI,pow:()=>ho,prelu:()=>ef,print:()=>bl,prod:()=>iI,raggedGather:()=>sI,raggedRange:()=>aI,raggedTensorToTensor:()=>uI,rand:()=>cI,randomGamma:()=>bI,randomNormal:()=>nf,randomStandardNormal:()=>DI,randomUniform:()=>Ks,randomUniformInt:()=>xI,range:()=>hr,real:()=>yo,reciprocal:()=>II,relu:()=>ti,relu6:()=>sf,reshape:()=>L,reverse:()=>jn,reverse1d:()=>TI,reverse2d:()=>NI,reverse3d:()=>CI,reverse4d:()=>_I,rfft:()=>Qs,round:()=>af,rsqrt:()=>MI,scalar:()=>ae,scatterND:()=>fF,searchSorted:()=>$u,selu:()=>kI,separableConv2d:()=>OI,setdiff1dAsync:()=>RI,sigmoid:()=>Sn,sign:()=>FI,signal:()=>aP,sin:()=>PI,sinh:()=>$I,slice:()=>Te,slice1d:()=>LI,slice2d:()=>VI,slice3d:()=>jI,slice4d:()=>BI,softmax:()=>UI,softplus:()=>Hl,spaceToBatchND:()=>Jl,sparse:()=>lP,sparseToDense:()=>mF,spectral:()=>sP,split:()=>vo,sqrt:()=>fn,square:()=>At,squaredDifference:()=>lf,squeeze:()=>dn,stack:()=>rn,step:()=>df,stridedSlice:()=>WI,string:()=>fP,sub:()=>ue,sum:()=>Le,tan:()=>qI,tanh:()=>_u,tensor:()=>Lt,tensor1d:()=>kt,tensor2d:()=>Br,tensor3d:()=>pf,tensor4d:()=>ZI,tensor5d:()=>YI,tensor6d:()=>QI,tensorScatterUpdate:()=>JI,tile:()=>Qo,topk:()=>eS,transpose:()=>Xs,truncatedNormal:()=>tS,unique:()=>nS,unsortedSegmentSum:()=>rS,unstack:()=>Bn,upperBound:()=>oS,variable:()=>iS,where:()=>Vn,whereAsync:()=>gf,zeros:()=>Vr,zerosLike:()=>wt});var Ot=D(()=>{"use strict";wf();});var G$,z$=D(()=>{"use strict";Ot();ft();G$=(t,e,n,r=Fe)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(g("a",t,e,n),g("b",t,e,n))];case"AddN":return[r.addN(g("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(g("a",t,e,n),g("b",t,e,n))];case"Mul":return[r.mul(g("a",t,e,n),g("b",t,e,n))];case"RealDiv":case"Div":return[r.div(g("a",t,e,n),g("b",t,e,n))];case"DivNoNan":return[r.divNoNan(g("a",t,e,n),g("b",t,e,n))];case"FloorDiv":return[r.floorDiv(g("a",t,e,n),g("b",t,e,n))];case"Sub":return[r.sub(g("a",t,e,n),g("b",t,e,n))];case"Minimum":return[r.minimum(g("a",t,e,n),g("b",t,e,n))];case"Maximum":return[r.maximum(g("a",t,e,n),g("b",t,e,n))];case"Pow":return[r.pow(g("a",t,e,n),g("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var W$,q$=D(()=>{"use strict";Ot();ft();W$=(t,e,n,r=Fe)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(g("x",t,e,n))];case"Acos":return[r.acos(g("x",t,e,n))];case"Acosh":return[r.acosh(g("x",t,e,n))];case"Asin":return[r.asin(g("x",t,e,n))];case"Asinh":return[r.asinh(g("x",t,e,n))];case"Atan":return[r.atan(g("x",t,e,n))];case"Atan2":return[r.atan2(g("x",t,e,n),g("y",t,e,n))];case"Atanh":return[r.atanh(g("x",t,e,n))];case"Ceil":return[r.ceil(g("x",t,e,n))];case"Complex":return[r.complex(g("real",t,e,n),g("imag",t,e,n))];case"Cos":return[r.cos(g("x",t,e,n))];case"Cosh":return[r.cosh(g("x",t,e,n))];case"Elu":return[r.elu(g("x",t,e,n))];case"Erf":return[r.erf(g("x",t,e,n))];case"Exp":return[r.exp(g("x",t,e,n))];case"Expm1":return[r.expm1(g("x",t,e,n))];case"Floor":return[r.floor(g("x",t,e,n))];case"Log":return[r.log(g("x",t,e,n))];case"Log1p":return[r.log1p(g("x",t,e,n))];case"Imag":return[r.imag(g("x",t,e,n))];case"Neg":return[r.neg(g("x",t,e,n))];case"Reciprocal":return[r.reciprocal(g("x",t,e,n))];case"Real":return[r.real(g("x",t,e,n))];case"Relu":return[r.relu(g("x",t,e,n))];case"Round":return[r.round(g("x",t,e,n))];case"Selu":return[r.selu(g("x",t,e,n))];case"Sigmoid":return[r.sigmoid(g("x",t,e,n))];case"Sin":return[r.sin(g("x",t,e,n))];case"Sign":return[r.sign(g("x",t,e,n))];case"Sinh":return[r.sinh(g("x",t,e,n))];case"Softplus":return[r.softplus(g("x",t,e,n))];case"Sqrt":return[r.sqrt(g("x",t,e,n))];case"Square":return[r.square(g("x",t,e,n))];case"Tanh":return[r.tanh(g("x",t,e,n))];case"Tan":return[r.tan(g("x",t,e,n))];case"ClipByValue":return[r.clipByValue(g("x",t,e,n),g("clipValueMin",t,e,n),g("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(g("x",t,e,n))];case"Rsqrt":return[r.rsqrt(yt(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(g("x",t,e,n),g("alpha",t,e,n))];case"Prelu":return[r.prelu(g("x",t,e,n),g("alpha",t,e,n))];case"IsNan":return[r.isNaN(yt(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(yt(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(yt(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});function Hn(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){q.assert(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){let o=t[r],i=e[r];q.assert(o<0||i<0||o===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function K$(t){return!(typeof t=="number"||t.some(e=>e<0))}function Gu(t,e,n){let r=Rm(t,n),o=!K$(r);if(o&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&e.forEach(i=>{r=Rm(i.shape,r)}),!K$(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Rm(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);let n=[];for(let r=0;r<t.length;++r){let o=t[r],i=e[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=o>=0?o:i}return n}var nT=D(()=>{"use strict";pn();});var Fm,Z$=D(()=>{"use strict";pn();nT();Fm=class{constructor(e,n,r,o,i,s,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=ae(0),ln(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Hn(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,ln(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,o)=>this.write(r,n[o]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let o=0;o<this.size();o++)e.push(o)}if(e.length===0)return Lt([],[0].concat(this.elementShape));let r=this.readMany(e);return Hn(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),rn(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Lt([],[0].concat(this.elementShape));let n=[];for(let o=0;o<this.size();o++)n.push(o);let r=this.readMany(n);return Hn(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Ye(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);let r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Bn(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0,o=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:n.size/r,s=[];se(()=>{n=L(n,[1,r,i]);for(let u=0;u<e.length;++u){let l=[0,u===0?0:o[u-1],0],d=[1,e[u],i];s[u]=L(Te(n,l,d),this.elementShape)}return s});let a=[];for(let u=0;u<e.length;u++)a[u]=u;this.writeMany(a,s)}}});function Y$(t,e,n){let r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);let o=t.shape.slice(1);Hn(o,e,"TensorList shape mismatch: ");let i=Bn(t);return new zu(i,e,r)}function Q$(t,e,n,r){return new zu([],t,e,r)}function X$(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let o=Math.max(...e);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new zu([],n,t.dtype,r),s=Bn(t,0);return e.forEach((a,u)=>{i.setItem(a,s[u])}),i}function J$(t,e,n){let r=0,o=e.map(l=>(r+=l,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);let i=t.shape.slice(1),s=Rm(i,n),a=r===0?0:t.size/r,u=se(()=>{let l=[];t=L(t,[1,r,a]);for(let d=0;d<e.length;++d){let m=[0,d===0?0:o[d-1],0],b=[1,e[d],a];l[d]=L(Te(t,m,b),s)}return t.dispose(),l}),c=new zu([],n,t.dtype,e.length);for(let l=0;l<u.length;l++)c.setItem(l,u[l]);return c}var zu,eL=D(()=>{"use strict";pn();nT();zu=class t{get id(){return this.idTensor.id}constructor(e,n,r,o=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Hn(n,i.shape,"TensorList shape mismatch: "),ln(i)}),this.idTensor=ae(0),this.maxNumElements=o,ln(this.idTensor)}copy(){return new t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Hn(e,this.elementShape,"TensorList shape mismatch: ");let o=Gu(this.elementShape,this.tensors,e);return se(()=>{let i=this.tensors.map(s=>L(s,o));return rn(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Gu(this.elementShape,this.tensors,e),o=this.tensors.pop();return o.kept=!1,Hn(o.shape,e,"TensorList shape mismatch: "),L(o,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Hn(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ln(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let n=new t([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Hn(this.tensors[e].shape,n,"TensorList shape mismatch: ");let o=Gu(this.elementShape,this.tensors,n);return L(this.tensors[e],o)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Hn(this.elementShape,n.shape,"TensorList shape mismatch: "),ln(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Hn(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());let o=Gu(this.elementShape,this.tensors,r);return e.length===0?Lt([],[0].concat(o)):se(()=>{let i=e.map(s=>L(this.tensors[s],o));return rn(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Hn(this.elementShape,n,"TensorList shape mismatch: ");let r=Gu(this.elementShape,this.tensors,n);return this.size()===0?Lt([],[0].concat(r)):se(()=>{let o=this.tensors.map(i=>L(i,r));return Ye(o,0)})}}});var tL,nL=D(()=>{"use strict";pn();Z$();eL();ft();tL=(t,e,n)=>G(void 0,null,function*(){switch(t.op){case"If":case"StatelessIf":{let r=g("thenBranch",t,e,n),o=g("elseBranch",t,e,n),i=g("cond",t,e,n),s=g("args",t,e,n);return(yield i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=g("body",t,e,n),o=g("cond",t,e,n),i=g("args",t,e,n),s=yield n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(l=>l.id),u=yield s[0].data();s.forEach(l=>{!l.kept&&a.indexOf(l.id)===-1&&l.dispose()});let c=i;for(;u[0];){let l=c;c=yield n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let d=c.map(m=>m.id);l.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()});let p=yield n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=yield p[0].data(),p.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()})}return c}case"LoopCond":{let r=g("pred",t,e,n);return[Gr(r)]}case"Switch":{let r=g("pred",t,e,n),o=g("data",t,e,n);return o.kept||(o=Gr(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=t.inputNames.find(o=>yt(o,e,n)!==void 0);if(r){let o=yt(r,e,n);return[Gr(o)]}return}case"Enter":{let r=g("frameName",t,e,n),o=g("tensor",t,e,n);return n.enterFrame(r),[Gr(o)]}case"Exit":{let r=g("tensor",t,e,n);return n.exitFrame(),[Gr(r)]}case"NextIteration":{let r=g("tensor",t,e,n);return n.nextIteration(),[Gr(r)]}case"TensorArrayV3":{let r=g("size",t,e,n),o=g("dtype",t,e,n),i=g("elementShape",t,e,n),s=g("dynamicSize",t,e,n),a=g("clearAfterRead",t,e,n),u=g("identicalElementShapes",t,e,n),c=g("name",t,e,n),l=new Fm(c,o,r,i,u,s,a);return n.addTensorArray(l),[l.idTensor,ae(1)]}case"TensorArrayWriteV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n),i=g("tensor",t,e,n),s=n.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),i=g("dtype",t,e,n);return[n.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),i=g("tensor",t,e,n),s=n.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id),i=g("dtype",t,e,n);return[o.concat(i)]}case"TensorArraySplitV3":{let r=g("tensorArrayId",t,e,n),o=g("tensor",t,e,n),i=g("lengths",t,e,n),s=n.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return[ae(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),i=g("tensor",t,e,n),s=n.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),i=g("elementShape",t,e,n),s=g("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=g("indices",t,e,n),o=g("tensor",t,e,n),i=g("elementShape",t,e,n),s=g("numElements",t,e,n),a=X$(o,r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=g("elementShape",t,e,n),o=g("elementDType",t,e,n),i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=g(i,t,e,n),a=t.op==="TensorListReserve"?-1:s,u=Q$(r,o,s,a);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{let r=g("tensorListId",t,e,n),o=g("indices",t,e,n),i=g("elementShape",t,e,n),s=g("elementDType",t,e,n);return[n.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n),s=g("numElements",t,e,n);return[n.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n),s=Y$(r,o,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id),i=g("dtype",t,e,n),s=g("elementShape",t,e,n);return[o.concat(i,s)]}case"TensorListPushBack":{let r=g("tensorListId",t,e,n),o=g("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),i=g("lengths",t,e,n),s=J$(r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id);return[ae(o.size(),"int32")]}case"TensorListResize":{let r=g("tensorListId",t,e,n),o=g("size",t,e,n),s=n.getTensorList(r.id).resize(o);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})});function rL(t,e,n){let[r,o]=g("fusedOps",t,e,n),i=r==="biasadd",s=!i,a=o==="prelu",u=r==="fusedbatchnorm",c=g("numArgs",t,e,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let l=g("strides",t,e,n),d=If(t,e,n),p=g("dataFormat",t,e,n).toUpperCase(),m=g("dilations",t,e,n),[b,S]=g("args",t,e,n);s&&(S=b,b=void 0);let T=g("leakyreluAlpha",t,e,n);return{stride:l,pad:d,dataFormat:p,dilations:m,biasArg:b,preluArg:S,activationFunc:o,leakyreluAlpha:T}}var oL,iL=D(()=>{"use strict";Ot();ft();oL=(t,e,n,r=Fe)=>{switch(t.op){case"Conv1D":{let o=g("stride",t,e,n),i=g("pad",t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilation",t,e,n);return[r.conv1d(g("x",t,e,n),g("filter",t,e,n),o,i,s,a)]}case"Conv2D":{let o=g("strides",t,e,n),i=If(t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv2d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:u,preluArg:c,activationFunc:l,leakyreluAlpha:d}=rL(t,e,n);return[r.fused.conv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:u,activation:l,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:u,preluArg:c,activationFunc:l,leakyreluAlpha:d}=rL(t,e,n);return[r.fused.depthwiseConv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:u,activation:l,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=g("outputShape",t,e,n),i=g("strides",t,e,n),s=If(t,e,n);return[r.conv2dTranspose(g("x",t,e,n),g("filter",t,e,n),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=g("strides",t,e,n),i=If(t,e,n),s=g("dilations",t,e,n),a=g("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(g("input",t,e,n),g("filter",t,e,n),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv3d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.avgPool(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.maxPool(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n),a=g("includeBatchInIndex",t,e,n),{result:u,indexes:c}=r.maxPoolWithArgmax(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i,a);return[u,c]}case"AvgPool3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.avgPool3d(g("x",t,e,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.maxPool3d(g("x",t,e,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("dilations",t,e,n),a=o[1],u=o[2],c=s[1],l=s[2];return[r.dilation2d(g("x",t,e,n),g("filter",t,e,n),[a,u],i,[c,l],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var sL,aL=D(()=>{"use strict";Ot();ft();sL=(t,e,n,r=Fe)=>{switch(t.op){case"Fill":{let o=g("shape",t,e,n),i=g("dtype",t,e,n),s=g("value",t,e,n);return[r.fill(o,s,i)]}case"LinSpace":{let o=g("start",t,e,n),i=g("stop",t,e,n),s=g("num",t,e,n);return[r.linspace(o,i,s)]}case"Multinomial":{let o=g("logits",t,e,n),i=g("numSamples",t,e,n),s=g("seed",t,e,n);return[r.multinomial(o,i,s)]}case"OneHot":{let o=g("indices",t,e,n),i=g("depth",t,e,n),s=g("onValue",t,e,n),a=g("offValue",t,e,n),u=g("dtype",t,e,n);return[r.oneHot(o,i,s,a,u)]}case"Ones":return[r.ones(g("shape",t,e,n),g("dtype",t,e,n))];case"OnesLike":return[r.onesLike(g("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(g("shape",t,e,n),g("dtype",t,e,n),g("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("seed",t,e,n))];case"Range":{let o=g("start",t,e,n),i=g("stop",t,e,n),s=g("step",t,e,n);return[r.range(o,i,s,g("dtype",t,e,n))]}case"TruncatedNormal":{let o=g("shape",t,e,n),i=g("mean",t,e,n),s=g("stdDev",t,e,n),a=g("seed",t,e,n);return[r.truncatedNormal(o,i,s,g("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(g("shape",t,e,n),g("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});function rT(t,e,n){let r=g("boxes",t,e,n),o=g("scores",t,e,n),i=g("maxOutputSize",t,e,n),s=g("iouThreshold",t,e,n),a=g("scoreThreshold",t,e,n),u=g("softNmsSigma",t,e,n);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:u}}var uL,cL=D(()=>{"use strict";Ot();ft();uL=(i,s,a,u,...c)=>G(void 0,[i,s,a,u,...c],function*(t,e,n,r,o=Fe){switch(t.op){case"NonMaxSuppressionV5":{let{boxes:l,scores:d,maxOutputSize:p,iouThreshold:m,scoreThreshold:b,softNmsSigma:S}=rT(t,e,n),T=yield o.image.nonMaxSuppressionWithScoreAsync(l,d,p,m,b,S);return[T.selectedIndices,T.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:l,scores:d,maxOutputSize:p,iouThreshold:m,scoreThreshold:b}=rT(t,e,n),S=g("padToMaxOutputSize",t,e,n),T=yield o.image.nonMaxSuppressionPaddedAsync(l,d,p,m,b,S);return[T.selectedIndices,T.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:l,scores:d,maxOutputSize:p,iouThreshold:m,scoreThreshold:b}=rT(t,e,n);return[yield o.image.nonMaxSuppressionAsync(l,d,p,m,b)]}case"Where":{let l=o.cast(g("condition",t,e,n),"bool"),d=[yield o.whereAsync(l)];return l.dispose(),d}case"ListDiff":return o.setdiff1dAsync(g("x",t,e,n),g("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}})});var lL,fL=D(()=>{"use strict";Ot();ft();lL=(t,e,n,r=Fe)=>{switch(t.op){case"LowerBound":{let o=g("sortedSequence",t,e,n),i=g("values",t,e,n);return[r.lowerBound(o,i)]}case"TopKV2":{let o=g("x",t,e,n),i=g("k",t,e,n),s=g("sorted",t,e,n),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=g("sortedSequence",t,e,n),i=g("values",t,e,n);return[r.upperBound(o,i)]}case"Unique":{let o=g("x",t,e,n),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=g("x",t,e,n),i=g("axis",t,e,n),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var dL,pL=D(()=>{"use strict";Ot();ft();dL=(t,e,n,r=Fe)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":let o=g("default",t,e,n);return[yt(t.name,e,n)||o];case"Placeholder":return[yt(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let l=g("x",t,e,n);return[Gr(l)]}case"IdentityN":return g("x",t,e,n).map(l=>Gr(l));case"Snapshot":let i=g("x",t,e,n);return[Gr(i)];case"Shape":return[r.tensor1d(g("x",t,e,n).shape,"int32")];case"ShapeN":return g("x",t,e,n).map(l=>r.tensor1d(l.shape));case"Size":return[r.scalar(g("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(g("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=g("x",t,e,n),a=g("data",t,e,n),u=g("message",t,e,n),c=g("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let l=0;l<a.length;l++)console.log(Array.prototype.slice.call(a[l].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var Pm,hL=D(()=>{"use strict";pn();Ot();Pm=class{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ae(0),this.tensorMap=new Map,ln(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ae(this.size(),"int32")}import(e,n){return G(this,null,function*(){this.checkKeyAndValueTensor(e,n);let r=yield e.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),se(()=>{let o=Bn(n),i=r.length,s=o.length;q.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let u=r[a],c=o[a];ln(c),this.tensorMap.set(u,c)}return this.handle})})}find(e,n){return G(this,null,function*(){this.checkKeyAndValueTensor(e,n);let r=yield e.data();return se(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,n);o.push(a)}return rn(o)})})}findWithDefault(e,n){let r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}});var mL,gL=D(()=>{"use strict";hL();ft();mL=(t,e,n,r)=>G(void 0,null,function*(){switch(t.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{let i=g("keyDType",t,e,n),s=g("valueDType",t,e,n),a=new Pm(i,s);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=g("tableHandle",t,e,n,r),i=g("keys",t,e,n),s=g("values",t,e,n);return[yield r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=g("tableHandle",t,e,n,r),i=g("keys",t,e,n),s=g("defaultValue",t,e,n);return[yield r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=g("tableHandle",t,e,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})});var yL,vL=D(()=>{"use strict";Ot();ft();yL=(t,e,n,r=Fe)=>{switch(t.op){case"ResizeBilinear":{let o=g("images",t,e,n),i=g("size",t,e,n),s=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=g("images",t,e,n),i=g("size",t,e,n),s=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=g("image",t,e,n),i=g("boxes",t,e,n),s=g("boxInd",t,e,n),a=g("cropSize",t,e,n),u=g("method",t,e,n),c=g("extrapolationValue",t,e,n);return[r.image.cropAndResize(o,i,s,a,u,c)]}case"ImageProjectiveTransformV3":{let o=g("images",t,e,n),i=g("transforms",t,e,n),s=g("outputShape",t,e,n),a=g("fillValue",t,e,n),u=g("interpolation",t,e,n),c=g("fillMode",t,e,n);return[r.image.transform(o,i,u.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var wL,bL=D(()=>{"use strict";Ot();ft();wL=(t,e,n,r=Fe)=>{switch(t.op){case"Equal":return[r.equal(g("a",t,e,n),g("b",t,e,n))];case"NotEqual":return[r.notEqual(g("a",t,e,n),g("b",t,e,n))];case"Greater":return[r.greater(g("a",t,e,n),g("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(g("a",t,e,n),g("b",t,e,n))];case"Less":return[r.less(g("a",t,e,n),g("b",t,e,n))];case"LessEqual":return[r.lessEqual(g("a",t,e,n),g("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(g("a",t,e,n),g("b",t,e,n))];case"LogicalNot":return[r.logicalNot(g("a",t,e,n))];case"LogicalOr":return[r.logicalOr(g("a",t,e,n),g("b",t,e,n))];case"Select":case"SelectV2":return[r.where(g("condition",t,e,n),g("a",t,e,n),g("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var EL,DL=D(()=>{"use strict";Ot();ft();EL=(t,e,n,r=Fe)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(g("a",t,e,n),g("b",t,e,n),g("transposeA",t,e,n),g("transposeB",t,e,n))];case"Einsum":return[r.einsum(g("equation",t,e,n),...g("tensors",t,e,n))];case"Transpose":return[r.transpose(g("x",t,e,n),g("perm",t,e,n))];case"_FusedMatMul":let[o,i]=g("fusedOps",t,e,n),s=o==="biasadd",a=i==="prelu",u=g("numArgs",t,e,n),c=g("leakyreluAlpha",t,e,n);if(s){if(a&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[l,d]=g("args",t,e,n);return[r.fused.matMul({a:g("a",t,e,n),b:g("b",t,e,n),transposeA:g("transposeA",t,e,n),transposeB:g("transposeB",t,e,n),bias:l,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(g("a",t,e,n),g("numLower",t,e,n),g("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var xL,IL=D(()=>{"use strict";Ot();ft();xL=(t,e,n,r=Fe)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(g("x",t,e,n),g("axis",t,e,n),g("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(g("x",t,e,n),g("radius",t,e,n),g("bias",t,e,n),g("alpha",t,e,n),g("beta",t,e,n))];case"Softmax":return[r.softmax(g("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var SL,TL=D(()=>{"use strict";Ot();ft();SL=(t,e,n,r=Fe)=>{switch(t.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(g("paramsNestedSplits",t,e,n),g("paramsDenseValues",t,e,n),g("indices",t,e,n),g("outputRaggedRank",t,e,n));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(g("starts",t,e,n),g("limits",t,e,n),g("splits",t,e,n));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(g("shape",t,e,n),g("values",t,e,n),g("defaultValue",t,e,n),g("rowPartitionTensors",t,e,n),g("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var NL,CL=D(()=>{"use strict";Ot();ft();NL=(t,e,n,r=Fe)=>{switch(t.op){case"Max":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.max(g("x",t,e,n),a,u)]}case"Mean":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.mean(g("x",t,e,n),a,u)]}case"Min":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.min(g("x",t,e,n),a,u)]}case"Sum":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.sum(g("x",t,e,n),a,u)]}case"All":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.all(g("x",t,e,n),a,u)]}case"Any":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.any(g("x",t,e,n),a,u)]}case"ArgMax":{let a=g("axis",t,e,n);return[r.argMax(g("x",t,e,n),a)]}case"ArgMin":{let a=g("axis",t,e,n);return[r.argMin(g("x",t,e,n),a)]}case"Prod":{let a=g("axis",t,e,n),u=g("keepDims",t,e,n);return[r.prod(g("x",t,e,n),a,u)]}case"Cumprod":{let a=g("axis",t,e,n),u=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumprod(g("x",t,e,n),a,u,c)]}case"Cumsum":{let a=g("axis",t,e,n),u=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumsum(g("x",t,e,n),a,u,c)]}case"Bincount":let o=g("x",t,e,n),i=g("weights",t,e,n),s=g("size",t,e,n);return[r.bincount(o,i,s)];case"DenseBincount":{let a=g("x",t,e,n),u=g("weights",t,e,n),c=g("size",t,e,n),l=g("binaryOutput",t,e,n);return[r.denseBincount(a,u,c,l)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var _L,AL=D(()=>{"use strict";pn();Ot();ft();_L=(t,e,n,r=Fe)=>{switch(t.op){case"ConcatV2":case"Concat":{let o=g("n",t,e,n),i=g("axis",t,e,n),s=g("tensors",t,e,n);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=g("x",t,e,n),i=g("indices",t,e,n);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=g("axis",t,e,n),i=g("batchDims",t,e,n),s=g("x",t,e,n),a=g("indices",t,e,n);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=g("dims",t,e,n),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=g("x",t,e,n);return[r.reverse(s,i)]}case"ReverseV2":{let o=g("axis",t,e,n),i=g("x",t,e,n);return[r.reverse(i,o)]}case"Slice":{let o=g("begin",t,e,n),i=g("size",t,e,n);return[r.slice(g("x",t,e,n),o,i)]}case"StridedSlice":{let o=g("begin",t,e,n),i=g("end",t,e,n),s=g("strides",t,e,n),a=g("beginMask",t,e,n),u=g("endMask",t,e,n),c=g("ellipsisMask",t,e,n),l=g("newAxisMask",t,e,n),d=g("shrinkAxisMask",t,e,n),p=g("x",t,e,n);return[r.stridedSlice(p,o,i,s,a,u,c,l,d)]}case"Pack":return se(()=>{let o=g("axis",t,e,n),i=g("tensors",t,e,n),s=i[0].shape,a=r.squeeze(i[0]).shape,u=i.map(c=>{let l=q.arraysEqual(c.shape,s);if(!l&&!q.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return l?c:r.reshape(c,s)});return[r.stack(u,o)]});case"Unpack":{let o=g("axis",t,e,n),i=g("tensor",t,e,n);return r.unstack(i,o)}case"Tile":{let o=g("reps",t,e,n);return[r.tile(g("x",t,e,n),o)]}case"Split":case"SplitV":{let o=g("axis",t,e,n),i=g("numOrSizeSplits",t,e,n),s=g("x",t,e,n);return r.split(s,i,o)}case"ScatterNd":{let o=g("indices",t,e,n),i=g("values",t,e,n),s=g("shape",t,e,n);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=g("x",t,e,n),i=g("indices",t,e,n);return[r.gatherND(o,i)]}case"SparseToDense":{let o=g("sparseIndices",t,e,n),i=g("outputShape",t,e,n),s=g("sparseValues",t,e,n),a=g("defaultValue",t,e,n);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=g("indices",t,e,n),i=g("values",t,e,n),s=g("tensor",t,e,n);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var ML,kL=D(()=>{"use strict";Ot();ft();ML=(t,e,n,r=Fe)=>{switch(t.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(g("indices",t,e,n),g("values",t,e,n),g("denseShape",t,e,n),g("defaultValue",t,e,n));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(g("inputIndices",t,e,n),g("inputShape",t,e,n),g("newShape",t,e,n));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var OL,RL=D(()=>{"use strict";Ot();ft();OL=(t,e,n,r=Fe)=>{switch(t.op){case"FFT":return[r.fft(g("x",t,e,n))];case"IFFT":return[r.ifft(g("x",t,e,n))];case"RFFT":return[r.rfft(g("x",t,e,n))];case"IRFFT":return[r.irfft(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var FL,PL=D(()=>{"use strict";Ot();ft();FL=(t,e,n,r=Fe)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(g("input",t,e,n),g("pattern",t,e,n),g("rewrite",t,e,n),g("replaceGlobal",t,e,n))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(g("data",t,e,n),g("dataSplits",t,e,n),g("separator",t,e,n),g("nGramWidths",t,e,n),g("leftPad",t,e,n),g("rightPad",t,e,n),g("padWidth",t,e,n),g("preserveShortSequences",t,e,n));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(g("input",t,e,n),g("delimiter",t,e,n),g("skipEmpty",t,e,n));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(g("input",t,e,n),g("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});var $L,LL=D(()=>{"use strict";Ot();ft();$L=(t,e,n,r=Fe)=>{switch(t.op){case"Cast":return[r.cast(g("x",t,e,n),g("dtype",t,e,n))];case"ExpandDims":{let o=g("axis",t,e,n);return[r.expandDims(g("x",t,e,n),o)]}case"Squeeze":{let o=g("axis",t,e,n);return[r.squeeze(g("x",t,e,n),o)]}case"Reshape":return[r.reshape(g("x",t,e,n),g("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(g("x",t,e,n),g("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(g("x",t,e,n),g("padding",t,e,n),g("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(g("x",t,e,n),g("padding",t,e,n),g("constantValue",t,e,n))];case"SpaceToBatchND":{let o=g("blockShape",t,e,n),i=g("paddings",t,e,n);return[r.spaceToBatchND(g("x",t,e,n),o,i)]}case"BatchToSpaceND":{let o=g("blockShape",t,e,n),i=g("crops",t,e,n);return[r.batchToSpaceND(g("x",t,e,n),o,i)]}case"DepthToSpace":{let o=g("blockSize",t,e,n),i=g("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(g("x",t,e,n),o,i)]}case"BroadcastTo":return[r.broadcastTo(g("x",t,e,n),g("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(g("s0",t,e,n),g("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}}});function oT(t,e,n,r,o=se){let i=((s,a,u)=>{switch(s.category){case"arithmetic":return o(()=>G$(s,a,u));case"basic_math":return o(()=>W$(s,a,u));case"control":return tL(s,a,u);case"convolution":return o(()=>oL(s,a,u));case"creation":return o(()=>sL(s,a,u));case"dynamic":return uL(s,a,u);case"evaluation":return o(()=>lL(s,a,u));case"image":return o(()=>yL(s,a,u));case"graph":return o(()=>dL(s,a,u));case"logical":return o(()=>wL(s,a,u));case"matrices":return o(()=>EL(s,a,u));case"normalization":return o(()=>xL(s,a,u));case"ragged":return o(()=>SL(s,a,u));case"reduction":return o(()=>NL(s,a,u));case"slice_join":return o(()=>_L(s,a,u));case"sparse":return o(()=>ML(s,a,u));case"spectral":return o(()=>OL(s,a,u));case"string":return o(()=>FL(s,a,u));case"transformation":return o(()=>$L(s,a,u));case"hash_table":return mL(s,a,u,r);case"custom":let c=bm(s.op);if(c&&c.customExecutor)return c.customExecutor(new Om(s,a,u));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return q.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var VL=D(()=>{"use strict";pn();H$();Em();z$();q$();nL();iL();aL();cL();fL();pL();gL();vL();bL();DL();IL();TL();CL();AL();kL();RL();PL();LL();});var Tf,jL=D(()=>{"use strict";Tf=class{constructor(e={},n={},r={},o={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let n=0;n<this.contexts.length-1;n++){let r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}});function iT(t,e,n,r){let o=new Set,i=[],s=null,a=null,u=new Set,c=new Set(Object.keys(t).map(p=>hn(p)[0]));r=r||[];let l=new Set(r.map(p=>hn(p.name)[0])),d=[...e];for(;d.length>0;){let p=d.pop();if((Wi(p)||ZQ(p)||YQ(p))&&s==null&&(s=p,a=s.children.map(m=>m.name).filter(m=>o.has(m))),o.add(p.name),n[p.name]==null&&!c.has(p.name)&&!l.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(m=>{u.has(m.name)||(u.add(m.name),d.push(m))})}}return{inputs:t,outputs:e,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function BL(t,e){let{usedNodes:n,inputs:r}=e,o=Object.keys(r).map(T=>hn(T)[0]).map(T=>t.nodes[T]),i=t.initNodes||[],s=T=>n.has(typeof T=="string"?T:T.name);function a(T){return[...new Map(T.map(A=>[A.name,A])).values()]}let u=a([...o,...t.weights,...i]).filter(s),c=a([...u,...Object.values(t.nodes)]).filter(s),l=new Map(c.map(T=>[T.name,T])),d={};for(let T of c){d[T.name]=d[T.name]||0;for(let A of T.children)s(A)||(d[A.name]=Number.POSITIVE_INFINITY),d[A.name]=(d[A.name]||0)+1}let p=Object.entries(d).filter(([,T])=>T===0).map(([T])=>T),m=[...p];for(;p.length>0;){let T=p.pop(),A=l.get(T);for(let $ of A.children.filter(s))--d[$.name]===0&&(m.push($.name),p.push($.name))}let b=m.map(T=>l.get(T)),S=GQ(b,u);return zQ(S,u),S}function GQ(t,e){let n=new Map(t.map(s=>[s.name,s])),r=e.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=n.get(s);for(let u of a.children)!n.has(u.name)||o.has(u.name)||(o.add(u.name),r.push(u.name))}return t.filter(s=>o.has(s.name))}function zQ(t,e){let n=new Map(t.map((a,u)=>[a.name,u])),r=new Set(e.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of t){for(let u of a.children.filter(s)){if(!n.has(u.name))throw new Wu(`Child ${u.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(u.name))throw new Wu(`Node ${a.name} is scheduled to run after its child ${u.name}.`)}if(!o(a))for(let u of a.inputs){if(!n.has(u.name))throw new Wu(`Input ${u.name} of node ${a.name} is unreachable.`);if(n.get(u.name)>n.get(a.name))throw new Wu(`Node ${a.name} is scheduled to run before its input ${u.name}.`)}}}function UL(t){let e=new Map(t.map((a,u)=>[a.name,u])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,u)=>Wi(a)?n:u),o=a=>{let u=r[e.get(a.name)];return u??-1},i=t.map((a,u)=>a.children.map(o).reduce((c,l)=>Math.max(c,l),r[u])),s=new Map;for(let a=0;a<t.length;++a){let u=i[a];if(u===n)continue;let c=t[a],l=t[u];s.has(l.name)||s.set(l.name,[]),s.get(l.name).push(c)}return s}function Wi(t){return WQ.has(t.op)}function ZQ(t){return qQ.has(t.op)}function YQ(t){return KQ.has(t.op)}var Wu,WQ,qQ,KQ,HL=D(()=>{"use strict";ft();Wu=class extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}};WQ=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),qQ=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),KQ=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"])});var Nf,GL=D(()=>{"use strict";pn();ft();VL();jL();HL();Nf=class t{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let n=Object.keys(e).map(r=>e[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new t(e.functions[r],this)})}getCompilationKey(e,n){let r=e.map(i=>i.name).sort(),o=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(e,n){let r=iT(e,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=n.map(d=>d.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${l}]. Missing the following inputs: [${o}]`)}let a=BL(this.graph,r),u=UL(a);return{orderedNodes:a,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;let n=e.clone();return ln(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);let r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);let o=r.map(p=>this.graph.nodes[hn(p)[0]]),i=n.map(p=>hn(p)[0]),s=new Set(i),a=i.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let u=this.getCompilationKey(o,a),c=this.compiledMap.get(u);c==null&&(c=this.compile(e,a),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=ie().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let l={},d={};return se(()=>{let p=new Tf(this.weightMap,l,d,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(A=>{let[$,M]=hn(A,p),O=[];O[M]=e[A],m[$]=O,this.keepIntermediateTensors&&(this.clonedTensorsMap[$]=this.cloneTensorList(O))});let b=this.getFrozenTensorIds(m),{orderedNodes:S,nodeLiveUntilMap:T}=c;for(let A of S){if(m[A.name])continue;let $=oT(A,m,p,this._resourceManager);if(q.isPromise($))throw new Error(`The execution of the op '${A.op}' returned a promise. Please use model.executeAsync() instead.`);m[A.name]=$,this.keepIntermediateTensors&&(this.clonedTensorsMap[A.name]=this.cloneTensorList($)),this.checkTensorForDisposalWithNodeLiveUntilInfo(A,m,p,b,s,T.get(A.name))}return this.parent==null&&p.dispose(b),n.map(A=>yt(A,m,p))})}getFrozenTensorIds(e){let n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(e,n,r,o,i,s,a){if(!(Wi(n)||s.has(e))){for(let u of r[e])u!=null&&(a[u.id]=(a[u.id]||0)+n.children.length);for(let u of n.inputs){if(Wi(u))continue;let c=RS(u.name,r,o);if(c!=null)for(let l of c){if(!l||l.kept||i.has(l.id))continue;let d=a[l.id];d===1?(l.dispose(),delete a[l.id]):d!=null&&a[l.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,o,i,s){function a(u){return Wi(u)||i.has(u.name)}if(!(Wi(e)||s==null))for(let u of s){if(a(u))continue;let c=RS(u.name,n,r);for(let l of c)!l||l.kept||o.has(l.id)||l.dispose()}}executeAsync(e,n){return G(this,null,function*(){return this._executeAsync(e,n)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(s,a){return G(this,arguments,function*(e,n,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=ie().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(b){this.keepIntermediateTensors=!1,console.warn(b.message)}let u=new Tf(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(e,u,n,r),l=n.map(b=>yt(b,c,u)),d=l.map(b=>b.id),p=Object.keys(e).map(b=>e[b].id),m=new Set([...d,...p,...this.weightIds]);return Object.values(c).forEach(b=>{b.forEach(S=>{S&&!S.isDisposed&&!m.has(S.id)&&S.dispose()})}),this.parent==null&&u.dispose(m),l})}executeFunctionAsync(e,n,r){return G(this,null,function*(){let o=e.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,n,r)})}executeWithControlFlow(e,n,r,o){return G(this,null,function*(){let i=Object.keys(e),s=i.map(O=>this.graph.nodes[hn(O)[0]]),a=r.map(O=>hn(O)[0]),u=new Set(a),c=a.map(O=>this.graph.nodes[O]);c.length===0&&(c=this._outputs);let{usedNodes:l,missingInputs:d,dynamicNode:p,syncInputs:m}=iT(e,c,this.weightMap,this._initNodes),b=[...s,...this.graph.weights,...this._initNodes||[]].map(O=>({node:O,contexts:n.currentContext})),S=Object.assign({},this.weightMap);Object.keys(e).forEach(O=>{let[U,j]=hn(O),z=[];z[j]=e[O],S[U]=z});let T={},A=this.getFrozenTensorIds(S),$={};for(;b.length>0;){let O=this.processStack(s,b,n,S,$,A,u,T,l);yield Promise.all(O)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let M=c.filter(O=>!Wi(O)&&!yt(O.name,S,n)).map(O=>O.name);if(M.length>0){let O="";throw p!=null&&(O=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${M}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${O}`)}return S})}processStack(e,n,r,o,i,s,a,u,c){let l=[];for(;n.length>0;){let d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&g("isConstant",d.node,o,r)&&([p]=Hr(d.node.name,r)),o[d.node.name]==null){let m=oT(d.node,o,r,this._resourceManager);p||([p]=Hr(d.node.name,r));let b=r.currentContext;q.isPromise(m)?l.push(m.then(S=>(o[p]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(S)),r.currentContext=b,this.checkTensorForDisposal(p,d.node,o,r,s,a,u),this.processChildNodes(d.node,n,r,o,i,c),S))):(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),this.checkTensorForDisposal(p,d.node,o,r,s,a,u),this.processChildNodes(d.node,n,r,o,i,c))}else this.processChildNodes(d.node,n,r,o,i,c)}return l}processChildNodes(e,n,r,o,i,s){e.children.forEach(a=>{let[u]=Hr(a.name,r);i[u]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!yt(c,o,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!yt(c,o,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{let r=e[n],[o]=hn(n),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((u,c)=>s[c]===-1||s[c]===u);q.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&q.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;let o={};for(let i in e){let s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=e[i]:o[i]=e[i]}return o}checkInputs(e){let n=Object.keys(e).filter(r=>{let[o]=hn(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{let[r]=hn(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}});var $m,zL=D(()=>{"use strict";$m=class{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}});function Ku(r){return G(this,arguments,function*(t,e={},n=Eo){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=JQ(t));let o=new qu(t,e,n);return yield o.load(),o})}function WL(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){let[r,o]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!o||!(o instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let i=Eo.getWeightSpecs(r.weightsManifest),s=Eo.getModelArtifactsForJSONSync(r,i,o);e=Eo.fromMemorySync(s)}else if("load"in t)e=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)e=Eo.fromMemorySync(t);else throw new Error("Unknown model format");let n=new qu(e);return n.load(),n}function JQ(t){return t.endsWith("/")||(t=t+"/"),`${t}${XQ}${QQ}`}var QQ,XQ,qu,qL=D(()=>{"use strict";pn();tT();GL();zL();Ci();QQ="?tfjs-format=file",XQ="model.json",qu=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=Eo){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new $m}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return q.isPromise(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){let n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}loadStreaming(e){return G(this,null,function*(){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let n=yield Eh(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)})}loadWithWeightMap(e,n){this.artifacts=e;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Nf(Sf.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let i=Sf.Instance.transformGraph(e.modelInitializer);this.initializer=new Nf(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}save(e,n){return G(this,null,function*(){if(typeof e=="string"){let r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)})}addStructuredOutputNames(e){if(this.structuredOutputKeys){let n=e instanceof _e?[e]:e,r={};return n.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return e}predict(e,n){let r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(e,n){return G(this,null,function*(){let r=yield this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(e){var n;if(!(e instanceof _e)&&!Array.isArray(e)){let i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(e[s]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];let r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,u,c;let l=(c=(u=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||u===void 0?void 0:u[s])===null||c===void 0?void 0:c.resourceId;return l!=null?i[s]=this.resourceIdToCapturedInput[l]:i[s]=e[o++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return G(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){let i=r[o],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=e[o]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=this.executor.execute(e,n);return r.length>1?r:r[0]}executeAsync(e,n){return G(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=yield this.executor.executeAsync(e,n);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&ct(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}});var KL,ZL=D(()=>{"use strict";KL="4.20.0"});var YL={};Re(YL,{GraphModel:()=>qu,deregisterOp:()=>b$,loadGraphModel:()=>Ku,loadGraphModelSync:()=>WL,registerOp:()=>w$,version_converter:()=>KL});var sT=D(()=>{"use strict";g$();qL();Em();ZL();});var XL=Cn(QL=>{"use strict";(function(){"use strict";var t;function e(f){var h=0;return function(){return h<f.length?{done:!1,value:f[h++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,h,v){return f==Array.prototype||f==Object.prototype||(f[h]=v.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<f.length;++h){var v=f[h];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=r(this);function i(f,h){if(h)e:{var v=o;f=f.split(".");for(var x=0;x<f.length-1;x++){var N=f[x];if(!(N in v))break e;v=v[N]}f=f[f.length-1],x=v[f],h=h(x),h!=x&&h!=null&&n(v,f,{configurable:!0,writable:!0,value:h})}}i("Symbol",function(f){function h(_){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new v(x+(_||"")+"_"+N++,_)}function v(_,C){this.h=_,n(this,"description",{configurable:!0,writable:!0,value:C})}if(f)return f;v.prototype.toString=function(){return this.h};var x="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",N=0;return h}),i("Symbol.iterator",function(f){if(f)return f;f=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<h.length;v++){var x=o[h[v]];typeof x=="function"&&typeof x.prototype[f]!="function"&&n(x.prototype,f,{configurable:!0,writable:!0,value:function(){return s(e(this))}})}return f});function s(f){return f={next:f},f[Symbol.iterator]=function(){return this},f}function a(f){var h=typeof Symbol<"u"&&Symbol.iterator&&f[Symbol.iterator];return h?h.call(f):{next:e(f)}}function u(f){if(!(f instanceof Array)){f=a(f);for(var h,v=[];!(h=f.next()).done;)v.push(h.value);f=v}return f}var c=typeof Object.assign=="function"?Object.assign:function(f,h){for(var v=1;v<arguments.length;v++){var x=arguments[v];if(x)for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&(f[N]=x[N])}return f};i("Object.assign",function(f){return f||c});var l=typeof Object.create=="function"?Object.create:function(f){function h(){}return h.prototype=f,new h},d;if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var p;e:{var m={a:!0},b={};try{b.__proto__=m,p=b.a;break e}catch{}p=!1}d=p?function(f,h){if(f.__proto__=h,f.__proto__!==h)throw new TypeError(f+" is not extensible");return f}:null}var S=d;function T(f,h){if(f.prototype=l(h.prototype),f.prototype.constructor=f,S)S(f,h);else for(var v in h)if(v!="prototype")if(Object.defineProperties){var x=Object.getOwnPropertyDescriptor(h,v);x&&Object.defineProperty(f,v,x)}else f[v]=h[v];f.za=h.prototype}function A(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function $(f){if(f.m)throw new TypeError("Generator is already running");f.m=!0}A.prototype.u=function(f){this.i=f};function M(f,h){f.l={ma:h,na:!0},f.h=f.s||f.v}A.prototype.return=function(f){this.l={return:f},this.h=this.v};function O(f,h,v){return f.h=v,{value:h}}function U(f){this.h=new A,this.i=f}function j(f,h){$(f.h);var v=f.h.j;return v?z(f,"return"in v?v.return:function(x){return{value:x,done:!0}},h,f.h.return):(f.h.return(h),Z(f))}function z(f,h,v,x){try{var N=h.call(f.h.j,v);if(!(N instanceof Object))throw new TypeError("Iterator result "+N+" is not an object");if(!N.done)return f.h.m=!1,N;var _=N.value}catch(C){return f.h.j=null,M(f.h,C),Z(f)}return f.h.j=null,x.call(f.h,_),Z(f)}function Z(f){for(;f.h.h;)try{var h=f.i(f.h);if(h)return f.h.m=!1,{value:h.value,done:!1}}catch(v){f.h.i=void 0,M(f.h,v)}if(f.h.m=!1,f.h.l){if(h=f.h.l,f.h.l=null,h.na)throw h.ma;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function Q(f){this.next=function(h){return $(f.h),f.h.j?h=z(f,f.h.j.next,h,f.h.u):(f.h.u(h),h=Z(f)),h},this.throw=function(h){return $(f.h),f.h.j?h=z(f,f.h.j.throw,h,f.h.u):(M(f.h,h),h=Z(f)),h},this.return=function(h){return j(f,h)},this[Symbol.iterator]=function(){return this}}function X(f){function h(x){return f.next(x)}function v(x){return f.throw(x)}return new Promise(function(x,N){function _(C){C.done?x(C.value):Promise.resolve(C.value).then(h,v).then(_,N)}_(f.next())})}function K(f){return X(new Q(new U(f)))}i("Promise",function(f){function h(C){this.i=0,this.j=void 0,this.h=[],this.u=!1;var F=this.l();try{C(F.resolve,F.reject)}catch(B){F.reject(B)}}function v(){this.h=null}function x(C){return C instanceof h?C:new h(function(F){F(C)})}if(f)return f;v.prototype.i=function(C){if(this.h==null){this.h=[];var F=this;this.j(function(){F.m()})}this.h.push(C)};var N=o.setTimeout;v.prototype.j=function(C){N(C,0)},v.prototype.m=function(){for(;this.h&&this.h.length;){var C=this.h;this.h=[];for(var F=0;F<C.length;++F){var B=C[F];C[F]=null;try{B()}catch(Y){this.l(Y)}}}this.h=null},v.prototype.l=function(C){this.j(function(){throw C})},h.prototype.l=function(){function C(Y){return function(ee){B||(B=!0,Y.call(F,ee))}}var F=this,B=!1;return{resolve:C(this.I),reject:C(this.m)}},h.prototype.I=function(C){if(C===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(C instanceof h)this.L(C);else{e:switch(typeof C){case"object":var F=C!=null;break e;case"function":F=!0;break e;default:F=!1}F?this.F(C):this.s(C)}},h.prototype.F=function(C){var F=void 0;try{F=C.then}catch(B){this.m(B);return}typeof F=="function"?this.M(F,C):this.s(C)},h.prototype.m=function(C){this.v(2,C)},h.prototype.s=function(C){this.v(1,C)},h.prototype.v=function(C,F){if(this.i!=0)throw Error("Cannot settle("+C+", "+F+"): Promise already settled in state"+this.i);this.i=C,this.j=F,this.i===2&&this.K(),this.H()},h.prototype.K=function(){var C=this;N(function(){if(C.D()){var F=o.console;typeof F<"u"&&F.error(C.j)}},1)},h.prototype.D=function(){if(this.u)return!1;var C=o.CustomEvent,F=o.Event,B=o.dispatchEvent;return typeof B>"u"?!0:(typeof C=="function"?C=new C("unhandledrejection",{cancelable:!0}):typeof F=="function"?C=new F("unhandledrejection",{cancelable:!0}):(C=o.document.createEvent("CustomEvent"),C.initCustomEvent("unhandledrejection",!1,!0,C)),C.promise=this,C.reason=this.j,B(C))},h.prototype.H=function(){if(this.h!=null){for(var C=0;C<this.h.length;++C)_.i(this.h[C]);this.h=null}};var _=new v;return h.prototype.L=function(C){var F=this.l();C.T(F.resolve,F.reject)},h.prototype.M=function(C,F){var B=this.l();try{C.call(F,B.resolve,B.reject)}catch(Y){B.reject(Y)}},h.prototype.then=function(C,F){function B(ce,oe){return typeof ce=="function"?function(ve){try{Y(ce(ve))}catch(ke){ee(ke)}}:oe}var Y,ee,ye=new h(function(ce,oe){Y=ce,ee=oe});return this.T(B(C,Y),B(F,ee)),ye},h.prototype.catch=function(C){return this.then(void 0,C)},h.prototype.T=function(C,F){function B(){switch(Y.i){case 1:C(Y.j);break;case 2:F(Y.j);break;default:throw Error("Unexpected state: "+Y.i)}}var Y=this;this.h==null?_.i(B):this.h.push(B),this.u=!0},h.resolve=x,h.reject=function(C){return new h(function(F,B){B(C)})},h.race=function(C){return new h(function(F,B){for(var Y=a(C),ee=Y.next();!ee.done;ee=Y.next())x(ee.value).T(F,B)})},h.all=function(C){var F=a(C),B=F.next();return B.done?x([]):new h(function(Y,ee){function ye(ve){return function(ke){ce[ve]=ke,oe--,oe==0&&Y(ce)}}var ce=[],oe=0;do ce.push(void 0),oe++,x(B.value).T(ye(ce.length-1),ee),B=F.next();while(!B.done)})},h});function he(f,h){f instanceof String&&(f+="");var v=0,x=!1,N={next:function(){if(!x&&v<f.length){var _=v++;return{value:h(_,f[_]),done:!1}}return x=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.keys",function(f){return f||function(){return he(this,function(h){return h})}}),i("Array.prototype.fill",function(f){return f||function(h,v,x){var N=this.length||0;for(0>v&&(v=Math.max(0,N+v)),(x==null||x>N)&&(x=N),x=Number(x),0>x&&(x=Math.max(0,N+x)),v=Number(v||0);v<x;v++)this[v]=h;return this}});function le(f){return f||Array.prototype.fill}i("Int8Array.prototype.fill",le),i("Uint8Array.prototype.fill",le),i("Uint8ClampedArray.prototype.fill",le),i("Int16Array.prototype.fill",le),i("Uint16Array.prototype.fill",le),i("Int32Array.prototype.fill",le),i("Uint32Array.prototype.fill",le),i("Float32Array.prototype.fill",le),i("Float64Array.prototype.fill",le),i("Object.is",function(f){return f||function(h,v){return h===v?h!==0||1/h===1/v:h!==h&&v!==v}}),i("Array.prototype.includes",function(f){return f||function(h,v){var x=this;x instanceof String&&(x=String(x));var N=x.length;for(v=v||0,0>v&&(v=Math.max(v+N,0));v<N;v++){var _=x[v];if(_===h||Object.is(_,h))return!0}return!1}}),i("String.prototype.includes",function(f){return f||function(h,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(h,v||0)!==-1}});var Ae=this||self;function Me(f,h){f=f.split(".");var v=Ae;f[0]in v||typeof v.execScript>"u"||v.execScript("var "+f[0]);for(var x;f.length&&(x=f.shift());)f.length||h===void 0?v[x]&&v[x]!==Object.prototype[x]?v=v[x]:v=v[x]={}:v[x]=h}function at(f){var h;e:{if((h=Ae.navigator)&&(h=h.userAgent))break e;h=""}return h.indexOf(f)!=-1}var dt=Array.prototype.map?function(f,h){return Array.prototype.map.call(f,h,void 0)}:function(f,h){for(var v=f.length,x=Array(v),N=typeof f=="string"?f.split(""):f,_=0;_<v;_++)_ in N&&(x[_]=h.call(void 0,N[_],_,f));return x},Bt={},Dt=null;function xo(f){var h=f.length,v=3*h/4;v%3?v=Math.floor(v):"=.".indexOf(f[h-1])!=-1&&(v="=.".indexOf(f[h-2])!=-1?v-2:v-1);var x=new Uint8Array(v),N=0;return qi(f,function(_){x[N++]=_}),N!==v?x.subarray(0,N):x}function qi(f,h){function v(B){for(;x<f.length;){var Y=f.charAt(x++),ee=Dt[Y];if(ee!=null)return ee;if(!/^[\s\xa0]*$/.test(Y))throw Error("Unknown base64 encoding at char: "+Y)}return B}Io();for(var x=0;;){var N=v(-1),_=v(0),C=v(64),F=v(64);if(F===64&&N===-1)break;h(N<<2|_>>4),C!=64&&(h(_<<4&240|C>>2),F!=64&&h(C<<6&192|F))}}function Io(){if(!Dt){Dt={};for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var x=f.concat(h[v].split(""));Bt[v]=x;for(var N=0;N<x.length;N++){var _=x[N];Dt[_]===void 0&&(Dt[_]=N)}}}}var Jn=typeof Uint8Array<"u",er=!(at("Trident")||at("MSIE"))&&typeof Ae.btoa=="function";function gr(f){if(!er){var h;h===void 0&&(h=0),Io(),h=Bt[h];for(var v=Array(Math.floor(f.length/3)),x=h[64]||"",N=0,_=0;N<f.length-2;N+=3){var C=f[N],F=f[N+1],B=f[N+2],Y=h[C>>2];C=h[(C&3)<<4|F>>4],F=h[(F&15)<<2|B>>6],B=h[B&63],v[_++]=Y+C+F+B}switch(Y=0,B=x,f.length-N){case 2:Y=f[N+1],B=h[(Y&15)<<2]||x;case 1:f=f[N],v[_]=h[f>>2]+h[(f&3)<<4|Y>>4]+B+x}return v.join("")}for(h="";10240<f.length;)h+=String.fromCharCode.apply(null,f.subarray(0,10240)),f=f.subarray(10240);return h+=String.fromCharCode.apply(null,f),btoa(h)}var tr=RegExp("[-_.]","g");function So(f){switch(f){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function ri(f){if(!er)return xo(f);tr.test(f)&&(f=f.replace(tr,So)),f=atob(f);for(var h=new Uint8Array(f.length),v=0;v<f.length;v++)h[v]=f.charCodeAt(v);return h}var Ki;function ia(){return Ki||(Ki=new Uint8Array(0))}var Zi={},UV=typeof Uint8Array.prototype.slice=="function",Rt=0,gn=0;function mT(f){var h=0>f;f=Math.abs(f);var v=f>>>0;f=Math.floor((f-v)/4294967296),h&&(v=a(gT(v,f)),h=v.next().value,f=v.next().value,v=h),Rt=v>>>0,gn=f>>>0}var HV=typeof BigInt=="function";function gT(f,h){return h=~h,f?f=~f+1:h+=1,[f,h]}function yT(f,h){this.i=f>>>0,this.h=h>>>0}function vT(f){if(!f)return wT||(wT=new yT(0,0));if(!/^-?\d+$/.test(f))return null;if(16>f.length)mT(Number(f));else if(HV)f=BigInt(f),Rt=Number(f&BigInt(4294967295))>>>0,gn=Number(f>>BigInt(32)&BigInt(4294967295));else{var h=+(f[0]==="-");gn=Rt=0;for(var v=f.length,x=h,N=(v-h)%6+h;N<=v;x=N,N+=6)x=Number(f.slice(x,N)),gn*=1e6,Rt=1e6*Rt+x,4294967296<=Rt&&(gn+=Rt/4294967296|0,Rt%=4294967296);h&&(h=a(gT(Rt,gn)),f=h.next().value,h=h.next().value,Rt=f,gn=h)}return new yT(Rt,gn)}var wT;function bT(f,h){return Error("Invalid wire type: "+f+" (at position "+h+")")}function Qm(){return Error("Failed to read varint, encoding is invalid.")}function ET(f,h){return Error("Tried to read past the end of the data "+h+" > "+f)}function Yi(){throw Error("Invalid UTF8")}function DT(f,h){return h=String.fromCharCode.apply(null,h),f==null?h:f+h}var Mf=void 0,Xm,GV=typeof TextDecoder<"u",xT,zV=typeof TextEncoder<"u",IT;function ST(f){if(f!==Zi)throw Error("illegal external caller")}function Qu(f,h){if(ST(h),this.V=f,f!=null&&f.length===0)throw Error("ByteString should be constructed with non-empty values")}function Jm(){return IT||(IT=new Qu(null,Zi))}function TT(f){ST(Zi);var h=f.V;return h=h==null||Jn&&h!=null&&h instanceof Uint8Array?h:typeof h=="string"?ri(h):null,h==null?h:f.V=h}function WV(f){if(typeof f=="string")return{buffer:ri(f),C:!1};if(Array.isArray(f))return{buffer:new Uint8Array(f),C:!1};if(f.constructor===Uint8Array)return{buffer:f,C:!1};if(f.constructor===ArrayBuffer)return{buffer:new Uint8Array(f),C:!1};if(f.constructor===Qu)return{buffer:TT(f)||ia(),C:!0};if(f instanceof Uint8Array)return{buffer:new Uint8Array(f.buffer,f.byteOffset,f.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function NT(f,h){this.i=null,this.m=!1,this.h=this.j=this.l=0,eg(this,f,h)}function eg(f,h,v){v=v===void 0?{}:v,f.S=v.S===void 0?!1:v.S,h&&(h=WV(h),f.i=h.buffer,f.m=h.C,f.l=0,f.j=f.i.length,f.h=f.l)}NT.prototype.reset=function(){this.h=this.l};function Qi(f,h){if(f.h=h,h>f.j)throw ET(f.j,h)}function Xu(f){var h=f.i,v=f.h,x=h[v++],N=x&127;if(x&128&&(x=h[v++],N|=(x&127)<<7,x&128&&(x=h[v++],N|=(x&127)<<14,x&128&&(x=h[v++],N|=(x&127)<<21,x&128&&(x=h[v++],N|=x<<28,x&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128)))))throw Qm();return Qi(f,v),N}function CT(f,h){if(0>h)throw Error("Tried to read a negative byte length: "+h);var v=f.h,x=v+h;if(x>f.j)throw ET(h,f.j-v);return f.h=x,v}var _T=[];function tg(){this.h=[]}tg.prototype.length=function(){return this.h.length},tg.prototype.end=function(){var f=this.h;return this.h=[],f};function AT(f,h,v){for(;0<v||127<h;)f.h.push(h&127|128),h=(h>>>7|v<<25)>>>0,v>>>=7;f.h.push(h)}function Xi(f,h){for(;127<h;)f.h.push(h&127|128),h>>>=7;f.h.push(h)}function ng(f,h){if(_T.length){var v=_T.pop();eg(v,f,h),f=v}else f=new NT(f,h);this.h=f,this.j=this.h.h,this.i=this.l=-1,this.setOptions(h)}ng.prototype.setOptions=function(f){f=f===void 0?{}:f,this.ca=f.ca===void 0?!1:f.ca},ng.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function MT(f){var h=f.h;if(h.h==h.j)return!1;f.j=f.h.h;var v=Xu(f.h)>>>0;if(h=v>>>3,v&=7,!(0<=v&&5>=v))throw bT(v,f.j);if(1>h)throw Error("Invalid field number: "+h+" (at position "+f.j+")");return f.l=h,f.i=v,!0}function kf(f){switch(f.i){case 0:if(f.i!=0)kf(f);else e:{f=f.h;for(var h=f.h,v=h+10,x=f.i;h<v;)if(!(x[h++]&128)){Qi(f,h);break e}throw Qm()}break;case 1:f=f.h,Qi(f,f.h+8);break;case 2:f.i!=2?kf(f):(h=Xu(f.h)>>>0,f=f.h,Qi(f,f.h+h));break;case 5:f=f.h,Qi(f,f.h+4);break;case 3:h=f.l;do{if(!MT(f))throw Error("Unmatched start-group tag: stream EOF");if(f.i==4){if(f.l!=h)throw Error("Unmatched end-group tag");break}kf(f)}while(!0);break;default:throw bT(f.i,f.j)}}var Of=[];function qV(){this.j=[],this.i=0,this.h=new tg}function sa(f,h){h.length!==0&&(f.j.push(h),f.i+=h.length)}function KV(f,h){if(h=h.R){sa(f,f.h.end());for(var v=0;v<h.length;v++)sa(f,TT(h[v])||ia())}}var To=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Ji(f,h){return To?f[To]|=h:f.A!==void 0?f.A|=h:(Object.defineProperties(f,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}}),h)}function kT(f,h){To?f[To]&&(f[To]&=~h):f.A!==void 0&&(f.A&=~h)}function bt(f){var h;return To?h=f[To]:h=f.A,h??0}function Wr(f,h){To?f[To]=h:f.A!==void 0?f.A=h:Object.defineProperties(f,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}})}function rg(f){return Ji(f,1),f}function ZV(f,h){Wr(h,(f|0)&-51)}function Rf(f,h){Wr(h,(f|18)&-41)}var og={};function Ff(f){return f!==null&&typeof f=="object"&&!Array.isArray(f)&&f.constructor===Object}var Ju,OT=[];Wr(OT,23),Ju=Object.freeze(OT);function ig(f){if(bt(f.o)&2)throw Error("Cannot mutate an immutable Message")}function sg(f){var h=f.length;(h=h?f[h-1]:void 0)&&Ff(h)?h.g=1:(h={},f.push((h.g=1,h)))}function RT(f){var h=f.i+f.G;return f.B||(f.B=f.o[h]={})}function yr(f,h){return h===-1?null:h>=f.i?f.B?f.B[h]:void 0:f.o[h+f.G]}function qr(f,h,v,x){ig(f),ec(f,h,v,x)}function ec(f,h,v,x){f.j&&(f.j=void 0),h>=f.i||x?RT(f)[h]=v:(f.o[h+f.G]=v,(f=f.B)&&h in f&&delete f[h])}function ag(f,h,v,x){var N=yr(f,h);Array.isArray(N)||(N=Ju);var _=bt(N);if(_&1||rg(N),x)_&2||Ji(N,2),v&1||Object.freeze(N);else{x=!(v&2);var C=_&2;v&1||!C?x&&_&16&&!C&&kT(N,16):(N=rg(Array.prototype.slice.call(N)),ec(f,h,N))}return N}function ug(f,h){var v=yr(f,h),x=v==null?v:typeof v=="number"||v==="NaN"||v==="Infinity"||v==="-Infinity"?Number(v):void 0;return x!=null&&x!==v&&ec(f,h,x),x}function FT(f,h,v,x,N){f.h||(f.h={});var _=f.h[v],C=ag(f,v,3,N);if(!_){var F=C;_=[];var B=!!(bt(f.o)&16);C=!!(bt(F)&2);var Y=F;!N&&C&&(F=Array.prototype.slice.call(F));for(var ee=C,ye=0;ye<F.length;ye++){var ce=F[ye],oe=h,ve=!1;if(ve=ve===void 0?!1:ve,ce=Array.isArray(ce)?new oe(ce):ve?new oe:void 0,ce!==void 0){oe=ce.o;var ke=ve=bt(oe);C&&(ke|=2),B&&(ke|=16),ke!=ve&&Wr(oe,ke),oe=ke,ee=ee||!!(2&oe),_.push(ce)}}return f.h[v]=_,B=bt(F),h=B|33,h=ee?h&-9:h|8,B!=h&&(ee=F,Object.isFrozen(ee)&&(ee=Array.prototype.slice.call(ee)),Wr(ee,h),F=ee),Y!==F&&ec(f,v,F),(N||x&&C)&&Ji(_,2),x&&Object.freeze(_),_}return N||(N=Object.isFrozen(_),x&&!N?Object.freeze(_):!x&&N&&(_=Array.prototype.slice.call(_),f.h[v]=_)),_}function cg(f,h,v){var x=!!(bt(f.o)&2);if(h=FT(f,h,v,x,x),f=ag(f,v,3,x),!(x||bt(f)&8)){for(x=0;x<h.length;x++){if(v=h[x],bt(v.o)&2){var N=BT(v,!1);N.j=v}else N=v;v!==N&&(h[x]=N,f[x]=N.o)}Ji(f,8)}return h}function Kr(f,h,v){if(v!=null&&typeof v!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof v+": "+v);qr(f,h,v)}function PT(f,h,v,x,N){ig(f);var _=FT(f,v,h,!1,!1);return v=x??new v,f=ag(f,h,2,!1),N!=null?(_.splice(N,0,v),f.splice(N,0,v.o)):(_.push(v),f.push(v.o)),v.C()&&kT(f,8),v}function Pf(f,h){return f??h}function Zr(f,h,v){return v=v===void 0?0:v,Pf(ug(f,h),v)}var $f;function YV(f){switch(typeof f){case"number":return isFinite(f)?f:String(f);case"object":if(f)if(Array.isArray(f)){if(bt(f)&128)return f=Array.prototype.slice.call(f),sg(f),f}else{if(Jn&&f!=null&&f instanceof Uint8Array)return gr(f);if(f instanceof Qu){var h=f.V;return h==null?"":typeof h=="string"?h:f.V=gr(h)}}}return f}function $T(f,h,v,x){if(f!=null){if(Array.isArray(f))f=lg(f,h,v,x!==void 0);else if(Ff(f)){var N={},_;for(_ in f)N[_]=$T(f[_],h,v,x);f=N}else f=h(f,x);return f}}function lg(f,h,v,x){var N=bt(f);x=x?!!(N&16):void 0,f=Array.prototype.slice.call(f);for(var _=0;_<f.length;_++)f[_]=$T(f[_],h,v,x);return v(N,f),f}function QV(f){return f.ja===og?f.toJSON():YV(f)}function XV(f,h){f&128&&sg(h)}function LT(f,h,v){if(v=v===void 0?Rf:v,f!=null){if(Jn&&f instanceof Uint8Array)return f.length?new Qu(new Uint8Array(f),Zi):Jm();if(Array.isArray(f)){var x=bt(f);return x&2?f:h&&!(x&32)&&(x&16||x===0)?(Wr(f,x|2),f):(f=lg(f,LT,x&4?Rf:v,!0),h=bt(f),h&4&&h&2&&Object.freeze(f),f)}return f.ja===og?jT(f):f}}function VT(f,h,v,x,N,_,C){if(f=f.h&&f.h[v]){if(x=bt(f),x&2?x=f:(_=dt(f,jT),Rf(x,_),Object.freeze(_),x=_),ig(h),C=x==null?Ju:rg([]),x!=null){for(_=!!x.length,f=0;f<x.length;f++){var F=x[f];_=_&&!(bt(F.o)&2),C[f]=F.o}_=(_?8:0)|1,f=bt(C),(f&_)!==_&&(Object.isFrozen(C)&&(C=Array.prototype.slice.call(C)),Wr(C,f|_)),h.h||(h.h={}),h.h[v]=x}else h.h&&(h.h[v]=void 0);ec(h,v,C,N)}else qr(h,v,LT(x,_,C),N)}function jT(f){return bt(f.o)&2||(f=BT(f,!0),Ji(f.o,2)),f}function BT(f,h){var v=f.o,x=[];Ji(x,16);var N=f.constructor.h;if(N&&x.push(N),N=f.B,N){x.length=v.length,x.fill(void 0,x.length,v.length);var _={};x[x.length-1]=_}bt(v)&128&&sg(x),h=h||f.C()?Rf:ZV,_=f.constructor,$f=x,x=new _(x),$f=void 0,f.R&&(x.R=f.R.slice()),_=!!(bt(v)&16);for(var C=N?v.length-1:v.length,F=0;F<C;F++)VT(f,x,F-f.G,v[F],!1,_,h);if(N)for(var B in N)VT(f,x,+B,N[B],!0,_,h);return x}function Tn(f,h,v){f==null&&(f=$f),$f=void 0;var x=this.constructor.i||0,N=0<x,_=this.constructor.h,C=!1;if(f==null){f=_?[_]:[];var F=48,B=!0;N&&(x=0,F|=128),Wr(f,F)}else{if(!Array.isArray(f)||_&&_!==f[0])throw Error();var Y=F=Ji(f,0);if((B=(16&Y)!==0)&&((C=(32&Y)!==0)||(Y|=32)),N){if(128&Y)x=0;else if(0<f.length){var ee=f[f.length-1];if(Ff(ee)&&"g"in ee){x=0,Y|=128,delete ee.g;var ye=!0,ce;for(ce in ee){ye=!1;break}ye&&f.pop()}}}else if(128&Y)throw Error();F!==Y&&Wr(f,Y)}this.G=(_?0:-1)-x,this.h=void 0,this.o=f;e:{if(_=this.o.length,x=_-1,_&&(_=this.o[x],Ff(_))){this.B=_,this.i=x-this.G;break e}h!==void 0&&-1<h?(this.i=Math.max(h,x+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!N&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(v){h=B&&!C&&!0,N=this.i;var oe;for(B=0;B<v.length;B++)C=v[B],C<N?(C+=this.G,(x=f[C])?UT(x,h):f[C]=Ju):(oe||(oe=RT(this)),(x=oe[C])?UT(x,h):oe[C]=Ju)}}Tn.prototype.toJSON=function(){return lg(this.o,QV,XV)},Tn.prototype.C=function(){return!!(bt(this.o)&2)};function UT(f,h){if(Array.isArray(f)){var v=bt(f),x=1;!h||v&2||(x|=16),(v&x)!==x&&Wr(f,v|x)}}Tn.prototype.ja=og,Tn.prototype.toString=function(){return this.o.toString()};function HT(f,h,v){if(v){var x={},N;for(N in v){var _=v[N],C=_.ra;C||(x.J=_.xa||_.oa.W,_.ia?(x.aa=KT(_.ia),C=function(F){return function(B,Y,ee){return F.J(B,Y,ee,F.aa)}}(x)):_.ka?(x.Z=ZT(_.da.P,_.ka),C=function(F){return function(B,Y,ee){return F.J(B,Y,ee,F.Z)}}(x)):C=x.J,_.ra=C),C(h,f,_.da),x={J:x.J,aa:x.aa,Z:x.Z}}}KV(h,f)}var Lf=Symbol();function GT(f,h,v){return f[Lf]||(f[Lf]=function(x,N){return h(x,N,v)})}function zT(f){var h=f[Lf];if(!h){var v=dg(f);h=function(x,N){return YT(x,N,v)},f[Lf]=h}return h}function JV(f){var h=f.ia;if(h)return zT(h);if(h=f.wa)return GT(f.da.P,h,f.ka)}function e3(f){var h=JV(f),v=f.da,x=f.oa.U;return h?function(N,_){return x(N,_,v,h)}:function(N,_){return x(N,_,v)}}function WT(f,h){var v=f[h];return typeof v=="function"&&v.length===0&&(v=v(),f[h]=v),Array.isArray(v)&&(nc in v||tc in v||0<v.length&&typeof v[0]=="function")?v:void 0}function qT(f,h,v,x,N,_){h.P=f[0];var C=1;if(f.length>C&&typeof f[C]!="number"){var F=f[C++];v(h,F)}for(;C<f.length;){v=f[C++];for(var B=C+1;B<f.length&&typeof f[B]!="number";)B++;switch(F=f[C++],B-=C,B){case 0:x(h,v,F);break;case 1:(B=WT(f,C))?(C++,N(h,v,F,B)):x(h,v,F,f[C++]);break;case 2:B=C++,B=WT(f,B),N(h,v,F,B,f[C++]);break;case 3:_(h,v,F,f[C++],f[C++],f[C++]);break;case 4:_(h,v,F,f[C++],f[C++],f[C++],f[C++]);break;default:throw Error("unexpected number of binary field arguments: "+B)}}return h}var Vf=Symbol();function KT(f){var h=f[Vf];if(!h){var v=fg(f);h=function(x,N){return QT(x,N,v)},f[Vf]=h}return h}function ZT(f,h){var v=f[Vf];return v||(v=function(x,N){return HT(x,N,h)},f[Vf]=v),v}var tc=Symbol();function t3(f,h){f.push(h)}function n3(f,h,v){f.push(h,v.W)}function r3(f,h,v,x){var N=KT(x),_=fg(x).P,C=v.W;f.push(h,function(F,B,Y){return C(F,B,Y,_,N)})}function o3(f,h,v,x,N,_){var C=ZT(x,_),F=v.W;f.push(h,function(B,Y,ee){return F(B,Y,ee,x,C)})}function fg(f){var h=f[tc];return h||(h=qT(f,f[tc]=[],t3,n3,r3,o3),nc in f&&tc in f&&(f.length=0),h)}var nc=Symbol();function i3(f,h){f[0]=h}function s3(f,h,v,x){var N=v.U;f[h]=x?function(_,C,F){return N(_,C,F,x)}:N}function a3(f,h,v,x,N){var _=v.U,C=zT(x),F=dg(x).P;f[h]=function(B,Y,ee){return _(B,Y,ee,F,C,N)}}function u3(f,h,v,x,N,_,C){var F=v.U,B=GT(x,N,_);f[h]=function(Y,ee,ye){return F(Y,ee,ye,x,B,C)}}function dg(f){var h=f[nc];return h||(h=qT(f,f[nc]={},i3,s3,a3,u3),nc in f&&tc in f&&(f.length=0),h)}function YT(f,h,v){for(;MT(h)&&h.i!=4;){var x=h.l,N=v[x];if(!N){var _=v[0];_&&(_=_[x])&&(N=v[x]=e3(_))}if(!N||!N(h,f,x)){N=h,x=f,_=N.j,kf(N);var C=N;if(!C.ca){if(N=C.h.h-_,C.h.h=_,C=C.h,N==0)N=Jm();else{if(_=CT(C,N),C.S&&C.m)N=C.i.subarray(_,_+N);else{C=C.i;var F=_;N=_+N,N=F===N?ia():UV?C.slice(F,N):new Uint8Array(C.subarray(F,N))}N=N.length==0?Jm():new Qu(N,Zi)}(_=x.R)?_.push(N):x.R=[N]}}}return f}function QT(f,h,v){for(var x=v.length,N=x%2==1,_=N?1:0;_<x;_+=2)(0,v[_+1])(h,f,v[_]);HT(f,h,N?v[0]:void 0)}function rc(f,h){return{U:f,W:h}}var vr=rc(function(f,h,v){if(f.i!==5)return!1;f=f.h;var x=f.i,N=f.h,_=x[N],C=x[N+1],F=x[N+2];return x=x[N+3],Qi(f,f.h+4),C=(_<<0|C<<8|F<<16|x<<24)>>>0,f=2*(C>>31)+1,_=C>>>23&255,C&=8388607,qr(h,v,_==255?C?NaN:1/0*f:_==0?f*Math.pow(2,-149)*C:f*Math.pow(2,_-150)*(C+Math.pow(2,23))),!0},function(f,h,v){if(h=ug(h,v),h!=null){Xi(f.h,8*v+5),f=f.h;var x=+h;x===0?0<1/x?Rt=gn=0:(gn=0,Rt=2147483648):isNaN(x)?(gn=0,Rt=2147483647):(x=(v=0>x?-2147483648:0)?-x:x,34028234663852886e22<x?(gn=0,Rt=(v|2139095040)>>>0):11754943508222875e-54>x?(x=Math.round(x/Math.pow(2,-149)),gn=0,Rt=(v|x)>>>0):(h=Math.floor(Math.log(x)/Math.LN2),x*=Math.pow(2,-h),x=Math.round(8388608*x),16777216<=x&&++h,gn=0,Rt=(v|h+127<<23|x&8388607)>>>0)),v=Rt,f.h.push(v>>>0&255),f.h.push(v>>>8&255),f.h.push(v>>>16&255),f.h.push(v>>>24&255)}}),c3=rc(function(f,h,v){if(f.i!==0)return!1;var x=f.h,N=0,_=f=0,C=x.i,F=x.h;do{var B=C[F++];N|=(B&127)<<_,_+=7}while(32>_&&B&128);for(32<_&&(f|=(B&127)>>4),_=3;32>_&&B&128;_+=7)B=C[F++],f|=(B&127)<<_;if(Qi(x,F),128>B)x=N>>>0,B=f>>>0,(f=B&2147483648)&&(x=~x+1>>>0,B=~B>>>0,x==0&&(B=B+1>>>0)),x=4294967296*B+(x>>>0);else throw Qm();return qr(h,v,f?-x:x),!0},function(f,h,v){h=yr(h,v),h!=null&&(typeof h=="string"&&vT(h),h!=null&&(Xi(f.h,8*v),typeof h=="number"?(f=f.h,mT(h),AT(f,Rt,gn)):(v=vT(h),AT(f.h,v.i,v.h))))}),l3=rc(function(f,h,v){return f.i!==0?!1:(qr(h,v,Xu(f.h)),!0)},function(f,h,v){if(h=yr(h,v),h!=null&&h!=null)if(Xi(f.h,8*v),f=f.h,v=h,0<=v)Xi(f,v);else{for(h=0;9>h;h++)f.h.push(v&127|128),v>>=7;f.h.push(1)}}),XT=rc(function(f,h,v){if(f.i!==2)return!1;var x=Xu(f.h)>>>0;f=f.h;var N=CT(f,x);if(f=f.i,GV){var _=f,C;(C=Xm)||(C=Xm=new TextDecoder("utf-8",{fatal:!0})),f=N+x,_=N===0&&f===_.length?_:_.subarray(N,f);try{var F=C.decode(_)}catch(ye){if(Mf===void 0){try{C.decode(new Uint8Array([128]))}catch{}try{C.decode(new Uint8Array([97])),Mf=!0}catch{Mf=!1}}throw!Mf&&(Xm=void 0),ye}}else{F=N,x=F+x,N=[];for(var B=null,Y,ee;F<x;)Y=f[F++],128>Y?N.push(Y):224>Y?F>=x?Yi():(ee=f[F++],194>Y||(ee&192)!==128?(F--,Yi()):N.push((Y&31)<<6|ee&63)):240>Y?F>=x-1?Yi():(ee=f[F++],(ee&192)!==128||Y===224&&160>ee||Y===237&&160<=ee||((_=f[F++])&192)!==128?(F--,Yi()):N.push((Y&15)<<12|(ee&63)<<6|_&63)):244>=Y?F>=x-2?Yi():(ee=f[F++],(ee&192)!==128||(Y<<28)+(ee-144)>>30||((_=f[F++])&192)!==128||((C=f[F++])&192)!==128?(F--,Yi()):(Y=(Y&7)<<18|(ee&63)<<12|(_&63)<<6|C&63,Y-=65536,N.push((Y>>10&1023)+55296,(Y&1023)+56320))):Yi(),8192<=N.length&&(B=DT(B,N),N.length=0);F=DT(B,N)}return qr(h,v,F),!0},function(f,h,v){if(h=yr(h,v),h!=null){var x=!1;if(x=x===void 0?!1:x,zV){if(x&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(h))throw Error("Found an unpaired surrogate");h=(xT||(xT=new TextEncoder)).encode(h)}else{for(var N=0,_=new Uint8Array(3*h.length),C=0;C<h.length;C++){var F=h.charCodeAt(C);if(128>F)_[N++]=F;else{if(2048>F)_[N++]=F>>6|192;else{if(55296<=F&&57343>=F){if(56319>=F&&C<h.length){var B=h.charCodeAt(++C);if(56320<=B&&57343>=B){F=1024*(F-55296)+B-56320+65536,_[N++]=F>>18|240,_[N++]=F>>12&63|128,_[N++]=F>>6&63|128,_[N++]=F&63|128;continue}else C--}if(x)throw Error("Found an unpaired surrogate");F=65533}_[N++]=F>>12|224,_[N++]=F>>6&63|128}_[N++]=F&63|128}}h=N===_.length?_:_.subarray(0,N)}Xi(f.h,8*v+2),Xi(f.h,h.length),sa(f,f.h.end()),sa(f,h)}}),JT=rc(function(f,h,v,x,N){if(f.i!==2)return!1;h=PT(h,v,x),v=f.h.j,x=Xu(f.h)>>>0;var _=f.h.h+x,C=_-v;if(0>=C&&(f.h.j=_,N(h,f,void 0,void 0,void 0),C=_-f.h.h),C)throw Error("Message parsing ended unexpectedly. Expected to read "+(x+" bytes, instead read "+(x-C)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return f.h.h=_,f.h.j=v,!0},function(f,h,v,x,N){if(h=cg(h,x,v),h!=null)for(x=0;x<h.length;x++){var _=f;Xi(_.h,8*v+2);var C=_.h.end();sa(_,C),C.push(_.i),_=C,N(h[x],f),C=f;var F=_.pop();for(F=C.i+C.h.length()-F;127<F;)_.push(F&127|128),F>>>=7,C.i++;_.push(F),C.i++}});function pg(f){return function(h,v){e:{if(Of.length){var x=Of.pop();x.setOptions(v),eg(x.h,h,v),h=x}else h=new ng(h,v);try{var N=dg(f),_=YT(new N.P,h,N);break e}finally{N=h.h,N.i=null,N.m=!1,N.l=0,N.j=0,N.h=0,N.S=!1,h.l=-1,h.i=-1,100>Of.length&&Of.push(h)}_=void 0}return _}}function hg(f){return function(){var h=new qV;QT(this,h,fg(f)),sa(h,h.h.end());for(var v=new Uint8Array(h.i),x=h.j,N=x.length,_=0,C=0;C<N;C++){var F=x[C];v.set(F,_),_+=F.length}return h.j=[v],v}}function aa(f){Tn.call(this,f)}T(aa,Tn);var eN=[aa,1,l3,2,vr,3,XT,4,XT];aa.prototype.l=hg(eN);function mg(f){Tn.call(this,f,-1,f3)}T(mg,Tn),mg.prototype.addClassification=function(f,h){return PT(this,1,aa,f,h),this};var f3=[1],d3=pg([mg,1,JT,eN]);function oc(f){Tn.call(this,f)}T(oc,Tn);var tN=[oc,1,vr,2,vr,3,vr,4,vr,5,vr];oc.prototype.l=hg(tN);function nN(f){Tn.call(this,f,-1,p3)}T(nN,Tn);var p3=[1],h3=pg([nN,1,JT,tN]);function jf(f){Tn.call(this,f)}T(jf,Tn);var rN=[jf,1,vr,2,vr,3,vr,4,vr,5,vr,6,c3],m3=pg(rN);jf.prototype.l=hg(rN);function oN(f,h,v){if(v=f.createShader(v===0?f.VERTEX_SHADER:f.FRAGMENT_SHADER),f.shaderSource(v,h),f.compileShader(v),!f.getShaderParameter(v,f.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+f.getShaderInfoLog(v));return v}function g3(f){return cg(f,aa,1).map(function(h){var v=yr(h,1);return{index:v??0,qa:Zr(h,2),label:yr(h,3)!=null?Pf(yr(h,3),""):void 0,displayName:yr(h,4)!=null?Pf(yr(h,4),""):void 0}})}function y3(f){return{x:Zr(f,1),y:Zr(f,2),z:Zr(f,3),visibility:ug(f,4)!=null?Zr(f,4):void 0}}function gg(f,h){this.i=f,this.h=h,this.m=0}function iN(f,h,v){return v3(f,h),typeof f.h.canvas.transferToImageBitmap=="function"?Promise.resolve(f.h.canvas.transferToImageBitmap()):v?Promise.resolve(f.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(f.h.canvas):(f.j===void 0&&(f.j=document.createElement("canvas")),new Promise(function(x){f.j.height=f.h.canvas.height,f.j.width=f.h.canvas.width,f.j.getContext("2d",{}).drawImage(f.h.canvas,0,0,f.h.canvas.width,f.h.canvas.height),x(f.j)}))}function v3(f,h){var v=f.h;if(f.s===void 0){var x=oN(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),N=oN(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),_=v.createProgram();if(v.attachShader(_,x),v.attachShader(_,N),v.linkProgram(_),!v.getProgramParameter(_,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(_));x=f.s=_,v.useProgram(x),N=v.getUniformLocation(x,"sampler0"),f.l={O:v.getAttribLocation(x,"aVertex"),N:v.getAttribLocation(x,"aTex"),ya:N},f.v=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,f.v),v.enableVertexAttribArray(f.l.O),v.vertexAttribPointer(f.l.O,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),f.u=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,f.u),v.enableVertexAttribArray(f.l.N),v.vertexAttribPointer(f.l.N,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(N,0)}x=f.l,v.useProgram(f.s),v.canvas.width=h.width,v.canvas.height=h.height,v.viewport(0,0,h.width,h.height),v.activeTexture(v.TEXTURE0),f.i.bindTexture2d(h.glName),v.enableVertexAttribArray(x.O),v.bindBuffer(v.ARRAY_BUFFER,f.v),v.vertexAttribPointer(x.O,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(x.N),v.bindBuffer(v.ARRAY_BUFFER,f.u),v.vertexAttribPointer(x.N,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(x.O),v.disableVertexAttribArray(x.N),v.bindBuffer(v.ARRAY_BUFFER,null),f.i.bindTexture2d(0)}function w3(f){this.h=f}var b3=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function E3(f,h){return h+f}function sN(f,h){window[f]=h}function D3(f){var h=document.createElement("script");return h.setAttribute("src",f),h.setAttribute("crossorigin","anonymous"),new Promise(function(v){h.addEventListener("load",function(){v()},!1),h.addEventListener("error",function(){v()},!1),document.body.appendChild(h)})}function x3(){return K(function(f){switch(f.h){case 1:return f.s=2,O(f,WebAssembly.instantiate(b3),4);case 4:f.h=3,f.s=0;break;case 2:return f.s=0,f.l=null,f.return(!1);case 3:return f.return(!0)}})}function yg(f){if(this.h=f,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=f&&f.locateFile||E3,typeof window=="object")var h=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")h=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=h,f.options){h=a(Object.keys(f.options));for(var v=h.next();!v.done;v=h.next()){v=v.value;var x=f.options[v].default;x!==void 0&&(this.l[v]=typeof x=="function"?x():x)}}}t=yg.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function I3(f){var h,v,x,N,_,C,F,B,Y,ee,ye;return K(function(ce){switch(ce.h){case 1:return f.ga?(h=f.h.files===void 0?[]:typeof f.h.files=="function"?f.h.files(f.l):f.h.files,O(ce,x3(),2)):ce.return();case 2:if(v=ce.i,typeof window=="object")return sN("createMediapipeSolutionsWasm",{locateFile:f.locateFile}),sN("createMediapipeSolutionsPackedAssets",{locateFile:f.locateFile}),C=h.filter(function(oe){return oe.data!==void 0}),F=h.filter(function(oe){return oe.data===void 0}),B=Promise.all(C.map(function(oe){var ve=Bf(f,oe.url);if(oe.path!==void 0){var ke=oe.path;ve=ve.then(function(ut){return f.overrideFile(ke,ut),Promise.resolve(ut)})}return ve})),Y=Promise.all(F.map(function(oe){return oe.simd===void 0||oe.simd&&v||!oe.simd&&!v?D3(f.locateFile(oe.url,f.ha)):Promise.resolve()})).then(function(){var oe,ve,ke;return K(function(ut){if(ut.h==1)return oe=window.createMediapipeSolutionsWasm,ve=window.createMediapipeSolutionsPackedAssets,ke=f,O(ut,oe(ve),2);ke.i=ut.i,ut.h=0})}),ee=function(){return K(function(oe){return f.h.graph&&f.h.graph.url?oe=O(oe,Bf(f,f.h.graph.url),0):(oe.h=0,oe=void 0),oe})}(),O(ce,Promise.all([Y,B,ee]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return x=h.filter(function(oe){return oe.simd===void 0||oe.simd&&v||!oe.simd&&!v}).map(function(oe){return f.locateFile(oe.url,f.ha)}),importScripts.apply(null,u(x)),N=f,O(ce,createMediapipeSolutionsWasm(Module),6);case 6:N.i=ce.i,f.m=new OffscreenCanvas(1,1),f.i.canvas=f.m,_=f.i.GL.createContext(f.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),f.i.GL.makeContextCurrent(_),ce.h=4;break;case 7:if(f.m=document.createElement("canvas"),ye=f.m.getContext("webgl2",{}),!ye&&(ye=f.m.getContext("webgl",{}),!ye))return alert("Failed to create WebGL canvas context when passing video frame."),ce.return();f.K=ye,f.i.canvas=f.m,f.i.createContext(f.m,!0,!0,{});case 4:f.j=new f.i.SolutionWasm,f.ga=!1,ce.h=0}})}function S3(f){var h,v,x,N,_,C,F,B;return K(function(Y){if(Y.h==1){if(f.h.graph&&f.h.graph.url&&f.fa===f.h.graph.url)return Y.return();if(f.u=!0,!f.h.graph||!f.h.graph.url){Y.h=2;return}return f.fa=f.h.graph.url,O(Y,Bf(f,f.h.graph.url),3)}for(Y.h!=2&&(h=Y.i,f.j.loadGraph(h)),v=a(Object.keys(f.D)),x=v.next();!x.done;x=v.next())N=x.value,f.j.overrideFile(N,f.D[N]);if(f.D={},f.h.listeners)for(_=a(f.h.listeners),C=_.next();!C.done;C=_.next())F=C.value,_3(f,F);B=f.l,f.l={},f.setOptions(B),Y.h=0})}t.reset=function(){var f=this;return K(function(h){f.j&&(f.j.reset(),f.s={},f.v={}),h.h=0})},t.setOptions=function(f,h){var v=this;if(h=h||this.h.options){for(var x=[],N=[],_={},C=a(Object.keys(f)),F=C.next();!F.done;_={X:_.X,Y:_.Y},F=C.next())if(F=F.value,!(F in this.l&&this.l[F]===f[F])){this.l[F]=f[F];var B=h[F];B!==void 0&&(B.onChange&&(_.X=B.onChange,_.Y=f[F],x.push(function(Y){return function(){var ee;return K(function(ye){if(ye.h==1)return O(ye,Y.X(Y.Y),2);ee=ye.i,ee===!0&&(v.u=!0),ye.h=0})}}(_))),B.graphOptionXref&&(F=Object.assign({},{calculatorName:"",calculatorIndex:0},B.graphOptionXref,{valueNumber:B.type===1?f[F]:0,valueBoolean:B.type===0?f[F]:!1,valueString:B.type===2?f[F]:""}),N.push(F)))}(x.length!==0||N.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(N),this.F=(this.F===void 0?[]:this.F).concat(x))}};function T3(f){var h,v,x,N,_,C,F;return K(function(B){switch(B.h){case 1:if(!f.u)return B.return();if(!f.F){B.h=2;break}h=a(f.F),v=h.next();case 3:if(v.done){B.h=5;break}return x=v.value,O(B,x(),4);case 4:v=h.next(),B.h=3;break;case 5:f.F=void 0;case 2:if(f.H){for(N=new f.i.GraphOptionChangeRequestList,_=a(f.H),C=_.next();!C.done;C=_.next())F=C.value,N.push_back(F);f.j.changeOptions(N),N.delete(),f.H=void 0}f.u=!1,B.h=0}})}t.initialize=function(){var f=this;return K(function(h){return h.h==1?O(h,I3(f),2):h.h!=3?O(h,S3(f),3):O(h,T3(f),0)})};function Bf(f,h){var v,x;return K(function(N){return h in f.L?N.return(f.L[h]):(v=f.locateFile(h,""),x=fetch(v).then(function(_){return _.arrayBuffer()}),f.L[h]=x,N.return(x))})}t.overrideFile=function(f,h){this.j?this.j.overrideFile(f,h):this.D[f]=h},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(f,h){var v=this,x,N,_,C,F,B,Y,ee,ye;return K(function(ce){switch(ce.h){case 1:return v.h.inputs?(x=1e3*(h??performance.now()),O(ce,v.I,2)):ce.return();case 2:return O(ce,v.initialize(),3);case 3:for(N=new v.i.PacketDataList,_=a(Object.keys(f)),C=_.next();!C.done;C=_.next())if(F=C.value,B=v.h.inputs[F]){e:{var oe=f[F];switch(B.type){case"video":var ve=v.s[B.stream];if(ve||(ve=new gg(v.i,v.K),v.s[B.stream]=ve),ve.m===0&&(ve.m=ve.i.createTexture()),typeof HTMLVideoElement<"u"&&oe instanceof HTMLVideoElement)var ke=oe.videoWidth,ut=oe.videoHeight;else typeof HTMLImageElement<"u"&&oe instanceof HTMLImageElement?(ke=oe.naturalWidth,ut=oe.naturalHeight):(ke=oe.width,ut=oe.height);ut={glName:ve.m,width:ke,height:ut},ke=ve.h,ke.canvas.width=ut.width,ke.canvas.height=ut.height,ke.activeTexture(ke.TEXTURE0),ve.i.bindTexture2d(ve.m),ke.texImage2D(ke.TEXTURE_2D,0,ke.RGBA,ke.RGBA,ke.UNSIGNED_BYTE,oe),ve.i.bindTexture2d(0),ve=ut;break e;case"detections":for(ve=v.s[B.stream],ve||(ve=new w3(v.i),v.s[B.stream]=ve),ve.data||(ve.data=new ve.h.DetectionListData),ve.data.reset(oe.length),ut=0;ut<oe.length;++ut){ke=oe[ut];var rt=ve.data,Zt=rt.setBoundingBox,nr=ut,Nn=ke.la,He=new jf;if(Kr(He,1,Nn.sa),Kr(He,2,Nn.ta),Kr(He,3,Nn.height),Kr(He,4,Nn.width),Kr(He,5,Nn.rotation),qr(He,6,Nn.pa),Nn=He.l(),Zt.call(rt,nr,Nn),ke.ea)for(rt=0;rt<ke.ea.length;++rt){He=ke.ea[rt],Zt=ve.data,nr=Zt.addNormalizedLandmark,Nn=ut,He=Object.assign({},He,{visibility:He.visibility?He.visibility:0});var Yt=new oc;Kr(Yt,1,He.x),Kr(Yt,2,He.y),Kr(Yt,3,He.z),He.visibility&&Kr(Yt,4,He.visibility),He=Yt.l(),nr.call(Zt,Nn,He)}if(ke.ba)for(rt=0;rt<ke.ba.length;++rt)Zt=ve.data,nr=Zt.addClassification,Nn=ut,He=ke.ba[rt],Yt=new aa,Kr(Yt,2,He.qa),He.index&&qr(Yt,1,He.index),He.label&&qr(Yt,3,He.label),He.displayName&&qr(Yt,4,He.displayName),He=Yt.l(),nr.call(Zt,Nn,He)}ve=ve.data;break e;default:ve={}}}switch(Y=ve,ee=B.stream,B.type){case"video":N.pushTexture2d(Object.assign({},Y,{stream:ee,timestamp:x}));break;case"detections":ye=Y,ye.stream=ee,ye.timestamp=x,N.pushDetectionList(ye);break;default:throw Error("Unknown input config type: '"+B.type+"'")}}return v.j.send(N),O(ce,v.I,4);case 4:N.delete(),ce.h=0}})};function N3(f,h,v){var x,N,_,C,F,B,Y,ee,ye,ce,oe,ve,ke,ut;return K(function(rt){switch(rt.h){case 1:if(!v)return rt.return(h);for(x={},N=0,_=a(Object.keys(v)),C=_.next();!C.done;C=_.next())F=C.value,B=v[F],typeof B!="string"&&B.type==="texture"&&h[B.stream]!==void 0&&++N;1<N&&(f.M=!1),Y=a(Object.keys(v)),C=Y.next();case 2:if(C.done){rt.h=4;break}if(ee=C.value,ye=v[ee],typeof ye=="string")return ke=x,ut=ee,O(rt,C3(f,ee,h[ye]),14);if(ce=h[ye.stream],ye.type==="detection_list"){if(ce){for(var Zt=ce.getRectList(),nr=ce.getLandmarksList(),Nn=ce.getClassificationsList(),He=[],Yt=0;Yt<Zt.size();++Yt){var oi=m3(Zt.get(Yt)),A3=Zr(oi,1),M3=Zr(oi,2),k3=Zr(oi,3),O3=Zr(oi,4),R3=Zr(oi,5,0),Uf=void 0;Uf=Uf===void 0?0:Uf,oi={la:{sa:A3,ta:M3,height:k3,width:O3,rotation:R3,pa:Pf(yr(oi,6),Uf)},ea:cg(h3(nr.get(Yt)),oc,1).map(y3),ba:g3(d3(Nn.get(Yt)))},He.push(oi)}Zt=He}else Zt=[];x[ee]=Zt,rt.h=7;break}if(ye.type==="proto_list"){if(ce){for(Zt=Array(ce.size()),nr=0;nr<ce.size();nr++)Zt[nr]=ce.get(nr);ce.delete()}else Zt=[];x[ee]=Zt,rt.h=7;break}if(ce===void 0){rt.h=3;break}if(ye.type==="float_list"){x[ee]=ce,rt.h=7;break}if(ye.type==="proto"){x[ee]=ce,rt.h=7;break}if(ye.type!=="texture")throw Error("Unknown output config type: '"+ye.type+"'");return oe=f.v[ee],oe||(oe=new gg(f.i,f.K),f.v[ee]=oe),O(rt,iN(oe,ce,f.M),13);case 13:ve=rt.i,x[ee]=ve;case 7:ye.transform&&x[ee]&&(x[ee]=ye.transform(x[ee])),rt.h=3;break;case 14:ke[ut]=rt.i;case 3:C=Y.next(),rt.h=2;break;case 4:return rt.return(x)}})}function C3(f,h,v){var x;return K(function(N){return typeof v=="number"||v instanceof Uint8Array||v instanceof f.i.Uint8BlobList?N.return(v):v instanceof f.i.Texture2dDataOut?(x=f.v[h],x||(x=new gg(f.i,f.K),f.v[h]=x),N.return(iN(x,v,f.M))):N.return(void 0)})}function _3(f,h){for(var v=h.name||"$",x=[].concat(u(h.wants)),N=new f.i.StringList,_=a(h.wants),C=_.next();!C.done;C=_.next())N.push_back(C.value);_=f.i.PacketListener.implement({onResults:function(F){for(var B={},Y=0;Y<h.wants.length;++Y)B[x[Y]]=F.get(Y);var ee=f.listeners[v];ee&&(f.I=N3(f,B,h.outs).then(function(ye){ye=ee(ye);for(var ce=0;ce<h.wants.length;++ce){var oe=B[x[ce]];typeof oe=="object"&&oe.hasOwnProperty&&oe.hasOwnProperty("delete")&&oe.delete()}ye&&(f.I=ye)}))}}),f.j.attachMultiListener(N,_),N.delete()}t.onResults=function(f,h){this.listeners[h||"$"]=f},Me("Solution",yg),Me("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function aN(f){switch(f===void 0&&(f=0),f){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function uN(f){var h=this;f=f||{},this.h=new yg({locateFile:f.locateFile,files:function(v){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:aN(v.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(v){var x,N,_;return K(function(C){return C.h==1?(x=aN(v),N="third_party/mediapipe/modules/selfie_segmentation/"+x,O(C,Bf(h.h,x),2)):(_=C.i,h.h.overrideFile(N,_),C.return(!0))})}}}})}t=uN.prototype,t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(f){this.h.onResults(f)},t.initialize=function(){var f=this;return K(function(h){return O(h,f.h.initialize(),0)})},t.reset=function(){this.h.reset()},t.send=function(f){var h=this;return K(function(v){return O(v,h.h.send(f),0)})},t.setOptions=function(f){this.h.setOptions(f)},Me("SelfieSegmentation",uN),Me("VERSION","0.1.1675465747")}).call(QL)});var PV=Cn((Ym,FV)=>{"use strict";(function(t,e){typeof Ym=="object"&&typeof FV<"u"?e(Ym,(sT(),pN(YL)),(pn(),pN(Hu))):typeof define=="function"&&define.amd?define(["exports","@tensorflow/tfjs-converter","@tensorflow/tfjs-core"],e):e((t=t||self).cocoSsd=t.cocoSsd||{},t.tf,t.tf)})(Ym,function(t,e,n){"use strict";let r={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class o{constructor(s,a){this.modelPath=a||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(s)}/model.json`}getPrefix(s){return s==="lite_mobilenet_v2"?`ssd${s}`:`ssd_${s}`}load(){return G(this,null,function*(){this.model=yield e.loadGraphModel(this.modelPath);let s=n.zeros([1,300,300,3],"int32"),a=yield this.model.executeAsync(s);yield Promise.all(a.map(u=>u.data())),a.map(u=>u.dispose()),s.dispose()})}infer(s,a,u){return G(this,null,function*(){let c=n.tidy(()=>(s instanceof n.Tensor||(s=n.browser.fromPixels(s)),n.expandDims(s))),l=c.shape[1],d=c.shape[2],p=yield this.model.executeAsync(c),m=p[0].dataSync(),b=p[1].dataSync();c.dispose(),n.dispose(p);let[S,T]=this.calculateMaxScores(m,p[0].shape[1],p[0].shape[2]),A=n.getBackend();n.getBackend()==="webgl"&&n.setBackend("cpu");let $=n.tidy(()=>{let O=n.tensor2d(b,[p[1].shape[1],p[1].shape[3]]);return n.image.nonMaxSuppression(O,S,a,u,u)}),M=$.dataSync();return $.dispose(),A!==n.getBackend()&&n.setBackend(A),this.buildDetectedObjects(d,l,b,S,M,T)})}buildDetectedObjects(s,a,u,c,l,d){let p=l.length,m=[];for(let b=0;b<p;b++){let S=[];for(let O=0;O<4;O++)S[O]=u[4*l[b]+O];let T=S[0]*a,A=S[1]*s,$=S[2]*a,M=S[3]*s;S[0]=A,S[1]=T,S[2]=M-A,S[3]=$-T,m.push({bbox:S,class:r[d[l[b]]+1].displayName,score:c[l[b]]})}return m}calculateMaxScores(s,a,u){let c=[],l=[];for(let d=0;d<a;d++){let p=Number.MIN_VALUE,m=-1;for(let b=0;b<u;b++)s[d*u+b]>p&&(p=s[d*u+b],m=b);c[d]=p,l[d]=m}return[c,l]}detect(s,a=20,u=.5){return G(this,null,function*(){return this.infer(s,a,u)})}dispose(){this.model!=null&&this.model.dispose()}}t.ObjectDetection=o,t.load=function(){return G(this,arguments,function*(i={}){if(n==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");let s=i.base||"lite_mobilenet_v2",a=i.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(s)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${s}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);let u=new o(s,a);return yield u.load(),u})},t.version="2.2.3",Object.defineProperty(t,"__esModule",{value:!0})})});var wg=null;var vg=1,bg=Symbol("SIGNAL");function ze(t){let e=wg;return wg=t,e}function hN(){return wg}var Eg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function U3(t){if(!(Tg(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===vg)){if(!t.producerMustRecompute(t)&&!xg(t)){t.dirty=!1,t.lastCleanEpoch=vg;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=vg}}function Dg(t){return t&&(t.nextProducerIndex=0),ze(t)}function mN(t,e){if(ze(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Tg(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Sg(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function xg(t){Ng(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(U3(n),r!==n.version))return!0}return!1}function Ig(t){if(Ng(t),Tg(t))for(let e=0;e<t.producerNode.length;e++)Sg(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Sg(t,e){if(H3(t),t.liveConsumerNode.length===1&&G3(t))for(let r=0;r<t.producerNode.length;r++)Sg(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];Ng(o),o.producerIndexOfThis[r]=e}}function Tg(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ng(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function H3(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function G3(t){return t.producerNode!==void 0}function z3(){throw new Error}var W3=z3;function gN(t){W3=t}function Ie(t){return typeof t=="function"}function ua(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Gf=ua(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function sc(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ie(r))try{r()}catch(i){e=i instanceof Gf?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{yN(i)}catch(s){e=e??[],s instanceof Gf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Gf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)yN(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&sc(n,e)}remove(e){let{_finalizers:n}=this;n&&sc(n,e),e instanceof t&&e._removeParent(this)}};xt.EMPTY=(()=>{let t=new xt;return t.closed=!0,t})();var Cg=xt.EMPTY;function zf(t){return t instanceof xt||t&&"closed"in t&&Ie(t.remove)&&Ie(t.add)&&Ie(t.unsubscribe)}function yN(t){Ie(t)?t():t.unsubscribe()}var wr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ca={setTimeout(t,e,...n){let{delegate:r}=ca;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ca;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wf(t){ca.setTimeout(()=>{let{onUnhandledError:e}=wr;if(e)e(t);else throw t})}function ac(){}var vN=_g("C",void 0,void 0);function wN(t){return _g("E",void 0,t)}function bN(t){return _g("N",t,void 0)}function _g(t,e,n){return{kind:t,value:e,error:n}}var es=null;function la(t){if(wr.useDeprecatedSynchronousErrorHandling){let e=!es;if(e&&(es={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=es;if(es=null,n)throw r}}else t()}function EN(t){wr.useDeprecatedSynchronousErrorHandling&&es&&(es.errorThrown=!0,es.error=t)}var ts=class extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zf(e)&&e.add(this)):this.destination=Z3}static create(e,n,r){return new fa(e,n,r)}next(e){this.isStopped?Mg(bN(e),this):this._next(e)}error(e){this.isStopped?Mg(wN(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mg(vN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},q3=Function.prototype.bind;function Ag(t,e){return q3.call(t,e)}var kg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qf(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qf(r)}else qf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qf(n)}}},fa=class extends ts{constructor(e,n,r){super();let o;if(Ie(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&wr.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Ag(e.next,i),error:e.error&&Ag(e.error,i),complete:e.complete&&Ag(e.complete,i)}):o=e}this.destination=new kg(o)}};function qf(t){wr.useDeprecatedSynchronousErrorHandling?EN(t):Wf(t)}function K3(t){throw t}function Mg(t,e){let{onStoppedNotification:n}=wr;n&&ca.setTimeout(()=>n(t,e))}var Z3={closed:!0,next:ac,error:K3,complete:ac};var da=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gn(t){return t}function Og(...t){return Rg(t)}function Rg(t){return t.length===0?Gn:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=Q3(n)?n:new fa(n,r,o);return la(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=DN(r),new r((o,i)=>{let s=new fa({next:a=>{try{n(a)}catch(u){i(u),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[da](){return this}pipe(...n){return Rg(n)(this)}toPromise(n){return n=DN(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function DN(t){var e;return(e=t??wr.Promise)!==null&&e!==void 0?e:Promise}function Y3(t){return t&&Ie(t.next)&&Ie(t.error)&&Ie(t.complete)}function Q3(t){return t&&t instanceof ts||Y3(t)&&zf(t)}function Fg(t){return Ie(t?.lift)}function Ue(t){return e=>{if(Fg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(t,e,n,r,o){return new Pg(t,e,n,r,o)}var Pg=class extends ts{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=o?function(a){try{o(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function pa(){return Ue((t,e)=>{let n=null;t._refCount++;let r=Ve(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ha=class extends We{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Fg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;let n=this.getSubject();e.add(this.source.subscribe(Ve(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return pa()(this)}};var xN=ua(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qt=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Kf(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new xN}next(n){la(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){la(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){la(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Cg:(this.currentObservers=null,i.push(n),new xt(()=>{this.currentObservers=null,sc(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new We;return n.source=this,n}}return t.create=(e,n)=>new Kf(e,n),t})(),Kf=class extends Qt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Cg}};var Xt=class extends Qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zn=new We(t=>t.complete());function IN(t){return t&&Ie(t.schedule)}function SN(t){return t[t.length-1]}function Zf(t){return Ie(SN(t))?t.pop():void 0}function ii(t){return IN(SN(t))?t.pop():void 0}function NN(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?i(l.value):o(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function TN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ns(t){return this instanceof ns?(this.v=t,this):new ns(t)}function CN(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(b){return Promise.resolve(b).then(m,d)}}function a(m,b){r[m]&&(o[m]=function(S){return new Promise(function(T,A){i.push([m,S,T,A])>1||u(m,S)})},b&&(o[m]=b(o[m])))}function u(m,b){try{c(r[m](b))}catch(S){p(i[0][3],S)}}function c(m){m.value instanceof ns?Promise.resolve(m.value.v).then(l,d):p(i[0][2],m)}function l(m){u("next",m)}function d(m){u("throw",m)}function p(m,b){m(b),i.shift(),i.length&&u(i[0][0],i[0][1])}}function _N(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof TN=="function"?TN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,u){s=t[i](s),o(a,u,s.done,s.value)})}}function o(i,s,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},s)}}var Yf=t=>t&&typeof t.length=="number"&&typeof t!="function";function Qf(t){return Ie(t?.then)}function Xf(t){return Ie(t[da])}function Jf(t){return Symbol.asyncIterator&&Ie(t?.[Symbol.asyncIterator])}function ed(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function X3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var td=X3();function nd(t){return Ie(t?.[td])}function rd(t){return CN(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield ns(n.read());if(o)return yield ns(void 0);yield yield ns(r)}}finally{n.releaseLock()}})}function od(t){return Ie(t?.getReader)}function It(t){if(t instanceof We)return t;if(t!=null){if(Xf(t))return J3(t);if(Yf(t))return ej(t);if(Qf(t))return tj(t);if(Jf(t))return AN(t);if(nd(t))return nj(t);if(od(t))return rj(t)}throw ed(t)}function J3(t){return new We(e=>{let n=t[da]();if(Ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ej(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function tj(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wf)})}function nj(t){return new We(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function AN(t){return new We(e=>{oj(t,e).catch(n=>e.error(n))})}function rj(t){return AN(rd(t))}function oj(t,e){var n,r,o,i;return NN(this,void 0,void 0,function*(){try{for(n=_N(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})}function _n(t,e,n,r=0,o=!1){let i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function id(t,e=0){return Ue((n,r)=>{n.subscribe(Ve(r,o=>_n(r,t,()=>r.next(o),e),()=>_n(r,t,()=>r.complete(),e),o=>_n(r,t,()=>r.error(o),e)))})}function sd(t,e=0){return Ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function MN(t,e){return It(t).pipe(sd(e),id(e))}function kN(t,e){return It(t).pipe(sd(e),id(e))}function ON(t,e){return new We(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function RN(t,e){return new We(n=>{let r;return _n(n,e,()=>{r=t[td](),_n(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>Ie(r?.return)&&r.return()})}function ad(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{_n(n,e,()=>{let r=t[Symbol.asyncIterator]();_n(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function FN(t,e){return ad(rd(t),e)}function PN(t,e){if(t!=null){if(Xf(t))return MN(t,e);if(Yf(t))return ON(t,e);if(Qf(t))return kN(t,e);if(Jf(t))return ad(t,e);if(nd(t))return RN(t,e);if(od(t))return FN(t,e)}throw ed(t)}function ht(t,e){return e?PN(t,e):It(t)}function we(...t){let e=ii(t);return ht(t,e)}function ma(t,e){let n=Ie(t)?t:()=>t,r=o=>o.error(n());return new We(e?o=>e.schedule(r,0,o):r)}function $g(t){return!!t&&(t instanceof We||Ie(t.lift)&&Ie(t.subscribe))}var No=ua(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Pe(t,e){return Ue((n,r)=>{let o=0;n.subscribe(Ve(r,i=>{r.next(t.call(e,i,o++))}))})}var{isArray:ij}=Array;function sj(t,e){return ij(e)?t(...e):t(e)}function ud(t){return Pe(e=>sj(t,e))}var{isArray:aj}=Array,{getPrototypeOf:uj,prototype:cj,keys:lj}=Object;function cd(t){if(t.length===1){let e=t[0];if(aj(e))return{args:e,keys:null};if(fj(e)){let n=lj(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function fj(t){return t&&typeof t=="object"&&uj(t)===cj}function ld(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function uc(...t){let e=ii(t),n=Zf(t),{args:r,keys:o}=cd(t);if(r.length===0)return ht([],e);let i=new We(dj(r,e,o?s=>ld(o,s):Gn));return n?i.pipe(ud(n)):i}function dj(t,e,n=Gn){return r=>{$N(e,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let u=0;u<o;u++)$N(e,()=>{let c=ht(t[u],e),l=!1;c.subscribe(Ve(r,d=>{i[u]=d,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function $N(t,e,n){t?_n(n,t,e):e()}function LN(t,e,n,r,o,i,s,a){let u=[],c=0,l=0,d=!1,p=()=>{d&&!u.length&&!c&&e.complete()},m=S=>c<r?b(S):u.push(S),b=S=>{i&&e.next(S),c++;let T=!1;It(n(S,l++)).subscribe(Ve(e,A=>{o?.(A),i?m(A):e.next(A)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;u.length&&c<r;){let A=u.shift();s?_n(e,s,()=>b(A)):b(A)}p()}catch(A){e.error(A)}}))};return t.subscribe(Ve(e,m,()=>{d=!0,p()})),()=>{a?.()}}function St(t,e,n=1/0){return Ie(e)?St((r,o)=>Pe((i,s)=>e(r,i,o,s))(It(t(r,o))),n):(typeof e=="number"&&(n=e),Ue((r,o)=>LN(r,o,t,n)))}function ga(t=1/0){return St(Gn,t)}function VN(){return ga(1)}function ya(...t){return VN()(ht(t,ii(t)))}function fd(t){return new We(e=>{It(t()).subscribe(e)})}function Lg(...t){let e=Zf(t),{args:n,keys:r}=cd(t),o=new We(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),u=s,c=s;for(let l=0;l<s;l++){let d=!1;It(n[l]).subscribe(Ve(i,p=>{d||(d=!0,c--),a[l]=p},()=>u--,void 0,()=>{(!u||!d)&&(c||i.next(r?ld(r,a):a),i.complete())}))}});return e?o.pipe(ud(e)):o}function rr(t,e){return Ue((n,r)=>{let o=0;n.subscribe(Ve(r,i=>t.call(e,i,o++)&&r.next(i)))})}function si(t){return Ue((e,n)=>{let r=null,o=!1,i;r=e.subscribe(Ve(n,void 0,void 0,s=>{i=It(t(s,si(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function jN(t,e,n,r,o){return(i,s)=>{let a=n,u=e,c=0;i.subscribe(Ve(s,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&s.next(u)},o&&(()=>{a&&s.next(u),s.complete()})))}}function rs(t,e){return Ie(e)?St(t,e,1):St(t,1)}function ai(t){return Ue((e,n)=>{let r=!1;e.subscribe(Ve(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Co(t){return t<=0?()=>zn:Ue((e,n)=>{let r=0;e.subscribe(Ve(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Vg(t){return Pe(()=>t)}function dd(t=pj){return Ue((e,n)=>{let r=!1;e.subscribe(Ve(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function pj(){return new No}function cc(t){return Ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Yr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?rr((o,i)=>t(o,i,r)):Gn,Co(1),n?ai(e):dd(()=>new No))}function va(t){return t<=0?()=>zn:Ue((e,n)=>{let r=[];e.subscribe(Ve(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function jg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?rr((o,i)=>t(o,i,r)):Gn,va(1),n?ai(e):dd(()=>new No))}function Bg(t,e){return Ue(jN(t,e,arguments.length>=2,!0))}function Ug(...t){let e=ii(t);return Ue((n,r)=>{(e?ya(t,n,e):ya(t,n)).subscribe(r)})}function or(t,e){return Ue((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(Ve(r,u=>{o?.unsubscribe();let c=0,l=i++;It(t(u,l)).subscribe(o=Ve(r,d=>r.next(e?e(u,d,l,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Hg(t){return Ue((e,n)=>{It(t).subscribe(Ve(n,()=>n.complete(),ac)),!n.closed&&e.subscribe(n)})}function Jt(t,e,n){let r=Ie(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ue((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Ve(i,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),i.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),i.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),i.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Gn}var hj="https://g.co/ng/security#xss",fe=class extends Error{constructor(e,n){super(Vy(e,n)),this.code=e}};function Vy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function wc(t){return{toString:t}.toString()}var pd="__parameters__";function mj(t){return function(...n){if(t){let r=t(...n);for(let o in r)this[o]=r[o]}}}function SC(t,e,n){return wc(()=>{let r=mj(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(u,c,l){let d=u.hasOwnProperty(pd)?u[pd]:Object.defineProperty(u,pd,{value:[]})[pd];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}var Dr=globalThis;function Xe(t){for(let e in t)if(t[e]===Xe)return e;throw Error("Could not find renamed property on target object.")}function gj(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function vn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(vn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function BN(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var yj=Xe({__forward_ref__:Xe});function ja(t){return t.__forward_ref__=ja,t.toString=function(){return vn(this())},t}function yn(t){return TC(t)?t():t}function TC(t){return typeof t=="function"&&t.hasOwnProperty(yj)&&t.__forward_ref__===ja}function pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Mn(t){return{providers:t.providers||[],imports:t.imports||[]}}function zd(t){return UN(t,CC)||UN(t,_C)}function NC(t){return zd(t)!==null}function UN(t,e){return t.hasOwnProperty(e)?t[e]:null}function vj(t){let e=t&&(t[CC]||t[_C]);return e||null}function HN(t){return t&&(t.hasOwnProperty(GN)||t.hasOwnProperty(wj))?t[GN]:null}var CC=Xe({\u0275prov:Xe}),GN=Xe({\u0275inj:Xe}),_C=Xe({ngInjectableDef:Xe}),wj=Xe({ngInjectorDef:Xe}),de=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AC(t){return t&&!!t.\u0275providers}var bj=Xe({\u0275cmp:Xe}),Ej=Xe({\u0275dir:Xe}),Dj=Xe({\u0275pipe:Xe}),xj=Xe({\u0275mod:Xe}),Dd=Xe({\u0275fac:Xe}),lc=Xe({__NG_ELEMENT_ID__:Xe}),zN=Xe({__NG_ENV_ID__:Xe});function Ij(t){return typeof t=="string"?t:t==null?"":String(t)}function Sj(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ij(t)}function Tj(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new fe(-200,t)}function jy(t,e){throw new fe(-201,!1)}var Oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Oe||{}),ry;function MC(){return ry}function ir(t){let e=ry;return ry=t,e}function kC(t,e,n){let r=zd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Oe.Optional)return null;if(e!==void 0)return e;jy(t,"Injector")}var Nj={},dc=Nj,oy="__NG_DI_FLAG__",xd="ngTempTokenPath",Cj="ngTokenPath",_j=/\n/gm,Aj="\u0275",WN="__source",xa;function Mj(){return xa}function ui(t){let e=xa;return xa=t,e}function kj(t,e=Oe.Default){if(xa===void 0)throw new fe(-203,!1);return xa===null?kC(t,void 0,e):xa.get(t,e&Oe.Optional?null:void 0,e)}function ge(t,e=Oe.Default){return(MC()||kj)(yn(t),e)}function J(t,e=Oe.Default){return ge(t,Wd(e))}function Wd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function iy(t){let e=[];for(let n=0;n<t.length;n++){let r=yn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new fe(900,!1);let o,i=Oe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=Oj(a);typeof u=="number"?u===-1?o=a.token:i|=u:o=a}e.push(ge(o,i))}else e.push(ge(r))}return e}function OC(t,e){return t[oy]=e,t.prototype[oy]=e,t}function Oj(t){return t[oy]}function Rj(t,e,n,r){let o=t[xd];throw e[WN]&&o.unshift(e[WN]),t.message=Fj(`
`+t.message,o,n,r),t[Cj]=o,t[xd]=null,t}function Fj(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Aj?t.slice(2):t;let o=vn(e);if(Array.isArray(e))o=e.map(vn).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):vn(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(_j,`
  `)}`}var By=OC(SC("Optional"),8);var RC=OC(SC("SkipSelf"),4);function Sa(t,e){let n=t.hasOwnProperty(Dd);return n?t[Dd]:null}function Uy(t,e){t.forEach(n=>Array.isArray(n)?Uy(n,e):e(n))}function FC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Id(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Pj(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(o===1)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;){let i=o-2;t[o]=t[i],o--}t[e]=n,t[e+1]=r}}function $j(t,e,n){let r=bc(t,e);return r>=0?t[r|1]=n:(r=~r,Pj(t,r,e,n)),r}function Gg(t,e){let n=bc(t,e);if(n>=0)return t[n|1]}function bc(t,e){return Lj(t,e,1)}function Lj(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}var Ta={},sr=[],Na=new de(""),PC=new de("",-1),$C=new de(""),Sd=class{get(e,n=dc){if(n===dc){let r=new Error(`NullInjectorError: No provider for ${vn(e)}!`);throw r.name="NullInjectorError",r}return n}},LC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(LC||{}),Jr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jr||{}),Ca=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ca||{});function Vj(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}function sy(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{let i=o,s=n[++r];Bj(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function jj(t){return t===3||t===4||t===6}function Bj(t){return t.charCodeAt(0)===64}function pc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?qN(t,n,o,null,e[++r]):qN(t,n,o,null,null))}}return t}function qN(t,e,n,r,o){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(t[i+1]=o);return}else if(r===t[i+1]){t[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),r!==null&&t.splice(i++,0,r),o!==null&&t.splice(i++,0,o)}var VC="ng-template";function Uj(t,e,n,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&Vj(e[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Hy(t))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function Hy(t){return t.type===4&&t.value!==VC}function Hj(t,e,n){let r=t.type===4&&!n?VC:t.value;return e===r}function Gj(t,e,n){let r=4,o=t.attrs,i=o!==null?qj(o):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!br(r)&&!br(u))return!1;if(s&&br(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Hj(t,u,n)||u===""&&e.length===1){if(br(r))return!1;s=!0}}else if(r&8){if(o===null||!Uj(t,o,u,n)){if(br(r))return!1;s=!0}}else{let c=e[++a],l=zj(u,o,Hy(t),n);if(l===-1){if(br(r))return!1;s=!0;continue}if(c!==""){let d;if(l>i?d="":d=o[l+1].toLowerCase(),r&2&&c!==d){if(br(r))return!1;s=!0}}}}return br(r)||s}function br(t){return(t&1)===0}function zj(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){let s=e[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return Kj(e,t)}function Wj(t,e,n=!1){for(let r=0;r<e.length;r++)if(Gj(t,e[r],n))return!0;return!1}function qj(t){for(let e=0;e<t.length;e++){let n=t[e];if(jj(n))return e}return t.length}function Kj(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function KN(t,e){return t?":not("+e.trim()+")":e}function Zj(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!br(s)&&(e+=KN(i,o),o=""),r=s,i=i||!br(r);n++}return o!==""&&(e+=KN(i,o)),e}function Yj(t){return t.map(Zj).join(",")}function Qj(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&e.push(i,t[++r]):o===8&&n.push(i);else{if(!br(o))break;o=i}r++}return{attrs:e,classes:n}}function qd(t){return wc(()=>{let e=GC(t),n=Ge(re({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===LC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jr.Emulated,styles:t.styles||sr,_:null,schemas:t.schemas||null,tView:null,id:""});zC(n);let r=t.dependencies;return n.directiveDefs=YN(r,!1),n.pipeDefs=YN(r,!0),n.id=eB(n),n})}function Xj(t){return fi(t)||jC(t)}function Jj(t){return t!==null}function kn(t){return wc(()=>({type:t.type,bootstrap:t.bootstrap||sr,declarations:t.declarations||sr,imports:t.imports||sr,exports:t.exports||sr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ZN(t,e){if(t==null)return Ta;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i,s,a=Ca.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),e?(n[i]=a!==Ca.None?[r,a]:r,e[i]=s):n[i]=r}return n}function Ir(t){return wc(()=>{let e=GC(t);return zC(e),e})}function fi(t){return t[bj]||null}function jC(t){return t[Ej]||null}function BC(t){return t[Dj]||null}function UC(t){let e=fi(t)||jC(t)||BC(t);return e!==null?e.standalone:!1}function HC(t,e){let n=t[xj]||null;if(!n&&e===!0)throw new Error(`Type ${vn(t)} does not have '\u0275mod' property.`);return n}function GC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ta,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||sr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ZN(t.inputs,e),outputs:ZN(t.outputs),debugInfo:null}}function zC(t){t.features?.forEach(e=>e(t))}function YN(t,e){if(!t)return null;let n=e?BC:Xj;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Jj)}function eB(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let o of n)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function tB(...t){return{\u0275providers:WC(!0,t),\u0275fromNgModule:!0}}function WC(t,...e){let n=[],r=new Set,o,i=s=>{n.push(s)};return Uy(e,s=>{let a=s;ay(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&qC(o,i),n}function qC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];Gy(o,i=>{e(i,r)})}}function ay(t,e,n,r){if(t=yn(t),!t)return!1;let o=null,i=HN(t),s=!i&&fi(t);if(!i&&!s){let u=t.ngModule;if(i=HN(u),i)o=u;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)ay(c,e,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{Uy(i.imports,l=>{ay(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&qC(c,e)}if(!a){let c=Sa(o)||(()=>new o);e({provide:o,useFactory:c,deps:sr},o),e({provide:$C,useValue:o,multi:!0},o),e({provide:Na,useValue:()=>ge(o),multi:!0},o)}let u=i.providers;if(u!=null&&!a){let c=t;Gy(u,l=>{e(l,c)})}}else return!1;return o!==t&&t.providers!==void 0}function Gy(t,e){for(let n of t)AC(n)&&(n=n.\u0275providers),Array.isArray(n)?Gy(n,e):e(n)}var nB=Xe({provide:String,useValue:Xe});function KC(t){return t!==null&&typeof t=="object"&&nB in t}function rB(t){return!!(t&&t.useExisting)}function oB(t){return!!(t&&t.useFactory)}function _a(t){return typeof t=="function"}function iB(t){return!!t.useClass}var Kd=new de(""),yd={},sB={},zg;function zy(){return zg===void 0&&(zg=new Sd),zg}var An=class{},hc=class extends An{get destroyed(){return this._destroyed}constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cy(e,s=>this.processProvider(s)),this.records.set(PC,wa(void 0,this)),o.has("environment")&&this.records.set(An,wa(void 0,this));let i=this.records.get(Kd);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get($C,sr,Oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ze(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ze(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ui(this),r=ir(void 0),o;try{return e()}finally{ui(n),ir(r)}}get(e,n=dc,r=Oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zN))return e[zN](this);r=Wd(r);let o,i=ui(this),s=ir(void 0);try{if(!(r&Oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=fB(e)&&zd(e);c&&this.injectableDefInScope(c)?u=wa(uy(e),yd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&Oe.Self?zy():this.parent;return n=r&Oe.Optional&&n===dc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[xd]=a[xd]||[]).unshift(vn(e)),i)throw a;return Rj(a,e,"R3InjectorError",this.source)}else throw a}finally{ir(s),ui(i)}}resolveInjectorInitializers(){let e=ze(null),n=ui(this),r=ir(void 0),o;try{let i=this.get(Na,sr,Oe.Self);for(let s of i)s()}finally{ui(n),ir(r),ze(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(vn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(e){e=yn(e);let n=_a(e)?e:yn(e&&e.provide),r=uB(e);if(!_a(e)&&e.multi===!0){let o=this.records.get(n);o||(o=wa(void 0,yd,!0),o.factory=()=>iy(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ze(null);try{return n.value===yd&&(n.value=sB,n.value=n.factory()),typeof n.value=="object"&&n.value&&lB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ze(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function uy(t){let e=zd(t),n=e!==null?e.factory:Sa(t);if(n!==null)return n;if(t instanceof de)throw new fe(204,!1);if(t instanceof Function)return aB(t);throw new fe(204,!1)}function aB(t){if(t.length>0)throw new fe(204,!1);let n=vj(t);return n!==null?()=>n.factory(t):()=>new t}function uB(t){if(KC(t))return wa(void 0,t.useValue);{let e=ZC(t);return wa(e,yd)}}function ZC(t,e,n){let r;if(_a(t)){let o=yn(t);return Sa(o)||uy(o)}else if(KC(t))r=()=>yn(t.useValue);else if(oB(t))r=()=>t.useFactory(...iy(t.deps||[]));else if(rB(t))r=()=>ge(yn(t.useExisting));else{let o=yn(t&&(t.useClass||t.provide));if(cB(t))r=()=>new o(...iy(t.deps));else return Sa(o)||uy(o)}return r}function wa(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function cB(t){return!!t.deps}function lB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fB(t){return typeof t=="function"||typeof t=="object"&&t instanceof de}function cy(t,e){for(let n of t)Array.isArray(n)?cy(n,e):n&&AC(n)?cy(n.\u0275providers,e):e(n)}function Sr(t,e){t instanceof hc&&t.assertNotDestroyed();let n,r=ui(t),o=ir(void 0);try{return e()}finally{ui(r),ir(o)}}function YC(){return MC()!==void 0||Mj()!=null}function dB(t){if(!YC())throw new fe(-203,!1)}function pB(t){let e=Dr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function hB(t){return typeof t=="function"}var ko=0,je=1,Ee=2,wn=3,Er=4,Tr=5,Td=6,Nd=7,xr=8,Aa=9,_o=10,Ut=11,mc=12,QN=13,Ba=14,eo=15,Ma=16,ba=17,ka=18,Zd=19,QC=20,ci=21,Wg=22,ar=23,Ao=25,XC=1;var ss=7,Cd=8,_d=9,ur=10,Ad=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ad||{});function li(t){return Array.isArray(t)&&typeof t[XC]=="object"}function Oo(t){return Array.isArray(t)&&t[XC]===!0}function Wy(t){return(t.flags&4)!==0}function Yd(t){return t.componentOffset>-1}function Qd(t){return(t.flags&1)===1}function di(t){return!!t.template}function ly(t){return(t[Ee]&512)!==0}var fy=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function JC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ua(){return e1}function e1(t){return t.type.prototype.ngOnChanges&&(t.setInput=gB),mB}Ua.ngInherit=!0;function mB(){let t=n1(this),e=t?.current;if(e){let n=t.previous;if(n===Ta)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function gB(t,e,n,r,o){let i=this.declaredInputs[r],s=n1(t)||yB(t,{previous:Ta,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[i];a[i]=new fy(c&&c.currentValue,n,u===Ta),JC(t,e,o,n)}var t1="__ngSimpleChanges__";function n1(t){return t[t1]||null}function yB(t,e){return t[t1]=e}var XN=null;var Qr=function(t,e,n){XN?.(t,e,n)},vB="svg",wB="math";function to(t){for(;Array.isArray(t);)t=t[ko];return t}function bB(t,e){return to(e[t])}function Nr(t,e){return to(e[t.index])}function r1(t,e){return t.data[e]}function mi(t,e){let n=e[t];return li(n)?n:n[ko]}function qy(t){return(t[Ee]&128)===128}function EB(t){return Oo(t[wn])}function Oa(t,e){return e==null?null:t[e]}function o1(t){t[ba]=0}function i1(t){t[Ee]&1024||(t[Ee]|=1024,qy(t)&&Xd(t))}function DB(t,e){for(;t>0;)e=e[Ba],t--;return e}function gc(t){return!!(t[Ee]&9216||t[ar]?.dirty)}function dy(t){t[_o].changeDetectionScheduler?.notify(7),t[Ee]&64&&(t[Ee]|=1024),gc(t)&&Xd(t)}function Xd(t){t[_o].changeDetectionScheduler?.notify(0);let e=as(t);for(;e!==null&&!(e[Ee]&8192||(e[Ee]|=8192,!qy(e)));)e=as(e)}function s1(t,e){if((t[Ee]&256)===256)throw new fe(911,!1);t[ci]===null&&(t[ci]=[]),t[ci].push(e)}function xB(t,e){if(t[ci]===null)return;let n=t[ci].indexOf(e);n!==-1&&t[ci].splice(n,1)}function as(t){let e=t[wn];return Oo(e)?e[wn]:e}var Be={lFrame:g1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var a1=!1;function IB(){return Be.lFrame.elementDepthCount}function SB(){Be.lFrame.elementDepthCount++}function TB(){Be.lFrame.elementDepthCount--}function u1(){return Be.bindingsEnabled}function NB(){return Be.skipHydrationRootTNode!==null}function CB(t){return Be.skipHydrationRootTNode===t}function _B(){Be.skipHydrationRootTNode=null}function mt(){return Be.lFrame.lView}function On(){return Be.lFrame.tView}function Ky(t){return Be.lFrame.contextLView=t,t[xr]}function Zy(t){return Be.lFrame.contextLView=null,t}function bn(){let t=c1();for(;t!==null&&t.type===64;)t=t.parent;return t}function c1(){return Be.lFrame.currentTNode}function AB(){let t=Be.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ds(t,e){let n=Be.lFrame;n.currentTNode=t,n.isParent=e}function Yy(){return Be.lFrame.isParent}function l1(){Be.lFrame.isParent=!1}function f1(){return a1}function JN(t){a1=t}function MB(t){return Be.lFrame.bindingIndex=t}function d1(){return Be.lFrame.bindingIndex++}function kB(t){let e=Be.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function OB(){return Be.lFrame.inI18n}function RB(t,e){let n=Be.lFrame;n.bindingIndex=n.bindingRootIndex=t,py(e)}function FB(){return Be.lFrame.currentDirectiveIndex}function py(t){Be.lFrame.currentDirectiveIndex=t}function PB(t){let e=Be.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function p1(t){Be.lFrame.currentQueryIndex=t}function $B(t){let e=t[je];return e.type===2?e.declTNode:e.type===1?t[Tr]:null}function h1(t,e,n){if(n&Oe.SkipSelf){let o=e,i=t;for(;o=o.parent,o===null&&!(n&Oe.Host);)if(o=$B(i),o===null||(i=i[Ba],o.type&10))break;if(o===null)return!1;e=o,t=i}let r=Be.lFrame=m1();return r.currentTNode=e,r.lView=t,!0}function Qy(t){let e=m1(),n=t[je];Be.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function m1(){let t=Be.lFrame,e=t===null?null:t.child;return e===null?g1(t):e}function g1(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function y1(){let t=Be.lFrame;return Be.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var v1=y1;function Xy(){let t=y1();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function LB(t){return(Be.lFrame.contextLView=DB(t,Be.lFrame.contextLView))[xr]}function Ec(){return Be.lFrame.selectedIndex}function us(t){Be.lFrame.selectedIndex=t}function w1(){let t=Be.lFrame;return r1(t.tView,t.selectedIndex)}function VB(){return Be.lFrame.currentNamespace}var b1=!0;function Jd(){return b1}function ep(t){b1=t}function jB(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=e1(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function tp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function vd(t,e,n){E1(t,e,3,n)}function wd(t,e,n,r){(t[Ee]&3)===n&&E1(t,e,n,r)}function qg(t,e){let n=t[Ee];(n&3)===e&&(n&=16383,n+=1,t[Ee]=n)}function E1(t,e,n,r){let o=r!==void 0?t[ba]&65535:0,i=r??-1,s=e.length-1,a=0;for(let u=o;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ba]+=65536),(a<i||i==-1)&&(BB(t,n,e,u),t[ba]=(t[ba]&4294901760)+u+2),u++}function eC(t,e){Qr(4,t,e);let n=ze(null);try{e.call(t)}finally{ze(n),Qr(5,t,e)}}function BB(t,e,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=t[s];o?t[Ee]>>14<t[ba]>>16&&(t[Ee]&3)===e&&(t[Ee]+=16384,eC(a,i)):eC(a,i)}var Ia=-1,cs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function UB(t){return t instanceof cs}function HB(t){return(t.flags&8)!==0}function GB(t){return(t.flags&16)!==0}function D1(t){return t!==Ia}function Md(t){return t&32767}function zB(t){return t>>16}function kd(t,e){let n=zB(t),r=e;for(;n>0;)r=r[Ba],n--;return r}var hy=!0;function tC(t){let e=hy;return hy=t,e}var WB=256,x1=WB-1,I1=5,qB=0,Xr={};function KB(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(lc)&&(r=n[lc]),r==null&&(r=n[lc]=qB++);let o=r&x1,i=1<<o;e.data[t+(o>>I1)]|=i}function Od(t,e){let n=S1(t,e);if(n!==-1)return n;let r=e[je];r.firstCreatePass&&(t.injectorIndex=e.length,Kg(r.data,t),Kg(e,null),Kg(r.blueprint,null));let o=Jy(t,e),i=t.injectorIndex;if(D1(o)){let s=Md(o),a=kd(o,e),u=a[je].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|u[s+c]}return e[i+8]=o,i}function Kg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function S1(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=A1(o),r===null)return Ia;if(n++,o=o[Ba],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ia}function my(t,e,n){KB(t,e,n)}function T1(t,e,n){if(n&Oe.Optional||t!==void 0)return t;jy(e,"NodeInjector")}function N1(t,e,n,r){if(n&Oe.Optional&&r===void 0&&(r=null),!(n&(Oe.Self|Oe.Host))){let o=t[Aa],i=ir(void 0);try{return o?o.get(e,r,n&Oe.Optional):kC(e,r,n&Oe.Optional)}finally{ir(i)}}return T1(r,e,n)}function C1(t,e,n,r=Oe.Default,o){if(t!==null){if(e[Ee]&2048&&!(r&Oe.Self)){let s=JB(t,e,n,r,Xr);if(s!==Xr)return s}let i=_1(t,e,n,r,Xr);if(i!==Xr)return i}return N1(e,n,r,o)}function _1(t,e,n,r,o){let i=QB(n);if(typeof i=="function"){if(!h1(e,t,r))return r&Oe.Host?T1(o,n,r):N1(e,n,r,o);try{let s;if(s=i(r),s==null&&!(r&Oe.Optional))jy(n);else return s}finally{v1()}}else if(typeof i=="number"){let s=null,a=S1(t,e),u=Ia,c=r&Oe.Host?e[eo][Tr]:null;for((a===-1||r&Oe.SkipSelf)&&(u=a===-1?Jy(t,e):e[a+8],u===Ia||!rC(r,!1)?a=-1:(s=e[je],a=Md(u),e=kd(u,e)));a!==-1;){let l=e[je];if(nC(i,a,l.data)){let d=ZB(a,e,n,s,r,c);if(d!==Xr)return d}u=e[a+8],u!==Ia&&rC(r,e[je].data[a+8]===c)&&nC(i,a,e)?(s=l,a=Md(u),e=kd(u,e)):a=-1}}return o}function ZB(t,e,n,r,o,i){let s=e[je],a=s.data[t+8],u=r==null?Yd(a)&&hy:r!=s&&(a.type&3)!==0,c=o&Oe.Host&&i===a,l=YB(a,s,n,u,c);return l!==null?Ra(e,s,l,a):Xr}function YB(t,e,n,r,o){let i=t.providerIndexes,s=e.data,a=i&1048575,u=t.directiveStart,c=t.directiveEnd,l=i>>20,d=r?a:a+l,p=o?a+l:c;for(let m=d;m<p;m++){let b=s[m];if(m<u&&n===b||m>=u&&b.type===n)return m}if(o){let m=s[u];if(m&&di(m)&&m.type===n)return u}return null}function Ra(t,e,n,r){let o=t[n],i=e.data;if(UB(o)){let s=o;s.resolving&&Tj(Sj(i[n]));let a=tC(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?ir(s.injectImpl):null,l=h1(t,r,Oe.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&jB(n,i[n],e)}finally{c!==null&&ir(c),tC(a),s.resolving=!1,v1()}}return o}function QB(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(lc)?t[lc]:void 0;return typeof e=="number"?e>=0?e&x1:XB:e}function nC(t,e,n){let r=1<<t;return!!(n[e+(t>>I1)]&r)}function rC(t,e){return!(t&Oe.Self)&&!(t&Oe.Host&&e)}var is=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return C1(this._tNode,this._lView,e,Wd(r),n)}};function XB(){return new is(bn(),mt())}function Ha(t){return wc(()=>{let e=t.prototype.constructor,n=e[Dd]||gy(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[Dd]||gy(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function gy(t){return TC(t)?()=>{let e=gy(yn(t));return e&&e()}:Sa(t)}function JB(t,e,n,r,o){let i=t,s=e;for(;i!==null&&s!==null&&s[Ee]&2048&&!(s[Ee]&512);){let a=_1(i,s,n,r|Oe.Self,Xr);if(a!==Xr)return a;let u=i.parent;if(!u){let c=s[QC];if(c){let l=c.get(n,Xr,r);if(l!==Xr)return l}u=A1(s),s=s[Ba]}i=u}return o}function A1(t){let e=t[je],n=e.type;return n===2?e.declTNode:n===1?t[Tr]:null}function oC(t,e=null,n=null,r){let o=M1(t,e,n,r);return o.resolveInjectorInitializers(),o}function M1(t,e=null,n=null,r,o=new Set){let i=[n||sr,tB(t)];return r=r||(typeof t=="object"?void 0:vn(t)),new hc(i,e||zy(),r||null,o)}var os=class os{static create(e,n){if(Array.isArray(e))return oC({name:""},n,e,"");{let r=e.name??"";return oC({name:r},e.parent,e.providers,r)}}};os.THROW_IF_NOT_FOUND=dc,os.NULL=new Sd,os.\u0275prov=pe({token:os,providedIn:"any",factory:()=>ge(PC)}),os.__NG_ELEMENT_ID__=-1;var Wn=os;var eU=new de("");eU.__NG_ELEMENT_ID__=t=>{let e=bn();if(e===null)throw new fe(204,!1);if(e.type&2)return e.value;if(t&Oe.Optional)return null;throw new fe(204,!1)};var tU="ngOriginalError";function Zg(t){return t[tU]}var no=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Zg(e);for(;n&&Zg(n);)n=Zg(n);return n||null}},k1=new de("",{providedIn:"root",factory:()=>J(no).handleError.bind(void 0)}),ev=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nU,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),yy=class extends ev{constructor(e){super(),this._lView=e}onDestroy(e){return s1(this._lView,e),()=>xB(this._lView,e)}};function nU(){return new yy(mt())}function rU(){return np(bn(),mt())}function np(t,e){return new ps(Nr(t,e))}var ps=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=rU;let t=e;return t})();var Ga=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var vy=class extends Qt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,YC()&&(this.destroyRef=J(ev,{optional:!0})??void 0,this.pendingTasks=J(Ga,{optional:!0})??void 0)}emit(e){let n=ze(null);try{super.next(e)}finally{ze(n)}}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;o=u.next?.bind(u),i=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof xt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ft=vy;function O1(t){return(t.flags&128)===128}var R1=new Map,oU=0;function iU(){return oU++}function sU(t){R1.set(t[Zd],t)}function aU(t){R1.delete(t[Zd])}var iC="__ngContext__";function pi(t,e){li(e)?(t[iC]=e[Zd],sU(e)):t[iC]=e}function F1(t){return $1(t[mc])}function P1(t){return $1(t[Er])}function $1(t){for(;t!==null&&!Oo(t);)t=t[Er];return t}var wy;function L1(t){wy=t}function uU(){if(wy!==void 0)return wy;if(typeof document<"u")return document;throw new fe(210,!1)}var rp=new de("",{providedIn:"root",factory:()=>cU}),cU="ng",tv=new de(""),gi=new de("",{providedIn:"platform",factory:()=>"unknown"});var nv=new de("",{providedIn:"root",factory:()=>uU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lU="h",fU="b";var dU=()=>null;function rv(t,e,n=!1){return dU(t,e,n)}var V1=!1,pU=new de("",{providedIn:"root",factory:()=>V1});var by=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hj})`}};function ov(t){return t instanceof by?t.changingThisBreaksApplicationSecurity:t}var hU=/^>|^->|<!--|-->|--!>|<!-$/g,mU=/(<|>)/g,gU="\u200B$1\u200B";function yU(t){return t.replace(hU,e=>e.replace(mU,gU))}function j1(t){return t instanceof Function?t():t}function vU(t){return(t??J(Wn)).get(gi)==="browser"}var Mo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mo||{}),wU;function iv(t,e){return wU(t,e)}function Ea(t,e,n,r,o){if(r!=null){let i,s=!1;Oo(r)?i=r:li(r)&&(s=!0,r=r[ko]);let a=to(r);t===0&&n!==null?o==null?z1(e,n,a):Rd(e,n,a,o||null,!0):t===1&&n!==null?Rd(e,n,a,o||null,!0):t===2?FU(e,a,s):t===3&&e.destroyNode(a),i!=null&&$U(e,t,i,n,o)}}function bU(t,e){return t.createText(e)}function EU(t,e){return t.createComment(yU(e))}function B1(t,e,n){return t.createElement(e,n)}function DU(t,e){U1(t,e),e[ko]=null,e[Tr]=null}function xU(t,e,n,r,o,i){r[ko]=o,r[Tr]=e,ip(t,r,n,1,o,i)}function U1(t,e){e[_o].changeDetectionScheduler?.notify(8),ip(t,e,e[Ut],2,null,null)}function IU(t){let e=t[mc];if(!e)return Yg(t[je],t);for(;e;){let n=null;if(li(e))n=e[mc];else{let r=e[ur];r&&(n=r)}if(!n){for(;e&&!e[Er]&&e!==t;)li(e)&&Yg(e[je],e),e=e[wn];e===null&&(e=t),li(e)&&Yg(e[je],e),n=e&&e[Er]}e=n}}function SU(t,e,n,r){let o=ur+r,i=n.length;r>0&&(n[o-1][Er]=e),r<i-ur?(e[Er]=n[o],FC(n,ur+r,e)):(n.push(e),e[Er]=null),e[wn]=n;let s=e[Ma];s!==null&&n!==s&&H1(s,e);let a=e[ka];a!==null&&a.insertView(t),dy(e),e[Ee]|=128}function H1(t,e){let n=t[_d],r=e[wn];if(li(r))t[Ee]|=Ad.HasTransplantedViews;else{let o=r[wn][eo];e[eo]!==o&&(t[Ee]|=Ad.HasTransplantedViews)}n===null?t[_d]=[e]:n.push(e)}function sv(t,e){let n=t[_d],r=n.indexOf(e);n.splice(r,1)}function Ey(t,e){if(t.length<=ur)return;let n=ur+e,r=t[n];if(r){let o=r[Ma];o!==null&&o!==t&&sv(o,r),e>0&&(t[n-1][Er]=r[Er]);let i=Id(t,ur+e);DU(r[je],r);let s=i[ka];s!==null&&s.detachView(i[je]),r[wn]=null,r[Er]=null,r[Ee]&=-129}return r}function G1(t,e){if(!(e[Ee]&256)){let n=e[Ut];n.destroyNode&&ip(t,e,n,3,null,null),IU(e)}}function Yg(t,e){if(e[Ee]&256)return;let n=ze(null);try{e[Ee]&=-129,e[Ee]|=256,e[ar]&&Ig(e[ar]),NU(t,e),TU(t,e),e[je].type===1&&e[Ut].destroy();let r=e[Ma];if(r!==null&&Oo(e[wn])){r!==e[wn]&&sv(r,e);let o=e[ka];o!==null&&o.detachView(t)}aU(e)}finally{ze(n)}}function TU(t,e){let n=t.cleanup,r=e[Nd];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[n[i+1]];n[i].call(s)}r!==null&&(e[Nd]=null);let o=e[ci];if(o!==null){e[ci]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function NU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof cs)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],u=i[s+1];Qr(4,a,u);try{u.call(a)}finally{Qr(5,a,u)}}else{Qr(4,o,i);try{i.call(o)}finally{Qr(5,o,i)}}}}}function CU(t,e,n){return _U(t,e.parent,n)}function _U(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[ko];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=t.data[r.directiveStart+o];if(i===Jr.None||i===Jr.Emulated)return null}return Nr(r,n)}}function Rd(t,e,n,r,o){t.insertBefore(e,n,r,o)}function z1(t,e,n){t.appendChild(e,n)}function sC(t,e,n,r,o){r!==null?Rd(t,e,n,r,o):z1(t,e,n)}function AU(t,e,n,r){t.removeChild(e,n,r)}function av(t,e){return t.parentNode(e)}function MU(t,e){return t.nextSibling(e)}function kU(t,e,n){return RU(t,e,n)}function OU(t,e,n){return t.type&40?Nr(t,n):null}var RU=OU,aC;function op(t,e,n,r){let o=CU(t,r,e),i=e[Ut],s=r.parent||e[Tr],a=kU(s,r,e);if(o!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)sC(i,o,n[u],a,!1);else sC(i,o,n,a,!1);aC!==void 0&&aC(i,r,e,n,o)}function bd(t,e){if(e!==null){let n=e.type;if(n&3)return Nr(e,t);if(n&4)return Dy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return bd(t,r);{let o=t[e.index];return Oo(o)?Dy(-1,o):to(o)}}else{if(n&32)return iv(e,t)()||to(t[e.index]);{let r=W1(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=as(t[eo]);return bd(o,r)}else return bd(t,e.next)}}}return null}function W1(t,e){if(e!==null){let r=t[eo][Tr],o=e.projection;return r.projection[o]}return null}function Dy(t,e){let n=ur+t+1;if(n<e.length){let r=e[n],o=r[je].firstChild;if(o!==null)return bd(r,o)}return e[ss]}function FU(t,e,n){let r=av(t,e);r&&AU(t,r,e,n)}function uv(t,e,n,r,o,i,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&pi(to(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)uv(t,e,n.child,r,o,i,!1),Ea(e,t,o,a,i);else if(u&32){let c=iv(n,r),l;for(;l=c();)Ea(e,t,o,l,i);Ea(e,t,o,a,i)}else u&16?PU(t,e,r,n,o,i):Ea(e,t,o,a,i);n=s?n.projectionNext:n.next}}function ip(t,e,n,r,o,i){uv(n,r,t.firstChild,e,o,i,!1)}function PU(t,e,n,r,o,i){let s=n[eo],u=s[Tr].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];Ea(e,t,o,l,i)}else{let c=u,l=s[wn];O1(r)&&(c.flags|=128),uv(t,e,c,l,o,i,!0)}}function $U(t,e,n,r,o){let i=n[ss],s=to(n);i!==s&&Ea(e,t,r,i,o);for(let a=ur;a<n.length;a++){let u=n[a];ip(u[je],u,t,e,r,i)}}function LU(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:Mo.DashCase;o==null?t.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Mo.Important),t.setStyle(n,r,o,i))}}function VU(t,e,n){t.setAttribute(e,"style",n)}function q1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function K1(t,e,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&sy(t,e,r),o!==null&&q1(t,e,o),i!==null&&VU(t,e,i)}var sp={};function Dc(t=1){Z1(On(),mt(),Ec()+t,!1)}function Z1(t,e,n,r){if(!r)if((e[Ee]&3)===3){let i=t.preOrderCheckHooks;i!==null&&vd(e,i,n)}else{let i=t.preOrderHooks;i!==null&&wd(e,i,0,n)}us(n)}function vt(t,e=Oe.Default){let n=mt();if(n===null)return ge(t,e);let r=bn();return C1(r,n,yn(t),e)}function Y1(){let t="invalid";throw new Error(t)}function Q1(t,e,n,r,o,i){let s=ze(null);try{let a=null;o&Ca.SignalBased&&(a=e[r][bg]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Ca.HasDecoratorInputTransform&&(i=t.inputTransforms[r].call(e,i)),t.setInput!==null?t.setInput(e,a,i,n,r):JC(e,a,r,i)}finally{ze(s)}}function jU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)us(~o);else{let i=o,s=n[++r],a=n[++r];RB(s,i);let u=e[i];a(2,u)}}}finally{us(-1)}}function ap(t,e,n,r,o,i,s,a,u,c,l){let d=e.blueprint.slice();return d[ko]=o,d[Ee]=r|4|128|8|64,(c!==null||t&&t[Ee]&2048)&&(d[Ee]|=2048),o1(d),d[wn]=d[Ba]=t,d[xr]=n,d[_o]=s||t&&t[_o],d[Ut]=a||t&&t[Ut],d[Aa]=u||t&&t[Aa]||null,d[Tr]=i,d[Zd]=iU(),d[Td]=l,d[QC]=c,d[eo]=e.type==2?t[eo]:d,d}function xc(t,e,n,r,o){let i=t.data[e];if(i===null)i=BU(t,e,n,r,o),OB()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=AB();i.injectorIndex=s===null?-1:s.injectorIndex}return ds(i,!0),i}function BU(t,e,n,r,o){let i=c1(),s=Yy(),a=s?i:i&&i.parent,u=t.data[e]=WU(t,a,n,e,r,o);return t.firstChild===null&&(t.firstChild=u),i!==null&&(s?i.child==null&&u.parent!==null&&(i.child=u):i.next===null&&(i.next=u,u.prev=i)),u}function X1(t,e,n,r){if(n===0)return-1;let o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function J1(t,e,n,r,o){let i=Ec(),s=r&2;try{us(-1),s&&e.length>Ao&&Z1(t,e,Ao,!1),Qr(s?2:0,o),n(r,o)}finally{us(i),Qr(s?3:1,o)}}function cv(t,e,n){if(Wy(e)){let r=ze(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ze(r)}}}function lv(t,e,n){u1()&&(XU(t,e,n,Nr(n,e)),(n.flags&64)===64&&r_(t,e,n))}function fv(t,e,n=Nr){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(e,t):t[s];t[o++]=a}}}function e_(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=dv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function dv(t,e,n,r,o,i,s,a,u,c,l){let d=Ao+r,p=d+o,m=UU(d,p),b=typeof c=="function"?c():c;return m[je]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:l}}function UU(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:sp);return n}function HU(t,e,n,r){let i=r.get(pU,V1)||n===Jr.ShadowDom,s=t.selectRootElement(e,i);return GU(s),s}function GU(t){zU(t)}var zU=()=>null;function WU(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return NB()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function uC(t,e,n,r,o){for(let i in e){if(!e.hasOwnProperty(i))continue;let s=e[i];if(s===void 0)continue;r??={};let a,u=Ca.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=i;if(o!==null){if(!o.hasOwnProperty(i))continue;c=o[i]}t===0?cC(r,n,c,a,u):cC(r,n,c,a)}return r}function cC(t,e,n,r,o){let i;t.hasOwnProperty(n)?(i=t[n]).push(e,r):i=t[n]=[e,r],o!==void 0&&i.push(o)}function qU(t,e,n){let r=e.directiveStart,o=e.directiveEnd,i=t.data,s=e.attrs,a=[],u=null,c=null;for(let l=r;l<o;l++){let d=i[l],p=n?n.get(d):null,m=p?p.inputs:null,b=p?p.outputs:null;u=uC(0,d.inputs,l,u,m),c=uC(1,d.outputs,l,c,b);let S=u!==null&&s!==null&&!Hy(e)?aH(u,l,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function KU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function t_(t,e,n,r,o,i,s,a){let u=Nr(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(hv(t,n,l,r,o),Yd(e)&&ZU(n,e.index)):e.type&3?(r=KU(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(u,r,o)):e.type&12}function ZU(t,e){let n=mi(e,t);n[Ee]&16||(n[Ee]|=64)}function pv(t,e,n,r){if(u1()){let o=r===null?null:{"":-1},i=eH(t,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&n_(t,e,n,s,o,a),o&&tH(n,r,o)}n.mergedAttrs=pc(n.mergedAttrs,n.attrs)}function n_(t,e,n,r,o,i){for(let c=0;c<r.length;c++)my(Od(n,e),t,r[c].type);rH(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=X1(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=pc(n.mergedAttrs,l.hostAttrs),oH(t,n,e,u,l),nH(u,l,o),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}qU(t,n,i)}function YU(t,e,n,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;QU(s)!=a&&s.push(a),s.push(n,r,i)}}function QU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function XU(t,e,n,r){let o=n.directiveStart,i=n.directiveEnd;Yd(n)&&iH(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||Od(n,e),pi(r,e);let s=n.initialInputs;for(let a=o;a<i;a++){let u=t.data[a],c=Ra(e,t,a,n);if(pi(c,e),s!==null&&sH(e,a-o,c,u,n,s),di(u)){let l=mi(n.index,e);l[xr]=Ra(e,t,a,n)}}}function r_(t,e,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=FB();try{us(i);for(let a=r;a<o;a++){let u=t.data[a],c=e[a];py(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&JU(u,c)}}finally{us(-1),py(s)}}function JU(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function eH(t,e){let n=t.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(Wj(e,s.selectors,!1))if(r||(r=[]),di(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let u=a.length;xy(t,e,u)}else r.unshift(s),xy(t,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function xy(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tH(t,e,n){if(e){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let i=n[e[o+1]];if(i==null)throw new fe(-301,!1);r.push(e[o],i)}}}function nH(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;di(e)&&(n[""]=t)}}function rH(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function oH(t,e,n,r,o){t.data[r]=o;let i=o.factory||(o.factory=Sa(o.type,!0)),s=new cs(i,di(o),vt);t.blueprint[r]=s,n[r]=s,YU(t,e,r,X1(t,n,o.hostVars,sp),o)}function iH(t,e,n){let r=Nr(e,t),o=e_(n),i=t[_o].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=up(t,ap(t,o,null,s,r,e,null,i.createRenderer(r,n),null,null,null));t[e.index]=a}function sH(t,e,n,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],l=s[a++],d=s[a++];Q1(r,n,u,c,l,d)}}function aH(t,e,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(t.hasOwnProperty(i)){r===null&&(r=[]);let s=t[i];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}return r}function o_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function i_(t,e){let n=t.contentQueries;if(n!==null){let r=ze(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=t.data[s];p1(i),a.contentQueries(2,e[s],s)}}}finally{ze(r)}}}function up(t,e){return t[mc]?t[QN][Er]=e:t[mc]=e,t[QN]=e,e}function Iy(t,e,n){p1(0);let r=ze(null);try{e(t,n)}finally{ze(r)}}function uH(t){return t[Nd]??=[]}function cH(t){return t.cleanup??=[]}function s_(t,e){let n=t[Aa],r=n?n.get(no,null):null;r&&r.handleError(e)}function hv(t,e,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],u=n[i++],c=e[s],l=t.data[s];Q1(l,c,r,a,u,o)}}function lH(t,e){let n=mi(e,t),r=n[je];fH(r,n);let o=n[ko];o!==null&&n[Td]===null&&(n[Td]=rv(o,n[Aa])),mv(r,n,n[xr])}function fH(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function mv(t,e,n){Qy(e);try{let r=t.viewQuery;r!==null&&Iy(1,r,n);let o=t.template;o!==null&&J1(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ka]?.finishViewCreation(t),t.staticContentQueries&&i_(t,e),t.staticViewQueries&&Iy(2,t.viewQuery,n);let i=t.components;i!==null&&dH(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ee]&=-5,Xy()}}function dH(t,e){for(let n=0;n<e.length;n++)lH(t,e[n])}function pH(t,e,n,r){let o=ze(null);try{let i=e.tView,a=t[Ee]&4096?4096:16,u=ap(t,i,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];u[Ma]=c;let l=t[ka];return l!==null&&(u[ka]=l.createEmbeddedView(i)),mv(i,u,n),u}finally{ze(o)}}function lC(t,e){return!e||e.firstChild===null||O1(t)}function hH(t,e,n,r=!0){let o=e[je];if(SU(o,e,t,n),r){let s=Dy(n,t),a=e[Ut],u=av(a,t[ss]);u!==null&&xU(o,t[Tr],a,e,u,s)}let i=e[Td];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Fd(t,e,n,r,o=!1){for(;n!==null;){let i=e[n.index];i!==null&&r.push(to(i)),Oo(i)&&mH(i,r);let s=n.type;if(s&8)Fd(t,e,n.child,r);else if(s&32){let a=iv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=W1(e,n);if(Array.isArray(a))r.push(...a);else{let u=as(e[eo]);Fd(u[je],u,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function mH(t,e){for(let n=ur;n<t.length;n++){let r=t[n],o=r[je].firstChild;o!==null&&Fd(r[je],r,o,e)}t[ss]!==t[ko]&&e.push(t[ss])}var a_=[];function gH(t){return t[ar]??yH(t)}function yH(t){let e=a_.pop()??Object.create(wH);return e.lView=t,e}function vH(t){t.lView[ar]!==t&&(t.lView=null,a_.push(t))}var wH=Ge(re({},Eg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Xd(t.lView)},consumerOnSignalRead(){this.lView[ar]=this}});function bH(t){let e=t[ar]??Object.create(EH);return e.lView=t,e}var EH=Ge(re({},Eg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=as(t.lView);for(;e&&!u_(e[je]);)e=as(e);e&&i1(e)},consumerOnSignalRead(){this.lView[ar]=this}});function u_(t){return t.type!==2}var DH=100;function c_(t,e=!0,n=0){let r=t[_o],o=r.rendererFactory,i=!1;i||o.begin?.();try{xH(t,n)}catch(s){throw e&&s_(t,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function xH(t,e){let n=f1();try{JN(!0),Sy(t,e);let r=0;for(;gc(t);){if(r===DH)throw new fe(103,!1);r++,Sy(t,1)}}finally{JN(n)}}function IH(t,e,n,r){let o=e[Ee];if((o&256)===256)return;let i=!1,s=!1;!i&&e[_o].inlineEffectRunner?.flush(),Qy(e);let a=!0,u=null,c=null;i||(u_(t)?(c=gH(e),u=Dg(c)):hN()===null?(a=!1,c=bH(e),u=Dg(c)):e[ar]&&(Ig(e[ar]),e[ar]=null));try{o1(e),MB(t.bindingStartIndex),n!==null&&J1(t,e,n,2,r);let l=(o&3)===3;if(!i)if(l){let m=t.preOrderCheckHooks;m!==null&&vd(e,m,null)}else{let m=t.preOrderHooks;m!==null&&wd(e,m,0,null),qg(e,0)}if(s||SH(e),l_(e,0),t.contentQueries!==null&&i_(t,e),!i)if(l){let m=t.contentCheckHooks;m!==null&&vd(e,m)}else{let m=t.contentHooks;m!==null&&wd(e,m,1),qg(e,1)}jU(t,e);let d=t.components;d!==null&&d_(e,d,0);let p=t.viewQuery;if(p!==null&&Iy(2,p,r),!i)if(l){let m=t.viewCheckHooks;m!==null&&vd(e,m)}else{let m=t.viewHooks;m!==null&&wd(e,m,2),qg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Wg]){for(let m of e[Wg])m();e[Wg]=null}i||(e[Ee]&=-73)}catch(l){throw i||Xd(e),l}finally{c!==null&&(mN(c,u),a&&vH(c)),Xy()}}function l_(t,e){for(let n=F1(t);n!==null;n=P1(n))for(let r=ur;r<n.length;r++){let o=n[r];f_(o,e)}}function SH(t){for(let e=F1(t);e!==null;e=P1(e)){if(!(e[Ee]&Ad.HasTransplantedViews))continue;let n=e[_d];for(let r=0;r<n.length;r++){let o=n[r];i1(o)}}}function TH(t,e,n){let r=mi(e,t);f_(r,n)}function f_(t,e){qy(t)&&Sy(t,e)}function Sy(t,e){let r=t[je],o=t[Ee],i=t[ar],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&xg(i)),s||=!1,i&&(i.dirty=!1),t[Ee]&=-9217,s)IH(r,t,r.template,t[xr]);else if(o&8192){l_(t,1);let a=r.components;a!==null&&d_(t,a,1)}}function d_(t,e,n){for(let r=0;r<e.length;r++)TH(t,e[r],n)}function gv(t,e){let n=f1()?64:1088;for(t[_o].changeDetectionScheduler?.notify(e);t;){t[Ee]|=n;let r=as(t);if(ly(t)&&!r)return t;t=r}return null}var ls=class{get rootNodes(){let e=this._lView,n=e[je];return Fd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xr]}set context(e){this._lView[xr]=e}get destroyed(){return(this._lView[Ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wn];if(Oo(e)){let n=e[Cd],r=n?n.indexOf(this):-1;r>-1&&(Ey(e,r),Id(n,r))}this._attachedToViewContainer=!1}G1(this._lView[je],this._lView)}onDestroy(e){s1(this._lView,e)}markForCheck(){gv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){dy(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,c_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ly(this._lView),n=this._lView[Ma];n!==null&&!e&&sv(n,this._lView),U1(this._lView[je],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=e;let n=ly(this._lView),r=this._lView[Ma];r!==null&&!n&&H1(r,this._lView),dy(this._lView)}},yv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=_H;let t=e;return t})(),NH=yv,CH=class extends NH{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let o=pH(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ls(o)}};function _H(){return AH(bn(),mt())}function AH(t,e){return t.type&4?new CH(e,t,np(t,e)):null}var joe=new RegExp(`^(\\d+)*(${fU}|${lU})*(.*)`);var MH=()=>null;function fC(t,e){return MH(t,e)}var Fa=class{},p_=new de("",{providedIn:"root",factory:()=>!1});var h_=new de(""),Ty=class{},Pd=class{};function kH(t){let e=Error(`No component factory found for ${vn(t)}.`);return e[OH]=t,e}var OH="ngComponent";var Ny=class{resolveComponentFactory(e){throw kH(e)}},kv=class kv{};kv.NULL=new Ny;var Pa=kv,$a=class{},za=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>RH();let t=e;return t})();function RH(){let t=mt(),e=bn(),n=mi(e.index,t);return(li(n)?n:t)[Ut]}var FH=(()=>{let e=class e{};e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Qg={};var dC=new Set;function vv(t){dC.has(t)||(dC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function m_(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Dr.requestAnimationFrame=="function"&&Dr.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function pC(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function hC(...t){}var ot=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ft(!1),this.onMicrotaskEmpty=new Ft(!1),this.onStable=new Ft(!1),this.onError=new Ft(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,LH(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new fe(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,PH,hC,hC);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},PH={};function wv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $H(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{m_(()=>{t.callbackScheduled=!1,Cy(t),t.isCheckStableRunning=!0,wv(t),t.isCheckStableRunning=!1})}),Cy(t))}function LH(t){let e=()=>{$H(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(VH(a))return n.invokeTask(o,i,s,a);try{return mC(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),gC(t)}},onInvoke:(n,r,o,i,s,a,u)=>{try{return mC(t),n.invoke(o,i,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!jH(a)&&e(),gC(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&(i.change=="microTask"?(t._hasPendingMicrotasks=i.microTask,Cy(t),wv(t)):i.change=="macroTask"&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}function Cy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function mC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gC(t){t._nesting--,wv(t)}var $d=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ft,this.onMicrotaskEmpty=new Ft,this.onStable=new Ft,this.onError=new Ft}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function VH(t){return g_(t,"__ignore_ng_zone__")}function jH(t){return g_(t,"__scheduler_tick__")}function g_(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function BH(t="zone.js",e){return t==="noop"?new $d:t==="zone.js"?new ot(e):t}var Da=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Da||{}),UH={destroy(){}};function cp(t,e){!e&&dB(cp);let n=e?.injector??J(Wn);if(!vU(n))return UH;vv("NgAfterNextRender");let r=n.get(bv),o=r.handler??=new Ay,i=e?.phase??Da.MixedReadWrite,s=()=>{o.unregister(u),a()},a=n.get(ev).onDestroy(s),u=Sr(n,()=>new _y(i,()=>{s(),t()}));return o.register(u),{destroy:s}}var _y=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=J(ot),this.errorHandler=J(no,{optional:!0}),J(Fa,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Ay=class{constructor(){this.executingCallbacks=!1,this.buckets={[Da.EarlyRead]:new Set,[Da.Write]:new Set,[Da.MixedReadWrite]:new Set,[Da.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},bv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Ld(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=BN(o,a);else if(i==2){let u=a,c=e[++s];r=BN(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}var Vd=class extends Pa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fi(e);return new La(n,this.ngModule)}};function yC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function HH(t){let e=t.toLowerCase();return e==="svg"?vB:e==="math"?wB:null}var My=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Wd(r);let o=this.injector.get(e,Qg,r);return o!==Qg||n===Qg?o:this.parentInjector.get(e,n,r)}},La=class extends Pd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=yC(e.inputs);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return yC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Yj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,o){let i=ze(null);try{o=o||this.ngModule;let s=o instanceof An?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new My(e,s):e,u=a.get($a,null);if(u===null)throw new fe(407,!1);let c=a.get(FH,null),l=a.get(bv,null),d=a.get(Fa,null),p={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},m=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",S=r?HU(m,r,this.componentDef.encapsulation,a):B1(m,b,HH(b)),T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let A=null;S!==null&&(A=rv(S,a,!0));let $=dv(0,null,null,1,0,null,null,null,null,null,null),M=ap(null,$,null,T,null,null,p,m,a,null,A);Qy(M);let O,U;try{let j=this.componentDef,z,Z=null;j.findHostDirectiveDefs?(z=[],Z=new Map,j.findHostDirectiveDefs(j,z,Z),z.push(j)):z=[j];let Q=GH(M,S),X=zH(Q,S,j,z,M,p,m);U=r1($,Ao),S&&KH(m,j,S,r),n!==void 0&&ZH(U,this.ngContentSelectors,n),O=qH(X,j,z,Z,M,[YH]),mv($,M,null)}finally{Xy()}return new ky(this.componentType,O,np(U,M),M,U)}finally{ze(i)}}},ky=class extends Ty{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ls(o,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView;hv(i[je],i,o,e,n),this.previousInputValues.set(e,n);let s=mi(this._tNode.index,i);gv(s,1)}}get injector(){return new is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GH(t,e){let n=t[je],r=Ao;return t[r]=e,xc(n,r,2,"#host",null)}function zH(t,e,n,r,o,i,s){let a=o[je];WH(r,t,e,s);let u=null;e!==null&&(u=rv(e,o[Aa]));let c=i.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=ap(o,e_(n),null,l,o[t.index],t,i,c,null,null,u);return a.firstCreatePass&&xy(a,t,r.length-1),up(o,d),o[t.index]=d}function WH(t,e,n,r){for(let o of t)e.mergedAttrs=pc(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(Ld(e,e.mergedAttrs,!0),n!==null&&K1(r,n,e))}function qH(t,e,n,r,o,i){let s=bn(),a=o[je],u=Nr(s,o);n_(a,o,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,p=Ra(o,a,d,s);pi(p,o)}r_(a,o,s),u&&pi(u,o);let c=Ra(o,a,s.directiveStart+s.componentOffset,s);if(t[xr]=o[xr]=c,i!==null)for(let l of i)l(c,e);return cv(a,s,o),c}function KH(t,e,n,r){if(r)sy(t,n,["ng-version","18.0.3"]);else{let{attrs:o,classes:i}=Qj(e.selectors[0]);o&&sy(t,n,o),i&&i.length>0&&q1(t,n,i.join(" "))}}function ZH(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let i=n[o];r.push(i!=null?Array.from(i):null)}}function YH(){let t=bn();tp(mt()[je],t)}var Ic=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QH;let t=e;return t})();function QH(){let t=bn();return JH(t,mt())}var XH=Ic,y_=class extends XH{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return np(this._hostTNode,this._hostLView)}get injector(){return new is(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jy(this._hostTNode,this._hostLView);if(D1(e)){let n=kd(e,this._hostLView),r=Md(e),o=n[je].data[r+8];return new is(o,n)}else return new is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=vC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ur}createEmbeddedView(e,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=fC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,lC(this._hostTNode,s)),a}createComponent(e,n,r,o,i){let s=e&&!hB(e),a;if(s)a=n;else{let b=n||{};a=b.index,r=b.injector,o=b.projectableNodes,i=b.environmentInjector||b.ngModuleRef}let u=s?e:new La(fi(e)),c=r||this.parentInjector;if(!i&&u.ngModule==null){let S=(s?c:this.parentInjector).get(An,null);S&&(i=S)}let l=fi(u.componentType??{}),d=fC(this._lContainer,l?.id??null),p=d?.firstChild??null,m=u.create(c,o,p,i);return this.insertImpl(m.hostView,a,lC(this._hostTNode,d)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(EB(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=o[wn],c=new y_(u,u[Tr],u[wn]);c.detach(c.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return hH(s,o,i,r),e.attachToViewContainerRef(),FC(Xg(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=vC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ey(this._lContainer,n);r&&(Id(Xg(this._lContainer),n),G1(r[je],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ey(this._lContainer,n);return r&&Id(Xg(this._lContainer),n)!=null?new ls(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function vC(t){return t[Cd]}function Xg(t){return t[Cd]||(t[Cd]=[])}function JH(t,e){let n,r=e[t.index];return Oo(r)?n=r:(n=o_(r,e,null,t),e[t.index]=n,up(e,n)),t4(n,e,t,r),new y_(n,t,e)}function e4(t,e){let n=t[Ut],r=n.createComment(""),o=Nr(e,t),i=av(n,o);return Rd(n,i,r,MU(n,o),!1),r}var t4=o4,n4=()=>!1;function r4(t,e,n){return n4(t,e,n)}function o4(t,e,n,r){if(t[ss])return;let o;n.type&8?o=to(r):o=e4(e,n),t[ss]=o}function i4(t){return typeof t=="function"&&t[bg]!==void 0}function v_(t){return i4(t)&&typeof t.set=="function"}function s4(t){let e=[],n=new Map;function r(o){let i=n.get(o);if(!i){let s=t(o);n.set(o,i=s.then(l4))}return i}return jd.forEach((o,i)=>{let s=[];o.templateUrl&&s.push(r(o.templateUrl).then(c=>{o.template=c}));let a=typeof o.styles=="string"?[o.styles]:o.styles||[];if(o.styles=a,o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(o.styleUrls?.length){let c=o.styles.length,l=o.styleUrls;o.styleUrls.forEach((d,p)=>{a.push(""),s.push(r(d).then(m=>{a[c+p]=m,l.splice(l.indexOf(d),1),l.length==0&&(o.styleUrls=void 0)}))})}else o.styleUrl&&s.push(r(o.styleUrl).then(c=>{a.push(c),o.styleUrl=void 0}));let u=Promise.all(s).then(()=>f4(i));e.push(u)}),u4(),Promise.all(e).then(()=>{})}var jd=new Map,a4=new Set;function u4(){let t=jd;return jd=new Map,t}function c4(){return jd.size===0}function l4(t){return typeof t=="string"?t:t.text()}function f4(t){a4.delete(t)}function d4(t){return Object.getPrototypeOf(t.prototype).constructor}function hs(t){let e=d4(t.type),n=!0,r=[t];for(;e;){let o;if(di(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new fe(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);let s=t;s.inputs=hd(t.inputs),s.inputTransforms=hd(t.inputTransforms),s.declaredInputs=hd(t.declaredInputs),s.outputs=hd(t.outputs);let a=o.hostBindings;a&&y4(t,a);let u=o.viewQuery,c=o.contentQueries;if(u&&m4(t,u),c&&g4(t,c),p4(t,o),gj(t.outputs,o.outputs),di(o)&&o.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(t),a===hs&&(n=!1)}}e=Object.getPrototypeOf(e)}h4(r)}function p4(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(o))continue;t.inputTransforms??={},t.inputTransforms[o]=e.inputTransforms[o]}}}function h4(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=pc(o.hostAttrs,n=pc(n,o.hostAttrs))}}function hd(t){return t===Ta?{}:t===sr?[]:t}function m4(t,e){let n=t.viewQuery;n?t.viewQuery=(r,o)=>{e(r,o),n(r,o)}:t.viewQuery=e}function g4(t,e){let n=t.contentQueries;n?t.contentQueries=(r,o,i)=>{e(r,o,i),n(r,o,i)}:t.contentQueries=e}function y4(t,e){let n=t.hostBindings;n?t.hostBindings=(r,o)=>{e(r,o),n(r,o)}:t.hostBindings=e}var hi=class{},yc=class{};var Bd=class extends hi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vd(this);let o=HC(e);this._bootstrapComponents=j1(o.bootstrap),this._r3Injector=M1(e,n,[{provide:hi,useValue:this},{provide:Pa,useValue:this.componentFactoryResolver},...r],vn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ud=class extends yc{constructor(e){super(),this.moduleType=e}create(e){return new Bd(this.moduleType,e,[])}};function v4(t,e,n){return new Bd(t,e,n)}var Oy=class extends hi{constructor(e){super(),this.componentFactoryResolver=new Vd(this),this.instance=null;let n=new hc([...e.providers,{provide:hi,useValue:this},{provide:Pa,useValue:this.componentFactoryResolver}],e.parent||zy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function lp(t,e,n=null){return new Oy({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Ev(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function w4(t){return(t.flags&32)===32}function b4(t,e,n,r,o,i,s,a,u){let c=e.consts,l=xc(e,t,4,s||null,a||null);pv(e,n,l,Oa(c,u)),tp(e,l);let d=l.tView=dv(2,l,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function E4(t,e,n,r,o,i,s,a,u,c){let l=n+Ao,d=e.firstCreatePass?b4(l,e,t,r,o,i,s,a,u):e.data[l];ds(d,!1);let p=D4(e,t,d,n);Jd()&&op(e,t,p,d),pi(p,t);let m=o_(p,t,p,d);return t[l]=m,up(t,m),r4(m,d,t),Qd(d)&&lv(e,t,d),u!=null&&fv(t,d,c),d}function fp(t,e,n,r,o,i,s,a){let u=mt(),c=On(),l=Oa(c.consts,i);return E4(u,c,t,e,n,r,o,l,s,a),fp}var D4=x4;function x4(t,e,n,r){return ep(!0),e[Ut].createComment("")}function md(t,e){return t<<17|e<<2}function fs(t){return t>>17&32767}function I4(t){return(t&2)==2}function S4(t,e){return t&131071|e<<17}function Ry(t){return t|2}function Va(t){return(t&131068)>>2}function Jg(t,e){return t&-131069|e<<2}function T4(t){return(t&1)===1}function Fy(t){return t|1}function N4(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=fs(s),u=Va(s);t[r]=n;let c=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||bc(d,l)>0)&&(c=!0)}else l=n;if(o)if(u!==0){let p=fs(t[a+1]);t[r+1]=md(p,a),p!==0&&(t[p+1]=Jg(t[p+1],r)),t[a+1]=S4(t[a+1],r)}else t[r+1]=md(a,0),a!==0&&(t[a+1]=Jg(t[a+1],r)),a=r;else t[r+1]=md(u,0),a===0?a=r:t[u+1]=Jg(t[u+1],r),u=r;c&&(t[r+1]=Ry(t[r+1])),wC(t,l,r,!0),wC(t,l,r,!1),C4(e,l,t,r,i),s=md(a,u),i?e.classBindings=s:e.styleBindings=s}function C4(t,e,n,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof e=="string"&&bc(i,e)>=0&&(n[r+1]=Fy(n[r+1]))}function wC(t,e,n,r){let o=t[n+1],i=e===null,s=r?fs(o):Va(o),a=!1;for(;s!==0&&(a===!1||i);){let u=t[s],c=t[s+1];_4(u,e)&&(a=!0,t[s+1]=r?Fy(c):Ry(c)),s=r?fs(c):Va(c)}a&&(t[n+1]=r?Ry(o):Fy(o))}function _4(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?bc(t,e)>=0:!1}function Sc(t,e,n){let r=mt(),o=d1();if(Ev(r,o,e)){let i=On(),s=w1();t_(i,s,r,t,e,r[Ut],n,!1)}return Sc}function bC(t,e,n,r,o){let i=e.inputs,s=o?"class":"style";hv(t,n,i[s],s,r)}function Dv(t,e){return A4(t,e,null,!0),Dv}function A4(t,e,n,r){let o=mt(),i=On(),s=kB(2);if(i.firstUpdatePass&&k4(i,t,s,r),e!==sp&&Ev(o,s,e)){let a=i.data[Ec()];$4(i,a,o,o[Ut],t,o[s+1]=L4(e,n),r,s)}}function M4(t,e){return e>=t.expandoStartIndex}function k4(t,e,n,r){let o=t.data;if(o[n+1]===null){let i=o[Ec()],s=M4(t,n);V4(i,r)&&e===null&&!s&&(e=!1),e=O4(o,i,e,r),N4(o,i,e,n,s,r)}}function O4(t,e,n,r){let o=PB(t),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(n=ey(null,t,e,n,r),n=vc(n,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==o)if(n=ey(o,t,e,n,r),i===null){let u=R4(t,e,r);u!==void 0&&Array.isArray(u)&&(u=ey(null,t,e,u[1],r),u=vc(u,e.attrs,r),F4(t,e,r,u))}else i=P4(t,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),n}function R4(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Va(r)!==0)return t[fs(r)]}function F4(t,e,n,r){let o=n?e.classBindings:e.styleBindings;t[fs(o)]=r}function P4(t,e,n){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=vc(r,s,n)}return vc(r,e.attrs,n)}function ey(t,e,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=e[a],r=vc(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function vc(t,e,n){let r=n?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),$j(t,s,n?!0:e[++i]))}return t===void 0?null:t}function $4(t,e,n,r,o,i,s,a){if(!(e.type&3))return;let u=t.data,c=u[a+1],l=T4(c)?EC(u,e,n,o,Va(c),s):void 0;if(!Hd(l)){Hd(i)||I4(c)&&(i=EC(u,null,n,o,a,s));let d=bB(Ec(),n);LU(r,s,d,o,i)}}function EC(t,e,n,r,o,i){let s=e===null,a;for(;o>0;){let u=t[o],c=Array.isArray(u),l=c?u[1]:u,d=l===null,p=n[o+1];p===sp&&(p=d?sr:void 0);let m=d?Gg(p,r):l===r?p:void 0;if(c&&!Hd(m)&&(m=Gg(u,r)),Hd(m)&&(a=m,s))return a;let b=t[o+1];o=s?fs(b):Va(b)}if(e!==null){let u=i?e.residualClasses:e.residualStyles;u!=null&&(a=Gg(u,r))}return a}function Hd(t){return t!==void 0}function L4(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=vn(ov(t)))),t}function V4(t,e){return(t.flags&(e?8:16))!==0}function j4(t,e,n,r,o,i){let s=e.consts,a=Oa(s,o),u=xc(e,t,2,r,a);return pv(e,n,u,Oa(s,i)),u.attrs!==null&&Ld(u,u.attrs,!1),u.mergedAttrs!==null&&Ld(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ro(t,e,n,r){let o=mt(),i=On(),s=Ao+t,a=o[Ut],u=i.firstCreatePass?j4(s,i,o,e,n,r):i.data[s],c=B4(i,o,u,a,e,t);o[s]=c;let l=Qd(u);return ds(u,!0),K1(a,c,u),!w4(u)&&Jd()&&op(i,o,c,u),IB()===0&&pi(c,o),SB(),l&&(lv(i,o,u),cv(i,u,o)),r!==null&&fv(o,u),ro}function Cr(){let t=bn();Yy()?l1():(t=t.parent,ds(t,!1));let e=t;CB(e)&&_B(),TB();let n=On();return n.firstCreatePass&&(tp(n,t),Wy(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&HB(e)&&bC(n,e,mt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&GB(e)&&bC(n,e,mt(),e.stylesWithoutHost,!1),Cr}function Wa(t,e,n,r){return ro(t,e,n,r),Cr(),Wa}var B4=(t,e,n,r,o,i)=>(ep(!0),B1(r,o,VB()));function U4(t,e,n,r,o){let i=e.consts,s=Oa(i,r),a=xc(e,t,8,"ng-container",s);s!==null&&Ld(a,s,!0);let u=Oa(i,o);return pv(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function xv(t,e,n){let r=mt(),o=On(),i=t+Ao,s=o.firstCreatePass?U4(i,o,r,e,n):o.data[i];ds(s,!0);let a=H4(o,r,s,t);return r[i]=a,Jd()&&op(o,r,a,s),pi(a,r),Qd(s)&&(lv(o,r,s),cv(o,s,r)),n!=null&&fv(r,s),xv}function Iv(){let t=bn(),e=On();return Yy()?l1():(t=t.parent,ds(t,!1)),e.firstCreatePass&&(tp(e,t),Wy(t)&&e.queries.elementEnd(t)),Iv}var H4=(t,e,n,r)=>(ep(!0),EU(e[Ut],""));function w_(){return mt()}var Gd="en-US";var G4=Gd;function z4(t){typeof t=="string"&&(G4=t.toLowerCase().replace(/_/g,"-"))}var W4=(t,e,n)=>{};function ms(t,e,n,r){let o=mt(),i=On(),s=bn();return b_(i,o,o[Ut],s,t,e,r),ms}function q4(t,e,n,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=e[Nd],u=o[i+2];return a.length>u?a[u]:null}typeof s=="string"&&(i+=2)}return null}function b_(t,e,n,r,o,i,s){let a=Qd(r),c=t.firstCreatePass&&cH(t),l=e[xr],d=uH(e),p=!0;if(r.type&3||s){let S=Nr(r,e),T=s?s(S):S,A=d.length,$=s?O=>s(to(O[r.index])):r.index,M=null;if(!s&&a&&(M=q4(t,e,o,r.index)),M!==null){let O=M.__ngLastListenerFn__||M;O.__ngNextListenerFn__=i,M.__ngLastListenerFn__=i,p=!1}else{i=xC(r,e,l,i),W4(S,o,i);let O=n.listen(T,o,i);d.push(i,O),c&&c.push(o,$,A,A+1)}}else i=xC(r,e,l,i);let m=r.outputs,b;if(p&&m!==null&&(b=m[o])){let S=b.length;if(S)for(let T=0;T<S;T+=2){let A=b[T],$=b[T+1],U=e[A][$].subscribe(i),j=d.length;d.push(i,U),c&&c.push(o,r.index,j,-(j+1))}}}function DC(t,e,n,r){let o=ze(null);try{return Qr(6,e,n),n(r)!==!1}catch(i){return s_(t,i),!1}finally{Qr(7,e,n),ze(o)}}function xC(t,e,n,r){return function o(i){if(i===Function)return r;let s=t.componentOffset>-1?mi(t.index,e):e;gv(s,5);let a=DC(e,n,r,i),u=o.__ngNextListenerFn__;for(;u;)a=DC(e,n,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function dp(t=1){return LB(t)}function gs(t,e=""){let n=mt(),r=On(),o=t+Ao,i=r.firstCreatePass?xc(r,o,1,e,null):r.data[o],s=K4(r,n,i,e,t);n[o]=s,Jd()&&op(r,n,s,i),ds(i,!1)}var K4=(t,e,n,r,o)=>(ep(!0),bU(e[Ut],r));function Sv(t,e,n){v_(e)&&(e=e());let r=mt(),o=d1();if(Ev(r,o,e)){let i=On(),s=w1();t_(i,s,r,t,e,r[Ut],n,!1)}return Sv}function E_(t,e){let n=v_(t);return n&&t.set(e),n}function Tv(t,e){let n=mt(),r=On(),o=bn();return b_(r,n,n[Ut],o,t,e),Tv}function Z4(t,e,n){let r=On();if(r.firstCreatePass){let o=di(t);Py(n,r.data,r.blueprint,o,!0),Py(e,r.data,r.blueprint,o,!1)}}function Py(t,e,n,r,o){if(t=yn(t),Array.isArray(t))for(let i=0;i<t.length;i++)Py(t[i],e,n,r,o);else{let i=On(),s=mt(),a=bn(),u=_a(t)?t:yn(t.provide),c=ZC(t),l=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(_a(t)||!t.multi){let m=new cs(c,o,vt),b=ny(u,e,o?l:l+p,d);b===-1?(my(Od(a,s),i,u),ty(i,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[b]=m,s[b]=m)}else{let m=ny(u,e,l+p,d),b=ny(u,e,l,l+p),S=m>=0&&n[m],T=b>=0&&n[b];if(o&&!T||!o&&!S){my(Od(a,s),i,u);let A=X4(o?Q4:Y4,n.length,o,r,c);!o&&T&&(n[b].providerFactory=A),ty(i,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else{let A=D_(n[o?b:m],c,!o&&r);ty(i,t,m>-1?m:b,A)}!o&&r&&T&&n[b].componentProviders++}}}function ty(t,e,n,r){let o=_a(e),i=iB(e);if(o||i){let u=(i?yn(e.useClass):e).prototype.ngOnDestroy;if(u){let c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){let l=c.indexOf(n);l===-1?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function D_(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ny(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function Y4(t,e,n,r){return $y(this.multi,[])}function Q4(t,e,n,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ra(n,n[je],this.providerFactory.index,r);i=a.slice(0,s),$y(o,i);for(let u=s;u<a.length;u++)i.push(a[u])}else i=[],$y(o,i);return i}function $y(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function X4(t,e,n,r,o){let i=new cs(t,n,vt);return i.multi=[],i.index=e,i.componentProviders=0,D_(i,o,r&&!n),i}function pp(t,e=[]){return n=>{n.providersResolver=(r,o)=>Z4(r,o?o(t):t,e)}}var J4=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=WC(!1,r.type),i=o.length>0?lp([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,i)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=pe({token:e,providedIn:"environment",factory:()=>new e(ge(An))});let t=e;return t})();function x_(t){vv("NgStandalone"),t.getStandaloneInjector=e=>e.get(J4).getOrCreateStandaloneInjector(t)}var gd=null;function eG(t){gd!==null&&(t.defaultEncapsulation!==gd.defaultEncapsulation||t.preserveWhitespaces!==gd.preserveWhitespaces)||(gd=t)}var hp=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Nv=new de(""),Tc=new de(""),mp=(()=>{let e=class e{constructor(r,o,i){this._ngZone=r,this.registry=o,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Cv||(tG(i),i.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>o.updateCb&&o.updateCb(r)?(clearTimeout(o.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,i){let s=-1;o&&o>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},o)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:i})}whenStable(r,o,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,i),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,i){return[]}};e.\u0275fac=function(o){return new(o||e)(ge(ot),ge(gp),ge(Tc))},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})(),gp=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return Cv?.findTestabilityInTree(this,r,o)??null}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function tG(t){Cv=t}var Cv;function ys(t){return!!t&&typeof t.then=="function"}function I_(t){return!!t&&typeof t.subscribe=="function"}var yp=new de(""),S_=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=J(yp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let i of this.appInits){let s=i();if(ys(s))r.push(s);else if(I_(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(i=>{this.reject(i)}),r.length===0&&o(),this.initialized=!0}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_v=new de("");function nG(){gN(()=>{throw new fe(600,!1)})}function rG(t){return t.isBoundToModule}var oG=10;function iG(t,e,n){try{let r=n();return ys(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function T_(t,e){return Array.isArray(e)?e.reduce(T_,t):re(re({},t),e)}var vs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=J(k1),this.afterRenderEffectManager=J(bv),this.zonelessEnabled=J(p_),this.externalTestViews=new Set,this.beforeRender=new Qt,this.afterTick=new Qt,this.componentTypes=[],this.components=[],this.isStable=J(Ga).hasPendingTasks.pipe(Pe(r=>!r)),this._injector=J(An)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let i=r instanceof Pd;if(!this._injector.get(S_).done){let m=!i&&UC(r),b=!1;throw new fe(405,b)}let a;i?a=r:a=this._injector.get(Pa).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=rG(a)?void 0:this._injector.get(hi),c=o||a.selector,l=a.create(Wn.NULL,[],c,u),d=l.location.nativeElement,p=l.injector.get(Nv,null);return p?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ed(this.components,l),p?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new fe(101,!1);let o=ze(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ze(o),this.afterTick.next()}}detectChangesInAttachedViews(r){let o=null;this._injector.destroyed||(o=this._injector.get($a,null,{optional:!0}));let i=0,s=this.afterRenderEffectManager;for(;i<oG;){let a=i===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:u,notifyErrorHandler:c}of this._views)sG(u,c,a,this.zonelessEnabled)}else o?.begin?.(),o?.end?.();if(i++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>gc(u))&&(s.execute(),!this.allViews.some(({_lView:u})=>gc(u))))break}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;Ed(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(_v,[]);[...this._bootstrapListeners,...o].forEach(i=>i(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ed(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new fe(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ed(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sG(t,e,n,r){if(!n&&!gc(t))return;c_(t,e,n&&!r?0:1)}var Ly=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},vp=(()=>{let e=class e{compileModuleSync(r){return new Ud(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let o=this.compileModuleSync(r),i=HC(r),s=j1(i.declarations).reduce((a,u)=>{let c=fi(u);return c&&a.push(new La(c)),a},[]);return new Ly(o,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aG=new de("");function uG(t,e,n){let r=new Ud(n);return Promise.resolve(r)}function IC(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var cG=(()=>{let e=class e{constructor(){this.zone=J(ot),this.changeDetectionScheduler=J(Fa),this.applicationRef=J(vs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lG({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new ot(N_()),[{provide:ot,useFactory:t},{provide:Na,multi:!0,useFactory:()=>{let n=J(cG,{optional:!0});return()=>n.initialize()}},{provide:Na,multi:!0,useFactory:()=>{let n=J(dG);return()=>{n.initialize()}}},{provide:k1,useFactory:fG},e===!0?{provide:h_,useValue:!0}:[]]}function fG(){let t=J(ot),e=J(no);return n=>t.runOutsideAngular(()=>e.handleError(n))}function N_(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var dG=(()=>{let e=class e{constructor(){this.subscription=new xt,this.initialized=!1,this.zone=J(ot),this.pendingTasks=J(Ga)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ot.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pG=(()=>{let e=class e{constructor(){this.appRef=J(vs),this.taskService=J(Ga),this.ngZone=J(ot),this.zonelessEnabled=J(p_),this.disableScheduling=J(h_,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $d||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?pC:m_;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&ot.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let o=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(o),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(o)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hG(){return typeof $localize<"u"&&$localize.locale||Gd}var Av=new de("",{providedIn:"root",factory:()=>J(Av,Oe.Optional|Oe.SkipSelf)||hG()});var C_=new de(""),__=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){let i=BH(o?.ngZone,N_({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return i.run(()=>{let s=o?.ignoreChangesOutsideZone,a=v4(r.moduleType,this.injector,[...lG({ngZoneFactory:()=>i,ignoreChangesOutsideZone:s}),{provide:Fa,useExisting:pG}]),u=a.injector.get(no,null);return i.runOutsideAngular(()=>{let c=i.onError.subscribe({next:l=>{u.handleError(l)}});a.onDestroy(()=>{Ed(this._modules,a),c.unsubscribe()})}),iG(u,i,()=>{let c=a.injector.get(S_);return c.runInitializers(),c.donePromise.then(()=>{let l=a.injector.get(Av,Gd);return z4(l||Gd),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,o=[]){let i=T_({},o);return uG(this.injector,i,r).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(r){let o=r.injector.get(vs);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(i=>o.bootstrap(i));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(o);else throw new fe(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());let r=this._injector.get(C_,null);r&&(r.forEach(o=>o()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(o){return new(o||e)(ge(Wn))},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),fc=null,A_=new de("");function mG(t){if(fc&&!fc.get(A_,!1))throw new fe(400,!1);nG(),fc=t;let e=t.get(__);return vG(t),e}function Mv(t,e,n=[]){let r=`Platform: ${e}`,o=new de(r);return(i=[])=>{let s=M_();if(!s||s.injector.get(A_,!1)){let a=[...n,...i,{provide:o,useValue:!0}];t?t(a):mG(gG(a,r))}return yG(o)}}function gG(t=[],e){return Wn.create({name:e,providers:[{provide:Kd,useValue:"platform"},{provide:C_,useValue:new Set([()=>fc=null])},...t]})}function yG(t){let e=M_();if(!e)throw new fe(401,!1);return e}function M_(){return fc?.get(__)??null}function vG(t){t.get(tv,null)?.forEach(n=>n())}var ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wG;let t=e;return t})();function wG(t){return bG(bn(),mt(),(t&16)===16)}function bG(t,e,n){if(Yd(t)&&!n){let r=mi(t.index,e);return new ls(r,r)}else if(t.type&47){let r=e[eo];return new ls(r,e)}return null}var k_=Mv(null,"core",[]),O_=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(o){return new(o||e)(ge(vs))},e.\u0275mod=kn({type:e}),e.\u0275inj=Mn({});let t=e;return t})();function wp(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function R_(t){let e=fi(t);if(!e)return null;let n=new La(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var L_=null;function oo(){return L_}function V_(t){L_??=t}var bp=class{};var Rn=new de(""),$v=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>J(xG),providedIn:"platform"});let t=e;return t})(),j_=new de(""),xG=(()=>{let e=class e extends $v{constructor(){super(),this._doc=J(Rn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oo().getBaseHref(this._doc)}onPopState(r){let o=oo().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",r,!1),()=>o.removeEventListener("popstate",r)}onHashChange(r){let o=oo().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",r,!1),()=>o.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,o,i){this._history.pushState(r,o,i)}replaceState(r,o,i){this._history.replaceState(r,o,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Lv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function F_(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ro(t){return t&&t[0]!=="?"?"?"+t:t}var bs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>J(Vv),providedIn:"root"});let t=e;return t})(),B_=new de(""),Vv=(()=>{let e=class e extends bs{constructor(r,o){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??J(Rn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Lv(this._baseHref,r)}path(r=!1){let o=this._platformLocation.pathname+Ro(this._platformLocation.search),i=this._platformLocation.hash;return i&&r?`${o}${i}`:o}pushState(r,o,i,s){let a=this.prepareExternalUrl(i+Ro(s));this._platformLocation.pushState(r,o,a)}replaceState(r,o,i,s){let a=this.prepareExternalUrl(i+Ro(s));this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(ge($v),ge(B_,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),U_=(()=>{let e=class e extends bs{constructor(r,o){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],o!=null&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let o=this._platformLocation.hash??"#";return o.length>0?o.substring(1):o}prepareExternalUrl(r){let o=Lv(this._baseHref,r);return o.length>0?"#"+o:o}pushState(r,o,i,s){let a=this.prepareExternalUrl(i+Ro(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,o,a)}replaceState(r,o,i,s){let a=this.prepareExternalUrl(i+Ro(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(ge($v),ge(B_,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})(),qa=(()=>{let e=class e{constructor(r){this._subject=new Ft,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let o=this._locationStrategy.getBaseHref();this._basePath=TG(F_(P_(o))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,o=""){return this.path()==this.normalize(r+Ro(o))}normalize(r){return e.stripTrailingSlash(SG(this._basePath,P_(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,o="",i=null){this._locationStrategy.pushState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ro(o)),i)}replaceState(r,o="",i=null){this._locationStrategy.replaceState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ro(o)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}),()=>{let o=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",o){this._urlChangeListeners.forEach(i=>i(r,o))}subscribe(r,o,i){return this._subject.subscribe({next:r,error:o,complete:i})}};e.normalizeQueryParams=Ro,e.joinWithSlash=Lv,e.stripTrailingSlash=F_,e.\u0275fac=function(o){return new(o||e)(ge(bs))},e.\u0275prov=pe({token:e,factory:()=>IG(),providedIn:"root"});let t=e;return t})();function IG(){return new qa(ge(bs))}function SG(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function P_(t){return t.replace(/\/index.html$/,"")}function TG(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function H_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var G_=(()=>{let e=class e{constructor(r,o){this._viewContainer=r,this._context=new Ov,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){$_("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){$_("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}};e.\u0275fac=function(o){return new(o||e)(vt(Ic),vt(yv))},e.\u0275dir=Ir({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ov=class{constructor(){this.$implicit=null,this.ngIf=null}};function $_(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${vn(e)}'.`)}var z_=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=kn({type:e}),e.\u0275inj=Mn({});let t=e;return t})(),jv="browser",NG="server";function CG(t){return t===jv}function Bv(t){return t===NG}var W_=(()=>{let e=class e{};e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>CG(J(gi))?new Rv(J(Rn),window):new Fv});let t=e;return t})(),Rv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=_G(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function _G(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}var Fv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ep=class{};var Gv=class extends bp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},zv=class t extends Gv{static makeCurrent(){V_(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=kG();return n==null?null:OG(n)}resetBaseElement(){Nc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return H_(document.cookie,e)}},Nc=null;function kG(){return Nc=Nc||document.querySelector("base"),Nc?Nc.getAttribute("href"):null}function OG(t){return new URL(t,document.baseURI).pathname}var Wv=class{addToWindow(e){Dr.getAngularTestability=(r,o=!0)=>{let i=e.findTestabilityInTree(r,o);if(i==null)throw new fe(5103,!1);return i},Dr.getAllAngularTestabilities=()=>e.getAllTestabilities(),Dr.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let o=Dr.getAllAngularTestabilities(),i=o.length,s=function(){i--,i==0&&r()};o.forEach(a=>{a.whenStable(s)})};Dr.frameworkStabilizers||(Dr.frameworkStabilizers=[]),Dr.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let o=e.getTestability(n);return o??(r?oo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},RG=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})(),qv=new de(""),Y_=(()=>{let e=class e{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,i){return this._findPluginFor(o).addEventListener(r,o,i)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(s=>s.supports(r)),!o)throw new fe(5101,!1);return this._eventNameToPlugin.set(r,o),o}};e.\u0275fac=function(o){return new(o||e)(ge(qv),ge(ot))},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})(),Dp=class{constructor(e){this._doc=e}},Uv="ng-app-id",Q_=(()=>{let e=class e{constructor(r,o,i,s={}){this.doc=r,this.appId=o,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Bv(s),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(i=>i.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Uv}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(i=>{i.textContent!=null&&o.set(i.textContent,i)}),o}return null}changeUsageCount(r,o){let i=this.styleRef;if(i.has(r)){let s=i.get(r);return s.usage+=o,s.usage}return i.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let i=this.styleNodesInDOM,s=i?.get(o);if(s?.parentNode===r)return i.delete(o),s.removeAttribute(Uv),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(Uv,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let i=this.getStyleElement(r,o),s=this.styleRef,a=s.get(o)?.elements;a?a.push(i):s.set(o,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(o){return new(o||e)(ge(Rn),ge(rp),ge(nv,8),ge(gi))},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})(),Hv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zv=/%COMP%/g,X_="%COMP%",FG=`_nghost-${X_}`,PG=`_ngcontent-${X_}`,$G=!0,LG=new de("",{providedIn:"root",factory:()=>$G});function VG(t){return PG.replace(Zv,t)}function jG(t){return FG.replace(Zv,t)}function J_(t,e){return e.map(n=>n.replace(Zv,t))}var q_=(()=>{let e=class e{constructor(r,o,i,s,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Bv(u),this.defaultRenderer=new Cc(r,a,c,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Jr.ShadowDom&&(o=Ge(re({},o),{encapsulation:Jr.Emulated}));let i=this.getOrCreateRenderer(r,o);return i instanceof xp?i.applyToHost(r):i instanceof _c&&i.applyStyles(),i}getOrCreateRenderer(r,o){let i=this.rendererByCompId,s=i.get(o.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(o.encapsulation){case Jr.Emulated:s=new xp(c,l,o,this.appId,d,a,u,p);break;case Jr.ShadowDom:return new Kv(c,l,r,o,a,u,this.nonce,p);default:s=new _c(c,l,o,d,a,u,p);break}i.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(o){return new(o||e)(ge(Y_),ge(Q_),ge(rp),ge(LG),ge(Rn),ge(gi),ge(ot),ge(nv))},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})(),Cc=class{constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Hv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(K_(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(K_(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new fe(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;let i=Hv[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let o=Hv[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(Mo.DashCase|Mo.Important)?e.style.setProperty(n,r,o&Mo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Mo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=oo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function K_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Kv=class extends Cc{constructor(e,n,r,o,i,s,a,u){super(e,i,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=J_(o.id,o.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_c=class extends Cc{constructor(e,n,r,o,i,s,a,u){super(e,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=u?J_(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xp=class extends _c{constructor(e,n,r,o,i,s,a,u){let c=o+"-"+r.id;super(e,n,r,i,s,a,u,c),this.contentAttr=VG(c),this.hostAttr=jG(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},BG=(()=>{let e=class e extends Dp{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,i){return r.addEventListener(o,i,!1),()=>this.removeEventListener(r,o,i)}removeEventListener(r,o,i){return r.removeEventListener(o,i)}};e.\u0275fac=function(o){return new(o||e)(ge(Rn))},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})(),Z_=["alt","control","meta","shift"],UG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},HG={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},GG=(()=>{let e=class e extends Dp{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,o,i){let s=e.parseEventName(o),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oo().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(o.pop()),a="",u=o.indexOf("code");if(u>-1&&(o.splice(u,1),a="code."),Z_.forEach(l=>{let d=o.indexOf(l);d>-1&&(o.splice(d,1),a+=l+".")}),a+=s,o.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=a,c}static matchEventFullKeyCode(r,o){let i=UG[r.key]||r.key,s="";return o.indexOf("code.")>-1&&(i=r.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Z_.forEach(a=>{if(a!==i){let u=HG[a];u(r)&&(s+=a+".")}}),s+=i,s===o)}static eventCallback(r,o,i){return s=>{e.matchEventFullKeyCode(s,r)&&i.runGuarded(()=>o(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(o){return new(o||e)(ge(Rn))},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})();function zG(){zv.makeCurrent()}function WG(){return new no}function qG(){return L1(document),document}var KG=[{provide:gi,useValue:jv},{provide:tv,useValue:zG,multi:!0},{provide:Rn,useFactory:qG,deps:[]}],eA=Mv(k_,"browser",KG),ZG=new de(""),YG=[{provide:Tc,useClass:Wv,deps:[]},{provide:Nv,useClass:mp,deps:[ot,gp,Tc]},{provide:mp,useClass:mp,deps:[ot,gp,Tc]}],QG=[{provide:Kd,useValue:"root"},{provide:no,useFactory:WG,deps:[]},{provide:qv,useClass:BG,multi:!0,deps:[Rn,ot,gi]},{provide:qv,useClass:GG,multi:!0,deps:[Rn]},q_,Q_,Y_,{provide:$a,useExisting:q_},{provide:Ep,useClass:RG,deps:[]},[]],tA=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:rp,useValue:r.appId}]}}};e.\u0275fac=function(o){return new(o||e)(ge(ZG,12))},e.\u0275mod=kn({type:e}),e.\u0275inj=Mn({providers:[...QG,...YG],imports:[z_,O_]});let t=e;return t})();var nA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(o){return new(o||e)(ge(Rn))},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fA=(()=>{let e=class e{constructor(r,o){this._renderer=r,this._elementRef=o,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(r,o){this._renderer.setProperty(this._elementRef.nativeElement,r,o)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(o){return new(o||e)(vt(za),vt(ps))},e.\u0275dir=Ir({type:e});let t=e;return t})(),dA=(()=>{let e=class e extends fA{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ha(e)))(i||e)}})(),e.\u0275dir=Ir({type:e,features:[hs]});let t=e;return t})(),ew=new de("");var JG={provide:ew,useExisting:ja(()=>Cp),multi:!0};function ez(){let t=oo()?oo().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var tz=new de(""),Cp=(()=>{let e=class e extends fA{constructor(r,o,i){super(r,o),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ez())}writeValue(r){let o=r??"";this.setProperty("value",o)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(o){return new(o||e)(vt(za),vt(ps),vt(tz,8))},e.\u0275dir=Ir({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,i){o&1&&ms("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[pp([JG]),hs]});let t=e;return t})();var nz=new de(""),rz=new de("");function pA(t){return t!=null}function hA(t){return ys(t)?ht(t):t}function mA(t){let e={};return t.forEach(n=>{e=n!=null?re(re({},e),n):e}),Object.keys(e).length===0?null:e}function gA(t,e){return e.map(n=>n(t))}function oz(t){return!t.validate}function yA(t){return t.map(e=>oz(e)?e:n=>e.validate(n))}function iz(t){if(!t)return null;let e=t.filter(pA);return e.length==0?null:function(n){return mA(gA(n,e))}}function vA(t){return t!=null?iz(yA(t)):null}function sz(t){if(!t)return null;let e=t.filter(pA);return e.length==0?null:function(n){let r=gA(n,e).map(hA);return Lg(r).pipe(Pe(mA))}}function wA(t){return t!=null?sz(yA(t)):null}function oA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function az(t){return t._rawValidators}function uz(t){return t._rawAsyncValidators}function Yv(t){return t?Array.isArray(t)?t:[t]:[]}function Sp(t,e){return Array.isArray(t)?t.includes(e):t===e}function iA(t,e){let n=Yv(e);return Yv(t).forEach(o=>{Sp(n,o)||n.push(o)}),n}function sA(t,e){return Yv(e).filter(n=>!Sp(t,n))}var Tp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Qv=class extends Tp{get formDirective(){return null}get path(){return null}},Rc=class extends Tp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Xv=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},cz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Xie=Ge(re({},cz),{"[class.ng-submitted]":"isSubmitted"}),bA=(()=>{let e=class e extends Xv{constructor(r){super(r)}};e.\u0275fac=function(o){return new(o||e)(vt(Rc,2))},e.\u0275dir=Ir({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,i){o&2&&Dv("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[hs]});let t=e;return t})();var Ac="VALID",Ip="INVALID",Ka="PENDING",Mc="DISABLED",Ya=class{},Np=class extends Ya{constructor(e,n){super(),this.value=e,this.source=n}},kc=class extends Ya{constructor(e,n){super(),this.pristine=e,this.source=n}},Oc=class extends Ya{constructor(e,n){super(),this.touched=e,this.source=n}},Za=class extends Ya{constructor(e,n){super(),this.status=e,this.source=n}};function lz(t){return(_p(t)?t.validators:t)||null}function fz(t){return Array.isArray(t)?vA(t):t||null}function dz(t,e){return(_p(e)?e.asyncValidators:t)||null}function pz(t){return Array.isArray(t)?wA(t):t||null}function _p(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Jv=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Qt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ac}get invalid(){return this.status===Ip}get pending(){return this.status==Ka}get disabled(){return this.status===Mc}get enabled(){return this.status!==Mc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sA(e,this._rawAsyncValidators))}hasValidator(e){return Sp(this._rawValidators,e)}hasAsyncValidator(e){return Sp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ge(re({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Oc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Oc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ge(re({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new kc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new kc(!0,r))}markAsPending(e={}){this.status=Ka;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Za(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ge(re({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Mc,this.errors=null,this._forEachChild(o=>{o.disable(Ge(re({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Np(this.value,r)),this._events.next(new Za(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ge(re({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ac,this._forEachChild(r=>{r.enable(Ge(re({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ge(re({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ac||this.status===Ka)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Np(this.value,n)),this._events.next(new Za(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ge(re({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mc:Ac}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ka,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=hA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Za(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ft,this.statusChanges=new Ft}_calculateStatus(){return this._allControlsDisabled()?Mc:this.errors?Ip:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ka)?Ka:this._anyControlsHaveStatus(Ip)?Ip:Ac}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),o&&this._events.next(new kc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Oc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_p(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=fz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=pz(this._rawAsyncValidators)}};var EA=new de("CallSetDisabledState",{providedIn:"root",factory:()=>tw}),tw="always";function hz(t,e){return[...e.path,t]}function mz(t,e,n=tw){yz(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),vz(t,e),bz(t,e),wz(t,e),gz(t,e)}function aA(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function gz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function yz(t,e){let n=az(t);e.validator!==null?t.setValidators(oA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=uz(t);e.asyncValidator!==null?t.setAsyncValidators(oA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let o=()=>t.updateValueAndValidity();aA(e._rawValidators,o),aA(e._rawAsyncValidators,o)}function vz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&DA(t,e)})}function wz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&DA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function DA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function bz(t,e){let n=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Ez(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Dz(t){return Object.getPrototypeOf(t.constructor)===dA}function xz(t,e){if(!e)return null;Array.isArray(e);let n,r,o;return e.forEach(i=>{i.constructor===Cp?n=i:Dz(i)?r=i:o=i}),o||r||n||null}function uA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Iz=class extends Jv{constructor(e=null,n,r){super(lz(n),dz(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_p(n)&&(n.nonNullable||n.initialValueIsDefault)&&(cA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){cA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Sz={provide:Rc,useExisting:ja(()=>nw)},lA=Promise.resolve(),nw=(()=>{let e=class e extends Rc{constructor(r,o,i,s,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new Iz,this._registered=!1,this.name="",this.update=new Ft,this._parent=r,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=xz(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let o=r.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Ez(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){lA.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let o=r.isDisabled.currentValue,i=o!==0&&wp(o);lA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?hz(r,this._parent):[r]}};e.\u0275fac=function(o){return new(o||e)(vt(Qv,9),vt(nz,10),vt(rz,10),vt(ew,10),vt(ws,8),vt(EA,8))},e.\u0275dir=Ir({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pp([Sz]),hs,Ua]});let t=e;return t})();var Tz={provide:ew,useExisting:ja(()=>rw),multi:!0},rw=(()=>{let e=class e extends dA{writeValue(r){this.setProperty("value",parseFloat(r))}registerOnChange(r){this.onChange=o=>{r(o==""?null:parseFloat(o))}}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ha(e)))(i||e)}})(),e.\u0275dir=Ir({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(o,i){o&1&&ms("change",function(a){return i.onChange(a.target.value)})("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[pp([Tz]),hs]});let t=e;return t})();var Nz=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=kn({type:e}),e.\u0275inj=Mn({});let t=e;return t})();var xA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:EA,useValue:r.callSetDisabledState??tw}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=kn({type:e}),e.\u0275inj=Mn({imports:[Nz]});let t=e;return t})();var Ce="primary",Zc=Symbol("RouteTitle"),uw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function nu(t){return new uw(t)}function _z(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function Az(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!io(t[n],e[n]))return!1;return!0}function io(t,e){let n=t?cw(t):void 0,r=e?cw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!RA(t[o],e[o]))return!1;return!0}function cw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function RA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}else return t===e}function FA(t){return t.length>0?t[t.length-1]:null}function bi(t){return $g(t)?t:ys(t)?ht(Promise.resolve(t)):we(t)}var Mz={exact:$A,subset:LA},PA={exact:kz,subset:Oz,ignored:()=>!0};function IA(t,e,n){return Mz[n.paths](t.root,e.root,n.matrixParams)&&PA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function kz(t,e){return io(t,e)}function $A(t,e,n){if(!Ds(t.segments,e.segments)||!kp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!$A(t.children[r],e.children[r],n))return!1;return!0}function Oz(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>RA(t[n],e[n]))}function LA(t,e,n){return VA(t,e,e.segments,n)}function VA(t,e,n,r){if(t.segments.length>n.length){let o=t.segments.slice(0,n.length);return!(!Ds(o,n)||e.hasChildren()||!kp(o,n,r))}else if(t.segments.length===n.length){if(!Ds(t.segments,n)||!kp(t.segments,n,r))return!1;for(let o in e.children)if(!t.children[o]||!LA(t.children[o],e.children[o],r))return!1;return!0}else{let o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!Ds(t.segments,o)||!kp(t.segments,o,r)||!t.children[Ce]?!1:VA(t.children[Ce],e,i,r)}}function kp(t,e,n){return e.every((r,o)=>PA[n](t[o].parameters,r.parameters))}var vi=class{constructor(e=new qe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=nu(this.queryParams),this._queryParamMap}toString(){return Pz.serialize(this)}},qe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Op(this)}},Es=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=nu(this.parameters),this._parameterMap}toString(){return BA(this)}};function Rz(t,e){return Ds(t,e)&&t.every((n,r)=>io(n.parameters,e[r].parameters))}function Ds(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Fz(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===Ce&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==Ce&&(n=n.concat(e(o,r)))}),n}var Yc=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>new ru,providedIn:"root"});let t=e;return t})(),ru=class{parse(e){let n=new fw(e);return new vi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Fc(e.root,!0)}`,r=Vz(e.queryParams),o=typeof e.fragment=="string"?`#${$z(e.fragment)}`:"";return`${n}${r}${o}`}},Pz=new ru;function Op(t){return t.segments.map(e=>BA(e)).join("/")}function Fc(t,e){if(!t.hasChildren())return Op(t);if(e){let n=t.children[Ce]?Fc(t.children[Ce],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==Ce&&r.push(`${o}:${Fc(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Fz(t,(r,o)=>o===Ce?[Fc(t.children[Ce],!1)]:[`${o}:${Fc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ce]!=null?`${Op(t)}/${n[0]}`:`${Op(t)}/(${n.join("//")})`}}function jA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ap(t){return jA(t).replace(/%3B/gi,";")}function $z(t){return encodeURI(t)}function lw(t){return jA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rp(t){return decodeURIComponent(t)}function SA(t){return Rp(t.replace(/\+/g,"%20"))}function BA(t){return`${lw(t.path)}${Lz(t.parameters)}`}function Lz(t){return Object.entries(t).map(([e,n])=>`;${lw(e)}=${lw(n)}`).join("")}function Vz(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${Ap(n)}=${Ap(o)}`).join("&"):`${Ap(n)}=${Ap(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var jz=/^[^\/()?;#]+/;function ow(t){let e=t.match(jz);return e?e[0]:""}var Bz=/^[^\/()?;=#]+/;function Uz(t){let e=t.match(Bz);return e?e[0]:""}var Hz=/^[^=?&#]+/;function Gz(t){let e=t.match(Hz);return e?e[0]:""}var zz=/^[^&#]+/;function Wz(t){let e=t.match(zz);return e?e[0]:""}var fw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ce]=new qe(e,n)),r}parseSegment(){let e=ow(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(e),new Es(Rp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Uz(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=ow(this.remaining);o&&(r=o,this.capture(r))}e[Rp(n)]=Rp(r)}parseQueryParam(e){let n=Gz(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Wz(this.remaining);s&&(r=s,this.capture(r))}let o=SA(n),i=SA(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ow(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new fe(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ce);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[Ce]:new qe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new fe(4011,!1)}};function UA(t){return t.segments.length>0?new qe([],{[Ce]:t}):t}function HA(t){let e={};for(let[r,o]of Object.entries(t.children)){let i=HA(o);if(r===Ce&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new qe(t.segments,e);return qz(n)}function qz(t){if(t.numberOfChildren===1&&t.children[Ce]){let e=t.children[Ce];return new qe(t.segments.concat(e.segments),e.children)}return t}function Bc(t){return t instanceof vi}function Kz(t,e,n=null,r=null){let o=GA(t);return zA(o,e,n,r)}function GA(t){let e;function n(i){let s={};for(let u of i.children){let c=n(u);s[u.outlet]=c}let a=new qe(i.url,s);return i===t&&(e=a),a}let r=n(t.root),o=UA(r);return e??o}function zA(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return iw(o,o,o,n,r);let i=Zz(e);if(i.toRoot())return iw(o,o,new qe([],{}),n,r);let s=Yz(i,o,t),a=s.processChildren?Lc(s.segmentGroup,s.index,i.commands):qA(s.segmentGroup,s.index,i.commands);return iw(o,s.segmentGroup,a,n,r)}function Fp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Uc(t){return typeof t=="object"&&t!=null&&t.outlets}function iw(t,e,n,r,o){let i={};r&&Object.entries(r).forEach(([u,c])=>{i[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=n:s=WA(t,e,n);let a=UA(HA(s));return new vi(a,i,o)}function WA(t,e,n){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===e?r[o]=n:r[o]=WA(i,e,n)}),new qe(t.segments,r)}var Pp=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fp(r[0]))throw new fe(4003,!1);let o=r.find(Uc);if(o&&o!==FA(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Zz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Pp(!0,0,t);let e=0,n=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Pp(n,e,r)}var Ja=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Yz(t,e,n){if(t.isAbsolute)return new Ja(e,!0,0);if(!n)return new Ja(e,!1,NaN);if(n.parent===null)return new Ja(n,!0,0);let r=Fp(t.commands[0])?0:1,o=n.segments.length-1+r;return Qz(n,o,t.numberOfDoubleDots)}function Qz(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new fe(4005,!1);o=r.segments.length}return new Ja(r,!1,o-i)}function Xz(t){return Uc(t[0])?t[0].outlets:{[Ce]:t}}function qA(t,e,n){if(t??=new qe([],{}),t.segments.length===0&&t.hasChildren())return Lc(t,e,n);let r=Jz(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new qe(t.segments.slice(0,r.pathIndex),{});return i.children[Ce]=new qe(t.segments.slice(r.pathIndex),t.children),Lc(i,0,o)}else return r.match&&o.length===0?new qe(t.segments,{}):r.match&&!t.hasChildren()?dw(t,e,n):r.match?Lc(t,0,o):dw(t,e,n)}function Lc(t,e,n){if(n.length===0)return new qe(t.segments,{});{let r=Xz(n),o={};if(Object.keys(r).some(i=>i!==Ce)&&t.children[Ce]&&t.numberOfChildren===1&&t.children[Ce].segments.length===0){let i=Lc(t.children[Ce],e,n);return new qe(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=qA(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new qe(t.segments,o)}}function Jz(t,e,n){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;let s=t.segments[o],a=n[r];if(Uc(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!NA(u,c,s))return i;r+=2}else{if(!NA(u,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function dw(t,e,n){let r=t.segments.slice(0,e),o=0;for(;o<n.length;){let i=n[o];if(Uc(i)){let u=e8(i.outlets);return new qe(r,u)}if(o===0&&Fp(n[0])){let u=t.segments[e];r.push(new Es(u.path,TA(n[0]))),o++;continue}let s=Uc(i)?i.outlets[Ce]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&Fp(a)?(r.push(new Es(s,TA(a))),o+=2):(r.push(new Es(s,{})),o++)}return new qe(r,{})}function e8(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=dw(new qe([],{}),0,r))}),e}function TA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function NA(t,e,n){return t==n.path&&io(e,n.parameters)}var Vc="imperative",Ht=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ht||{}),cr=class{constructor(e,n){this.id=e,this.url=n}},ou=class extends cr{constructor(e,n,r="imperative",o=null){super(e,n),this.type=Ht.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Po=class extends cr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ht.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Kn||{}),$p=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}($p||{}),Fo=class extends cr{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=Ht.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wi=class extends cr{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=Ht.NavigationSkipped}},Hc=class extends cr{constructor(e,n,r,o){super(e,n),this.error=r,this.target=o,this.type=Ht.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lp=class extends cr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Ht.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pw=class extends cr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Ht.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hw=class extends cr{constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=Ht.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mw=class extends cr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Ht.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gw=class extends cr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=Ht.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yw=class{constructor(e){this.route=e,this.type=Ht.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vw=class{constructor(e){this.route=e,this.type=Ht.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ww=class{constructor(e){this.snapshot=e,this.type=Ht.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bw=class{constructor(e){this.snapshot=e,this.type=Ht.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ew=class{constructor(e){this.snapshot=e,this.type=Ht.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dw=class{constructor(e){this.snapshot=e,this.type=Ht.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vp=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Ht.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Gc=class{},iu=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var xw=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Qc(this.injector),this.attachRef=null}},Qc=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,o){let i=this.getOrCreateContext(r);i.outlet=o,this.contexts.set(r,i)}onChildOutletDestroyed(r){let o=this.getContext(r);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let o=this.getContext(r);return o||(o=new xw(this.parentInjector),this.contexts.set(r,o)),o}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(o){return new(o||e)(ge(An))},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Iw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Iw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Sw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Sw(e,this._root).map(n=>n.value)}};function Iw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Iw(t,n);if(r)return r}return null}function Sw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Sw(t,n);if(r.length)return r.unshift(e),r}return[]}var qn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Xa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Bp=class extends jp{constructor(e,n){super(e),this.snapshot=n,Rw(this,e)}toString(){return this.snapshot.toString()}};function KA(t){let e=t8(t),n=new Xt([new Es("",{})]),r=new Xt({}),o=new Xt({}),i=new Xt({}),s=new Xt(""),a=new su(n,r,i,s,o,Ce,t,e.root);return a.snapshot=e.root,new Bp(new qn(a,[]),e)}function t8(t){let e={},n={},r={},o="",i=new eu([],e,r,o,n,Ce,t,null,{});return new Hp("",new qn(i,[]))}var su=class{constructor(e,n,r,o,i,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Pe(c=>c[Zc]))??we(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Pe(e=>nu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Pe(e=>nu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Up(t,e,n="emptyOnly"){let r,{routeConfig:o}=t;return e!==null&&(n==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:re(re({},e.params),t.params),data:re(re({},e.data),t.data),resolve:re(re(re(re({},t.data),e.data),o?.data),t._resolvedData)}:r={params:re({},t.params),data:re({},t.data),resolve:re(re({},t.data),t._resolvedData??{})},o&&YA(o)&&(r.resolve[Zc]=o.title),r}var eu=class{get title(){return this.data?.[Zc]}constructor(e,n,r,o,i,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=nu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=nu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Hp=class extends jp{constructor(e,n){super(n),this.url=e,Rw(this,n)}toString(){return ZA(this._root)}};function Rw(t,e){e.value._routerState=t,e.children.forEach(n=>Rw(t,n))}function ZA(t){let e=t.children.length>0?` { ${t.children.map(ZA).join(", ")} } `:"";return`${t.value}${e}`}function sw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,io(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),io(e.params,n.params)||t.paramsSubject.next(n.params),Az(e.url,n.url)||t.urlSubject.next(n.url),io(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Tw(t,e){let n=io(t.params,e.params)&&Rz(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Tw(t.parent,e.parent))}function YA(t){return typeof t.title=="string"||t.title===null}var n8=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ce,this.activateEvents=new Ft,this.deactivateEvents=new Ft,this.attachEvents=new Ft,this.detachEvents=new Ft,this.parentContexts=J(Qc),this.location=J(Ic),this.changeDetector=J(ws),this.inputBinder=J(Kp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:o,previousValue:i}=r.name;if(o)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,o){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=r;let i=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Nw(r,u,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:c,environmentInjector:o}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=Ir({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ua]});let t=e;return t})(),Nw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===su?this.route:e===Qc?this.childContexts:this.parent.get(e,n)}},Kp=new de(""),CA=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:o}=r,i=uc([o.queryParams,o.params,o.data]).pipe(or(([s,a,u],c)=>(u=re(re(re({},s),a),u),c===0?we(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==o||o.component===null){this.unsubscribeFromRouteData(r);return}let a=R_(o.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,i)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})();function r8(t,e,n){let r=zc(t,e._root,n?n._root:void 0);return new Bp(r,e)}function zc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let o=o8(t,e,n);return new qn(r,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>zc(t,a)),s}}let r=i8(e.value),o=e.children.map(i=>zc(t,i));return new qn(r,o)}}function o8(t,e,n){return e.children.map(r=>{for(let o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return zc(t,r,o);return zc(t,r)})}function i8(t){return new su(new Xt(t.url),new Xt(t.params),new Xt(t.queryParams),new Xt(t.fragment),new Xt(t.data),t.outlet,t.component,t)}var Wc=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},QA="ngNavigationCancelingError";function Gp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Bc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=XA(!1,Kn.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function XA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[QA]=!0,n.cancellationCode=e,n}function s8(t){return JA(t)&&Bc(t.url)}function JA(t){return!!t&&t[QA]}var a8=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=qd({type:e,selectors:[["ng-component"]],standalone:!0,features:[x_],decls:1,vars:0,template:function(o,i){o&1&&Wa(0,"router-outlet")},dependencies:[n8],encapsulation:2});let t=e;return t})();function u8(t,e){return t.providers&&!t._injector&&(t._injector=lp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Fw(t){let e=t.children&&t.children.map(Fw),n=e?Ge(re({},t),{children:e}):re({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ce&&(n.component=a8),n}function _r(t){return t.outlet||Ce}function c8(t,e){let n=t.filter(r=>_r(r)===e);return n.push(...t.filter(r=>_r(r)!==e)),n}function Xc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var l8=(t,e,n,r)=>Pe(o=>(new Cw(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)),Cw=class{constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),sw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let o=Xa(n);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Xa(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Xa(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let o=Xa(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Dw(i.value.snapshot))}),e.children.length&&this.forwardEvent(new bw(e.value.snapshot))}activateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(sw(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),sw(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Xc(o.snapshot);s.attachRef=null,s.route=o,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},zp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},tu=class{constructor(e,n){this.component=e,this.route=n}};function f8(t,e,n){let r=t._root,o=e?e._root:null;return Pc(r,o,n,[r.value])}function d8(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function uu(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!NC(t)?t:e.get(t):r}function Pc(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Xa(e);return t.children.forEach(s=>{p8(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>jc(a,n.getContext(s),o)),o}function p8(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let u=h8(s,i,i.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new zp(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?Pc(t,e,a?a.children:null,r,o):Pc(t,e,n,r,o),u&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new tu(a.outlet.component,s))}else s&&jc(e,a,o),o.canActivateChecks.push(new zp(r)),i.component?Pc(t,null,a?a.children:null,r,o):Pc(t,null,n,r,o);return o}function h8(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ds(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ds(t.url,e.url)||!io(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tw(t,e)||!io(t.queryParams,e.queryParams);case"paramsChange":default:return!Tw(t,e)}}function jc(t,e,n){let r=Xa(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?e?jc(s,e.children.getContext(i),n):jc(s,null,n):jc(s,e,n)}),o.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new tu(e.outlet.component,o)):n.canDeactivateChecks.push(new tu(null,o)):n.canDeactivateChecks.push(new tu(null,o))}function Jc(t){return typeof t=="function"}function m8(t){return typeof t=="boolean"}function g8(t){return t&&Jc(t.canLoad)}function y8(t){return t&&Jc(t.canActivate)}function v8(t){return t&&Jc(t.canActivateChild)}function w8(t){return t&&Jc(t.canDeactivate)}function b8(t){return t&&Jc(t.canMatch)}function eM(t){return t instanceof No||t?.name==="EmptyError"}var Mp=Symbol("INITIAL_VALUE");function au(){return or(t=>uc(t.map(e=>e.pipe(Co(1),Ug(Mp)))).pipe(Pe(e=>{for(let n of e)if(n!==!0){if(n===Mp)return Mp;if(n===!1||E8(n))return n}return!0}),rr(e=>e!==Mp),Co(1)))}function E8(t){return Bc(t)||t instanceof Wc}function D8(t,e){return St(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?we(Ge(re({},n),{guardsResult:!0})):x8(s,r,o,t).pipe(St(a=>a&&m8(a)?I8(r,i,t,e):we(a)),Pe(a=>Ge(re({},n),{guardsResult:a})))})}function x8(t,e,n,r){return ht(t).pipe(St(o=>_8(o.component,o.route,n,e,r)),Yr(o=>o!==!0,!0))}function I8(t,e,n,r){return ht(e).pipe(rs(o=>ya(T8(o.route.parent,r),S8(o.route,r),C8(t,o.path,n),N8(t,o.route,n))),Yr(o=>o!==!0,!0))}function S8(t,e){return t!==null&&e&&e(new Ew(t)),we(!0)}function T8(t,e){return t!==null&&e&&e(new ww(t)),we(!0)}function N8(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return we(!0);let o=r.map(i=>fd(()=>{let s=Xc(e)??n,a=uu(i,s),u=y8(a)?a.canActivate(e,t):Sr(s,()=>a(e,t));return bi(u).pipe(Yr())}));return we(o).pipe(au())}function C8(t,e,n){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>d8(s)).filter(s=>s!==null).map(s=>fd(()=>{let a=s.guards.map(u=>{let c=Xc(s.node)??n,l=uu(u,c),d=v8(l)?l.canActivateChild(r,t):Sr(c,()=>l(r,t));return bi(d).pipe(Yr())});return we(a).pipe(au())}));return we(i).pipe(au())}function _8(t,e,n,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return we(!0);let s=i.map(a=>{let u=Xc(e)??o,c=uu(a,u),l=w8(c)?c.canDeactivate(t,e,n,r):Sr(u,()=>c(t,e,n,r));return bi(l).pipe(Yr())});return we(s).pipe(au())}function A8(t,e,n,r){let o=e.canLoad;if(o===void 0||o.length===0)return we(!0);let i=o.map(s=>{let a=uu(s,t),u=g8(a)?a.canLoad(e,n):Sr(t,()=>a(e,n));return bi(u)});return we(i).pipe(au(),tM(r))}function tM(t){return Og(Jt(e=>{if(typeof e!="boolean")throw Gp(t,e)}),Pe(e=>e===!0))}function M8(t,e,n,r){let o=e.canMatch;if(!o||o.length===0)return we(!0);let i=o.map(s=>{let a=uu(s,t),u=b8(a)?a.canMatch(e,n):Sr(t,()=>a(e,n));return bi(u)});return we(i).pipe(au(),tM(r))}var qc=class{constructor(e){this.segmentGroup=e||null}},Kc=class extends Error{constructor(e){super(),this.urlTree=e}};function Qa(t){return ma(new qc(t))}function k8(t){return ma(new fe(4e3,!1))}function O8(t){return ma(XA(!1,Kn.GuardRejected))}var _w=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return we(r);if(o.numberOfChildren>1||!o.children[Ce])return k8(`${e.redirectTo}`);o=o.children[Ce]}}applyRedirectCommands(e,n,r,o,i){if(typeof n!="string"){let a=n,{queryParams:u,fragment:c,routeConfig:l,url:d,outlet:p,params:m,data:b,title:S}=o,T=Sr(i,()=>a({params:m,data:b,queryParams:u,fragment:c,routeConfig:l,url:d,outlet:p,title:S}));if(T instanceof vi)throw new Kc(T);n=T}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Kc(s);return s}applyRedirectCreateUrlTree(e,n,r,o){let i=this.createSegmentGroup(e,n.root,r,o);return new vi(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){let i=this.createSegments(e,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,o)}),new qe(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){let o=r[n.path.substring(1)];if(!o)throw new fe(4001,!1);return o}findOrReturn(e,n){let r=0;for(let o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}},Aw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R8(t,e,n,r,o){let i=Pw(t,e,n);return i.matched?(r=u8(e,r),M8(r,e,n,o).pipe(Pe(s=>s===!0?i:re({},Aw)))):we(i)}function Pw(t,e,n){if(e.path==="**")return F8(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?re({},Aw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(e.matcher||_z)(n,t,e);if(!o)return re({},Aw);let i={};Object.entries(o.posParams??{}).forEach(([a,u])=>{i[a]=u.path});let s=o.consumed.length>0?re(re({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function F8(t){return{matched:!0,parameters:t.length>0?FA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function _A(t,e,n,r){return n.length>0&&L8(t,n,r)?{segmentGroup:new qe(e,$8(r,new qe(n,t.children))),slicedSegments:[]}:n.length===0&&V8(t,n,r)?{segmentGroup:new qe(t.segments,P8(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new qe(t.segments,t.children),slicedSegments:n}}function P8(t,e,n,r){let o={};for(let i of n)if(Zp(t,e,i)&&!r[_r(i)]){let s=new qe([],{});o[_r(i)]=s}return re(re({},r),o)}function $8(t,e){let n={};n[Ce]=e;for(let r of t)if(r.path===""&&_r(r)!==Ce){let o=new qe([],{});n[_r(r)]=o}return n}function L8(t,e,n){return n.some(r=>Zp(t,e,r)&&_r(r)!==Ce)}function V8(t,e,n){return n.some(r=>Zp(t,e,r))}function Zp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function j8(t,e,n,r){return _r(t)!==r&&(r===Ce||!Zp(e,n,t))?!1:Pw(e,t,n).matched}function B8(t,e,n){return e.length===0&&!t.children[n]}var Mw=class{};function U8(t,e,n,r,o,i,s="emptyOnly"){return new kw(t,e,n,r,o,s,i).recognize()}var H8=31,kw=class{constructor(e,n,r,o,i,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _w(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new fe(4002,`'${e.segmentGroup}'`)}recognize(){let e=_A(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Pe(({children:n,rootSnapshot:r})=>{let o=new qn(r,n),i=new Hp("",o),s=Kz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let n=new eu([],Object.freeze({}),Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ce,n).pipe(Pe(r=>({children:r,rootSnapshot:n})),si(r=>{if(r instanceof Kc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,i):this.processSegment(e,n,r,r.segments,o,!0,i).pipe(Pe(s=>s instanceof qn?[s]:[]))}processChildren(e,n,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ht(i).pipe(rs(s=>{let a=r.children[s],u=c8(n,s);return this.processSegmentGroup(e,u,a,s,o)}),Bg((s,a)=>(s.push(...a),s)),ai(null),jg(),St(s=>{if(s===null)return Qa(r);let a=nM(s);return G8(a),we(a)}))}processSegment(e,n,r,o,i,s,a){return ht(n).pipe(rs(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,o,i,s,a).pipe(si(c=>{if(c instanceof qc)return we(null);throw c}))),Yr(u=>!!u),si(u=>{if(eM(u))return B8(r,o,i)?we(new Mw):Qa(r);throw u}))}processSegmentAgainstRoute(e,n,r,o,i,s,a,u){return j8(r,o,i,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s,u):Qa(o):Qa(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s,a){let{matched:u,parameters:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:p}=Pw(n,o,i);if(!u)return Qa(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>H8&&(this.allowRedirects=!1));let m=new eu(i,c,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,AA(o),_r(o),o.component??o._loadedComponent??null,o,MA(o)),b=Up(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(b.params),m.data=Object.freeze(b.data);let S=this.applyRedirects.applyRedirectCommands(l,o.redirectTo,d,m,e);return this.applyRedirects.lineralizeSegments(o,S).pipe(St(T=>this.processSegment(e,r,n,T.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,o,i,s){let a=R8(n,r,o,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(or(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(or(({routes:c})=>{let l=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:m}=u,b=new eu(p,d,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,AA(r),_r(r),r.component??r._loadedComponent??null,r,MA(r)),S=Up(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(S.params),b.data=Object.freeze(S.data);let{segmentGroup:T,slicedSegments:A}=_A(n,p,m,c);if(A.length===0&&T.hasChildren())return this.processChildren(l,c,T,b).pipe(Pe(M=>new qn(b,M)));if(c.length===0&&A.length===0)return we(new qn(b,[]));let $=_r(r)===i;return this.processSegment(l,c,T,A,$?Ce:i,!0,b).pipe(Pe(M=>new qn(b,M instanceof qn?[M]:[])))}))):Qa(n)))}getChildConfig(e,n,r){return n.children?we({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?we({routes:n._loadedRoutes,injector:n._loadedInjector}):A8(e,n,r,this.urlSerializer).pipe(St(o=>o?this.configLoader.loadChildren(e,n).pipe(Jt(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):O8(n))):we({routes:[],injector:e})}};function G8(t){t.sort((e,n)=>e.value.outlet===Ce?-1:n.value.outlet===Ce?1:e.value.outlet.localeCompare(n.value.outlet))}function z8(t){let e=t.value.routeConfig;return e&&e.path===""}function nM(t){let e=[],n=new Set;for(let r of t){if(!z8(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):e.push(r)}for(let r of n){let o=nM(r.children);e.push(new qn(r.value,o))}return e.filter(r=>!n.has(r))}function AA(t){return t.data||{}}function MA(t){return t.resolve||{}}function W8(t,e,n,r,o,i){return St(s=>U8(t,e,n,r,s.extractedUrl,o,i).pipe(Pe(({state:a,tree:u})=>Ge(re({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function q8(t,e){return St(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return we(n);let i=new Set(o.map(u=>u.route)),s=new Set;for(let u of i)if(!s.has(u))for(let c of rM(u))s.add(c);let a=0;return ht(s).pipe(rs(u=>i.has(u)?K8(u,r,t,e):(u.data=Up(u,u.parent,t).resolve,we(void 0))),Jt(()=>a++),va(1),St(u=>a===s.size?we(n):zn))})}function rM(t){let e=t.children.map(n=>rM(n)).flat();return[t,...e]}function K8(t,e,n,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!YA(o)&&(i[Zc]=o.title),Z8(i,t,e,r).pipe(Pe(s=>(t._resolvedData=s,t.data=Up(t,t.parent,n).resolve,null)))}function Z8(t,e,n,r){let o=cw(t);if(o.length===0)return we({});let i={};return ht(o).pipe(St(s=>Y8(t[s],e,n,r).pipe(Yr(),Jt(a=>{if(a instanceof Wc)throw Gp(new ru,a);i[s]=a}))),va(1),Vg(i),si(s=>eM(s)?zn:ma(s)))}function Y8(t,e,n,r){let o=Xc(e)??r,i=uu(t,o),s=i.resolve?i.resolve(e,n):Sr(o,()=>i(e,n));return bi(s)}function aw(t){return or(e=>{let n=t(e);return n?ht(n).pipe(Pe(()=>e)):we(e)})}var oM=(()=>{let e=class e{buildTitle(r){let o,i=r.root;for(;i!==void 0;)o=this.getResolvedTitleForRoute(i)??o,i=i.children.find(s=>s.outlet===Ce);return o}getResolvedTitleForRoute(r){return r.data[Zc]}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>J(Q8),providedIn:"root"});let t=e;return t})(),Q8=(()=>{let e=class e extends oM{constructor(r){super(),this.title=r}updateTitle(r){let o=this.buildTitle(r);o!==void 0&&this.title.setTitle(o)}};e.\u0275fac=function(o){return new(o||e)(ge(nA))},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),el=new de("",{providedIn:"root",factory:()=>({})}),Wp=new de(""),$w=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=J(vp)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return we(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=bi(r.loadComponent()).pipe(Pe(iM),Jt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),cc(()=>{this.componentLoaders.delete(r)})),i=new ha(o,()=>new Qt).pipe(pa());return this.componentLoaders.set(r,i),i}loadChildren(r,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return we({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let s=X8(o,this.compiler,r,this.onLoadEndListener).pipe(cc(()=>{this.childrenLoaders.delete(o)})),a=new ha(s,()=>new Qt).pipe(pa());return this.childrenLoaders.set(o,a),a}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function X8(t,e,n,r){return bi(t.loadChildren()).pipe(Pe(iM),St(o=>o instanceof yc||Array.isArray(o)?we(o):ht(e.compileModuleAsync(o))),Pe(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(Wp,[],{optional:!0,self:!0}).flat()),{routes:s.map(Fw),injector:i}}))}function J8(t){return t&&typeof t=="object"&&"default"in t}function iM(t){return J8(t)?t.default:t}var Lw=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>J(e6),providedIn:"root"});let t=e;return t})(),e6=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,o){return r}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sM=new de(""),aM=new de("");function t6(t,e,n){let r=t.get(aM),o=t.get(Rn);return t.get(ot).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let i,s=new Promise(c=>{i=c}),a=o.startViewTransition(()=>(i(),n6(t))),{onViewTransitionCreated:u}=r;return u&&Sr(t,()=>u({transition:a,from:e,to:n})),s})}function n6(t){return new Promise(e=>{cp(e,{injector:t})})}var r6=new de(""),Vw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Qt,this.transitionAbortSubject=new Qt,this.configLoader=J($w),this.environmentInjector=J(An),this.urlSerializer=J(Yc),this.rootContexts=J(Qc),this.location=J(qa),this.inputBindingEnabled=J(Kp,{optional:!0})!==null,this.titleStrategy=J(oM),this.options=J(el,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=J(Lw),this.createViewTransition=J(sM,{optional:!0}),this.navigationErrorHandler=J(r6,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>we(void 0),this.rootComponentType=null;let r=i=>this.events.next(new yw(i)),o=i=>this.events.next(new vw(i));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let o=++this.navigationId;this.transitions?.next(Ge(re(re({},this.transitions.value),r),{id:o}))}setupNavigations(r,o,i){return this.transitions=new Xt({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rr(s=>s.id!==0),Pe(s=>Ge(re({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),or(s=>{let a=!1,u=!1;return we(s).pipe(or(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Kn.SupersededByNewNavigation),zn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ge(re({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let p="";return this.events.next(new wi(c.id,this.urlSerializer.serialize(c.rawUrl),p,$p.IgnoredSameUrlNavigation)),c.resolve(!1),zn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return we(c).pipe(or(p=>{let m=this.transitions?.getValue();return this.events.next(new ou(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?zn:Promise.resolve(p)}),W8(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Jt(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ge(re({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Lp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:b,restoredState:S,extras:T}=c,A=new ou(p,this.urlSerializer.serialize(m),b,S);this.events.next(A);let $=KA(this.rootComponentType).snapshot;return this.currentTransition=s=Ge(re({},c),{targetSnapshot:$,urlAfterRedirects:m,extras:Ge(re({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,we(s)}else{let p="";return this.events.next(new wi(c.id,this.urlSerializer.serialize(c.extractedUrl),p,$p.IgnoredByUrlHandlingStrategy)),c.resolve(!1),zn}}),Jt(c=>{let l=new pw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Pe(c=>(this.currentTransition=s=Ge(re({},c),{guards:f8(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),D8(this.environmentInjector,c=>this.events.next(c)),Jt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Gp(this.urlSerializer,c.guardsResult);let l=new hw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),rr(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Kn.GuardRejected),!1)),aw(c=>{if(c.guards.canActivateChecks.length)return we(c).pipe(Jt(l=>{let d=new mw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),or(l=>{let d=!1;return we(l).pipe(q8(this.paramsInheritanceStrategy,this.environmentInjector),Jt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Kn.NoDataFromResolver)}}))}),Jt(l=>{let d=new gw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),aw(c=>{let l=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(Jt(m=>{d.component=m}),Pe(()=>{})));for(let m of d.children)p.push(...l(m));return p};return uc(l(c.targetSnapshot.root)).pipe(ai(null),Co(1))}),aw(()=>this.afterPreactivation()),or(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ht(d).pipe(Pe(()=>s)):we(s)}),Pe(c=>{let l=r8(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Ge(re({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Jt(()=>{this.events.next(new Gc)}),l8(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Co(1),Jt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Po(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Hg(this.transitionAbortSubject.pipe(Jt(c=>{throw c}))),cc(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Kn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),si(c=>{if(u=!0,JA(c))this.events.next(new Fo(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),s8(c)?this.events.next(new iu(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Hc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=Sr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Wc){let{message:p,cancellationCode:m}=Gp(this.urlSerializer,d);this.events.next(new Fo(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new iu(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let p=r.errorHandler(c);s.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return zn}))}))}cancelNavigationTransition(r,o,i){let s=new Fo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,i);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function o6(t){return t!==Vc}var i6=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>J(s6),providedIn:"root"});let t=e;return t})(),Ow=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},s6=(()=>{let e=class e extends Ow{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ha(e)))(i||e)}})(),e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uM=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:()=>J(a6),providedIn:"root"});let t=e;return t})(),a6=(()=>{let e=class e extends uM{constructor(){super(...arguments),this.location=J(qa),this.urlSerializer=J(Yc),this.options=J(el,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=J(Lw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=KA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(o=>{o.type==="popstate"&&r(o.url,o.state)})}handleRouterEvent(r,o){if(r instanceof ou)this.stateMemento=this.createStateMemento();else if(r instanceof wi)this.rawUrlTree=o.initialUrl;else if(r instanceof Lp){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(i,o)}}else r instanceof Gc?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):r instanceof Fo&&(r.code===Kn.GuardRejected||r.code===Kn.NoDataFromResolver)?this.restoreHistory(o):r instanceof Hc?this.restoreHistory(o,!0):r instanceof Po&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,o){let i=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(i)||o.extras.replaceUrl){let s=this.browserPageId,a=re(re({},o.extras.state),this.generateNgRouterState(o.id,s));this.location.replaceState(i,"",a)}else{let s=re(re({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(r,o=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,o){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:o}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ha(e)))(i||e)}})(),e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$c=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}($c||{});function cM(t,e){t.events.pipe(rr(n=>n instanceof Po||n instanceof Fo||n instanceof Hc||n instanceof wi),Pe(n=>n instanceof Po||n instanceof wi?$c.COMPLETE:(n instanceof Fo?n.code===Kn.Redirect||n.code===Kn.SupersededByNewNavigation:!1)?$c.REDIRECTING:$c.FAILED),rr(n=>n!==$c.REDIRECTING),Co(1)).subscribe(()=>{e()})}function u6(t){throw t}var c6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},l6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xs=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=J(hp),this.stateManager=J(uM),this.options=J(el,{optional:!0})||{},this.pendingTasks=J(Ga),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=J(Vw),this.urlSerializer=J(Yc),this.location=J(qa),this.urlHandlingStrategy=J(Lw),this._events=new Qt,this.errorHandler=this.options.errorHandler||u6,this.navigated=!1,this.routeReuseStrategy=J(i6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=J(Wp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!J(Kp,{optional:!0}),this.eventsSubscription=new xt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(o=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(o,s),o instanceof Fo&&o.code!==Kn.Redirect&&o.code!==Kn.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Po)this.navigated=!0;else if(o instanceof iu){let a=o.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(o.url,i.currentRawUrl),c=re({info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||o6(i.source)},a);this.scheduleNavigation(u,Vc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}d6(o)&&this._events.next(o)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",o)},0)})}navigateToSyncWithBrowser(r,o,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let c=re({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,o,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Fw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,o={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=o,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=re(re({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=GA(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return zA(p,r,d,l??null)}navigateByUrl(r,o={skipLocationChange:!1}){let i=Bc(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Vc,null,o)}navigate(r,o={skipLocationChange:!1}){return f6(r),this.navigateByUrl(this.createUrlTree(r,o),o)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,o){let i;if(o===!0?i=re({},c6):o===!1?i=re({},l6):i=o,Bc(r))return IA(this.currentUrlTree,r,i);let s=this.parseUrl(r);return IA(this.currentUrlTree,s,i)}removeEmptyProps(r){return Object.entries(r).reduce((o,[i,s])=>(s!=null&&(o[i]=s),o),{})}scheduleNavigation(r,o,i,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((p,m)=>{u=p,c=m});let d=this.pendingTasks.add();return cM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function f6(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new fe(4008,!1)}function d6(t){return!(t instanceof Gc)&&!(t instanceof iu)}var qp=class{};var p6=(()=>{let e=class e{constructor(r,o,i,s,a){this.router=r,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(rr(r=>r instanceof Po),rs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,o){let i=[];for(let s of o){s.providers&&!s._injector&&(s._injector=lp(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ht(i).pipe(ga())}preloadConfig(r,o){return this.preloadingStrategy.preload(o,()=>{let i;o.loadChildren&&o.canLoad===void 0?i=this.loader.loadChildren(r,o):i=we(null);let s=i.pipe(St(a=>a===null?we(void 0):(o._loadedRoutes=a.routes,o._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(o.loadComponent&&!o._loadedComponent){let a=this.loader.loadComponent(o);return ht([s,a]).pipe(ga())}else return s})}};e.\u0275fac=function(o){return new(o||e)(ge(xs),ge(vp),ge(An),ge(qp),ge($w))},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lM=new de(""),h6=(()=>{let e=class e{constructor(r,o,i,s,a={}){this.urlSerializer=r,this.transitions=o,this.viewportScroller=i,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=J(An),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ou?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Po?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof wi&&r.code===$p.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Vp&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,o){this.zone.runOutsideAngular(()=>G(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),cp(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Vp(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,o))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(o){Y1()},e.\u0275prov=pe({token:e,factory:e.\u0275fac});let t=e;return t})();function m6(t){return t.routerState.root}function tl(t,e){return{\u0275kind:t,\u0275providers:e}}function g6(){let t=J(Wn);return e=>{let n=t.get(vs);if(e!==n.components[0])return;let r=t.get(xs),o=t.get(fM);t.get(jw)===1&&r.initialNavigation(),t.get(dM,null,Oe.Optional)?.setUpPreloading(),t.get(lM,null,Oe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var fM=new de("",{factory:()=>new Qt}),jw=new de("",{providedIn:"root",factory:()=>1});function y6(){return tl(2,[{provide:jw,useValue:0},{provide:yp,multi:!0,deps:[Wn],useFactory:e=>{let n=e.get(j_,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let o=e.get(xs),i=e.get(fM);cM(o,()=>{r(!0)}),e.get(Vw).afterPreactivation=()=>(r(!0),i.closed?we(void 0):i),o.initialNavigation()}))}}])}function v6(){return tl(3,[{provide:yp,multi:!0,useFactory:()=>{let e=J(xs);return()=>{e.setUpLocationChangeListener()}}},{provide:jw,useValue:2}])}var dM=new de("");function w6(t){return tl(0,[{provide:dM,useExisting:p6},{provide:qp,useExisting:t}])}function b6(){return tl(8,[CA,{provide:Kp,useExisting:CA}])}function E6(t){let e=[{provide:sM,useValue:t6},{provide:aM,useValue:re({skipNextTransition:!!t?.skipInitialTransition},t)}];return tl(9,e)}var kA=new de("ROUTER_FORROOT_GUARD"),D6=[qa,{provide:Yc,useClass:ru},xs,Qc,{provide:su,useFactory:m6,deps:[xs]},$w,[]],Bw=(()=>{let e=class e{constructor(r){}static forRoot(r,o){return{ngModule:e,providers:[D6,[],{provide:Wp,multi:!0,useValue:r},{provide:kA,useFactory:T6,deps:[[xs,new By,new RC]]},{provide:el,useValue:o||{}},o?.useHash?I6():S6(),x6(),o?.preloadingStrategy?w6(o.preloadingStrategy).\u0275providers:[],o?.initialNavigation?N6(o):[],o?.bindToComponentInputs?b6().\u0275providers:[],o?.enableViewTransitions?E6().\u0275providers:[],C6()]}}static forChild(r){return{ngModule:e,providers:[{provide:Wp,multi:!0,useValue:r}]}}};e.\u0275fac=function(o){return new(o||e)(ge(kA,8))},e.\u0275mod=kn({type:e}),e.\u0275inj=Mn({});let t=e;return t})();function x6(){return{provide:lM,useFactory:()=>{let t=J(W_),e=J(ot),n=J(el),r=J(Vw),o=J(Yc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new h6(o,r,t,e,n)}}}function I6(){return{provide:bs,useClass:U_}}function S6(){return{provide:bs,useClass:Vv}}function T6(t){return"guarded"}function N6(t){return[t.initialNavigation==="disabled"?v6().\u0275providers:[],t.initialNavigation==="enabledBlocking"?y6().\u0275providers:[]]}var OA=new de("");function C6(){return[{provide:OA,useFactory:g6},{provide:_v,multi:!0,useExisting:OA}]}var _6=[],pM=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=kn({type:e}),e.\u0275inj=Mn({imports:[Bw.forRoot(_6),Bw]});let t=e;return t})();pn();pn();sT();var yV=Hf(XL());var fT=function(t,e){return fT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},fT(t,e)};function vV(t,e){function n(){this.constructor=t}fT(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mn=function(){return mn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},mn.apply(this,arguments)};function Ke(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(c){try{u(r.next(c))}catch(l){i(l)}}function a(c){try{u(r.throw(c))}catch(l){i(l)}}function u(c){var l;c.done?o(c.value):(l=c.value,l instanceof n?l:new n(function(d){d(l)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function Ze(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||l[0]!==6&&l[0]!==2)){s=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){s.label=l[1];break}if(l[0]===6&&s.label<o[1]){s.label=o[1],o=l;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(l);break}o[2]&&s.ops.pop(),s.trys.pop();continue}l=e.call(t,s)}catch(d){l=[6,d],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}}function Wm(t){return t instanceof SVGAnimatedLength?t.baseVal.value:t}function pT(t){return Ke(this,void 0,void 0,function(){var e,n;return Ze(this,function(r){switch(r.label){case 0:return e=document.createElement("canvas"),t instanceof _e?[4,Do.toPixels(t,e)]:[3,2];case 1:return r.sent(),[3,3];case 2:e.width=Wm(t.width),e.height=Wm(t.height),n=e.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0),r.label=3;case 3:return[2,e]}})})}function wV(t){return Ke(this,void 0,void 0,function(){var e,n,r,o,i,s;return Ze(this,function(a){switch(a.label){case 0:return t instanceof _e?(e=t.shape.slice(0,2),n=e[0],r=e[1],o=ImageData.bind,[4,Do.toPixels(t)]):[3,2];case 1:return[2,new(o.apply(ImageData,[void 0,a.sent(),r,n]))];case 2:return i=document.createElement("canvas"),s=i.getContext("2d"),i.width=Wm(t.width),i.height=Wm(t.height),s.drawImage(t,0,0),[2,s.getImageData(0,0,i.width,i.height)]}})})}function bV(t){return Ke(this,void 0,void 0,function(){var e,n;return Ze(this,function(r){switch(r.label){case 0:return t instanceof SVGImageElement||t instanceof OffscreenCanvas?[4,pT(t)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:return e=n,[2,Do.fromPixels(e,4)]}})})}function Km(t){if(t<0||t>=256)throw new Error("Mask value must be in range [0, 255] but got "+t);if(!Number.isInteger(t))throw new Error("Mask value must be an integer but got "+t)}function EV(t){var e=t.shape[2],n=Dl(t,2),r=L(n,[-1]);return Fi(r,e)}function Lm(t,e){return se(function(){return me(mo(t,ae(e)),"int32")})}function eX(t,e){var n=e.shape,r=n[0],o=n[1],i=n[2];return se(function(){var s=EV(e),a=Vt(hr(0,i,1,"int32"),1),u=me(Ne(s,a),"int32"),c=L(u,[r,o]),l=ne(c,ae(1,"int32"));return ue(function(d,p){return W(d,p)}(l,t),ae(1,"int32"))})}var DV=function(){function t(e,n){this.model=e,this.outputStride=n;var r=this.model.inputs[0].shape;q.assert(r[1]===-1&&r[2]===-1,function(){return"Input shape ["+r[1]+", "+r[2]+"] must both be equal to or -1"})}return t.prototype.predict=function(e){var n=this;return se(function(){var r=n.preprocessInput(me(e,"float32")),o=Vt(r,0),i=n.model.predict(o).map(function(a){return dn(a,[0])}),s=n.nameOutputResults(i);return{heatmapScores:Sn(s.heatmap),offsets:s.offsets,displacementFwd:s.displacementFwd,displacementBwd:s.displacementBwd,segmentation:s.segmentation,partHeatmaps:s.partHeatmaps,longOffsets:s.longOffsets,partOffsets:s.partOffsets}})},t.prototype.dispose=function(){this.model.dispose()},t}(),tX=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return vV(e,t),e.prototype.preprocessInput=function(n){return se(function(){return ue(Se(n,127.5),1)})},e.prototype.nameOutputResults=function(n){return{offsets:n[0],segmentation:n[1],partHeatmaps:n[2],longOffsets:n[3],heatmap:n[4],displacementFwd:n[5],displacementBwd:n[6],partOffsets:n[7]}},e}(DV),Zm=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],zr=Zm.length,qm=Zm.reduce(function(t,e,n){return t[e]=n,t},{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(function(t){var e=t[0],n=t[1];return[qm[e],qm[n]]});function hT(t,e,n){var r=t[0],o=t[1],i=e[0],s=e[1],a=n.top,u=n.bottom;return[s/(n.left+n.right+o),i/(a+u+r)]}function xV(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+zr)}}function IV(t,e,n){var r=xV(t.heatmapY,t.heatmapX,t.id,n),o=r.y,i=r.x;return{x:t.heatmapX*e+i,y:t.heatmapY*e+o}}function JL(t,e,n){return t<e?e:t>n?n:t}function eV(t,e){return{x:t.x+e.x,y:t.y+e.y}}function nX(t,e,n){n===void 0&&(n=.3);for(var r=0,o=0,i=0;i<t.length;i++)e.keypoints[i].score>n&&(o+=1,r+=Math.pow(t[i].x-e.keypoints[i].position.x,2)+Math.pow(t[i].y-e.keypoints[i].position.y,2));return o===0?r=1/0:r/=o,r}function rX(t,e,n,r,o,i,s){for(var a=s[0],u=s[1],c=n(t),l=c.y*r+c.x,d=o[zr*(2*l)+e],p=o[zr*(2*l+1)+e],m=t.y+d,b=t.x+p,S=0;S<i;S++){m=Math.min(m,a-1);var T=n({x:b=Math.min(b,u-1),y:m}),A=T.y*r+T.x;m+=d=o[zr*(2*A)+e],b+=p=o[zr*(2*A+1)+e]}return{x:b,y:m}}function SV(t,e,n,r,o,i,s,a,u,c){for(var l=o[0],d=o[1],p=i[0],m=i[1],b=a[0],S=a[1],T=[],A=function(Z){return function(Q,X,K,he){var le=X[0],Ae=X[1],Me=K[0],at=K[1],dt=Math.round(((le+Q.y+1)*at-1)/he);return{x:Math.round(((Ae+Q.x+1)*Me-1)/he),y:dt}}(Z,[l,d],[p,m],u)},$=0;$<r;$++){var M=rX(t,$,A,s,e,c,[b,S]);T.push(M)}for(var O=-1,U=1/0,j=0;j<n.length;j++){var z=nX(T,n[j]);z<U&&(O=j,U=z)}return O}function TV(t,e){var n=t[0],r=t[1];return[Math.round((r-1)/e+1),Math.round((n-1)/e+1)]}function NV(t,e,n,r,o,i,s,a,u,c,l){for(var d=s[0],p=s[1],m=t.shape,b=m[0],S=m[1],T=e.shape.slice(0,2),A=T[0],$=T[1],M=L(e,[A,$,2,zr]),O=new Float32Array(l*zr*3).fill(0),U=0;U<n.length;U++)for(var j=U*zr*3,z=n[U],Z=0;Z<zr;Z++){var Q=z.keypoints[Z],X=j+3*Z;O[X]=Q.score,O[X+1]=Q.position.y,O[X+2]=Q.position.x}var K=hT([r,o],[d,p],a),he=K[0],le=K[1],Ae=Lt(O,[l,zr,3]),Me=a.top,at=a.left,dt={variableNames:["segmentation","longOffsets","poses"],outputShape:[b,S],userCode:`
    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {
      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));
    }

    float convertToPositionInOutputFloat(
        int pos, int pad, float scale, int stride) {
      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);
    }

    float dist(float x1, float y1, float x2, float y2) {
      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);
    }

    float sampleLongOffsets(float h, float w, int d, int k) {
      float fh = fract(h);
      float fw = fract(w);
      int clH = int(ceil(h));
      int clW = int(ceil(w));
      int flH = int(floor(h));
      int flW = int(floor(w));
      float o11 = getLongOffsets(flH, flW, d, k);
      float o12 = getLongOffsets(flH, clW, d, k);
      float o21 = getLongOffsets(clH, flW, d, k);
      float o22 = getLongOffsets(clH, clW, d, k);
      float o1 = mix(o11, o12, fw);
      float o2 = mix(o21, o22, fw);
      return mix(o1, o2, fh);
    }

    int findNearestPose(int h, int w) {
      float prob = getSegmentation(h, w);
      if (prob < 1.0) {
        return -1;
      }

      // Done(Tyler): convert from output space h/w to strided space.
      float stridedH = convertToPositionInOutputFloat(
        h, `+Me+", "+le+", "+i+`);
      float stridedW = convertToPositionInOutputFloat(
        w, `+at+", "+he+", "+i+`);

      float minDist = 1000000.0;
      int iMin = -1;
      for (int i = 0; i < `+l+`; i++) {
        float curDistSum = 0.0;
        int numKpt = 0;
        for (int k = 0; k < `+zr+`; k++) {
          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);
          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);

          float y = float(h) + dy;
          float x = float(w) + dx;

          for (int s = 0; s < `+u+`; s++) {
            int yRounded = round(min(y, float(`+(r-1)+`)));
            int xRounded = round(min(x, float(`+(o-1)+`)));

            float yStrided = convertToPositionInOutputFloat(
              yRounded, `+Me+", "+le+", "+i+`);
            float xStrided = convertToPositionInOutputFloat(
              xRounded, `+at+", "+he+", "+i+`);

            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);
            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);

            y = y + dy;
            x = x + dx;
          }

          float poseScore = getPoses(i, k, 0);
          float poseY = getPoses(i, k, 1);
          float poseX = getPoses(i, k, 2);
          if (poseScore > `+c+`) {
            numKpt = numKpt + 1;
            curDistSum = curDistSum + dist(x, y, poseX, poseY);
          }
        }
        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {
          minDist = curDistSum / float(numKpt);
          iMin = i;
        }
      }
      return iMin;
    }

    void main() {
        ivec2 coords = getOutputCoords();
        int nearestPose = findNearestPose(coords[0], coords[1]);
        setOutput(float(nearestPose));
      }
  `};return vl().compileAndRun(dt,[t,M,Ae])}function CV(){return yl()==="webgl"}function oX(t,e,n,r,o,i,s,a,u,c,l,d){var p=s[0],m=s[1];return u===void 0&&(u=.2),c===void 0&&(c=8),l===void 0&&(l=.3),d===void 0&&(d=10),Ke(this,void 0,void 0,function(){var b,S,T,A,$;return Ze(this,function(M){switch(M.label){case 0:return b=n.filter(function(O){return O.score>=u}),CV()?(T=se(function(){var O=NV(t,e,b,r,o,i,[p,m],a,c,l,d),U=wh().makeTensorFromDataId(O.dataId,O.shape,O.dtype);return b.map(function(j,z){return function(Z,Q){return se(function(){return me(Ai(Z,ae(Q)),"int32")})}(U,z)})}),[4,Promise.all(T.map(function(O){return O.data()}))]):[3,2];case 1:return S=M.sent(),T.forEach(function(O){return O.dispose()}),[3,5];case 2:return[4,t.data()];case 3:return A=M.sent(),[4,e.data()];case 4:$=M.sent(),S=function(O,U,j,z,Z,Q,X,K,he,le){var Ae=X[0],Me=X[1];le===void 0&&(le=5);for(var at=j.map(function(So){return new Uint8Array(z*Z).fill(0)}),dt=K.top,Bt=K.left,Dt=hT([z,Z],[Ae,Me],K),xo=Dt[0],qi=Dt[1],Io=TV([Ae,Me],Q)[0],Jn=0;Jn<z;Jn+=1)for(var er=0;er<Z;er+=1){var gr=Jn*Z+er;if(O[gr]===1){var tr=SV({x:er,y:Jn},U,j,le,[dt,Bt],[xo,qi],Io,[z,Z],Q,he);tr>=0&&(at[tr][gr]=1)}}return at}(A,$,b,r,o,i,[p,m],a,c),M.label=5;case 5:return[2,S.map(function(O,U){return{data:O,pose:b[U],width:o,height:r}})]}})})}function iX(t,e,n,r,o,i,s,a,u,c,l,d,p){var m=a[0],b=a[1];return c===void 0&&(c=.2),l===void 0&&(l=8),d===void 0&&(d=.3),p===void 0&&(p=10),Ke(this,void 0,void 0,function(){var S,T,A,$,M,O;return Ze(this,function(U){switch(U.label){case 0:return S=r.filter(function(j){return j.score>=c}),CV()?(A=se(function(){var j=NV(t,e,S,o,i,s,[m,b],u,l,d,p),z=wh().makeTensorFromDataId(j.dataId,j.shape,j.dtype);return S.map(function(Z,Q){return function(X,K,he){return se(function(){return ue(W(me(Ai(X,ae(he)),"int32"),ne(K,1)),1)})}(z,n,Q)})}),[4,Promise.all(A.map(function(j){return j.data()}))]):[3,2];case 1:return T=U.sent(),A.forEach(function(j){return j.dispose()}),[3,6];case 2:return[4,t.data()];case 3:return $=U.sent(),[4,e.data()];case 4:return M=U.sent(),[4,n.data()];case 5:O=U.sent(),T=function(j,z,Z,Q,X,K,he,le,Ae,Me,at){var dt=le[0],Bt=le[1];at===void 0&&(at=5);for(var Dt=Q.map(function(ia){return new Int32Array(X*K).fill(-1)}),xo=Ae.top,qi=Ae.left,Io=hT([X,K],[dt,Bt],Ae),Jn=Io[0],er=Io[1],gr=TV([dt,Bt],he)[0],tr=0;tr<X;tr+=1)for(var So=0;So<K;So+=1){var ri=tr*K+So;if(j[ri]===1){var Ki=SV({x:So,y:tr},z,Q,at,[xo,qi],[Jn,er],gr,[X,K],he,Me);Ki>=0&&(Dt[Ki][ri]=Z[ri])}}return Dt}($,M,O,S,o,i,s,[m,b],u,l),U.label=6;case 6:return[2,T.map(function(j,z){return{pose:S[z],data:j,height:o,width:i}})]}})})}function aT(t){return Math.floor(t/2)}var sX=function(){function t(e,n){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=n}return t.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},t.prototype.empty=function(){return this.numberOfElements===-1},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(e){for(;e>0&&this.less(aT(e),e);)this.exchange(e,aT(e)),e=aT(e)},t.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var n=2*e;if(n<this.numberOfElements&&this.less(n,n+1)&&n++,!this.less(e,n))break;this.exchange(e,n),e=n}},t.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},t.prototype.less=function(e,n){return this.getValueAt(e)<this.getValueAt(n)},t.prototype.exchange=function(e,n){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[n],this.priorityQueue[n]=r},t}();function aX(t,e,n,r,o,i){for(var s=i.shape,a=s[0],u=s[1],c=!0,l=Math.max(n-o,0),d=Math.min(n+o+1,a),p=l;p<d;++p){for(var m=Math.max(r-o,0),b=Math.min(r+o+1,u),S=m;S<b;++S)if(i.get(p,S,t)>e){c=!1;break}if(!c)break}return c}var _V=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map(function(t){var e=t[0],n=t[1];return[qm[e],qm[n]]}),uT=_V.map(function(t){return t[1]}),tV=_V.map(function(t){return t[0]});function cT(t,e,n,r){return{y:JL(Math.round(t.y/e),0,n-1),x:JL(Math.round(t.x/e),0,r-1)}}function nV(t,e,n,r,o,i,s,a){a===void 0&&(a=2);for(var u=r.shape,c=u[0],l=u[1],d=function($,M,O){var U=O.shape[2]/2;return{y:O.get(M.y,M.x,$),x:O.get(M.y,M.x,U+$)}}(t,cT(e.position,i,c,l),s),p=eV(e.position,d),m=0;m<a;m++){var b=cT(p,i,c,l),S=xV(b.y,b.x,n,o);p=eV({x:b.x*i,y:b.y*i},{x:S.x,y:S.y})}var T=cT(p,i,c,l),A=r.get(T.y,T.x,n);return{position:p,part:Zm[n],score:A}}function uX(t,e,n,r,o,i){var s=e.shape[2],a=uT.length,u=new Array(s),c=t.part,l=t.score,d=IV(c,r,n);u[c.id]={score:l,part:Zm[c.id],position:d};for(var p=a-1;p>=0;--p){var m=uT[p],b=tV[p];u[m]&&!u[b]&&(u[b]=nV(p,u[m],b,e,n,r,i))}for(p=0;p<a;++p)m=tV[p],b=uT[p],u[m]&&!u[b]&&(u[b]=nV(p,u[m],b,e,n,r,o));return u}function AV(t,e,n,r){var o=n.x,i=n.y;return t.some(function(s){var a,u,c,l,d,p,m=s.keypoints[r].position;return a=i,u=o,c=m.y,l=m.x,(d=c-a)*d+(p=l-u)*p<=e})}function cX(t,e,n){var r=n.reduce(function(o,i,s){var a=i.position,u=i.score;return AV(t,e,a,s)||(o+=u),o},0);return r/n.length}function Vm(t,e,n,r,o,i,s,a){s===void 0&&(s=.5),a===void 0&&(a=20);for(var u=[],c=function(b,S,T){for(var A=T.shape,$=A[0],M=A[1],O=A[2],U=new sX($*M*O,function(X){return X.score}),j=0;j<$;++j)for(var z=0;z<M;++z)for(var Z=0;Z<O;++Z){var Q=T.get(j,z,Z);Q<b||aX(Z,Q,j,z,S,T)&&U.enqueue({score:Q,part:{heatmapY:j,heatmapX:z,id:Z}})}return U}(s,1,t),l=a*a;u.length<i&&!c.empty();){var d=c.dequeue();if(!AV(u,l,IV(d.part,o,e),d.part.id)){var p=uX(d,t,e,o,n,r),m=cX(u,l,p);u.push({keypoints:p,score:m})}}return u}var Cf,lX=[-123.15,-115.9,-103.06],fX=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return vV(e,t),e.prototype.preprocessInput=function(n){return ne(n,lX)},e.prototype.nameOutputResults=function(n){var r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],u=n[5];return{offsets:a,segmentation:n[6],partHeatmaps:u,longOffsets:s,heatmap:i,displacementFwd:o,displacementBwd:r,partOffsets:n[7]}},e}(DV),rV="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",oV="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function _f(t){if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")}(t);if(typeof ImageData<"u"&&t instanceof ImageData)return[t.height,t.width];if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]}(t);if(t instanceof _e)return[t.shape[0],t.shape[1]];throw new Error("error: Unknown input type: "+t+".")}function iV(t,e){return function(n,r){return(n-1)%r==0}(t,e)?t:Math.floor(t/e)*e+1}var Af={low:"low",medium:"medium",high:"high",full:"full"},dX=((Cf={})[Af.low]=.25,Cf[Af.medium]=.5,Cf[Af.high]=.75,Cf[Af.full]=1,Cf);function jm(t,e,n){var r=n[0],o=n[1],i=function(s){if(typeof s=="string"){var a=dX[s];return q.assert(typeof a=="number",function(){return"string value of inputResolution must be one of "+Object.values(Af).join(",")+" but was "+s+"."}),a}return q.assert(typeof s=="number"&&s<=2&&s>=.1,function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+s}),s}(t);return[iV(r*i,e),iV(o*i,e)]}function Zu(t,e,n,r,o){var i=e[0],s=e[1],a=n[0],u=n[1],c=r[0],l=c[0],d=c[1],p=r[1],m=p[0],b=p[1];return o===void 0&&(o=!1),se(function(){var S=Li.resizeBilinear(t,[a,u],!0);return o&&(S=Sn(S)),function(T,A,$){var M=A[0],O=A[1],U=$[0],j=U[0],z=U[1],Z=$[1],Q=Z[0],X=Z[1];return se(function(){var K=Vt(T);return dn(Li.cropAndResize(K,[[j/(M+j+z-1),Q/(O+Q+X-1),(j+M-1)/(M+j+z-1),(Q+O-1)/(O+Q+X-1)]],[0],[M,O]),[0])})}(S,[i,s],[[l,d],[m,b]])})}function Bm(t,e){var n=e[0],r=e[1],o=_f(t),i=o[0],s=o[1],a=r/n,u=[0,0,0,0],c=u[0],l=u[1],d=u[2],p=u[3];s/i<a?(c=0,l=0,d=Math.round(.5*(a*i-s)),p=Math.round(.5*(a*i-s))):(c=Math.round(.5*(1/a*s-i)),l=Math.round(.5*(1/a*s-i)),d=0,p=0);var m=se(function(){var b=function(S){return S instanceof _e?S:Do.fromPixels(S)}(t);return b=Xl(b,[[c,l],[d,p],[0,0]]),Li.resizeBilinear(b,[n,r])});return{resized:m,padding:{top:c,left:d,right:p,bottom:l}}}function Um(t){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,Promise.all(t.map(function(n){return n.buffer()}))]})})}function Hm(t,e,n,r,o){var i=e[0],s=e[1],a=n[0],u=n[1],c=function(l,d,p,m,b){return m===void 0&&(m=0),b===void 0&&(b=0),p===1&&d===1&&m===0&&b===0?l:l.map(function(S){return function(T,A,$,M,O){return M===void 0&&(M=0),O===void 0&&(O=0),{score:T.score,keypoints:T.keypoints.map(function(U){var j=U.score,z=U.part,Z=U.position;return{score:j,part:z,position:{x:Z.x*$+O,y:Z.y*A+M}}})}}(S,d,p,m,b)})}(t,(i+r.top+r.bottom)/a,(s+r.left+r.right)/u,-r.top,-r.left);return o?function(l,d){return d<=0?l:l.map(function(p){return function(m,b){return{score:m.score,keypoints:m.keypoints.map(function(S){var T=S.score,A=S.part,$=S.position;return{score:T,part:A,position:{x:b-1-$.x,y:$.y}}})}}(p,d)})}(c,s):c}var sV={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},aV=["MobileNetV1","ResNet50"],uV={MobileNetV1:[8,16,32],ResNet50:[32,16]},cV={MobileNetV1:[.5,.75,1],ResNet50:[1]},lV=[1,2,4],Gm={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},zm={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function fV(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".")}function dV(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius,i=t.minKeypointScore,s=t.refineSteps;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".");if(i<0||i>1)throw new Error("Invalid minKeypointScore "+i+".Should be in range [0.0, 1.0]");if(s<=0||s>20)throw new Error("Invalid refineSteps "+s+".Should be in range [1, 20]")}var MV=function(){function t(e){this.baseModel=e}return t.prototype.predictForPersonSegmentation=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForPersonSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,partHeatmapLogits:n.partHeatmaps,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,longOffsets:n.longOffsets,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd,partHeatmaps:n.partHeatmaps}},t.prototype.segmentPersonActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var i=_f(e),s=i[0],a=i[1],u=jm(n,this.baseModel.outputStride,[s,a]),c=Bm(e,u),l=c.resized,d=c.padding,p=se(function(){var $=o.predictForPersonSegmentation(l),M=$.segmentLogits,O=$.heatmapScores,U=$.offsets,j=$.displacementFwd,z=$.displacementBwd,Z=l.shape,Q=Z[0],X=Z[1],K=Zu(M,[s,a],[Q,X],[[d.top,d.bottom],[d.left,d.right]],!0);return{segmentation:Lm(dn(K),r),heatmapScores:O,offsets:U,displacementFwd:j,displacementBwd:z}}),m=p.segmentation,b=p.heatmapScores,S=p.offsets,T=p.displacementFwd,A=p.displacementBwd;return l.dispose(),{segmentation:m,heatmapScores:b,offsets:S,displacementFwd:T,displacementBwd:A,padding:d,internalResolutionHeightAndWidth:u}},t.prototype.segmentPerson=function(e,n){return n===void 0&&(n=Gm),Ke(this,void 0,void 0,function(){var r,o,i,s,a,u,c,l,d,p,m,b,S,T,A,$,M,O;return Ze(this,function(U){switch(U.label){case 0:return fV(n=mn(mn({},Gm),n)),r=this.segmentPersonActivation(e,n.internalResolution,n.segmentationThreshold),o=r.segmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,u=r.displacementBwd,c=r.padding,l=r.internalResolutionHeightAndWidth,d=o.shape,p=d[0],m=d[1],[4,o.data()];case 1:return b=U.sent(),o.dispose(),[4,Um([i,s,a,u])];case 2:return S=U.sent(),T=S[0],A=S[1],$=S[2],M=S[3],O=Hm(O=Vm(T,A,$,M,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],l,c,!1),i.dispose(),s.dispose(),a.dispose(),u.dispose(),[2,{height:p,width:m,data:b,allPoses:O}]}})})},t.prototype.segmentMultiPerson=function(e,n){return n===void 0&&(n=zm),Ke(this,void 0,void 0,function(){var r,o,i,s,a,u,c,l,d,p,m,b,S,T,A,$,M,O,U,j,z,Z=this;return Ze(this,function(Q){switch(Q.label){case 0:return dV(n=mn(mn({},zm),n)),r=_f(e),o=r[0],i=r[1],s=jm(n.internalResolution,this.baseModel.outputStride,[o,i]),a=Bm(e,s),u=a.resized,c=a.padding,l=se(function(){var X,K=Z.predictForMultiPersonInstanceSegmentationAndPart(u),he=K.segmentLogits,le=K.longOffsets,Ae=K.heatmapScores,Me=K.offsets,at=K.displacementFwd,dt=K.displacementBwd,Bt=Zu(he,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0);return X=le,{segmentation:Lm(dn(Bt),n.segmentationThreshold),longOffsets:X,heatmapScoresRaw:Ae,offsetsRaw:Me,displacementFwdRaw:at,displacementBwdRaw:dt}}),d=l.segmentation,p=l.longOffsets,m=l.heatmapScoresRaw,b=l.offsetsRaw,S=l.displacementFwdRaw,T=l.displacementBwdRaw,[4,Um([m,b,S,T])];case 1:return A=Q.sent(),$=A[0],M=A[1],O=A[2],U=A[3],j=Hm(j=Vm($,M,O,U,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,oX(d,p,j,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return z=Q.sent(),u.dispose(),d.dispose(),p.dispose(),m.dispose(),b.dispose(),S.dispose(),T.dispose(),[2,z]}})})},t.prototype.segmentPersonPartsActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var i=_f(e),s=i[0],a=i[1],u=jm(n,this.baseModel.outputStride,[s,a]),c=Bm(e,u),l=c.resized,d=c.padding,p=se(function(){var $=o.predictForPersonSegmentationAndPart(l),M=$.segmentLogits,O=$.partHeatmapLogits,U=$.heatmapScores,j=$.offsets,z=$.displacementFwd,Z=$.displacementBwd,Q=l.shape,X=Q[0],K=Q[1],he=Zu(M,[s,a],[X,K],[[d.top,d.bottom],[d.left,d.right]],!0),le=Zu(O,[s,a],[X,K],[[d.top,d.bottom],[d.left,d.right]],!0);return{partSegmentation:eX(Lm(dn(he),r),le),heatmapScores:U,offsets:j,displacementFwd:z,displacementBwd:Z}}),m=p.partSegmentation,b=p.heatmapScores,S=p.offsets,T=p.displacementFwd,A=p.displacementBwd;return l.dispose(),{partSegmentation:m,heatmapScores:b,offsets:S,displacementFwd:T,displacementBwd:A,padding:d,internalResolutionHeightAndWidth:u}},t.prototype.segmentPersonParts=function(e,n){return n===void 0&&(n=Gm),Ke(this,void 0,void 0,function(){var r,o,i,s,a,u,c,l,d,p,m,b,S,T,A,$,M,O;return Ze(this,function(U){switch(U.label){case 0:return fV(n=mn(mn({},Gm),n)),r=this.segmentPersonPartsActivation(e,n.internalResolution,n.segmentationThreshold),o=r.partSegmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,u=r.displacementBwd,c=r.padding,l=r.internalResolutionHeightAndWidth,d=o.shape,p=d[0],m=d[1],[4,o.data()];case 1:return b=U.sent(),o.dispose(),[4,Um([i,s,a,u])];case 2:return S=U.sent(),T=S[0],A=S[1],$=S[2],M=S[3],O=Hm(O=Vm(T,A,$,M,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],l,c,!1),i.dispose(),s.dispose(),a.dispose(),u.dispose(),[2,{height:p,width:m,data:b,allPoses:O}]}})})},t.prototype.segmentMultiPersonParts=function(e,n){return n===void 0&&(n=zm),Ke(this,void 0,void 0,function(){var r,o,i,s,a,u,c,l,d,p,m,b,S,T,A,$,M,O,U,j,z,Z,Q=this;return Ze(this,function(X){switch(X.label){case 0:return dV(n=mn(mn({},zm),n)),r=_f(e),o=r[0],i=r[1],s=jm(n.internalResolution,this.baseModel.outputStride,[o,i]),a=Bm(e,s),u=a.resized,c=a.padding,l=se(function(){var K=Q.predictForMultiPersonInstanceSegmentationAndPart(u),he=K.segmentLogits,le=K.longOffsets,Ae=K.heatmapScores,Me=K.offsets,at=K.displacementFwd,dt=K.displacementBwd,Bt=K.partHeatmaps,Dt=Zu(he,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),xo=Zu(Bt,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),qi=le,Io=Lm(dn(Dt),n.segmentationThreshold),Jn=function(er){var gr=er.shape,tr=gr[0],So=gr[1],ri=gr[2];return se(function(){var Ki=EV(er),ia=Vt(hr(0,ri,1,"int32"),1),Zi=me(Ne(Ki,ia),"int32");return L(Zi,[tr,So])})}(xo);return{segmentation:Io,longOffsets:qi,heatmapScoresRaw:Ae,offsetsRaw:Me,displacementFwdRaw:at,displacementBwdRaw:dt,partSegmentation:Jn}}),d=l.segmentation,p=l.longOffsets,m=l.heatmapScoresRaw,b=l.offsetsRaw,S=l.displacementFwdRaw,T=l.displacementBwdRaw,A=l.partSegmentation,[4,Um([m,b,S,T])];case 1:return $=X.sent(),M=$[0],O=$[1],U=$[2],j=$[3],z=Hm(z=Vm(M,O,U,j,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,iX(d,p,A,z,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return Z=X.sent(),u.dispose(),d.dispose(),p.dispose(),m.dispose(),b.dispose(),S.dispose(),T.dispose(),A.dispose(),[2,Z]}})})},t.prototype.dispose=function(){this.baseModel.dispose()},t}();function pX(t){return Ke(this,void 0,void 0,function(){var e,n,r,o,i,s;return Ze(this,function(a){switch(a.label){case 0:if(e=t.outputStride,n=t.quantBytes,r=t.multiplier,Hu==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return o=function(u,c,l){var d={1:"100",.75:"075",.5:"050"},p="model-stride"+u+".json";return l===4?oV+"float/"+d[c]+"/"+p:oV+"quant"+l+"/"+d[c]+"/"+p}(e,r,n),[4,Ku(t.modelUrl||o)];case 1:return i=a.sent(),s=new tX(i,e),[2,new MV(s)]}})})}function hX(t){return Ke(this,void 0,void 0,function(){var e,n,r,o,i;return Ze(this,function(s){switch(s.label){case 0:if(e=t.outputStride,n=t.quantBytes,Hu==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return r=function(a,u){var c="model-stride"+a+".json";return u===4?rV+"float/"+c:rV+"quant"+u+"/"+c}(e,n),[4,Ku(t.modelUrl||r)];case 1:return o=s.sent(),i=new fX(o,e),[2,new MV(i)]}})})}function mX(t){return t===void 0&&(t=sV),Ke(this,void 0,void 0,function(){return Ze(this,function(e){return(t=function(n){if((n=n||sV).architecture==null&&(n.architecture="MobileNetV1"),aV.indexOf(n.architecture)<0)throw new Error("Invalid architecture "+n.architecture+". Should be one of "+aV);if(n.outputStride==null&&(n.outputStride=16),uV[n.architecture].indexOf(n.outputStride)<0)throw new Error("Invalid outputStride "+n.outputStride+". Should be one of "+uV[n.architecture]+" for architecture "+n.architecture+".");if(n.multiplier==null&&(n.multiplier=1),cV[n.architecture].indexOf(n.multiplier)<0)throw new Error("Invalid multiplier "+n.multiplier+". Should be one of "+cV[n.architecture]+" for architecture "+n.architecture+".");if(n.quantBytes==null&&(n.quantBytes=4),lV.indexOf(n.quantBytes)<0)throw new Error("Invalid quantBytes "+n.quantBytes+". Should be one of "+lV+" for architecture "+n.architecture+".");return n}(t)).architecture==="ResNet50"?[2,hX(t)]:t.architecture==="MobileNetV1"?[2,pX(t)]:[2,null]})})}var dT=["left_face","right_face","left_upper_arm_front","left_upper_arm_back","right_upper_arm_front","right_upper_arm_back","left_lower_arm_front","left_lower_arm_back","right_lower_arm_front","right_lower_arm_back","left_hand","right_hand","torso_front","torso_back","left_upper_leg_front","left_upper_leg_back","right_upper_leg_front","right_upper_leg_back","left_lower_leg_front","left_lower_leg_back","right_lower_leg_front","right_lower_leg_back","left_feet","right_feet"],pV=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,pT(this.mask)]})})},t.prototype.toImageData=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,this.mask]})})},t.prototype.toTensor=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,bV(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"imagedata"},t}();function gX(t){if(Km(t),t!==255)throw new Error("Foreground id must be 255 but got "+t);return"person"}function yX(t){if(Km(t),t>=dT.length)throw new Error("Invalid body part value "+t);return dT[t]}var vX=function(){function t(e){this.bodyPixModel=e}return t.prototype.segmentPeople=function(e,n){return Ke(this,void 0,void 0,function(){var r,o,i,s;return Ze(this,function(a){switch(a.label){case 0:return e instanceof ImageBitmap&&((r=document.createElement("canvas")).getContext("2d").drawImage(e,0,0),e=r),n.segmentBodyParts?n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPersonParts(e,n)]:[3,2]:[3,5];case 1:return i=a.sent(),[3,4];case 2:return[4,this.bodyPixModel.segmentPersonParts(e,n)];case 3:i=[a.sent()],a.label=4;case 4:return o=i.map(function(u){var c=u.data,l=u.width,d=u.height,p=new Uint8ClampedArray(l*d*4).fill(0);return c.forEach(function(m,b){m===-1?(p[4*b]=dT.length,p[4*b+3]=0):(p[4*b]=m,p[4*b+3]=255)}),{maskValueToLabel:yX,mask:new pV(new ImageData(p,l,d))}}),[3,10];case 5:return n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPerson(e,n)]:[3,7];case 6:return s=a.sent(),[3,9];case 7:return[4,this.bodyPixModel.segmentPerson(e,n)];case 8:s=[a.sent()],a.label=9;case 9:o=s.map(function(u){var c=u.data,l=u.width,d=u.height,p=new Uint8ClampedArray(l*d*4).fill(0);return c.forEach(function(m,b){m===0?(p[4*b]=0,p[4*b+3]=0):(p[4*b]=255,p[4*b+3]=255)}),{maskValueToLabel:gX,mask:new pV(new ImageData(p,l,d))}}),a.label=10;case 10:return[2,o]}})})},t.prototype.dispose=function(){this.bodyPixModel.dispose()},t.prototype.reset=function(){},t}();function wX(t){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,mX(t).then(function(n){return new vX(n)})]})})}var hV={runtime:"mediapipe",modelType:"general"},bX=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,this.mask]})})},t.prototype.toImageData=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,wV(this.mask)]})})},t.prototype.toTensor=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,bV(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"canvasimagesource"},t}();function EX(t){return Km(t),"person"}var DX=function(){function t(e){var n,r=this;this.selfieMode=!1;var o;this.selfieSegmentationSolution=new yV.SelfieSegmentation({locateFile:(n=e.locateFile)!==null&&n!==void 0?n:function(i,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+i:s+"/"+i}}),e.modelType==="landscape"?o=1:o=0,this.selfieSegmentationSolution.setOptions({modelSelection:o,selfieMode:this.selfieMode}),this.selfieSegmentationSolution.onResults(function(i){r.segmentation=[{maskValueToLabel:EX,mask:new bX(i.segmentationMask)}]})}return t.prototype.segmentPeople=function(e,n){return Ke(this,void 0,void 0,function(){var r,o;return Ze(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.selfieSegmentationSolution.setOptions({selfieMode:this.selfieMode})),e instanceof _e?(o=ImageData.bind,[4,Do.toPixels(e)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.selfieSegmentationSolution.send({image:e})];case 4:return i.sent(),[2,this.segmentation]}})})},t.prototype.dispose=function(){this.selfieSegmentationSolution.close()},t.prototype.reset=function(){this.selfieSegmentationSolution.reset(),this.segmentation=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.selfieSegmentationSolution.initialize()},t}();function xX(t){return Ke(this,void 0,void 0,function(){var e,n;return Ze(this,function(r){switch(r.label){case 0:return e=function(o){if(o==null)return mn({},hV);var i=mn({},o);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=hV.modelType),i}(t),[4,(n=new DX(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function IX(t,e,n,r){var o=t.width,i=t.height,s=r?-1:1,a=Math.cos(t.rotation),u=Math.sin(t.rotation),c=t.xCenter,l=t.yCenter,d=1/e,p=1/n,m=new Array(16);return m[0]=o*a*s*d,m[1]=-i*u*d,m[2]=0,m[3]=(-.5*o*a*s+.5*i*u+c)*d,m[4]=o*u*s*p,m[5]=i*a*p,m[6]=0,m[7]=(-.5*i*a-.5*o*u*s+l)*p,m[8]=0,m[9]=0,m[10]=o*d,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,function(b){if(b.length!==16)throw new Error("Array length must be 16 but got "+b.length);return[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}(m)}function kV(t){return t instanceof _e?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function lT(t,e){q.assert(t.width!==0,function(){return e+" width cannot be 0."}),q.assert(t.height!==0,function(){return e+" height cannot be 0."})}function SX(t,e){var n=function(r,o,i,s){var a=o-r,u=s-i;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=u/a;return{scale:c,offset:i-r*c}}(0,255,e[0],e[1]);return se(function(){return ne(W(t,n.scale),n.offset)})}function TX(t,e,n){var r=e.outputTensorSize,o=e.keepAspectRatio,i=e.borderMode,s=e.outputTensorFloatRange,a=kV(t),u=function(p,m){return m?{xCenter:m.xCenter*p.width,yCenter:m.yCenter*p.height,width:m.width*p.width,height:m.height*p.height,rotation:m.rotation}:{xCenter:.5*p.width,yCenter:.5*p.height,width:p.width,height:p.height,rotation:0}}(a,n),c=function(p,m,b){if(b===void 0&&(b=!1),!b)return{top:0,left:0,right:0,bottom:0};var S=m.height,T=m.width;lT(m,"targetSize"),lT(p,"roi");var A,$,M=S/T,O=p.height/p.width,U=0,j=0;return M>O?(A=p.width,$=p.width*M,j=(1-O/M)/2):(A=p.height/M,$=p.height,U=(1-M/O)/2),p.width=A,p.height=$,{top:j,left:U,right:U,bottom:j}}(u,r,o),l=IX(u,a.width,a.height,!1),d=se(function(){var p,m=(p=t)instanceof _e?p:Do.fromPixels(p),b=Br(function(A,$,M){return lT(M,"inputResolution"),[1/M.width*A[0][0]*$.width,1/M.height*A[0][1]*$.width,A[0][3]*$.width,1/M.width*A[1][0]*$.height,1/M.height*A[1][1]*$.height,A[1][3]*$.height,0,0]}(l,a,r),[1,8]),S=i==="zero"?"constant":"nearest",T=Li.transform(Vt(me(m,"float32")),b,"bilinear",S,0,[r.height,r.width]);return s!=null?SX(T,s):T});return{imageTensor:d,padding:c,transformationMatrix:l}}function NX(t,e,n){return se(function(){var r=dn(t,[0]),o=r.shape[2];if(o===1){var i=r;switch(e.activation){case"none":break;case"sigmoid":i=Sn(i);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+e.activation+")")}var s=n?Li.resizeBilinear(i,[n.height,n.width]):i;return dn(s,[2])}throw new Error("Unsupported number of tensor channels "+o)})}var mV={runtime:"tfjs",modelType:"general",modelUrl:"https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1"},gV={flipHorizontal:!1},CX={outputTensorSize:{width:256,height:256},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},_X={outputTensorSize:{width:256,height:144},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},AX={activation:"none"},MX=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,pT(this.mask)]})})},t.prototype.toImageData=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,wV(this.mask)]})})},t.prototype.toTensor=function(){return Ke(this,void 0,void 0,function(){return Ze(this,function(e){return[2,this.mask]})})},t.prototype.getUnderlyingType=function(){return"tensor"},t}();function kX(t){return Km(t),"person"}var Yu,OX=function(){function t(e,n){this.modelType=e,this.model=n}return t.prototype.segmentPeople=function(e,n){return Ke(this,void 0,void 0,function(){var r,o=this;return Ze(this,function(i){return n=function(s){if(s==null)return mn({},gV);var a=mn({},s);return a.flipHorizontal==null&&(a.flipHorizontal=gV.flipHorizontal),a}(n),e==null?(this.reset(),[2,[]]):(r=se(function(){var s=TX(e,o.modelType==="general"?CX:_X).imageTensor,a=Te(o.model.predict(s),[0,0,0,1],-1),u=kV(e),c=NX(a,AX,u),l=Vt(c,2),d=Xn(l,[[0,0],[0,0],[0,1]]);return Yl(d,[[0,0],[0,0],[0,2]],"symmetric")}),[2,[{maskValueToLabel:kX,mask:new MX(r)}]])})})},t.prototype.dispose=function(){this.model.dispose()},t.prototype.reset=function(){},t}();function RX(t){return Ke(this,void 0,void 0,function(){var e,n,r;return Ze(this,function(o){switch(o.label){case 0:return e=function(i){if(i==null)return mn({},mV);var s=mn({},i);if(s.runtime="tfjs",s.modelType==null&&(s.modelType=mV.modelType),s.modelType!=="general"&&s.modelType!=="landscape")throw new Error("Model type must be one of general or landscape, but got "+s.modelType);return s.modelUrl==null&&(s.modelType==="general"?s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1":s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/landscape/1"),s}(t),n=typeof e.modelUrl=="string"&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,Ku(e.modelUrl,{fromTFHub:n})];case 1:return r=o.sent(),[2,new OX(e.modelType,r)]}})})}function OV(t,e){return Ke(this,void 0,void 0,function(){var n,r;return Ze(this,function(o){switch(t){case Yu.MediaPipeSelfieSegmentation:if(n=void 0,(r=e)!=null){if(r.runtime==="tfjs")return[2,RX(r)];if(r.runtime==="mediapipe")return[2,xX(r)];n=r.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+n);case Yu.BodyPix:return[2,wX(r=e)];default:throw new Error(t+" is not a supported model name.")}})})}(function(t){t.BodyPix="BodyPix",t.MediaPipeSelfieSegmentation="MediaPipeSelfieSegmentation"})(Yu||(Yu={}));function FX(t,e,n,r,o,i){i===void 0&&(i={r:0,g:255,b:255,a:255});for(var s=-o;s<=o;s++)for(var a=-o;a<=o;a++)if(s!==0&&a!==0){var u=(e+s)*r+(n+a);t[4*u+0]=i.r,t[4*u+1]=i.g,t[4*u+2]=i.b,t[4*u+3]=i.a}}function PX(t,e,n,r,o,i,s){s===void 0&&(s=1);for(var a=0,u=-s;u<=s;u++)for(var c=-s;c<=s;c++)if(u!==0&&c!==0){var l=(e+u)*r+(n+c);(!o[t[4*l]]||t[4*l+3]<i)&&(a+=1)}return a>0}function RV(t,e,n,r,o,i){return e===void 0&&(e={r:0,g:0,b:0,a:0}),n===void 0&&(n={r:0,g:0,b:0,a:255}),r===void 0&&(r=!1),o===void 0&&(o=.5),i===void 0&&(i=Array.from(Array(256).keys())),Ke(this,void 0,void 0,function(){var s,a,u,c,l,d,p,m,b,S,T,A,$,M;return Ze(this,function(O){switch(O.label){case 0:return(s=Array.isArray(t)?t:[t]).length===0?[2,null]:[4,Promise.all(s.map(function(U){return U.mask.toImageData()}))];case 1:for(a=O.sent(),u=a[0],c=u.width,l=u.height,d=new Uint8ClampedArray(c*l*4),p=Math.round(255*o),m=new Array(256).fill(!1),i.forEach(function(U){return m[U]=!0}),b=0;b<l;b++)for(S=0;S<c;S++)for(d[4*(T=b*c+S)+0]=n.r,d[4*T+1]=n.g,d[4*T+2]=n.b,d[4*T+3]=n.a,A=0,$=a;A<$.length;A++)M=$[A],m[M.data[4*T]]&&M.data[4*T+3]>=p&&(d[4*T]=e.r,d[4*T+1]=e.g,d[4*T+2]=e.b,d[4*T+3]=e.a,r&&b-1>=0&&b+1<l&&S-1>=0&&S+1<c&&PX(M.data,b,S,c,m,p)&&FX(d,b,S,c,1));return[2,new ImageData(d,c,l)]}})})}var VV=Hf(PV());var $V=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function VX(t,e){t&1&&(ro(0,"div",5)(1,"h4"),gs(2,"Loading... "),Cr(),Wa(3,"div",6),Cr())}function jX(t,e){if(t&1){let n=w_();xv(0),ro(1,"label"),gs(2,"Opacity"),Cr(),ro(3,"input",7),Tv("ngModelChange",function(o){Ky(n);let i=dp();return E_(i.opacity,o)||(i.opacity=o),Zy(o)}),ms("change",function(o){Ky(n);let i=dp();return Zy(i.handleOpacityChange(o))}),Cr(),Iv()}if(t&2){let n=dp();Dc(3),Sv("ngModel",n.opacity)}}var jV=(()=>{let e=class e{constructor(r){this.computerVisionService=r,this.opacity=255,this.videoDIO={opacity:255},this.isLoading=!0,this.cocoSsdModelLoaded=!1}handleOpacityChange(r){this.videoDIO.opacity=this.opacity}ngAfterContentInit(){return G(this,null,function*(){this.cocoSsdModel=yield VV.load(),this.cocoSsdModelLoaded=!0})}ngAfterViewInit(){return G(this,null,function*(){let{video:i,canvas:s,output:a,offScreenContext:u,outputStreamElement:c}=BX(200,150),l=Yu.MediaPipeSelfieSegmentation,p=yield OV(l,{runtime:"tfjs"});navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?LV(i).then(()=>{b(this.cocoSsdModel,this.videoDIO)}).catch(S=>{console.error("Error accessing media devices.",S),alert(`${S}`)}):(alert("media devices not supported"),console.error("Media devices not supported by this browser."),LV(i).then(()=>{b(this.cocoSsdModel,this.videoDIO)}).catch(S=>{console.error("Error accessing media devices.",S),alert(`${S}`)}));let m;setTimeout(()=>{this.isLoading=!1},2e3);function b(S,T){return G(this,null,function*(){if(!S){requestAnimationFrame(()=>b(S,T));return}let A=u.getImageData(0,0,200,150),$=yield p.segmentPeople(A,{internalResolution:"medium",flipHorizontal:!1,segmentationThreshold:.7}),M=yield RV($),O=yield HX(S,s,u);u.drawImage(i,0,0,200,150);let U=u.getImageData(0,0,200,150);GX(U,M,T),c.putImageData(U,0,0),O&&UX(O,c),requestAnimationFrame(()=>b(S,T))})}})}};e.\u0275fac=function(o){return new(o||e)(vt($V))},e.\u0275cmp=qd({type:e,selectors:[["app-root"]],decls:15,vars:3,consts:[["id","loading-div",4,"ngIf"],["id","video","autoplay","","playsinline","","muted",""],["id","canvas"],["id","output",3,"hidden"],[4,"ngIf"],["id","loading-div"],["role","status",1,"spinner-grow","text-light"],["type","range","id","opacity-slider","min","0","max","255",3,"ngModelChange","change","ngModel"]],template:function(o,i){o&1&&(ro(0,"h1"),gs(1,"Computer Vison Proof of Concept"),Cr(),fp(2,VX,4,0,"div",0),Wa(3,"video",1)(4,"canvas",2)(5,"canvas",3),fp(6,jX,4,1,"ng-container",4),ro(7,"section")(8,"section")(9,"p"),gs(10," This is a app was built with tenserflow's javaScript library, it runs completely in the browser. "),Cr(),ro(11,"p"),gs(12," It was built very quickly in about a day, and is not fine tuned at all. "),Cr(),ro(13,"p"),gs(14,"Thank You, for trying it out"),Cr()()()),o&2&&(Dc(2),Sc("ngIf",i.isLoading),Dc(3),Sc("hidden",i.isLoading),Dc(),Sc("ngIf",!i.isLoading))},dependencies:[G_,Cp,rw,bA,nw],styles:["[_nghost-%COMP%]{overflow:scroll;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100vw;background-color:#000;color:#fff;margin:0}video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{display:none;width:80%;max-width:600px;border:2px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a}#output[_ngcontent-%COMP%]{display:block;width:80%;max-width:600px;border:2px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a;margin-top:20px;transform:scaleX(-1)}h1[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-family:Roboto,sans-serif;font-weight:300}section[_ngcontent-%COMP%]{background-color:#020202;padding:10px;max-width:600px;letter-spacing:1.3px;line-height:1.5}p[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;white-space-trim:pre-wrap;white-space:pre-line}#loading-div[_ngcontent-%COMP%]{width:600px;display:flex;flex-direction:row;justify-content:center;align-items:center}[role=status][_ngcontent-%COMP%]{margin-left:20px}@media (max-height: 600px){h1[_ngcontent-%COMP%]{font-size:20px;padding-top:50px;min-height:70px}}@media (max-width: 600px){h1[_ngcontent-%COMP%]{font-size:20px;padding-top:50px;min-height:70px}}input[_ngcontent-%COMP%]{margin:.4rem}"]});let t=e;return t})();function BX(t,e){let n=document.getElementById("video"),r=document.getElementById("canvas"),o=document.getElementById("output"),i=r.getContext("2d",{willReadFrequently:!0}),s=o.getContext("2d");return n.width=r.width=o.width=t,n.height=r.height=o.height=e,{video:n,canvas:r,output:o,offScreenContext:i,outputStreamElement:s}}function UX(t,e){let[n,r,o,i]=t.bbox,s=.04,a=new Image;a.src="crown.1024.995.svg",a.width*=s,a.height*=s;let u=100,c=100,l=10;u=n+o/2-a.width/2,c=r-a.height+l,e.drawImage(a,u,c,a.width,a.height)}function HX(t,e,n){return G(this,null,function*(){let r=yield t.detect(e).catch(console.error);if(!(!r||r.length===0)){debugger;return r.find(o=>o.class==="person")}})}function LV(t){return G(this,null,function*(){let e={audio:!1,video:{facingMode:"user"}};return new Promise((n,r)=>{navigator.mediaDevices.getUserMedia(e).then(o=>{t.srcObject=o,t.play(),n(t)}).catch(o=>{console.error("Error accessing media devices.",o),r(o)})})})}function GX(t,e,n){let r=t.data,o=e.data;for(let i=0;i<r.length;i+=4)o[i+3]===0||(r[i+3]=255-n.opacity)}var BV=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=kn({type:e,bootstrap:[jV]}),e.\u0275inj=Mn({imports:[tA,pM,xA]});let t=e;return t})();eA().bootstrapModule(BV,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
